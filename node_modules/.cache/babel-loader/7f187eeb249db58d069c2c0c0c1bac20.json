{"ast":null,"code":"import { Vector3, Vector2, Triangle, DoubleSide, BackSide } from 'three'; // Ripped and modified From THREE.js Mesh raycast\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L115\n\nvar vA = new Vector3();\nvar vB = new Vector3();\nvar vC = new Vector3();\nvar uvA = new Vector2();\nvar uvB = new Vector2();\nvar uvC = new Vector2();\nvar intersectionPoint = new Vector3();\nvar intersectionPointWorld = new Vector3();\n\nfunction checkIntersection(object, material, raycaster, ray, pA, pB, pC, point) {\n  var intersect;\n\n  if (material.side === BackSide) {\n    intersect = ray.intersectTriangle(pC, pB, pA, true, point);\n  } else {\n    intersect = ray.intersectTriangle(pA, pB, pC, material.side !== DoubleSide, point);\n  }\n\n  if (intersect === null) return null;\n  intersectionPointWorld.copy(point);\n  intersectionPointWorld.applyMatrix4(object.matrixWorld);\n  var distance = raycaster.ray.origin.distanceTo(intersectionPointWorld);\n  if (distance < raycaster.near || distance > raycaster.far) return null;\n  return {\n    // EDITED\n    // Including the local-space point so it can be used to accelerate raycasting\n    localPoint: point,\n    distance: distance,\n    point: intersectionPointWorld.clone(),\n    object: object\n  };\n}\n\nfunction checkBufferGeometryIntersection(object, raycaster, ray, position, uv, a, b, c) {\n  vA.fromBufferAttribute(position, a);\n  vB.fromBufferAttribute(position, b);\n  vC.fromBufferAttribute(position, c);\n  var intersection = checkIntersection(object, object.material, raycaster, ray, vA, vB, vC, intersectionPoint);\n\n  if (intersection) {\n    if (uv) {\n      uvA.fromBufferAttribute(uv, a);\n      uvB.fromBufferAttribute(uv, b);\n      uvC.fromBufferAttribute(uv, c);\n      intersection.uv = Triangle.getUV(intersectionPoint, vA, vB, vC, uvA, uvB, uvC, new Vector2());\n    }\n\n    var face = {\n      a: a,\n      b: b,\n      c: c,\n      normal: new Vector3(),\n      materialIndex: 0\n    };\n    Triangle.getNormal(vA, vB, vC, face.normal);\n    intersection.face = face;\n    intersection.faceIndex = a;\n  }\n\n  return intersection;\n} // https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L258\n\n\nfunction intersectTri(mesh, geo, raycaster, ray, tri, intersections) {\n  var triOffset = tri * 3;\n  var a = geo.index.getX(triOffset);\n  var b = geo.index.getX(triOffset + 1);\n  var c = geo.index.getX(triOffset + 2);\n  var intersection = checkBufferGeometryIntersection(mesh, raycaster, ray, geo.attributes.position, geo.attributes.uv, a, b, c);\n\n  if (intersection) {\n    intersection.faceIndex = tri;\n    if (intersections) intersections.push(intersection);\n    return intersection;\n  }\n\n  return null;\n}\n\nexport { intersectTri };","map":{"version":3,"names":["Vector3","Vector2","Triangle","DoubleSide","BackSide","vA","vB","vC","uvA","uvB","uvC","intersectionPoint","intersectionPointWorld","checkIntersection","object","material","raycaster","ray","pA","pB","pC","point","intersect","side","intersectTriangle","copy","applyMatrix4","matrixWorld","distance","origin","distanceTo","near","far","localPoint","clone","checkBufferGeometryIntersection","position","uv","a","b","c","fromBufferAttribute","intersection","getUV","face","normal","materialIndex","getNormal","faceIndex","intersectTri","mesh","geo","tri","intersections","triOffset","index","getX","attributes","push"],"sources":["/home/cliffexpc63/my example/portfolio/node_modules/three-mesh-bvh/src/Utils/ThreeIntersectionUtilities.js"],"sourcesContent":["import { Vector3, Vector2, Triangle, DoubleSide, BackSide } from 'three';\r\n\r\n// Ripped and modified From THREE.js Mesh raycast\r\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L115\r\nvar vA = new Vector3();\r\nvar vB = new Vector3();\r\nvar vC = new Vector3();\r\n\r\nvar uvA = new Vector2();\r\nvar uvB = new Vector2();\r\nvar uvC = new Vector2();\r\n\r\nvar intersectionPoint = new Vector3();\r\nvar intersectionPointWorld = new Vector3();\r\n\r\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\r\n\r\n\tvar intersect;\r\n\tif ( material.side === BackSide ) {\r\n\r\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n\t} else {\r\n\r\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\r\n\r\n\t}\r\n\r\n\tif ( intersect === null ) return null;\r\n\r\n\tintersectionPointWorld.copy( point );\r\n\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\r\n\r\n\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\r\n\r\n\treturn {\r\n\r\n\t\t// EDITED\r\n\t\t// Including the local-space point so it can be used to accelerate raycasting\r\n\t\tlocalPoint: point,\r\n\t\tdistance: distance,\r\n\t\tpoint: intersectionPointWorld.clone(),\r\n\t\tobject: object\r\n\t};\r\n\r\n}\r\n\r\nfunction checkBufferGeometryIntersection( object, raycaster, ray, position, uv, a, b, c ) {\r\n\r\n\tvA.fromBufferAttribute( position, a );\r\n\tvB.fromBufferAttribute( position, b );\r\n\tvC.fromBufferAttribute( position, c );\r\n\r\n\tvar intersection = checkIntersection( object, object.material, raycaster, ray, vA, vB, vC, intersectionPoint );\r\n\r\n\tif ( intersection ) {\r\n\r\n\t\tif ( uv ) {\r\n\r\n\t\t\tuvA.fromBufferAttribute( uv, a );\r\n\t\t\tuvB.fromBufferAttribute( uv, b );\r\n\t\t\tuvC.fromBufferAttribute( uv, c );\r\n\r\n\t\t\tintersection.uv = Triangle.getUV( intersectionPoint, vA, vB, vC, uvA, uvB, uvC, new Vector2( ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst face = {\r\n\t\t\ta: a,\r\n\t\t\tb: b,\r\n\t\t\tc: c,\r\n\t\t\tnormal: new Vector3( ),\r\n\t\t\tmaterialIndex: 0\r\n\t\t};\r\n\r\n\t\tTriangle.getNormal( vA, vB, vC, face.normal );\r\n\r\n\t\tintersection.face = face;\r\n\t\tintersection.faceIndex = a;\r\n\r\n\t}\r\n\r\n\treturn intersection;\r\n\r\n}\r\n\r\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L258\r\nfunction intersectTri( mesh, geo, raycaster, ray, tri, intersections ) {\r\n\r\n\tconst triOffset = tri * 3;\r\n\tconst a = geo.index.getX( triOffset );\r\n\tconst b = geo.index.getX( triOffset + 1 );\r\n\tconst c = geo.index.getX( triOffset + 2 );\r\n\r\n\tconst intersection = checkBufferGeometryIntersection( mesh, raycaster, ray, geo.attributes.position, geo.attributes.uv, a, b, c );\r\n\r\n\tif ( intersection ) {\r\n\r\n\t\tintersection.faceIndex = tri;\r\n\t\tif ( intersections ) intersections.push( intersection );\r\n\t\treturn intersection;\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n}\r\n\r\nexport { intersectTri };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}