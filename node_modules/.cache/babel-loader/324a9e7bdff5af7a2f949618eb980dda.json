{"ast":null,"code":"import { Loader, FileLoader } from 'three';\nimport * as Nodes from '../nodes/Nodes.js';\n\nclass NodeMaterialLoader extends Loader {\n  constructor(manager) {\n    let library = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(manager);\n    this.nodes = {};\n    this.materials = {};\n    this.passes = {};\n    this.names = {};\n    this.library = library;\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const scope = this;\n    const loader = new FileLoader(scope.manager);\n    loader.setPath(scope.path);\n    loader.load(url, function (text) {\n      onLoad(scope.parse(JSON.parse(text)));\n    }, onProgress, onError);\n    return this;\n  }\n\n  getObjectByName(uuid) {\n    return this.names[uuid];\n  }\n\n  getObjectById(uuid) {\n    return this.library[uuid] || this.nodes[uuid] || this.materials[uuid] || this.passes[uuid] || this.names[uuid];\n  }\n\n  getNode(uuid) {\n    const object = this.getObjectById(uuid);\n\n    if (!object) {\n      console.warn('Node \"' + uuid + '\" not found.');\n    }\n\n    return object;\n  }\n\n  resolve(json) {\n    switch (typeof json) {\n      case 'boolean':\n      case 'number':\n        return json;\n\n      case 'string':\n        if (/^\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}$/i.test(json) || this.library[json]) {\n          return this.getNode(json);\n        }\n\n        return json;\n\n      default:\n        if (Array.isArray(json)) {\n          for (let i = 0; i < json.length; i++) {\n            json[i] = this.resolve(json[i]);\n          }\n        } else {\n          for (const prop in json) {\n            if (prop === 'uuid') continue;\n            json[prop] = this.resolve(json[prop]);\n          }\n        }\n\n    }\n\n    return json;\n  }\n\n  declare(json) {\n    let uuid, node, object;\n\n    for (uuid in json.nodes) {\n      node = json.nodes[uuid];\n      object = new Nodes[node.nodeType + 'Node']();\n\n      if (node.name) {\n        object.name = node.name;\n        this.names[object.name] = object;\n      }\n\n      this.nodes[uuid] = object;\n    }\n\n    for (uuid in json.materials) {\n      node = json.materials[uuid];\n      object = new Nodes[node.type]();\n\n      if (node.name) {\n        object.name = node.name;\n        this.names[object.name] = object;\n      }\n\n      this.materials[uuid] = object;\n    }\n\n    for (uuid in json.passes) {\n      node = json.passes[uuid];\n      object = new Nodes[node.type]();\n\n      if (node.name) {\n        object.name = node.name;\n        this.names[object.name] = object;\n      }\n\n      this.passes[uuid] = object;\n    }\n\n    if (json.material) this.material = this.materials[json.material];\n    if (json.pass) this.pass = this.passes[json.pass];\n    return json;\n  }\n\n  parse(json) {\n    let uuid;\n    json = this.resolve(this.declare(json));\n\n    for (uuid in json.nodes) {\n      this.nodes[uuid].copy(json.nodes[uuid]);\n    }\n\n    for (uuid in json.materials) {\n      this.materials[uuid].copy(json.materials[uuid]);\n    }\n\n    for (uuid in json.passes) {\n      this.passes[uuid].copy(json.passes[uuid]);\n    }\n\n    return this.material || this.pass || this;\n  }\n\n}\n\nclass NodeMaterialLoaderUtils {\n  static replaceUUIDObject(object, uuid, value, recursive) {\n    recursive = recursive !== undefined ? recursive : true;\n    if (typeof uuid === 'object') uuid = uuid.uuid;\n\n    if (typeof object === 'object') {\n      const keys = Object.keys(object);\n\n      for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n\n        if (recursive) {\n          object[key] = this.replaceUUIDObject(object[key], uuid, value);\n        }\n\n        if (key === uuid) {\n          object[uuid] = object[key];\n          delete object[key];\n        }\n      }\n    }\n\n    return object === uuid ? value : object;\n  }\n\n  static replaceUUID(json, uuid, value) {\n    this.replaceUUIDObject(json, uuid, value, false);\n    this.replaceUUIDObject(json.nodes, uuid, value);\n    this.replaceUUIDObject(json.materials, uuid, value);\n    this.replaceUUIDObject(json.passes, uuid, value);\n    this.replaceUUIDObject(json.library, uuid, value, false);\n    return json;\n  }\n\n}\n\nexport { NodeMaterialLoader, NodeMaterialLoaderUtils };","map":{"version":3,"names":["Loader","FileLoader","Nodes","NodeMaterialLoader","constructor","manager","library","nodes","materials","passes","names","load","url","onLoad","onProgress","onError","scope","loader","setPath","path","text","parse","JSON","getObjectByName","uuid","getObjectById","getNode","object","console","warn","resolve","json","test","Array","isArray","i","length","prop","declare","node","nodeType","name","type","material","pass","copy","NodeMaterialLoaderUtils","replaceUUIDObject","value","recursive","undefined","keys","Object","key","replaceUUID"],"sources":["/home/cliffexpc63/my example/portfolioQ/node_modules/three-stdlib/loaders/NodeMaterialLoader.js"],"sourcesContent":["import { Loader, FileLoader } from 'three';\nimport * as Nodes from '../nodes/Nodes.js';\n\nclass NodeMaterialLoader extends Loader {\n  constructor(manager, library = {}) {\n    super(manager);\n    this.nodes = {};\n    this.materials = {};\n    this.passes = {};\n    this.names = {};\n    this.library = library;\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const scope = this;\n    const loader = new FileLoader(scope.manager);\n    loader.setPath(scope.path);\n    loader.load(url, function (text) {\n      onLoad(scope.parse(JSON.parse(text)));\n    }, onProgress, onError);\n    return this;\n  }\n\n  getObjectByName(uuid) {\n    return this.names[uuid];\n  }\n\n  getObjectById(uuid) {\n    return this.library[uuid] || this.nodes[uuid] || this.materials[uuid] || this.passes[uuid] || this.names[uuid];\n  }\n\n  getNode(uuid) {\n    const object = this.getObjectById(uuid);\n\n    if (!object) {\n      console.warn('Node \"' + uuid + '\" not found.');\n    }\n\n    return object;\n  }\n\n  resolve(json) {\n    switch (typeof json) {\n      case 'boolean':\n      case 'number':\n        return json;\n\n      case 'string':\n        if (/^\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}$/i.test(json) || this.library[json]) {\n          return this.getNode(json);\n        }\n\n        return json;\n\n      default:\n        if (Array.isArray(json)) {\n          for (let i = 0; i < json.length; i++) {\n            json[i] = this.resolve(json[i]);\n          }\n        } else {\n          for (const prop in json) {\n            if (prop === 'uuid') continue;\n            json[prop] = this.resolve(json[prop]);\n          }\n        }\n\n    }\n\n    return json;\n  }\n\n  declare(json) {\n    let uuid, node, object;\n\n    for (uuid in json.nodes) {\n      node = json.nodes[uuid];\n      object = new Nodes[node.nodeType + 'Node']();\n\n      if (node.name) {\n        object.name = node.name;\n        this.names[object.name] = object;\n      }\n\n      this.nodes[uuid] = object;\n    }\n\n    for (uuid in json.materials) {\n      node = json.materials[uuid];\n      object = new Nodes[node.type]();\n\n      if (node.name) {\n        object.name = node.name;\n        this.names[object.name] = object;\n      }\n\n      this.materials[uuid] = object;\n    }\n\n    for (uuid in json.passes) {\n      node = json.passes[uuid];\n      object = new Nodes[node.type]();\n\n      if (node.name) {\n        object.name = node.name;\n        this.names[object.name] = object;\n      }\n\n      this.passes[uuid] = object;\n    }\n\n    if (json.material) this.material = this.materials[json.material];\n    if (json.pass) this.pass = this.passes[json.pass];\n    return json;\n  }\n\n  parse(json) {\n    let uuid;\n    json = this.resolve(this.declare(json));\n\n    for (uuid in json.nodes) {\n      this.nodes[uuid].copy(json.nodes[uuid]);\n    }\n\n    for (uuid in json.materials) {\n      this.materials[uuid].copy(json.materials[uuid]);\n    }\n\n    for (uuid in json.passes) {\n      this.passes[uuid].copy(json.passes[uuid]);\n    }\n\n    return this.material || this.pass || this;\n  }\n\n}\n\nclass NodeMaterialLoaderUtils {\n  static replaceUUIDObject(object, uuid, value, recursive) {\n    recursive = recursive !== undefined ? recursive : true;\n    if (typeof uuid === 'object') uuid = uuid.uuid;\n\n    if (typeof object === 'object') {\n      const keys = Object.keys(object);\n\n      for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n\n        if (recursive) {\n          object[key] = this.replaceUUIDObject(object[key], uuid, value);\n        }\n\n        if (key === uuid) {\n          object[uuid] = object[key];\n          delete object[key];\n        }\n      }\n    }\n\n    return object === uuid ? value : object;\n  }\n\n  static replaceUUID(json, uuid, value) {\n    this.replaceUUIDObject(json, uuid, value, false);\n    this.replaceUUIDObject(json.nodes, uuid, value);\n    this.replaceUUIDObject(json.materials, uuid, value);\n    this.replaceUUIDObject(json.passes, uuid, value);\n    this.replaceUUIDObject(json.library, uuid, value, false);\n    return json;\n  }\n\n}\n\nexport { NodeMaterialLoader, NodeMaterialLoaderUtils };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}