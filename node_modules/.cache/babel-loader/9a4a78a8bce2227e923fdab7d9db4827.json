{"ast":null,"code":"var _jsxFileName = \"/home/cliffexpc63/my example/portfolio/src/Box/Player.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef } from \"react\";\nimport { useSphere } from \"@react-three/cannon\";\nimport { useThree, useFrame } from \"@react-three/fiber\";\nimport { FPVControls } from \"./FPVControls\";\nimport { useKeyboardControls } from \"../hooks/useKeybord\";\nimport { Vector3 } from \"three\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SPEED = 5;\nconst JUMP = 200;\nexport const Player = props => {\n  _s();\n\n  const {\n    camera\n  } = useThree();\n  const {\n    moveForward,\n    moveBackward,\n    moveLeft,\n    moveRight,\n    jump\n  } = useKeyboardControls();\n  const [ref, api] = useSphere(() => ({\n    mass: 1,\n    type: \"Dynamic\",\n    ...props\n  }));\n  const velocity = useRef([0, 0, 0]);\n  useEffect(() => {\n    api.velocity.subscribe(v => velocity.current = v);\n  }, [api.velocity]);\n  const pos = useRef([0, 0, 0]);\n  useEffect(() => api.position.subscribe(v => pos.current = v), [api.position]);\n  useFrame(() => {\n    // api.velocity.set(direction.x, velocity.current[1], direction.z)\n    // ref.current.getWorldPosition(ref.current.position)\n    camera.position.copy(new Vector3(pos.current[0], pos.current[1], pos.current[2]));\n    const direction = new Vector3();\n    const frontVector = new Vector3(0, 0, (moveBackward ? 1 : 0) - (moveForward ? 1 : 0));\n    const sideVector = new Vector3((moveLeft ? 1 : 0) - (moveRight ? 1 : 0), 0, 0);\n    direction.subVectors(frontVector, sideVector).normalize().multiplyScalar(SPEED).applyEuler(camera.rotation);\n    api.velocity.set(direction.x, velocity.current[1], direction.z);\n\n    if (jump && Math.abs(velocity.current[1].toFixed(2)) < 0.05) {\n      api.velocity.set(velocity.current[0], JUMP, velocity.current[2]);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(FPVControls, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Player, \"EU5NxZ0TsTt4wmKf8MlQ7XZRS+8=\", false, function () {\n  return [useThree, useKeyboardControls, useSphere, useFrame];\n});\n\n_c = Player;\n\nvar _c;\n\n$RefreshReg$(_c, \"Player\");","map":{"version":3,"names":["React","useEffect","useRef","useSphere","useThree","useFrame","FPVControls","useKeyboardControls","Vector3","SPEED","JUMP","Player","props","camera","moveForward","moveBackward","moveLeft","moveRight","jump","ref","api","mass","type","velocity","subscribe","v","current","pos","position","copy","direction","frontVector","sideVector","subVectors","normalize","multiplyScalar","applyEuler","rotation","set","x","z","Math","abs","toFixed"],"sources":["/home/cliffexpc63/my example/portfolio/src/Box/Player.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport { useSphere } from \"@react-three/cannon\";\nimport { useThree, useFrame } from \"@react-three/fiber\";\nimport { FPVControls } from \"./FPVControls\";\nimport { useKeyboardControls } from \"../hooks/useKeybord\";\nimport { Vector3 } from \"three\";\n\nconst SPEED = 5;\nconst JUMP = 200;\n\nexport const Player = (props) => {\n  const { camera } = useThree();\n  const { moveForward, moveBackward, moveLeft, moveRight, jump } =\n    useKeyboardControls();\n  const [ref, api] = useSphere(() => ({\n    mass: 1,\n    type: \"Dynamic\",\n    ...props,\n  }));\n\n  const velocity = useRef([0, 0, 0]);\n  useEffect(() => {\n    api.velocity.subscribe((v) => (velocity.current = v));\n  }, [api.velocity]);\n\n  const pos = useRef([0, 0, 0]);\n  useEffect(\n    () => api.position.subscribe((v) => (pos.current = v)),\n    [api.position]\n  );\n\n  useFrame(() => {\n    // api.velocity.set(direction.x, velocity.current[1], direction.z)\n    // ref.current.getWorldPosition(ref.current.position)\n\n    camera.position.copy(\n      new Vector3(pos.current[0], pos.current[1], pos.current[2])\n    );\n    const direction = new Vector3();\n\n    const frontVector = new Vector3(\n      0,\n      0,\n      (moveBackward ? 1 : 0) - (moveForward ? 1 : 0)\n    );\n    const sideVector = new Vector3(\n      (moveLeft ? 1 : 0) - (moveRight ? 1 : 0),\n      0,\n      0\n    );\n\n    direction\n      .subVectors(frontVector, sideVector)\n      .normalize()\n      .multiplyScalar(SPEED)\n      .applyEuler(camera.rotation);\n\n    api.velocity.set(direction.x, velocity.current[1], direction.z);\n\n    if (jump && Math.abs(velocity.current[1].toFixed(2)) < 0.05) {\n      api.velocity.set(velocity.current[0], JUMP, velocity.current[2]);\n    }\n  });\n  return (\n    <>\n      <FPVControls />\n      <mesh ref={ref} />\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}