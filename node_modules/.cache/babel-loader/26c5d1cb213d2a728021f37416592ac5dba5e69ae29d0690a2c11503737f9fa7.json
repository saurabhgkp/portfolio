{"ast":null,"code":"import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { Plane, Vector3, Matrix4, Vector4, PerspectiveCamera, LinearFilter, RGBFormat, WebGLRenderTarget, DepthTexture, DepthFormat, UnsignedShortType, Vector2 } from 'three';\nimport { extend, useThree, useFrame } from '@react-three/fiber';\nimport mergeRefs from 'react-merge-refs';\nimport { MeshReflectorMaterial } from '../materials/MeshReflectorMaterial.js';\nextend({\n  MeshReflectorMaterial\n});\nconst MIPMAP_NUM = 8;\nconst Reflector = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  let {\n    mixBlur = 0.0,\n    mixStrength = 0.5,\n    resolution = 256,\n    args = [1, 1],\n    minDepthThreshold = 0.9,\n    maxDepthThreshold = 1,\n    depthScale = 0,\n    depthToBlurRatioBias = 0.25,\n    mirror,\n    children,\n    debug = 0,\n    distortion = 1,\n    distortionMap,\n    ...props\n  } = _ref;\n  const gl = useThree(_ref2 => {\n    let {\n      gl\n    } = _ref2;\n    return gl;\n  });\n  const camera = useThree(_ref3 => {\n    let {\n      camera\n    } = _ref3;\n    return camera;\n  });\n  const scene = useThree(_ref4 => {\n    let {\n      scene\n    } = _ref4;\n    return scene;\n  });\n  const meshRef = React.useRef(null);\n  const [reflectorPlane] = React.useState(() => new Plane());\n  const [normal] = React.useState(() => new Vector3());\n  const [reflectorWorldPosition] = React.useState(() => new Vector3());\n  const [cameraWorldPosition] = React.useState(() => new Vector3());\n  const [rotationMatrix] = React.useState(() => new Matrix4());\n  const [lookAtPosition] = React.useState(() => new Vector3(0, 0, -1));\n  const [clipPlane] = React.useState(() => new Vector4());\n  const [view] = React.useState(() => new Vector3());\n  const [target] = React.useState(() => new Vector3());\n  const [q] = React.useState(() => new Vector4());\n  const [textureMatrix] = React.useState(() => new Matrix4());\n  const [virtualCamera] = React.useState(() => new PerspectiveCamera());\n  const [renderTargets] = React.useState(() => {\n    const renderTargets = [];\n    const pars = {\n      minFilter: LinearFilter,\n      magFilter: LinearFilter,\n      format: RGBFormat,\n      encoding: gl.outputEncoding\n    };\n\n    for (let i = 0; i < MIPMAP_NUM; i++) {\n      const res = Math.max(8, Math.round(resolution / Math.pow(2, i)));\n      const renderTarget = new WebGLRenderTarget(res, res, pars);\n      renderTarget.texture.generateMipmaps = false;\n      renderTargets.push(renderTarget);\n    }\n\n    return renderTargets;\n  });\n  const beforeRender = React.useCallback(() => {\n    reflectorWorldPosition.setFromMatrixPosition(meshRef.current.matrixWorld);\n    cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\n    rotationMatrix.extractRotation(meshRef.current.matrixWorld);\n    normal.set(0, 0, 1);\n    normal.applyMatrix4(rotationMatrix);\n    view.subVectors(reflectorWorldPosition, cameraWorldPosition); // Avoid rendering when reflector is facing away\n\n    if (view.dot(normal) > 0) return;\n    view.reflect(normal).negate();\n    view.add(reflectorWorldPosition);\n    rotationMatrix.extractRotation(camera.matrixWorld);\n    lookAtPosition.set(0, 0, -1);\n    lookAtPosition.applyMatrix4(rotationMatrix);\n    lookAtPosition.add(cameraWorldPosition);\n    target.subVectors(reflectorWorldPosition, lookAtPosition);\n    target.reflect(normal).negate();\n    target.add(reflectorWorldPosition);\n    virtualCamera.position.copy(view);\n    virtualCamera.up.set(0, 1, 0);\n    virtualCamera.up.applyMatrix4(rotationMatrix);\n    virtualCamera.up.reflect(normal);\n    virtualCamera.lookAt(target);\n    virtualCamera.far = camera.far; // Used in WebGLBackground\n\n    virtualCamera.updateMatrixWorld();\n    virtualCamera.projectionMatrix.copy(camera.projectionMatrix); // Update the texture matrix\n\n    textureMatrix.set(0.5, 0.0, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0);\n    textureMatrix.multiply(virtualCamera.projectionMatrix);\n    textureMatrix.multiply(virtualCamera.matrixWorldInverse);\n    textureMatrix.multiply(meshRef.current.matrixWorld); // Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n    // Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\n    reflectorPlane.setFromNormalAndCoplanarPoint(normal, reflectorWorldPosition);\n    reflectorPlane.applyMatrix4(virtualCamera.matrixWorldInverse);\n    clipPlane.set(reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant);\n    const projectionMatrix = virtualCamera.projectionMatrix;\n    q.x = (Math.sign(clipPlane.x) + projectionMatrix.elements[8]) / projectionMatrix.elements[0];\n    q.y = (Math.sign(clipPlane.y) + projectionMatrix.elements[9]) / projectionMatrix.elements[5];\n    q.z = -1.0;\n    q.w = (1.0 + projectionMatrix.elements[10]) / projectionMatrix.elements[14]; // Calculate the scaled plane vector\n\n    clipPlane.multiplyScalar(2.0 / clipPlane.dot(q)); // Replacing the third row of the projection matrix\n\n    projectionMatrix.elements[2] = clipPlane.x;\n    projectionMatrix.elements[6] = clipPlane.y;\n    projectionMatrix.elements[10] = clipPlane.z + 1.0;\n    projectionMatrix.elements[14] = clipPlane.w;\n  }, [camera.far, camera.matrixWorld, camera.projectionMatrix, cameraWorldPosition, clipPlane, lookAtPosition, normal, q, reflectorPlane, reflectorWorldPosition, rotationMatrix, target, textureMatrix, view, virtualCamera]);\n  const [fbo1, reflectorProps] = React.useMemo(() => {\n    const parameters = {\n      minFilter: LinearFilter,\n      magFilter: LinearFilter,\n      format: RGBFormat,\n      encoding: gl.outputEncoding\n    };\n    const fbo1 = new WebGLRenderTarget(resolution, resolution, parameters);\n\n    if (depthScale > 0) {\n      fbo1.depthBuffer = true;\n      fbo1.depthTexture = new DepthTexture(resolution, resolution);\n      fbo1.depthTexture.format = DepthFormat;\n      fbo1.depthTexture.type = UnsignedShortType;\n    }\n\n    const mipmaps = renderTargets.reduce((acc, fbo, index) => {\n      acc[`u_mipmap_${index}`] = fbo.texture;\n      acc[`u_mipmap_res_${index}`] = new Vector2(fbo.width, fbo.height);\n      return acc;\n    }, {});\n    const reflectorProps = {\n      mirror,\n      textureMatrix,\n      mixBlur,\n      tDiffuse: fbo1.texture,\n      tDepth: fbo1.depthTexture,\n      mixStrength,\n      minDepthThreshold,\n      maxDepthThreshold,\n      depthScale,\n      depthToBlurRatioBias,\n      debug,\n      distortion,\n      distortionMap,\n      'defines-USE_DEPTH': depthScale > 0 ? '' : undefined,\n      'defines-USE_DISTORTION': distortionMap ? '' : undefined,\n      ...mipmaps\n    };\n    return [fbo1, reflectorProps];\n  }, [gl, textureMatrix, resolution, mirror, mixBlur, mixStrength, minDepthThreshold, maxDepthThreshold, depthScale, depthToBlurRatioBias, debug, distortion, distortionMap, renderTargets]);\n  useFrame(() => {\n    if (!(meshRef != null && meshRef.current)) return;\n    meshRef.current.visible = false;\n    const currentXrEnabled = gl.xr.enabled;\n    const currentShadowAutoUpdate = gl.shadowMap.autoUpdate;\n    beforeRender();\n    gl.xr.enabled = false;\n    gl.shadowMap.autoUpdate = false;\n    gl.setRenderTarget(fbo1);\n    gl.state.buffers.depth.setMask(true);\n    if (!gl.autoClear) gl.clear();\n    gl.render(scene, virtualCamera);\n\n    if (mixBlur !== 0) {\n      renderTargets.forEach(fbo => {\n        gl.setRenderTarget(fbo);\n        gl.state.buffers.depth.setMask(true);\n        gl.render(scene, virtualCamera);\n      });\n    }\n\n    gl.xr.enabled = currentXrEnabled;\n    gl.shadowMap.autoUpdate = currentShadowAutoUpdate;\n    meshRef.current.visible = true;\n    gl.setRenderTarget(null);\n  });\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: mergeRefs([meshRef, ref])\n  }, props), /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    args: args\n  }), children ? children('meshReflectorMaterial', reflectorProps) : /*#__PURE__*/React.createElement(\"meshReflectorMaterial\", reflectorProps));\n});\nexport { Reflector };","map":{"version":3,"names":["_extends","React","Plane","Vector3","Matrix4","Vector4","PerspectiveCamera","LinearFilter","RGBFormat","WebGLRenderTarget","DepthTexture","DepthFormat","UnsignedShortType","Vector2","extend","useThree","useFrame","mergeRefs","MeshReflectorMaterial","MIPMAP_NUM","Reflector","forwardRef","ref","mixBlur","mixStrength","resolution","args","minDepthThreshold","maxDepthThreshold","depthScale","depthToBlurRatioBias","mirror","children","debug","distortion","distortionMap","props","gl","camera","scene","meshRef","useRef","reflectorPlane","useState","normal","reflectorWorldPosition","cameraWorldPosition","rotationMatrix","lookAtPosition","clipPlane","view","target","q","textureMatrix","virtualCamera","renderTargets","pars","minFilter","magFilter","format","encoding","outputEncoding","i","res","Math","max","round","pow","renderTarget","texture","generateMipmaps","push","beforeRender","useCallback","setFromMatrixPosition","current","matrixWorld","extractRotation","set","applyMatrix4","subVectors","dot","reflect","negate","add","position","copy","up","lookAt","far","updateMatrixWorld","projectionMatrix","multiply","matrixWorldInverse","setFromNormalAndCoplanarPoint","x","y","z","constant","sign","elements","w","multiplyScalar","fbo1","reflectorProps","useMemo","parameters","depthBuffer","depthTexture","type","mipmaps","reduce","acc","fbo","index","width","height","tDiffuse","tDepth","undefined","visible","currentXrEnabled","xr","enabled","currentShadowAutoUpdate","shadowMap","autoUpdate","setRenderTarget","state","buffers","depth","setMask","autoClear","clear","render","forEach","createElement"],"sources":["/home/cliffexpc63/my example/portfolio/node_modules/@react-three/drei/core/Reflector.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { Plane, Vector3, Matrix4, Vector4, PerspectiveCamera, LinearFilter, RGBFormat, WebGLRenderTarget, DepthTexture, DepthFormat, UnsignedShortType, Vector2 } from 'three';\nimport { extend, useThree, useFrame } from '@react-three/fiber';\nimport mergeRefs from 'react-merge-refs';\nimport { MeshReflectorMaterial } from '../materials/MeshReflectorMaterial.js';\n\nextend({\n  MeshReflectorMaterial\n});\nconst MIPMAP_NUM = 8;\nconst Reflector = /*#__PURE__*/React.forwardRef(({\n  mixBlur = 0.0,\n  mixStrength = 0.5,\n  resolution = 256,\n  args = [1, 1],\n  minDepthThreshold = 0.9,\n  maxDepthThreshold = 1,\n  depthScale = 0,\n  depthToBlurRatioBias = 0.25,\n  mirror,\n  children,\n  debug = 0,\n  distortion = 1,\n  distortionMap,\n  ...props\n}, ref) => {\n  const gl = useThree(({\n    gl\n  }) => gl);\n  const camera = useThree(({\n    camera\n  }) => camera);\n  const scene = useThree(({\n    scene\n  }) => scene);\n  const meshRef = React.useRef(null);\n  const [reflectorPlane] = React.useState(() => new Plane());\n  const [normal] = React.useState(() => new Vector3());\n  const [reflectorWorldPosition] = React.useState(() => new Vector3());\n  const [cameraWorldPosition] = React.useState(() => new Vector3());\n  const [rotationMatrix] = React.useState(() => new Matrix4());\n  const [lookAtPosition] = React.useState(() => new Vector3(0, 0, -1));\n  const [clipPlane] = React.useState(() => new Vector4());\n  const [view] = React.useState(() => new Vector3());\n  const [target] = React.useState(() => new Vector3());\n  const [q] = React.useState(() => new Vector4());\n  const [textureMatrix] = React.useState(() => new Matrix4());\n  const [virtualCamera] = React.useState(() => new PerspectiveCamera());\n  const [renderTargets] = React.useState(() => {\n    const renderTargets = [];\n    const pars = {\n      minFilter: LinearFilter,\n      magFilter: LinearFilter,\n      format: RGBFormat,\n      encoding: gl.outputEncoding\n    };\n\n    for (let i = 0; i < MIPMAP_NUM; i++) {\n      const res = Math.max(8, Math.round(resolution / Math.pow(2, i)));\n      const renderTarget = new WebGLRenderTarget(res, res, pars);\n      renderTarget.texture.generateMipmaps = false;\n      renderTargets.push(renderTarget);\n    }\n\n    return renderTargets;\n  });\n  const beforeRender = React.useCallback(() => {\n    reflectorWorldPosition.setFromMatrixPosition(meshRef.current.matrixWorld);\n    cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\n    rotationMatrix.extractRotation(meshRef.current.matrixWorld);\n    normal.set(0, 0, 1);\n    normal.applyMatrix4(rotationMatrix);\n    view.subVectors(reflectorWorldPosition, cameraWorldPosition); // Avoid rendering when reflector is facing away\n\n    if (view.dot(normal) > 0) return;\n    view.reflect(normal).negate();\n    view.add(reflectorWorldPosition);\n    rotationMatrix.extractRotation(camera.matrixWorld);\n    lookAtPosition.set(0, 0, -1);\n    lookAtPosition.applyMatrix4(rotationMatrix);\n    lookAtPosition.add(cameraWorldPosition);\n    target.subVectors(reflectorWorldPosition, lookAtPosition);\n    target.reflect(normal).negate();\n    target.add(reflectorWorldPosition);\n    virtualCamera.position.copy(view);\n    virtualCamera.up.set(0, 1, 0);\n    virtualCamera.up.applyMatrix4(rotationMatrix);\n    virtualCamera.up.reflect(normal);\n    virtualCamera.lookAt(target);\n    virtualCamera.far = camera.far; // Used in WebGLBackground\n\n    virtualCamera.updateMatrixWorld();\n    virtualCamera.projectionMatrix.copy(camera.projectionMatrix); // Update the texture matrix\n\n    textureMatrix.set(0.5, 0.0, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0);\n    textureMatrix.multiply(virtualCamera.projectionMatrix);\n    textureMatrix.multiply(virtualCamera.matrixWorldInverse);\n    textureMatrix.multiply(meshRef.current.matrixWorld); // Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n    // Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\n    reflectorPlane.setFromNormalAndCoplanarPoint(normal, reflectorWorldPosition);\n    reflectorPlane.applyMatrix4(virtualCamera.matrixWorldInverse);\n    clipPlane.set(reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant);\n    const projectionMatrix = virtualCamera.projectionMatrix;\n    q.x = (Math.sign(clipPlane.x) + projectionMatrix.elements[8]) / projectionMatrix.elements[0];\n    q.y = (Math.sign(clipPlane.y) + projectionMatrix.elements[9]) / projectionMatrix.elements[5];\n    q.z = -1.0;\n    q.w = (1.0 + projectionMatrix.elements[10]) / projectionMatrix.elements[14]; // Calculate the scaled plane vector\n\n    clipPlane.multiplyScalar(2.0 / clipPlane.dot(q)); // Replacing the third row of the projection matrix\n\n    projectionMatrix.elements[2] = clipPlane.x;\n    projectionMatrix.elements[6] = clipPlane.y;\n    projectionMatrix.elements[10] = clipPlane.z + 1.0;\n    projectionMatrix.elements[14] = clipPlane.w;\n  }, [camera.far, camera.matrixWorld, camera.projectionMatrix, cameraWorldPosition, clipPlane, lookAtPosition, normal, q, reflectorPlane, reflectorWorldPosition, rotationMatrix, target, textureMatrix, view, virtualCamera]);\n  const [fbo1, reflectorProps] = React.useMemo(() => {\n    const parameters = {\n      minFilter: LinearFilter,\n      magFilter: LinearFilter,\n      format: RGBFormat,\n      encoding: gl.outputEncoding\n    };\n    const fbo1 = new WebGLRenderTarget(resolution, resolution, parameters);\n\n    if (depthScale > 0) {\n      fbo1.depthBuffer = true;\n      fbo1.depthTexture = new DepthTexture(resolution, resolution);\n      fbo1.depthTexture.format = DepthFormat;\n      fbo1.depthTexture.type = UnsignedShortType;\n    }\n\n    const mipmaps = renderTargets.reduce((acc, fbo, index) => {\n      acc[`u_mipmap_${index}`] = fbo.texture;\n      acc[`u_mipmap_res_${index}`] = new Vector2(fbo.width, fbo.height);\n      return acc;\n    }, {});\n    const reflectorProps = {\n      mirror,\n      textureMatrix,\n      mixBlur,\n      tDiffuse: fbo1.texture,\n      tDepth: fbo1.depthTexture,\n      mixStrength,\n      minDepthThreshold,\n      maxDepthThreshold,\n      depthScale,\n      depthToBlurRatioBias,\n      debug,\n      distortion,\n      distortionMap,\n      'defines-USE_DEPTH': depthScale > 0 ? '' : undefined,\n      'defines-USE_DISTORTION': distortionMap ? '' : undefined,\n      ...mipmaps\n    };\n    return [fbo1, reflectorProps];\n  }, [gl, textureMatrix, resolution, mirror, mixBlur, mixStrength, minDepthThreshold, maxDepthThreshold, depthScale, depthToBlurRatioBias, debug, distortion, distortionMap, renderTargets]);\n  useFrame(() => {\n    if (!(meshRef != null && meshRef.current)) return;\n    meshRef.current.visible = false;\n    const currentXrEnabled = gl.xr.enabled;\n    const currentShadowAutoUpdate = gl.shadowMap.autoUpdate;\n    beforeRender();\n    gl.xr.enabled = false;\n    gl.shadowMap.autoUpdate = false;\n    gl.setRenderTarget(fbo1);\n    gl.state.buffers.depth.setMask(true);\n    if (!gl.autoClear) gl.clear();\n    gl.render(scene, virtualCamera);\n\n    if (mixBlur !== 0) {\n      renderTargets.forEach(fbo => {\n        gl.setRenderTarget(fbo);\n        gl.state.buffers.depth.setMask(true);\n        gl.render(scene, virtualCamera);\n      });\n    }\n\n    gl.xr.enabled = currentXrEnabled;\n    gl.shadowMap.autoUpdate = currentShadowAutoUpdate;\n    meshRef.current.visible = true;\n    gl.setRenderTarget(null);\n  });\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: mergeRefs([meshRef, ref])\n  }, props), /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    args: args\n  }), children ? children('meshReflectorMaterial', reflectorProps) : /*#__PURE__*/React.createElement(\"meshReflectorMaterial\", reflectorProps));\n});\n\nexport { Reflector };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}