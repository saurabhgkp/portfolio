import React, { createContext, useEffect, useState, useRef, useCallback, useLayoutEffect, useMemo, useContext, Suspense } from 'react';
import { useThree, useFrame } from '@react-three/fiber';
import { InstancedMesh, Vector3, Quaternion as Quaternion$1, Matrix4, MeshBasicMaterial, SphereGeometry, BoxGeometry, PlaneGeometry, Mesh, CylinderGeometry, BufferGeometry, Float32BufferAttribute, Scene, Object3D, MathUtils, DynamicDrawUsage } from 'three';

const context = /*#__PURE__*/createContext({});
const debugContext = /*#__PURE__*/createContext(null);

function decodeBase64(base64, enableUnicode) {
    var binaryString = atob(base64);
    if (enableUnicode) {
        var binaryView = new Uint8Array(binaryString.length);
        for (var i = 0, n = binaryString.length; i < n; ++i) {
            binaryView[i] = binaryString.charCodeAt(i);
        }
        return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));
    }
    return binaryString;
}

function createURL(base64, sourcemapArg, enableUnicodeArg) {
    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;
    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;
    var source = decodeBase64(base64, enableUnicode);
    var start = source.indexOf('\n', 10) + 1;
    var body = source.substring(start) + (sourcemap ? '\/\/# sourceMappingURL=' + sourcemap : '');
    var blob = new Blob([body], { type: 'application/javascript' });
    return URL.createObjectURL(blob);
}

function createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {
    var url;
    return function WorkerFactory(options) {
        url = url || createURL(base64, sourcemapArg, enableUnicodeArg);
        return new Worker(url, options);
    };
}

var WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogUmVjb3JkcyB3aGF0IG9iamVjdHMgYXJlIGNvbGxpZGluZyB3aXRoIGVhY2ggb3RoZXIKICAgKi8KICAvKioKICAgKiBBIDN4MyBtYXRyaXguCiAgICogQXV0aG9yZWQgYnkge0BsaW5rIGh0dHA6Ly9naXRodWIuY29tL3NjaHRlcHBlLyBzY2h0ZXBwZX0KICAgKi8KCgogIGNsYXNzIE1hdDMgewogICAgLyoqCiAgICAgKiBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLgogICAgICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gZWxlbWVudHMgQSB2ZWN0b3Igb2YgbGVuZ3RoIDksIGNvbnRhaW5pbmcgYWxsIG1hdHJpeCBlbGVtZW50cy4KICAgICAqLwogICAgY29uc3RydWN0b3IoZWxlbWVudHMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0pIHsKICAgICAgdGhpcy5lbGVtZW50cyA9IHZvaWQgMDsKICAgICAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBtYXRyaXggdG8gaWRlbnRpdHkKICAgICAqIEB0b2RvIFNob3VsZCBwZXJoYXBzIGJlIHJlbmFtZWQgdG8gYHNldElkZW50aXR5KClgIHRvIGJlIG1vcmUgY2xlYXIuCiAgICAgKiBAdG9kbyBDcmVhdGUgYW5vdGhlciBmdW5jdGlvbiB0aGF0IGltbWVkaWF0ZWx5IGNyZWF0ZXMgYW4gaWRlbnRpdHkgbWF0cml4IGVnLiBgZXllKClgCiAgICAgKi8KCgogICAgaWRlbnRpdHkoKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gMTsKICAgICAgZVsxXSA9IDA7CiAgICAgIGVbMl0gPSAwOwogICAgICBlWzNdID0gMDsKICAgICAgZVs0XSA9IDE7CiAgICAgIGVbNV0gPSAwOwogICAgICBlWzZdID0gMDsKICAgICAgZVs3XSA9IDA7CiAgICAgIGVbOF0gPSAxOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYWxsIGVsZW1lbnRzIHRvIHplcm8KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVswXSA9IDA7CiAgICAgIGVbMV0gPSAwOwogICAgICBlWzJdID0gMDsKICAgICAgZVszXSA9IDA7CiAgICAgIGVbNF0gPSAwOwogICAgICBlWzVdID0gMDsKICAgICAgZVs2XSA9IDA7CiAgICAgIGVbN10gPSAwOwogICAgICBlWzhdID0gMDsKICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF0cml4IGRpYWdvbmFsIGVsZW1lbnRzIGZyb20gYSBWZWMzCiAgICAgKi8KCgogICAgc2V0VHJhY2UodmVjdG9yKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gdmVjdG9yLng7CiAgICAgIGVbNF0gPSB2ZWN0b3IueTsKICAgICAgZVs4XSA9IHZlY3Rvci56OwogICAgfQogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBtYXRyaXggZGlhZ29uYWwgZWxlbWVudHMKICAgICAqLwoKCiAgICBnZXRUcmFjZSh0YXJnZXQgPSBuZXcgVmVjMygpKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICB0YXJnZXQueCA9IGVbMF07CiAgICAgIHRhcmdldC55ID0gZVs0XTsKICAgICAgdGFyZ2V0LnogPSBlWzhdOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBNYXRyaXgtVmVjdG9yIG11bHRpcGxpY2F0aW9uCiAgICAgKiBAcGFyYW0gdiBUaGUgdmVjdG9yIHRvIG11bHRpcGx5IHdpdGgKICAgICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwsIHRhcmdldCB0byBzYXZlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgdm11bHQodiwgdGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgeCA9IHYueDsKICAgICAgY29uc3QgeSA9IHYueTsKICAgICAgY29uc3QgeiA9IHYuejsKICAgICAgdGFyZ2V0LnggPSBlWzBdICogeCArIGVbMV0gKiB5ICsgZVsyXSAqIHo7CiAgICAgIHRhcmdldC55ID0gZVszXSAqIHggKyBlWzRdICogeSArIGVbNV0gKiB6OwogICAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LXNjYWxhciBtdWx0aXBsaWNhdGlvbgogICAgICovCgoKICAgIHNtdWx0KHMpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeCBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIG1hdHJpeCBNYXRyaXggdG8gbXVsdGlwbHkgd2l0aCBmcm9tIGxlZnQgc2lkZS4KICAgICAqLwoKCiAgICBtbXVsdChtYXRyaXgsIHRhcmdldCA9IG5ldyBNYXQzKCkpIHsKICAgICAgY29uc3QgQSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IEIgPSBtYXRyaXguZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGNvbnN0IGExMSA9IEFbMF0sCiAgICAgICAgICAgIGExMiA9IEFbMV0sCiAgICAgICAgICAgIGExMyA9IEFbMl0sCiAgICAgICAgICAgIGEyMSA9IEFbM10sCiAgICAgICAgICAgIGEyMiA9IEFbNF0sCiAgICAgICAgICAgIGEyMyA9IEFbNV0sCiAgICAgICAgICAgIGEzMSA9IEFbNl0sCiAgICAgICAgICAgIGEzMiA9IEFbN10sCiAgICAgICAgICAgIGEzMyA9IEFbOF07CiAgICAgIGNvbnN0IGIxMSA9IEJbMF0sCiAgICAgICAgICAgIGIxMiA9IEJbMV0sCiAgICAgICAgICAgIGIxMyA9IEJbMl0sCiAgICAgICAgICAgIGIyMSA9IEJbM10sCiAgICAgICAgICAgIGIyMiA9IEJbNF0sCiAgICAgICAgICAgIGIyMyA9IEJbNV0sCiAgICAgICAgICAgIGIzMSA9IEJbNl0sCiAgICAgICAgICAgIGIzMiA9IEJbN10sCiAgICAgICAgICAgIGIzMyA9IEJbOF07CiAgICAgIFRbMF0gPSBhMTEgKiBiMTEgKyBhMTIgKiBiMjEgKyBhMTMgKiBiMzE7CiAgICAgIFRbMV0gPSBhMTEgKiBiMTIgKyBhMTIgKiBiMjIgKyBhMTMgKiBiMzI7CiAgICAgIFRbMl0gPSBhMTEgKiBiMTMgKyBhMTIgKiBiMjMgKyBhMTMgKiBiMzM7CiAgICAgIFRbM10gPSBhMjEgKiBiMTEgKyBhMjIgKiBiMjEgKyBhMjMgKiBiMzE7CiAgICAgIFRbNF0gPSBhMjEgKiBiMTIgKyBhMjIgKiBiMjIgKyBhMjMgKiBiMzI7CiAgICAgIFRbNV0gPSBhMjEgKiBiMTMgKyBhMjIgKiBiMjMgKyBhMjMgKiBiMzM7CiAgICAgIFRbNl0gPSBhMzEgKiBiMTEgKyBhMzIgKiBiMjEgKyBhMzMgKiBiMzE7CiAgICAgIFRbN10gPSBhMzEgKiBiMTIgKyBhMzIgKiBiMjIgKyBhMzMgKiBiMzI7CiAgICAgIFRbOF0gPSBhMzEgKiBiMTMgKyBhMzIgKiBiMjMgKyBhMzMgKiBiMzM7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFNjYWxlIGVhY2ggY29sdW1uIG9mIHRoZSBtYXRyaXgKICAgICAqLwoKCiAgICBzY2FsZSh2ZWN0b3IsIHRhcmdldCA9IG5ldyBNYXQzKCkpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IHQgPSB0YXJnZXQuZWxlbWVudHM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gMzsgaSsrKSB7CiAgICAgICAgdFszICogaSArIDBdID0gdmVjdG9yLnggKiBlWzMgKiBpICsgMF07CiAgICAgICAgdFszICogaSArIDFdID0gdmVjdG9yLnkgKiBlWzMgKiBpICsgMV07CiAgICAgICAgdFszICogaSArIDJdID0gdmVjdG9yLnogKiBlWzMgKiBpICsgMl07CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlIEF4PWIKICAgICAqIEBwYXJhbSBiIFRoZSByaWdodCBoYW5kIHNpZGUKICAgICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwuIFRhcmdldCB2ZWN0b3IgdG8gc2F2ZSBpbi4KICAgICAqIEByZXR1cm4gVGhlIHNvbHV0aW9uIHgKICAgICAqIEB0b2RvIHNob3VsZCByZXVzZSBhcnJheXMKICAgICAqLwoKCiAgICBzb2x2ZShiLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7CiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IFtdOwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbnIgKiBuYzsgaSsrKSB7CiAgICAgICAgZXFucy5wdXNoKDApOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGVxbnNbMyArIDQgKiAwXSA9IGIueDsKICAgICAgZXFuc1szICsgNCAqIDFdID0gYi55OwogICAgICBlcW5zWzMgKyA0ICogMl0gPSBiLno7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvbgoKICAgICAgbGV0IG4gPSAzOwogICAgICBjb25zdCBrID0gbjsKICAgICAgbGV0IG5wOwogICAgICBjb25zdCBrcCA9IDQ7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaWduZSggaSApID0gbGlnbmUoIGkgKSArIGxpZ25lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaWduZSggayApID0gbGlnbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaWduZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gR2V0IHRoZSBzb2x1dGlvbgoKCiAgICAgIHRhcmdldC56ID0gZXFuc1syICogbmMgKyAzXSAvIGVxbnNbMiAqIG5jICsgMl07CiAgICAgIHRhcmdldC55ID0gKGVxbnNbMSAqIG5jICsgM10gLSBlcW5zWzEgKiBuYyArIDJdICogdGFyZ2V0LnopIC8gZXFuc1sxICogbmMgKyAxXTsKICAgICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdOwoKICAgICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7CiAgICAgICAgdGhyb3cgIkNvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9WyIgKyB0YXJnZXQudG9TdHJpbmcoKSArICJdLCBiPVsiICsgYi50b1N0cmluZygpICsgIl0sIEE9WyIgKyB0aGlzLnRvU3RyaW5nKCkgKyAiXSI7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIQogICAgICogQHBhcmFtIHZhbHVlIElmIHByb3ZpZGVkLCB0aGUgbWF0cml4IGVsZW1lbnQgd2lsbCBiZSBzZXQgdG8gdGhpcyB2YWx1ZS4KICAgICAqLwoKCiAgICBlKHJvdywgY29sdW1uLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFNldCB2YWx1ZQogICAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGFub3RoZXIgbWF0cml4IGludG8gdGhpcyBtYXRyaXggb2JqZWN0LgogICAgICovCgoKICAgIGNvcHkobWF0cml4KSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0cml4LmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeC4KICAgICAqLwoKCiAgICB0b1N0cmluZygpIHsKICAgICAgbGV0IHIgPSAnJzsKICAgICAgY29uc3Qgc2VwID0gJywnOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHsKICAgICAgICByICs9IHRoaXMuZWxlbWVudHNbaV0gKyBzZXA7CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfQogICAgLyoqCiAgICAgKiByZXZlcnNlIHRoZSBtYXRyaXgKICAgICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLgogICAgICogQHJldHVybiBUaGUgc29sdXRpb24geAogICAgICovCgoKICAgIHJldmVyc2UodGFyZ2V0ID0gbmV3IE1hdDMoKSkgewogICAgICAvLyBDb25zdHJ1Y3QgZXF1YXRpb25zCiAgICAgIGNvbnN0IG5yID0gMzsgLy8gbnVtIHJvd3MKCiAgICAgIGNvbnN0IG5jID0gNjsgLy8gbnVtIGNvbHMKCiAgICAgIGNvbnN0IGVxbnMgPSByZXZlcnNlX2VxbnM7CiAgICAgIGxldCBpOwogICAgICBsZXQgajsKCiAgICAgIGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHsKICAgICAgICBmb3IgKGogPSAwOyBqIDwgMzsgaisrKSB7CiAgICAgICAgICBlcW5zW2kgKyBuYyAqIGpdID0gdGhpcy5lbGVtZW50c1tpICsgMyAqIGpdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZXFuc1szICsgNiAqIDBdID0gMTsKICAgICAgZXFuc1szICsgNiAqIDFdID0gMDsKICAgICAgZXFuc1szICsgNiAqIDJdID0gMDsKICAgICAgZXFuc1s0ICsgNiAqIDBdID0gMDsKICAgICAgZXFuc1s0ICsgNiAqIDFdID0gMTsKICAgICAgZXFuc1s0ICsgNiAqIDJdID0gMDsKICAgICAgZXFuc1s1ICsgNiAqIDBdID0gMDsKICAgICAgZXFuc1s1ICsgNiAqIDFdID0gMDsKICAgICAgZXFuc1s1ICsgNiAqIDJdID0gMTsgLy8gQ29tcHV0ZSByaWdodCB1cHBlciB0cmlhbmd1bGFyIHZlcnNpb24gb2YgdGhlIG1hdHJpeCAtIEdhdXNzIGVsaW1pbmF0aW9uCgogICAgICBsZXQgbiA9IDM7CiAgICAgIGNvbnN0IGsgPSBuOwogICAgICBsZXQgbnA7CiAgICAgIGNvbnN0IGtwID0gbmM7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaW5lKCBpICkgPSBsaW5lKCBpICkgKyBsaW5lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaW5lKCBrICkgPSBsaW5lKCBrICkgLSBtdWx0aXBsaWVyICogbGluZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gZWxpbWluYXRlIHRoZSB1cHBlciBsZWZ0IHRyaWFuZ2xlIG9mIHRoZSBtYXRyaXgKCgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBqID0gaSAtIDE7CgogICAgICAgIGRvIHsKICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgIG5wID0gbmM7CgogICAgICAgICAgZG8gewogICAgICAgICAgICBwID0gbmMgLSBucDsKICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjsKICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgIH0gd2hpbGUgKGotLSk7CiAgICAgIH0gd2hpbGUgKC0taSk7IC8vIG9wZXJhdGlvbnMgb24gdGhlIGRpYWdvbmFsCgoKICAgICAgaSA9IDI7CgogICAgICBkbyB7CiAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IDEgLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgIG5wID0gbmM7CgogICAgICAgIGRvIHsKICAgICAgICAgIHAgPSBuYyAtIG5wOwogICAgICAgICAgZXFuc1twICsgbmMgKiBpXSA9IGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgaSA9IDI7CgogICAgICBkbyB7CiAgICAgICAgaiA9IDI7CgogICAgICAgIGRvIHsKICAgICAgICAgIHAgPSBlcW5zW25yICsgaiArIG5jICogaV07CgogICAgICAgICAgaWYgKGlzTmFOKHApIHx8IHAgPT09IEluZmluaXR5KSB7CiAgICAgICAgICAgIHRocm93ICJDb3VsZCBub3QgcmV2ZXJzZSEgQT1bIiArIHRoaXMudG9TdHJpbmcoKSArICJdIjsKICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTsKICAgICAgICB9IHdoaWxlIChqLS0pOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBtYXRyaXggZnJvbSBhIHF1YXRlcmlvbgogICAgICovCgoKICAgIHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSkgewogICAgICBjb25zdCB4ID0gcS54OwogICAgICBjb25zdCB5ID0gcS55OwogICAgICBjb25zdCB6ID0gcS56OwogICAgICBjb25zdCB3ID0gcS53OwogICAgICBjb25zdCB4MiA9IHggKyB4OwogICAgICBjb25zdCB5MiA9IHkgKyB5OwogICAgICBjb25zdCB6MiA9IHogKyB6OwogICAgICBjb25zdCB4eCA9IHggKiB4MjsKICAgICAgY29uc3QgeHkgPSB4ICogeTI7CiAgICAgIGNvbnN0IHh6ID0geCAqIHoyOwogICAgICBjb25zdCB5eSA9IHkgKiB5MjsKICAgICAgY29uc3QgeXogPSB5ICogejI7CiAgICAgIGNvbnN0IHp6ID0geiAqIHoyOwogICAgICBjb25zdCB3eCA9IHcgKiB4MjsKICAgICAgY29uc3Qgd3kgPSB3ICogeTI7CiAgICAgIGNvbnN0IHd6ID0gdyAqIHoyOwogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVszICogMCArIDBdID0gMSAtICh5eSArIHp6KTsKICAgICAgZVszICogMCArIDFdID0geHkgLSB3ejsKICAgICAgZVszICogMCArIDJdID0geHogKyB3eTsKICAgICAgZVszICogMSArIDBdID0geHkgKyB3ejsKICAgICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTsKICAgICAgZVszICogMSArIDJdID0geXogLSB3eDsKICAgICAgZVszICogMiArIDBdID0geHogLSB3eTsKICAgICAgZVszICogMiArIDFdID0geXogKyB3eDsKICAgICAgZVszICogMiArIDJdID0gMSAtICh4eCArIHl5KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zcG9zZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LgogICAgICogQHJldHVybiBUaGUgdGFyZ2V0IE1hdDMsIG9yIGEgbmV3IE1hdDMgaWYgdGFyZ2V0IHdhcyBvbWl0dGVkLgogICAgICovCgoKICAgIHRyYW5zcG9zZSh0YXJnZXQgPSBuZXcgTWF0MygpKSB7CiAgICAgIGNvbnN0IE0gPSB0aGlzLmVsZW1lbnRzOwogICAgICBjb25zdCBUID0gdGFyZ2V0LmVsZW1lbnRzOwogICAgICBsZXQgdG1wOyAvL1NldCBkaWFnb25hbHMKCiAgICAgIFRbMF0gPSBNWzBdOwogICAgICBUWzRdID0gTVs0XTsKICAgICAgVFs4XSA9IE1bOF07CiAgICAgIHRtcCA9IE1bMV07CiAgICAgIFRbMV0gPSBNWzNdOwogICAgICBUWzNdID0gdG1wOwogICAgICB0bXAgPSBNWzJdOwogICAgICBUWzJdID0gTVs2XTsKICAgICAgVFs2XSA9IHRtcDsKICAgICAgdG1wID0gTVs1XTsKICAgICAgVFs1XSA9IE1bN107CiAgICAgIFRbN10gPSB0bXA7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogIH0KCiAgY29uc3QgcmV2ZXJzZV9lcW5zID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdOwogIC8qKgogICAqIDMtZGltZW5zaW9uYWwgdmVjdG9yCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgdiA9IG5ldyBWZWMzKDEsIDIsIDMpCiAgICogICAgIGNvbnNvbGUubG9nKCd4PScgKyB2LngpIC8vIHg9MQogICAqLwoKICBjbGFzcyBWZWMzIHsKICAgIGNvbnN0cnVjdG9yKHggPSAwLjAsIHkgPSAwLjAsIHogPSAwLjApIHsKICAgICAgdGhpcy54ID0gdm9pZCAwOwogICAgICB0aGlzLnkgPSB2b2lkIDA7CiAgICAgIHRoaXMueiA9IHZvaWQgMDsKICAgICAgdGhpcy54ID0geDsKICAgICAgdGhpcy55ID0geTsKICAgICAgdGhpcy56ID0gejsKICAgIH0KICAgIC8qKgogICAgICogVmVjdG9yIGNyb3NzIHByb2R1Y3QKICAgICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW4uCiAgICAgKi8KCgogICAgY3Jvc3ModmVjdG9yLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7CiAgICAgIGNvbnN0IHZ4ID0gdmVjdG9yLng7CiAgICAgIGNvbnN0IHZ5ID0gdmVjdG9yLnk7CiAgICAgIGNvbnN0IHZ6ID0gdmVjdG9yLno7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHRhcmdldC54ID0geSAqIHZ6IC0geiAqIHZ5OwogICAgICB0YXJnZXQueSA9IHogKiB2eCAtIHggKiB2ejsKICAgICAgdGFyZ2V0LnogPSB4ICogdnkgLSB5ICogdng7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgdmVjdG9ycycgMyBlbGVtZW50cwogICAgICovCgoKICAgIHNldCh4LCB5LCB6KSB7CiAgICAgIHRoaXMueCA9IHg7CiAgICAgIHRoaXMueSA9IHk7CiAgICAgIHRoaXMueiA9IHo7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYWxsIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB0byB6ZXJvLgogICAgICovCgoKICAgIHNldFplcm8oKSB7CiAgICAgIHRoaXMueCA9IHRoaXMueSA9IHRoaXMueiA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIFZlY3RvciBhZGRpdGlvbgogICAgICovCgoKICAgIHZhZGQodmVjdG9yLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldC54ID0gdmVjdG9yLnggKyB0aGlzLng7CiAgICAgICAgdGFyZ2V0LnkgPSB2ZWN0b3IueSArIHRoaXMueTsKICAgICAgICB0YXJnZXQueiA9IHZlY3Rvci56ICsgdGhpcy56OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggKyB2ZWN0b3IueCwgdGhpcy55ICsgdmVjdG9yLnksIHRoaXMueiArIHZlY3Rvci56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3Igc3VidHJhY3Rpb24KICAgICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW4uCiAgICAgKi8KCgogICAgdnN1Yih2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0KSB7CiAgICAgICAgdGFyZ2V0LnggPSB0aGlzLnggLSB2ZWN0b3IueDsKICAgICAgICB0YXJnZXQueSA9IHRoaXMueSAtIHZlY3Rvci55OwogICAgICAgIHRhcmdldC56ID0gdGhpcy56IC0gdmVjdG9yLno7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCAtIHZlY3Rvci54LCB0aGlzLnkgLSB2ZWN0b3IueSwgdGhpcy56IC0gdmVjdG9yLnopOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgY3Jvc3MgcHJvZHVjdCBtYXRyaXggYV9jcm9zcyBmcm9tIGEgdmVjdG9yLCBzdWNoIHRoYXQgYSB4IGIgPSBhX2Nyb3NzICogYiA9IGMKICAgICAqCiAgICAgKiBTZWUge0BsaW5rIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyL1REQkQyNC9WVDA2L2xlY3R1cmVzL0xlY3R1cmU2LnBkZiBVbWXDpSBVbml2ZXJzaXR5IExlY3R1cmV9CiAgICAgKi8KCgogICAgY3Jvc3NtYXQoKSB7CiAgICAgIHJldHVybiBuZXcgTWF0MyhbMCwgLXRoaXMueiwgdGhpcy55LCB0aGlzLnosIDAsIC10aGlzLngsIC10aGlzLnksIHRoaXMueCwgMF0pOwogICAgfQogICAgLyoqCiAgICAgKiBOb3JtYWxpemUgdGhlIHZlY3Rvci4gTm90ZSB0aGF0IHRoaXMgY2hhbmdlcyB0aGUgdmFsdWVzIGluIHRoZSB2ZWN0b3IuCiAgICAgICogQHJldHVybiBSZXR1cm5zIHRoZSBub3JtIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBub3JtYWxpemUoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IG4gPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuID4gMC4wKSB7CiAgICAgICAgY29uc3QgaW52TiA9IDEgLyBuOwogICAgICAgIHRoaXMueCAqPSBpbnZOOwogICAgICAgIHRoaXMueSAqPSBpbnZOOwogICAgICAgIHRoaXMueiAqPSBpbnZOOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIE1ha2Ugc29tZXRoaW5nIHVwCiAgICAgICAgdGhpcy54ID0gMDsKICAgICAgICB0aGlzLnkgPSAwOwogICAgICAgIHRoaXMueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiBuOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHZlcnNpb24gb2YgdGhpcyB2ZWN0b3IgdGhhdCBpcyBvZiBsZW5ndGggMS4KICAgICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW4KICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgdW5pdCB2ZWN0b3IKICAgICAqLwoKCiAgICB1bml0KHRhcmdldCA9IG5ldyBWZWMzKCkpIHsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgbGV0IG5pbnYgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuaW52ID4gMC4wKSB7CiAgICAgICAgbmludiA9IDEuMCAvIG5pbnY7CiAgICAgICAgdGFyZ2V0LnggPSB4ICogbmludjsKICAgICAgICB0YXJnZXQueSA9IHkgKiBuaW52OwogICAgICAgIHRhcmdldC56ID0geiAqIG5pbnY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFyZ2V0LnggPSAxOwogICAgICAgIHRhcmdldC55ID0gMDsKICAgICAgICB0YXJnZXQueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBsZW5ndGgoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGUgdmVjdG9yLgogICAgICovCgoKICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50CiAgICAgKi8KCgogICAgZGlzdGFuY2VUbyhwKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHB4ID0gcC54OwogICAgICBjb25zdCBweSA9IHAueTsKICAgICAgY29uc3QgcHogPSBwLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnQKICAgICAqLwoKCiAgICBkaXN0YW5jZVNxdWFyZWQocCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBweCA9IHAueDsKICAgICAgY29uc3QgcHkgPSBwLnk7CiAgICAgIGNvbnN0IHB6ID0gcC56OwogICAgICByZXR1cm4gKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB3aXRoIGEgc2NhbGFyLgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBzY2FsZShzY2FsYXIsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgdGFyZ2V0LnggPSBzY2FsYXIgKiB4OwogICAgICB0YXJnZXQueSA9IHNjYWxhciAqIHk7CiAgICAgIHRhcmdldC56ID0gc2NhbGFyICogejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgdGhlIHZlY3RvciB3aXRoIGFuIG90aGVyIHZlY3RvciwgY29tcG9uZW50LXdpc2UuCiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB2ZWN0b3IgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLgogICAgICovCgoKICAgIHZtdWwodmVjdG9yLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHRhcmdldC54ID0gdmVjdG9yLnggKiB0aGlzLng7CiAgICAgIHRhcmdldC55ID0gdmVjdG9yLnkgKiB0aGlzLnk7CiAgICAgIHRhcmdldC56ID0gdmVjdG9yLnogKiB0aGlzLno7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFNjYWxlIGEgdmVjdG9yIGFuZCBhZGQgaXQgdG8gdGhpcyB2ZWN0b3IuIFNhdmUgdGhlIHJlc3VsdCBpbiAidGFyZ2V0Ii4gKHRhcmdldCA9IHRoaXMgKyB2ZWN0b3IgKiBzY2FsYXIpCiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB2ZWN0b3IgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLgogICAgICovCgoKICAgIGFkZFNjYWxlZFZlY3RvcihzY2FsYXIsIHZlY3RvciwgdGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54OwogICAgICB0YXJnZXQueSA9IHRoaXMueSArIHNjYWxhciAqIHZlY3Rvci55OwogICAgICB0YXJnZXQueiA9IHRoaXMueiArIHNjYWxhciAqIHZlY3Rvci56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3QKICAgICAqIEBwYXJhbSB2ZWN0b3IKICAgICAqLwoKCiAgICBkb3QodmVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLnggKiB2ZWN0b3IueCArIHRoaXMueSAqIHZlY3Rvci55ICsgdGhpcy56ICogdmVjdG9yLno7CiAgICB9CgogICAgaXNaZXJvKCkgewogICAgICByZXR1cm4gdGhpcy54ID09PSAwICYmIHRoaXMueSA9PT0gMCAmJiB0aGlzLnogPT09IDA7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgdGhlIHZlY3RvciBwb2ludCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLgogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbgogICAgICovCgoKICAgIG5lZ2F0ZSh0YXJnZXQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHRhcmdldC54ID0gLXRoaXMueDsKICAgICAgdGFyZ2V0LnkgPSAtdGhpcy55OwogICAgICB0YXJnZXQueiA9IC10aGlzLno7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdHdvIGFydGlmaWNpYWwgdGFuZ2VudHMgdG8gdGhlIHZlY3RvcgogICAgICogQHBhcmFtIHQxIFZlY3RvciBvYmplY3QgdG8gc2F2ZSB0aGUgZmlyc3QgdGFuZ2VudCBpbgogICAgICogQHBhcmFtIHQyIFZlY3RvciBvYmplY3QgdG8gc2F2ZSB0aGUgc2Vjb25kIHRhbmdlbnQgaW4KICAgICAqLwoKCiAgICB0YW5nZW50cyh0MSwgdDIpIHsKICAgICAgY29uc3Qgbm9ybSA9IHRoaXMubGVuZ3RoKCk7CgogICAgICBpZiAobm9ybSA+IDAuMCkgewogICAgICAgIGNvbnN0IG4gPSBWZWMzX3RhbmdlbnRzX247CiAgICAgICAgY29uc3QgaW5vcm0gPSAxIC8gbm9ybTsKICAgICAgICBuLnNldCh0aGlzLnggKiBpbm9ybSwgdGhpcy55ICogaW5vcm0sIHRoaXMueiAqIGlub3JtKTsKICAgICAgICBjb25zdCByYW5kVmVjID0gVmVjM190YW5nZW50c19yYW5kVmVjOwoKICAgICAgICBpZiAoTWF0aC5hYnMobi54KSA8IDAuOSkgewogICAgICAgICAgcmFuZFZlYy5zZXQoMSwgMCwgMCk7CiAgICAgICAgICBuLmNyb3NzKHJhbmRWZWMsIHQxKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmFuZFZlYy5zZXQoMCwgMSwgMCk7CiAgICAgICAgICBuLmNyb3NzKHJhbmRWZWMsIHQxKTsKICAgICAgICB9CgogICAgICAgIG4uY3Jvc3ModDEsIHQyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUaGUgbm9ybWFsIGxlbmd0aCBpcyB6ZXJvLCBtYWtlIHNvbWV0aGluZyB1cAogICAgICAgIHQxLnNldCgxLCAwLCAwKTsKICAgICAgICB0Mi5zZXQoMCwgMSwgMCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29udmVydHMgdG8gYSBtb3JlIHJlYWRhYmxlIGZvcm1hdAogICAgICovCgoKICAgIHRvU3RyaW5nKCkgewogICAgICByZXR1cm4gdGhpcy54ICsgIiwiICsgdGhpcy55ICsgIiwiICsgdGhpcy56OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheQogICAgICovCgoKICAgIHRvQXJyYXkoKSB7CiAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMuel07CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyB2ZWN0b3IuCiAgICAgKi8KCgogICAgY29weSh2ZWN0b3IpIHsKICAgICAgdGhpcy54ID0gdmVjdG9yLng7CiAgICAgIHRoaXMueSA9IHZlY3Rvci55OwogICAgICB0aGlzLnogPSB2ZWN0b3IuejsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIERvIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjdG9ycwogICAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS4KICAgICAqLwoKCiAgICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHRhcmdldC54ID0geCArICh2ZWN0b3IueCAtIHgpICogdDsKICAgICAgdGFyZ2V0LnkgPSB5ICsgKHZlY3Rvci55IC0geSkgKiB0OwogICAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuCiAgICAgKi8KCgogICAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uID0gMWUtNikgewogICAgICBpZiAoTWF0aC5hYnModGhpcy54IC0gdmVjdG9yLngpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueSAtIHZlY3Rvci55KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnogLSB2ZWN0b3IueikgPiBwcmVjaXNpb24pIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiBhIHZlY3RvciBpcyBhbG1vc3QgemVybwogICAgICovCgoKICAgIGFsbW9zdFplcm8ocHJlY2lzaW9uID0gMWUtNikgewogICAgICBpZiAoTWF0aC5hYnModGhpcy54KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueikgPiBwcmVjaXNpb24pIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgdmVjdG9yIGlzIGFudGktcGFyYWxsZWwgdG8gYW5vdGhlciB2ZWN0b3IuCiAgICAgKiBAcGFyYW0gcHJlY2lzaW9uIFNldCB0byB6ZXJvIGZvciBleGFjdCBjb21wYXJpc29ucwogICAgICovCgoKICAgIGlzQW50aXBhcmFsbGVsVG8odmVjdG9yLCBwcmVjaXNpb24pIHsKICAgICAgdGhpcy5uZWdhdGUoYW50aXBfbmVnKTsKICAgICAgcmV0dXJuIGFudGlwX25lZy5hbG1vc3RFcXVhbHModmVjdG9yLCBwcmVjaXNpb24pOwogICAgfQogICAgLyoqCiAgICAgKiBDbG9uZSB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLngsIHRoaXMueSwgdGhpcy56KTsKICAgIH0KCiAgfQoKICBWZWMzLlpFUk8gPSB2b2lkIDA7CiAgVmVjMy5VTklUX1ggPSB2b2lkIDA7CiAgVmVjMy5VTklUX1kgPSB2b2lkIDA7CiAgVmVjMy5VTklUX1ogPSB2b2lkIDA7CiAgVmVjMy5aRVJPID0gbmV3IFZlYzMoMCwgMCwgMCk7CiAgVmVjMy5VTklUX1ggPSBuZXcgVmVjMygxLCAwLCAwKTsKICBWZWMzLlVOSVRfWSA9IG5ldyBWZWMzKDAsIDEsIDApOwogIFZlYzMuVU5JVF9aID0gbmV3IFZlYzMoMCwgMCwgMSk7CiAgY29uc3QgVmVjM190YW5nZW50c19uID0gbmV3IFZlYzMoKTsKICBjb25zdCBWZWMzX3RhbmdlbnRzX3JhbmRWZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFudGlwX25lZyA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveCBjbGFzcy4KICAgKi8KCiAgY2xhc3MgQUFCQiB7CiAgICAvKioKICAgICAqIFRoZSBsb3dlciBib3VuZCBvZiB0aGUgYm91bmRpbmcgYm94CiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB1cHBlciBib3VuZCBvZiB0aGUgYm91bmRpbmcgYm94CiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkgewogICAgICB0aGlzLmxvd2VyQm91bmQgPSB2b2lkIDA7CiAgICAgIHRoaXMudXBwZXJCb3VuZCA9IHZvaWQgMDsKICAgICAgdGhpcy5sb3dlckJvdW5kID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy51cHBlckJvdW5kID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmxvd2VyQm91bmQpIHsKICAgICAgICB0aGlzLmxvd2VyQm91bmQuY29weShvcHRpb25zLmxvd2VyQm91bmQpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy51cHBlckJvdW5kKSB7CiAgICAgICAgdGhpcy51cHBlckJvdW5kLmNvcHkob3B0aW9ucy51cHBlckJvdW5kKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIEFBQkIgYm91bmRzIGZyb20gYSBzZXQgb2YgcG9pbnRzLgogICAgICogQHBhcmFtIHBvaW50cyBBbiBhcnJheSBvZiBWZWMzJ3MuCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdAogICAgICovCgoKICAgIHNldEZyb21Qb2ludHMocG9pbnRzLCBwb3NpdGlvbiwgcXVhdGVybmlvbiwgc2tpblNpemUpIHsKICAgICAgY29uc3QgbCA9IHRoaXMubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IHRoaXMudXBwZXJCb3VuZDsKICAgICAgY29uc3QgcSA9IHF1YXRlcm5pb247IC8vIFNldCB0byB0aGUgZmlyc3QgcG9pbnQKCiAgICAgIGwuY29weShwb2ludHNbMF0pOwoKICAgICAgaWYgKHEpIHsKICAgICAgICBxLnZtdWx0KGwsIGwpOwogICAgICB9CgogICAgICB1LmNvcHkobCk7CgogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIGxldCBwID0gcG9pbnRzW2ldOwoKICAgICAgICBpZiAocSkgewogICAgICAgICAgcS52bXVsdChwLCB0bXAkMSk7CiAgICAgICAgICBwID0gdG1wJDE7CiAgICAgICAgfQoKICAgICAgICBpZiAocC54ID4gdS54KSB7CiAgICAgICAgICB1LnggPSBwLng7CiAgICAgICAgfQoKICAgICAgICBpZiAocC54IDwgbC54KSB7CiAgICAgICAgICBsLnggPSBwLng7CiAgICAgICAgfQoKICAgICAgICBpZiAocC55ID4gdS55KSB7CiAgICAgICAgICB1LnkgPSBwLnk7CiAgICAgICAgfQoKICAgICAgICBpZiAocC55IDwgbC55KSB7CiAgICAgICAgICBsLnkgPSBwLnk7CiAgICAgICAgfQoKICAgICAgICBpZiAocC56ID4gdS56KSB7CiAgICAgICAgICB1LnogPSBwLno7CiAgICAgICAgfQoKICAgICAgICBpZiAocC56IDwgbC56KSB7CiAgICAgICAgICBsLnogPSBwLno7CiAgICAgICAgfQogICAgICB9IC8vIEFkZCBvZmZzZXQKCgogICAgICBpZiAocG9zaXRpb24pIHsKICAgICAgICBwb3NpdGlvbi52YWRkKGwsIGwpOwogICAgICAgIHBvc2l0aW9uLnZhZGQodSwgdSk7CiAgICAgIH0KCiAgICAgIGlmIChza2luU2l6ZSkgewogICAgICAgIGwueCAtPSBza2luU2l6ZTsKICAgICAgICBsLnkgLT0gc2tpblNpemU7CiAgICAgICAgbC56IC09IHNraW5TaXplOwogICAgICAgIHUueCArPSBza2luU2l6ZTsKICAgICAgICB1LnkgKz0gc2tpblNpemU7CiAgICAgICAgdS56ICs9IHNraW5TaXplOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ29weSBib3VuZHMgZnJvbSBhbiBBQUJCIHRvIHRoaXMgQUFCQgogICAgICogQHBhcmFtIGFhYmIgU291cmNlIHRvIGNvcHkgZnJvbQogICAgICogQHJldHVybiBUaGUgdGhpcyBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkKICAgICAqLwoKCiAgICBjb3B5KGFhYmIpIHsKICAgICAgdGhpcy5sb3dlckJvdW5kLmNvcHkoYWFiYi5sb3dlckJvdW5kKTsKICAgICAgdGhpcy51cHBlckJvdW5kLmNvcHkoYWFiYi51cHBlckJvdW5kKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENsb25lIGFuIEFBQkIKICAgICAqLwoKCiAgICBjbG9uZSgpIHsKICAgICAgcmV0dXJuIG5ldyBBQUJCKCkuY29weSh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogRXh0ZW5kIHRoaXMgQUFCQiBzbyB0aGF0IGl0IGNvdmVycyB0aGUgZ2l2ZW4gQUFCQiB0b28uCiAgICAgKi8KCgogICAgZXh0ZW5kKGFhYmIpIHsKICAgICAgdGhpcy5sb3dlckJvdW5kLnggPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueCwgYWFiYi5sb3dlckJvdW5kLngpOwogICAgICB0aGlzLnVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueCk7CiAgICAgIHRoaXMubG93ZXJCb3VuZC55ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLnksIGFhYmIubG93ZXJCb3VuZC55KTsKICAgICAgdGhpcy51cHBlckJvdW5kLnkgPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueSwgYWFiYi51cHBlckJvdW5kLnkpOwogICAgICB0aGlzLmxvd2VyQm91bmQueiA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC56LCBhYWJiLmxvd2VyQm91bmQueik7CiAgICAgIHRoaXMudXBwZXJCb3VuZC56ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLnosIGFhYmIudXBwZXJCb3VuZC56KTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBBQUJCIG92ZXJsYXBzIHRoaXMgQUFCQi4KICAgICAqLwoKCiAgICBvdmVybGFwcyhhYWJiKSB7CiAgICAgIGNvbnN0IGwxID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1MSA9IHRoaXMudXBwZXJCb3VuZDsKICAgICAgY29uc3QgbDIgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUyID0gYWFiYi51cHBlckJvdW5kOyAvLyAgICAgIGwyICAgICAgICB1MgogICAgICAvLyAgICAgIHwtLS0tLS0tLS18CiAgICAgIC8vIHwtLS0tLS0tLXwKICAgICAgLy8gbDEgICAgICAgdTEKCiAgICAgIGNvbnN0IG92ZXJsYXBzWCA9IGwyLnggPD0gdTEueCAmJiB1MS54IDw9IHUyLnggfHwgbDEueCA8PSB1Mi54ICYmIHUyLnggPD0gdTEueDsKICAgICAgY29uc3Qgb3ZlcmxhcHNZID0gbDIueSA8PSB1MS55ICYmIHUxLnkgPD0gdTIueSB8fCBsMS55IDw9IHUyLnkgJiYgdTIueSA8PSB1MS55OwogICAgICBjb25zdCBvdmVybGFwc1ogPSBsMi56IDw9IHUxLnogJiYgdTEueiA8PSB1Mi56IHx8IGwxLnogPD0gdTIueiAmJiB1Mi56IDw9IHUxLno7CiAgICAgIHJldHVybiBvdmVybGFwc1ggJiYgb3ZlcmxhcHNZICYmIG92ZXJsYXBzWjsKICAgIH0gLy8gTW9zdGx5IGZvciBkZWJ1Z2dpbmcKCgogICAgdm9sdW1lKCkgewogICAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kOwogICAgICByZXR1cm4gKHUueCAtIGwueCkgKiAodS55IC0gbC55KSAqICh1LnogLSBsLnopOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgaXMgZnVsbHkgY29udGFpbmVkIGluIHRoaXMgQUFCQi4KICAgICAqLwoKCiAgICBjb250YWlucyhhYWJiKSB7CiAgICAgIGNvbnN0IGwxID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1MSA9IHRoaXMudXBwZXJCb3VuZDsKICAgICAgY29uc3QgbDIgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUyID0gYWFiYi51cHBlckJvdW5kOyAvLyAgICAgIGwyICAgICAgICB1MgogICAgICAvLyAgICAgIHwtLS0tLS0tLS18CiAgICAgIC8vIHwtLS0tLS0tLS0tLS0tLS18CiAgICAgIC8vIGwxICAgICAgICAgICAgICB1MQoKICAgICAgcmV0dXJuIGwxLnggPD0gbDIueCAmJiB1MS54ID49IHUyLnggJiYgbDEueSA8PSBsMi55ICYmIHUxLnkgPj0gdTIueSAmJiBsMS56IDw9IGwyLnogJiYgdTEueiA+PSB1Mi56OwogICAgfQoKICAgIGdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCkgewogICAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kOwogICAgICBhLmNvcHkobCk7CiAgICAgIGIuc2V0KHUueCwgbC55LCBsLnopOwogICAgICBjLnNldCh1LngsIHUueSwgbC56KTsKICAgICAgZC5zZXQobC54LCB1LnksIHUueik7CiAgICAgIGUuc2V0KHUueCwgbC55LCB1LnopOwogICAgICBmLnNldChsLngsIHUueSwgbC56KTsKICAgICAgZy5zZXQobC54LCBsLnksIHUueik7CiAgICAgIGguY29weSh1KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSByZXByZXNlbnRhdGlvbiBvZiBhbiBBQUJCIGluIGFub3RoZXIgZnJhbWUuCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiBBQUJCIG9iamVjdC4KICAgICAqLwoKCiAgICB0b0xvY2FsRnJhbWUoZnJhbWUsIHRhcmdldCkgewogICAgICBjb25zdCBjb3JuZXJzID0gdHJhbnNmb3JtSW50b0ZyYW1lX2Nvcm5lcnM7CiAgICAgIGNvbnN0IGEgPSBjb3JuZXJzWzBdOwogICAgICBjb25zdCBiID0gY29ybmVyc1sxXTsKICAgICAgY29uc3QgYyA9IGNvcm5lcnNbMl07CiAgICAgIGNvbnN0IGQgPSBjb3JuZXJzWzNdOwogICAgICBjb25zdCBlID0gY29ybmVyc1s0XTsKICAgICAgY29uc3QgZiA9IGNvcm5lcnNbNV07CiAgICAgIGNvbnN0IGcgPSBjb3JuZXJzWzZdOwogICAgICBjb25zdCBoID0gY29ybmVyc1s3XTsgLy8gR2V0IGNvcm5lcnMgaW4gY3VycmVudCBmcmFtZQoKICAgICAgdGhpcy5nZXRDb3JuZXJzKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgpOyAvLyBUcmFuc2Zvcm0gdGhlbSB0byBuZXcgbG9jYWwgZnJhbWUKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHsKICAgICAgICBjb25zdCBjb3JuZXIgPSBjb3JuZXJzW2ldOwogICAgICAgIGZyYW1lLnBvaW50VG9Mb2NhbChjb3JuZXIsIGNvcm5lcik7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQuc2V0RnJvbVBvaW50cyhjb3JuZXJzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSByZXByZXNlbnRhdGlvbiBvZiBhbiBBQUJCIGluIHRoZSBnbG9iYWwgZnJhbWUuCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiBBQUJCIG9iamVjdC4KICAgICAqLwoKCiAgICB0b1dvcmxkRnJhbWUoZnJhbWUsIHRhcmdldCkgewogICAgICBjb25zdCBjb3JuZXJzID0gdHJhbnNmb3JtSW50b0ZyYW1lX2Nvcm5lcnM7CiAgICAgIGNvbnN0IGEgPSBjb3JuZXJzWzBdOwogICAgICBjb25zdCBiID0gY29ybmVyc1sxXTsKICAgICAgY29uc3QgYyA9IGNvcm5lcnNbMl07CiAgICAgIGNvbnN0IGQgPSBjb3JuZXJzWzNdOwogICAgICBjb25zdCBlID0gY29ybmVyc1s0XTsKICAgICAgY29uc3QgZiA9IGNvcm5lcnNbNV07CiAgICAgIGNvbnN0IGcgPSBjb3JuZXJzWzZdOwogICAgICBjb25zdCBoID0gY29ybmVyc1s3XTsgLy8gR2V0IGNvcm5lcnMgaW4gY3VycmVudCBmcmFtZQoKICAgICAgdGhpcy5nZXRDb3JuZXJzKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgpOyAvLyBUcmFuc2Zvcm0gdGhlbSB0byBuZXcgbG9jYWwgZnJhbWUKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHsKICAgICAgICBjb25zdCBjb3JuZXIgPSBjb3JuZXJzW2ldOwogICAgICAgIGZyYW1lLnBvaW50VG9Xb3JsZChjb3JuZXIsIGNvcm5lcik7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQuc2V0RnJvbVBvaW50cyhjb3JuZXJzKTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIEFBQkIgaXMgaGl0IGJ5IGEgcmF5LgogICAgICovCgoKICAgIG92ZXJsYXBzUmF5KHJheSkgewogICAgICBjb25zdCB7CiAgICAgICAgZGlyZWN0aW9uLAogICAgICAgIGZyb20KICAgICAgfSA9IHJheTsgLy8gY29uc3QgdCA9IDAKICAgICAgLy8gcmF5LmRpcmVjdGlvbiBpcyB1bml0IGRpcmVjdGlvbiB2ZWN0b3Igb2YgcmF5CgogICAgICBjb25zdCBkaXJGcmFjWCA9IDEgLyBkaXJlY3Rpb24ueDsKICAgICAgY29uc3QgZGlyRnJhY1kgPSAxIC8gZGlyZWN0aW9uLnk7CiAgICAgIGNvbnN0IGRpckZyYWNaID0gMSAvIGRpcmVjdGlvbi56OyAvLyB0aGlzLmxvd2VyQm91bmQgaXMgdGhlIGNvcm5lciBvZiBBQUJCIHdpdGggbWluaW1hbCBjb29yZGluYXRlcyAtIGxlZnQgYm90dG9tLCBydCBpcyBtYXhpbWFsIGNvcm5lcgoKICAgICAgY29uc3QgdDEgPSAodGhpcy5sb3dlckJvdW5kLnggLSBmcm9tLngpICogZGlyRnJhY1g7CiAgICAgIGNvbnN0IHQyID0gKHRoaXMudXBwZXJCb3VuZC54IC0gZnJvbS54KSAqIGRpckZyYWNYOwogICAgICBjb25zdCB0MyA9ICh0aGlzLmxvd2VyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTsKICAgICAgY29uc3QgdDQgPSAodGhpcy51cHBlckJvdW5kLnkgLSBmcm9tLnkpICogZGlyRnJhY1k7CiAgICAgIGNvbnN0IHQ1ID0gKHRoaXMubG93ZXJCb3VuZC56IC0gZnJvbS56KSAqIGRpckZyYWNaOwogICAgICBjb25zdCB0NiA9ICh0aGlzLnVwcGVyQm91bmQueiAtIGZyb20ueikgKiBkaXJGcmFjWjsgLy8gY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpKTsKICAgICAgLy8gY29uc3QgdG1heCA9IE1hdGgubWluKE1hdGgubWluKE1hdGgubWF4KHQxLCB0MiksIE1hdGgubWF4KHQzLCB0NCkpKTsKCiAgICAgIGNvbnN0IHRtaW4gPSBNYXRoLm1heChNYXRoLm1heChNYXRoLm1pbih0MSwgdDIpLCBNYXRoLm1pbih0MywgdDQpKSwgTWF0aC5taW4odDUsIHQ2KSk7CiAgICAgIGNvbnN0IHRtYXggPSBNYXRoLm1pbihNYXRoLm1pbihNYXRoLm1heCh0MSwgdDIpLCBNYXRoLm1heCh0MywgdDQpKSwgTWF0aC5tYXgodDUsIHQ2KSk7IC8vIGlmIHRtYXggPCAwLCByYXkgKGxpbmUpIGlzIGludGVyc2VjdGluZyBBQUJCLCBidXQgd2hvbGUgQUFCQiBpcyBiZWhpbmcgdXMKCiAgICAgIGlmICh0bWF4IDwgMCkgewogICAgICAgIC8vdCA9IHRtYXg7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IC8vIGlmIHRtaW4gPiB0bWF4LCByYXkgZG9lc24ndCBpbnRlcnNlY3QgQUFCQgoKCiAgICAgIGlmICh0bWluID4gdG1heCkgewogICAgICAgIC8vdCA9IHRtYXg7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgfQoKICBjb25zdCB0bXAkMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdHJhbnNmb3JtSW50b0ZyYW1lX2Nvcm5lcnMgPSBbbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKV07CiAgLyoqCiAgICogQ29sbGlzaW9uICJtYXRyaXgiLgogICAqIEl0J3MgYWN0dWFsbHkgYSB0cmlhbmd1bGFyLXNoYXBlZCBhcnJheSBvZiB3aGV0aGVyIHR3byBib2RpZXMgYXJlIHRvdWNoaW5nIHRoaXMgc3RlcCwgZm9yIHJlZmVyZW5jZSBuZXh0IHN0ZXAKICAgKi8KCiAgY2xhc3MgQXJyYXlDb2xsaXNpb25NYXRyaXggewogICAgLyoqCiAgICAgKiBUaGUgbWF0cml4IHN0b3JhZ2UuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLm1hdHJpeCA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXRyaXggPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIGVsZW1lbnQKICAgICAqLwoKCiAgICBnZXQoYmksIGJqKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tYXRyaXhbKGkgKiAoaSArIDEpID4+IDEpICsgaiAtIDFdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYW4gZWxlbWVudAogICAgICovCgoKICAgIHNldChiaSwgYmosIHZhbHVlKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvCiAgICAgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdGhpcy5tYXRyaXgubGVuZ3RoOyBpICE9PSBsOyBpKyspIHsKICAgICAgICB0aGlzLm1hdHJpeFtpXSA9IDA7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzCiAgICAgKi8KCgogICAgc2V0TnVtT2JqZWN0cyhuKSB7CiAgICAgIHRoaXMubWF0cml4Lmxlbmd0aCA9IG4gKiAobiAtIDEpID4+IDE7CiAgICB9CgogIH0KICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBvYmplY3RzIHRoYXQgZGlzcGF0Y2hlcyBldmVudHMuCiAgICovCgoKICBjbGFzcyBFdmVudFRhcmdldCB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5fbGlzdGVuZXJzID0gdm9pZCAwOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXIKICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKCiAgICAgIGlmIChsaXN0ZW5lcnNbdHlwZV0gPT09IHVuZGVmaW5lZCkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXSA9IFtdOwogICAgICB9CgogICAgICBpZiAoIWxpc3RlbmVyc1t0eXBlXS5pbmNsdWRlcyhsaXN0ZW5lcikpIHsKICAgICAgICBsaXN0ZW5lcnNbdHlwZV0ucHVzaChsaXN0ZW5lcik7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiBhbiBldmVudCBsaXN0ZW5lciBpcyBhZGRlZAogICAgICovCgoKICAgIGhhc0V2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7CgogICAgICBpZiAobGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQgJiYgbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGFueSBldmVudCBsaXN0ZW5lciBvZiB0aGUgZ2l2ZW4gdHlwZSBpcyBhZGRlZAogICAgICovCgoKICAgIGhhc0FueUV2ZW50TGlzdGVuZXIodHlwZSkgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKICAgICAgcmV0dXJuIGxpc3RlbmVyc1t0eXBlXSAhPT0gdW5kZWZpbmVkOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYW4gZXZlbnQgbGlzdGVuZXIKICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKCiAgICAgIGlmIChsaXN0ZW5lcnNbdHlwZV0gPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVyc1t0eXBlXS5pbmRleE9mKGxpc3RlbmVyKTsKCiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICBsaXN0ZW5lcnNbdHlwZV0uc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEVtaXQgYW4gZXZlbnQuCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwoKCiAgICBkaXNwYXRjaEV2ZW50KGV2ZW50KSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7CiAgICAgIGNvbnN0IGxpc3RlbmVyQXJyYXkgPSBsaXN0ZW5lcnNbZXZlbnQudHlwZV07CgogICAgICBpZiAobGlzdGVuZXJBcnJheSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgZXZlbnQudGFyZ2V0ID0gdGhpczsKCiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBsaXN0ZW5lckFycmF5Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgbGlzdGVuZXJBcnJheVtpXS5jYWxsKHRoaXMsIGV2ZW50KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICB9CiAgLyoqCiAgICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uCiAgICogQHBhcmFtIHggTXVsdGlwbGllciBvZiB0aGUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvciBpLgogICAqIEBwYXJhbSB5IE11bHRpcGxpZXIgb2YgdGhlIGltYWdpbmFyeSBiYXNpcyB2ZWN0b3Igai4KICAgKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuCiAgICogQHBhcmFtIHcgTXVsdGlwbGllciBvZiB0aGUgcmVhbCBwYXJ0LgogICAqIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWF0ZXJuaW9uCiAgICovCgoKICBjbGFzcyBRdWF0ZXJuaW9uIHsKICAgIGNvbnN0cnVjdG9yKHggPSAwLCB5ID0gMCwgeiA9IDAsIHcgPSAxKSB7CiAgICAgIHRoaXMueCA9IHZvaWQgMDsKICAgICAgdGhpcy55ID0gdm9pZCAwOwogICAgICB0aGlzLnogPSB2b2lkIDA7CiAgICAgIHRoaXMudyA9IHZvaWQgMDsKICAgICAgdGhpcy54ID0geDsKICAgICAgdGhpcy55ID0geTsKICAgICAgdGhpcy56ID0gejsKICAgICAgdGhpcy53ID0gdzsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSB2YWx1ZSBvZiB0aGUgcXVhdGVybmlvbi4KICAgICAqLwoKCiAgICBzZXQoeCwgeSwgeiwgdykgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICB0aGlzLncgPSB3OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0byBhIHJlYWRhYmxlIGZvcm1hdAogICAgICogQHJldHVybiAieCx5LHosdyIKICAgICAqLwoKCiAgICB0b1N0cmluZygpIHsKICAgICAgcmV0dXJuIHRoaXMueCArICIsIiArIHRoaXMueSArICIsIiArIHRoaXMueiArICIsIiArIHRoaXMudzsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0byBhbiBBcnJheQogICAgICogQHJldHVybiBbeCwgeSwgeiwgd10KICAgICAqLwoKCiAgICB0b0FycmF5KCkgewogICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMud107CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIGFuIGF4aXMgYW5kIGFuIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgc2V0RnJvbUF4aXNBbmdsZSh2ZWN0b3IsIGFuZ2xlKSB7CiAgICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7CiAgICAgIHRoaXMueCA9IHZlY3Rvci54ICogczsKICAgICAgdGhpcy55ID0gdmVjdG9yLnkgKiBzOwogICAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7CiAgICAgIHRoaXMudyA9IE1hdGguY29zKGFuZ2xlICogMC41KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnRzIHRoZSBxdWF0ZXJuaW9uIHRvIFsgYXhpcywgYW5nbGUgXSByZXByZXNlbnRhdGlvbi4KICAgICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy4KICAgICAqIEByZXR1cm4gQW4gYXJyYXksIGZpcnN0IGVsZW1lbnQgaXMgdGhlIGF4aXMgYW5kIHRoZSBzZWNvbmQgaXMgdGhlIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgdG9BeGlzQW5nbGUodGFyZ2V0QXhpcyA9IG5ldyBWZWMzKCkpIHsKICAgICAgdGhpcy5ub3JtYWxpemUoKTsgLy8gaWYgdz4xIGFjb3MgYW5kIHNxcnQgd2lsbCBwcm9kdWNlIGVycm9ycywgdGhpcyBjYW50IGhhcHBlbiBpZiBxdWF0ZXJuaW9uIGlzIG5vcm1hbGlzZWQKCiAgICAgIGNvbnN0IGFuZ2xlID0gMiAqIE1hdGguYWNvcyh0aGlzLncpOwogICAgICBjb25zdCBzID0gTWF0aC5zcXJ0KDEgLSB0aGlzLncgKiB0aGlzLncpOyAvLyBhc3N1bWluZyBxdWF0ZXJuaW9uIG5vcm1hbGlzZWQgdGhlbiB3IGlzIGxlc3MgdGhhbiAxLCBzbyB0ZXJtIGFsd2F5cyBwb3NpdGl2ZS4KCiAgICAgIGlmIChzIDwgMC4wMDEpIHsKICAgICAgICAvLyB0ZXN0IHRvIGF2b2lkIGRpdmlkZSBieSB6ZXJvLCBzIGlzIGFsd2F5cyBwb3NpdGl2ZSBkdWUgdG8gc3FydAogICAgICAgIC8vIGlmIHMgY2xvc2UgdG8gemVybyB0aGVuIGRpcmVjdGlvbiBvZiBheGlzIG5vdCBpbXBvcnRhbnQKICAgICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLng7IC8vIGlmIGl0IGlzIGltcG9ydGFudCB0aGF0IGF4aXMgaXMgbm9ybWFsaXNlZCB0aGVuIHJlcGxhY2Ugd2l0aCB4PTE7IHk9ej0wOwoKICAgICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnk7CiAgICAgICAgdGFyZ2V0QXhpcy56ID0gdGhpcy56OwogICAgICB9IGVsc2UgewogICAgICAgIHRhcmdldEF4aXMueCA9IHRoaXMueCAvIHM7IC8vIG5vcm1hbGlzZSBheGlzCgogICAgICAgIHRhcmdldEF4aXMueSA9IHRoaXMueSAvIHM7CiAgICAgICAgdGFyZ2V0QXhpcy56ID0gdGhpcy56IC8gczsKICAgICAgfQoKICAgICAgcmV0dXJuIFt0YXJnZXRBeGlzLCBhbmdsZV07CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiB2YWx1ZSBnaXZlbiB0d28gdmVjdG9ycy4gVGhlIHJlc3VsdGluZyByb3RhdGlvbiB3aWxsIGJlIHRoZSBuZWVkZWQgcm90YXRpb24gdG8gcm90YXRlIHUgdG8gdi4KICAgICAqLwoKCiAgICBzZXRGcm9tVmVjdG9ycyh1LCB2KSB7CiAgICAgIGlmICh1LmlzQW50aXBhcmFsbGVsVG8odikpIHsKICAgICAgICBjb25zdCB0MSA9IHNmdl90MTsKICAgICAgICBjb25zdCB0MiA9IHNmdl90MjsKICAgICAgICB1LnRhbmdlbnRzKHQxLCB0Mik7CiAgICAgICAgdGhpcy5zZXRGcm9tQXhpc0FuZ2xlKHQxLCBNYXRoLlBJKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBhID0gdS5jcm9zcyh2KTsKICAgICAgICB0aGlzLnggPSBhLng7CiAgICAgICAgdGhpcy55ID0gYS55OwogICAgICAgIHRoaXMueiA9IGEuejsKICAgICAgICB0aGlzLncgPSBNYXRoLnNxcnQodS5sZW5ndGgoKSAqKiAyICogdi5sZW5ndGgoKSAqKiAyKSArIHUuZG90KHYpOwogICAgICAgIHRoaXMubm9ybWFsaXplKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiB3aXRoIGFuIG90aGVyIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgbXVsdChxdWF0LCB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpKSB7CiAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgIGNvbnN0IGF3ID0gdGhpcy53OwogICAgICBjb25zdCBieCA9IHF1YXQueDsKICAgICAgY29uc3QgYnkgPSBxdWF0Lnk7CiAgICAgIGNvbnN0IGJ6ID0gcXVhdC56OwogICAgICBjb25zdCBidyA9IHF1YXQudzsKICAgICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5OwogICAgICB0YXJnZXQueSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7CiAgICAgIHRhcmdldC56ID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDsKICAgICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGludmVyc2UgcXVhdGVybmlvbiByb3RhdGlvbi4KICAgICAqLwoKCiAgICBpbnZlcnNlKHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCkpIHsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgY29uc3QgdyA9IHRoaXMudzsKICAgICAgdGhpcy5jb25qdWdhdGUodGFyZ2V0KTsKICAgICAgY29uc3QgaW5vcm0yID0gMSAvICh4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdyk7CiAgICAgIHRhcmdldC54ICo9IGlub3JtMjsKICAgICAgdGFyZ2V0LnkgKj0gaW5vcm0yOwogICAgICB0YXJnZXQueiAqPSBpbm9ybTI7CiAgICAgIHRhcmdldC53ICo9IGlub3JtMjsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBxdWF0ZXJuaW9uIGNvbmp1Z2F0ZQogICAgICovCgoKICAgIGNvbmp1Z2F0ZSh0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpKSB7CiAgICAgIHRhcmdldC54ID0gLXRoaXMueDsKICAgICAgdGFyZ2V0LnkgPSAtdGhpcy55OwogICAgICB0YXJnZXQueiA9IC10aGlzLno7CiAgICAgIHRhcmdldC53ID0gdGhpcy53OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBOb3JtYWxpemUgdGhlIHF1YXRlcm5pb24uIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBvZiB0aGUgcXVhdGVybmlvbi4KICAgICAqLwoKCiAgICBub3JtYWxpemUoKSB7CiAgICAgIGxldCBsID0gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiArIHRoaXMudyAqIHRoaXMudyk7CgogICAgICBpZiAobCA9PT0gMCkgewogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICAgIHRoaXMudyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbCA9IDEgLyBsOwogICAgICAgIHRoaXMueCAqPSBsOwogICAgICAgIHRoaXMueSAqPSBsOwogICAgICAgIHRoaXMueiAqPSBsOwogICAgICAgIHRoaXMudyAqPSBsOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQXBwcm94aW1hdGlvbiBvZiBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24uIFdvcmtzIGJlc3Qgd2hlbiBxdWF0IGlzIGFscmVhZHkgYWxtb3N0LW5vcm1hbGl6ZWQuCiAgICAgKiBAYXV0aG9yIHVucGhhc2VkLCBodHRwczovL2dpdGh1Yi5jb20vdW5waGFzZWQKICAgICAqLwoKCiAgICBub3JtYWxpemVGYXN0KCkgewogICAgICBjb25zdCBmID0gKDMuMCAtICh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnogKyB0aGlzLncgKiB0aGlzLncpKSAvIDIuMDsKCiAgICAgIGlmIChmID09PSAwKSB7CiAgICAgICAgdGhpcy54ID0gMDsKICAgICAgICB0aGlzLnkgPSAwOwogICAgICAgIHRoaXMueiA9IDA7CiAgICAgICAgdGhpcy53ID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnggKj0gZjsKICAgICAgICB0aGlzLnkgKj0gZjsKICAgICAgICB0aGlzLnogKj0gZjsKICAgICAgICB0aGlzLncgKj0gZjsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIE11bHRpcGx5IHRoZSBxdWF0ZXJuaW9uIGJ5IGEgdmVjdG9yCiAgICAgKi8KCgogICAgdm11bHQodiwgdGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICBjb25zdCB4ID0gdi54OwogICAgICBjb25zdCB5ID0gdi55OwogICAgICBjb25zdCB6ID0gdi56OwogICAgICBjb25zdCBxeCA9IHRoaXMueDsKICAgICAgY29uc3QgcXkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHF6ID0gdGhpcy56OwogICAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2CgogICAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTsKICAgICAgY29uc3QgaXkgPSBxdyAqIHkgKyBxeiAqIHggLSBxeCAqIHo7CiAgICAgIGNvbnN0IGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4OwogICAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7CiAgICAgIHRhcmdldC54ID0gaXggKiBxdyArIGl3ICogLXF4ICsgaXkgKiAtcXogLSBpeiAqIC1xeTsKICAgICAgdGFyZ2V0LnkgPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6OwogICAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyBxdWF0ZXJuaW9uLgogICAgICogQHJldHVybiB0aGlzCiAgICAgKi8KCgogICAgY29weShxdWF0KSB7CiAgICAgIHRoaXMueCA9IHF1YXQueDsKICAgICAgdGhpcy55ID0gcXVhdC55OwogICAgICB0aGlzLnogPSBxdWF0Lno7CiAgICAgIHRoaXMudyA9IHF1YXQudzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIHF1YXRlcm5pb24gdG8gZXVsZXIgYW5nbGUgcmVwcmVzZW50YXRpb24uIE9yZGVyOiBZWlgsIGFzIHRoaXMgcGFnZSBkZXNjcmliZXM6IGh0dHBzOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9zdGFuZGFyZHMvaW5kZXguaHRtCiAgICAgKiBAcGFyYW0gb3JkZXIgVGhyZWUtY2hhcmFjdGVyIHN0cmluZywgZGVmYXVsdHMgdG8gIllaWCIKICAgICAqLwoKCiAgICB0b0V1bGVyKHRhcmdldCwgb3JkZXIgPSAnWVpYJykgewogICAgICBsZXQgaGVhZGluZzsKICAgICAgbGV0IGF0dGl0dWRlOwogICAgICBsZXQgYmFuazsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgY29uc3QgdyA9IHRoaXMudzsKCiAgICAgIHN3aXRjaCAob3JkZXIpIHsKICAgICAgICBjYXNlICdZWlgnOgogICAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7CgogICAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkgewogICAgICAgICAgICAvLyBzaW5ndWxhcml0eSBhdCBub3J0aCBwb2xlCiAgICAgICAgICAgIGhlYWRpbmcgPSAyICogTWF0aC5hdGFuMih4LCB3KTsKICAgICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRlc3QgPCAtMC40OTkpIHsKICAgICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZQogICAgICAgICAgICBoZWFkaW5nID0gLTIgKiBNYXRoLmF0YW4yKHgsIHcpOwogICAgICAgICAgICBhdHRpdHVkZSA9IC1NYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGhlYWRpbmcgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zdCBzcXggPSB4ICogeDsKICAgICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7CiAgICAgICAgICAgIGNvbnN0IHNxeiA9IHogKiB6OwogICAgICAgICAgICBoZWFkaW5nID0gTWF0aC5hdGFuMigyICogeSAqIHcgLSAyICogeCAqIHosIDEgLSAyICogc3F5IC0gMiAqIHNxeik7IC8vIEhlYWRpbmcKCiAgICAgICAgICAgIGF0dGl0dWRlID0gTWF0aC5hc2luKDIgKiB0ZXN0KTsgLy8gYXR0aXR1ZGUKCiAgICAgICAgICAgIGJhbmsgPSBNYXRoLmF0YW4yKDIgKiB4ICogdyAtIDIgKiB5ICogeiwgMSAtIDIgKiBzcXggLSAyICogc3F6KTsgLy8gYmFuawogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJFdWxlciBvcmRlciAiICsgb3JkZXIgKyAiIG5vdCBzdXBwb3J0ZWQgeWV0LiIpOwogICAgICB9CgogICAgICB0YXJnZXQueSA9IGhlYWRpbmc7CiAgICAgIHRhcmdldC56ID0gYXR0aXR1ZGU7CiAgICAgIHRhcmdldC54ID0gYmFuazsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIG9yZGVyIFRoZSBvcmRlciB0byBhcHBseSBhbmdsZXM6ICdYWVonIG9yICdZWFonIG9yIGFueSBvdGhlciBjb21iaW5hdGlvbi4KICAgICAqCiAgICAgKiBTZWUge0BsaW5rIGh0dHBzOi8vd3d3Lm1hdGh3b3Jrcy5jb20vbWF0bGFiY2VudHJhbC9maWxlZXhjaGFuZ2UvMjA2OTYtZnVuY3Rpb24tdG8tY29udmVydC1iZXR3ZWVuLWRjbS1ldWxlci1hbmdsZXMtcXVhdGVybmlvbnMtYW5kLWV1bGVyLXZlY3RvcnMgTWF0aFdvcmtzfSByZWZlcmVuY2UKICAgICAqLwoKCiAgICBzZXRGcm9tRXVsZXIoeCwgeSwgeiwgb3JkZXIgPSAnWFlaJykgewogICAgICBjb25zdCBjMSA9IE1hdGguY29zKHggLyAyKTsKICAgICAgY29uc3QgYzIgPSBNYXRoLmNvcyh5IC8gMik7CiAgICAgIGNvbnN0IGMzID0gTWF0aC5jb3MoeiAvIDIpOwogICAgICBjb25zdCBzMSA9IE1hdGguc2luKHggLyAyKTsKICAgICAgY29uc3QgczIgPSBNYXRoLnNpbih5IC8gMik7CiAgICAgIGNvbnN0IHMzID0gTWF0aC5zaW4oeiAvIDIpOwoKICAgICAgaWYgKG9yZGVyID09PSAnWFlaJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1lYWicpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdaWFknKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzIC0gYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWllYJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1laWCcpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdYWlknKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzIC0gYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBjbG9uZSgpIHsKICAgICAgcmV0dXJuIG5ldyBRdWF0ZXJuaW9uKHRoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMudyk7CiAgICB9CiAgICAvKioKICAgICAqIFBlcmZvcm1zIGEgc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXQKICAgICAqCiAgICAgKiBAcGFyYW0gdG9RdWF0IHNlY29uZCBvcGVyYW5kCiAgICAgKiBAcGFyYW0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCBiZXR3ZWVuIHRoZSBzZWxmIHF1YXRlcm5pb24gYW5kIHRvUXVhdAogICAgICogQHBhcmFtIHRhcmdldCBBIHF1YXRlcm5pb24gdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi4gSWYgbm90IHByb3ZpZGVkLCBhIG5ldyBvbmUgd2lsbCBiZSBjcmVhdGVkLgogICAgICogQHJldHVybnMge1F1YXRlcm5pb259IFRoZSAidGFyZ2V0IiBvYmplY3QKICAgICAqLwoKCiAgICBzbGVycCh0b1F1YXQsIHQsIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCkpIHsKICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgY29uc3QgYXcgPSB0aGlzLnc7CiAgICAgIGxldCBieCA9IHRvUXVhdC54OwogICAgICBsZXQgYnkgPSB0b1F1YXQueTsKICAgICAgbGV0IGJ6ID0gdG9RdWF0Lno7CiAgICAgIGxldCBidyA9IHRvUXVhdC53OwogICAgICBsZXQgb21lZ2E7CiAgICAgIGxldCBjb3NvbTsKICAgICAgbGV0IHNpbm9tOwogICAgICBsZXQgc2NhbGUwOwogICAgICBsZXQgc2NhbGUxOyAvLyBjYWxjIGNvc2luZQoKICAgICAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3OyAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSkKCiAgICAgIGlmIChjb3NvbSA8IDAuMCkgewogICAgICAgIGNvc29tID0gLWNvc29tOwogICAgICAgIGJ4ID0gLWJ4OwogICAgICAgIGJ5ID0gLWJ5OwogICAgICAgIGJ6ID0gLWJ6OwogICAgICAgIGJ3ID0gLWJ3OwogICAgICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHMKCgogICAgICBpZiAoMS4wIC0gY29zb20gPiAwLjAwMDAwMSkgewogICAgICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKQogICAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTsKICAgICAgICBzaW5vbSA9IE1hdGguc2luKG9tZWdhKTsKICAgICAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTsKICAgICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlCiAgICAgICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvbgogICAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7CiAgICAgICAgc2NhbGUxID0gdDsKICAgICAgfSAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzCgoKICAgICAgdGFyZ2V0LnggPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4OwogICAgICB0YXJnZXQueSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7CiAgICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejsKICAgICAgdGFyZ2V0LncgPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBSb3RhdGUgYW4gYWJzb2x1dGUgb3JpZW50YXRpb24gcXVhdGVybmlvbiBnaXZlbiBhbiBhbmd1bGFyIHZlbG9jaXR5IGFuZCBhIHRpbWUgc3RlcC4KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoYW5ndWxhclZlbG9jaXR5LCBkdCwgYW5ndWxhckZhY3RvciwgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKSkgewogICAgICBjb25zdCBheCA9IGFuZ3VsYXJWZWxvY2l0eS54ICogYW5ndWxhckZhY3Rvci54LAogICAgICAgICAgICBheSA9IGFuZ3VsYXJWZWxvY2l0eS55ICogYW5ndWxhckZhY3Rvci55LAogICAgICAgICAgICBheiA9IGFuZ3VsYXJWZWxvY2l0eS56ICogYW5ndWxhckZhY3Rvci56LAogICAgICAgICAgICBieCA9IHRoaXMueCwKICAgICAgICAgICAgYnkgPSB0aGlzLnksCiAgICAgICAgICAgIGJ6ID0gdGhpcy56LAogICAgICAgICAgICBidyA9IHRoaXMudzsKICAgICAgY29uc3QgaGFsZl9kdCA9IGR0ICogMC41OwogICAgICB0YXJnZXQueCArPSBoYWxmX2R0ICogKGF4ICogYncgKyBheSAqIGJ6IC0gYXogKiBieSk7CiAgICAgIHRhcmdldC55ICs9IGhhbGZfZHQgKiAoYXkgKiBidyArIGF6ICogYnggLSBheCAqIGJ6KTsKICAgICAgdGFyZ2V0LnogKz0gaGFsZl9kdCAqIChheiAqIGJ3ICsgYXggKiBieSAtIGF5ICogYngpOwogICAgICB0YXJnZXQudyArPSBoYWxmX2R0ICogKC1heCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYnopOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICB9CgogIGNvbnN0IHNmdl90MSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc2Z2X3QyID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBUaGUgYXZhaWxhYmxlIHNoYXBlIHR5cGVzLgogICAqLwoKICBjb25zdCBTSEFQRV9UWVBFUyA9IHsKICAgIC8qKiBTUEhFUkUgKi8KICAgIFNQSEVSRTogMSwKCiAgICAvKiogUExBTkUgKi8KICAgIFBMQU5FOiAyLAoKICAgIC8qKiBCT1ggKi8KICAgIEJPWDogNCwKCiAgICAvKiogQ09NUE9VTkQgKi8KICAgIENPTVBPVU5EOiA4LAoKICAgIC8qKiBDT05WRVhQT0xZSEVEUk9OICovCiAgICBDT05WRVhQT0xZSEVEUk9OOiAxNiwKCiAgICAvKiogSEVJR0hURklFTEQgKi8KICAgIEhFSUdIVEZJRUxEOiAzMiwKCiAgICAvKiogUEFSVElDTEUgKi8KICAgIFBBUlRJQ0xFOiA2NCwKCiAgICAvKiogQ1lMSU5ERVIgKi8KICAgIENZTElOREVSOiAxMjgsCgogICAgLyoqIFRSSU1FU0ggKi8KICAgIFRSSU1FU0g6IDI1NgogIH07CiAgLyoqCiAgICogU2hhcGVUeXBlCiAgICovCgogIC8qKgogICAqIEJhc2UgY2xhc3MgZm9yIHNoYXBlcwogICAqLwoKICBjbGFzcyBTaGFwZSB7CiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHlwZSBvZiB0aGlzIHNoYXBlLiBNdXN0IGJlIHNldCB0byBhbiBpbnQgPiAwIGJ5IHN1YmNsYXNzZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBib3VuZGluZyBzcGhlcmUgcmFkaXVzIG9mIHRoaXMgc2hhcGUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBPcHRpb25hbCBtYXRlcmlhbCBvZiB0aGUgc2hhcGUgdGhhdCByZWd1bGF0ZXMgY29udGFjdCBwcm9wZXJ0aWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCB0aGUgU2hhcGUgdHlwZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkgewogICAgICB0aGlzLmlkID0gdm9pZCAwOwogICAgICB0aGlzLnR5cGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXRlcmlhbCA9IHZvaWQgMDsKICAgICAgdGhpcy5ib2R5ID0gdm9pZCAwOwogICAgICB0aGlzLmlkID0gU2hhcGUuaWRDb3VudGVyKys7CiAgICAgIHRoaXMudHlwZSA9IG9wdGlvbnMudHlwZSB8fCAwOwogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDsKICAgICAgdGhpcy5jb2xsaXNpb25SZXNwb25zZSA9IG9wdGlvbnMuY29sbGlzaW9uUmVzcG9uc2UgPyBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlIDogdHJ1ZTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgOiAxOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xOwogICAgICB0aGlzLm1hdGVyaWFsID0gb3B0aW9ucy5tYXRlcmlhbCA/IG9wdGlvbnMubWF0ZXJpYWwgOiBudWxsOwogICAgICB0aGlzLmJvZHkgPSBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgYm91bmRpbmcgc3BoZXJlIHJhZGl1cy4KICAgICAqIFRoZSByZXN1bHQgaXMgc3RvcmVkIGluIHRoZSBwcm9wZXJ0eSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYAogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aHJvdyAiY29tcHV0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICIgKyB0aGlzLnR5cGU7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgdm9sdW1lIG9mIHRoaXMgc2hhcGUKICAgICAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHRocm93ICJ2b2x1bWUoKSBub3QgaW1wbGVtZW50ZWQgZm9yIHNoYXBlIHR5cGUgIiArIHRoaXMudHlwZTsKICAgIH0KICAgIC8qKgogICAgICogQ2FsY3VsYXRlcyB0aGUgaW5lcnRpYSBpbiB0aGUgbG9jYWwgZnJhbWUgZm9yIHRoaXMgc2hhcGUuCiAgICAgKiBAc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9tb21lbnRzX29mX2luZXJ0aWEKICAgICAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIHRocm93ICJjYWxjdWxhdGVMb2NhbEluZXJ0aWEoKSBub3QgaW1wbGVtZW50ZWQgZm9yIHNoYXBlIHR5cGUgIiArIHRoaXMudHlwZTsKICAgIH0KICAgIC8qKgogICAgICogQHRvZG8gdXNlIGFic3RyYWN0IGZvciB0aGVzZSBraW5kIG9mIG1ldGhvZHMKICAgICAqLwoKCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICB0aHJvdyAiY2FsY3VsYXRlV29ybGRBQUJCKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICIgKyB0aGlzLnR5cGU7CiAgICB9CgogIH0KCiAgU2hhcGUuaWRDb3VudGVyID0gMDsKICBTaGFwZS50eXBlcyA9IFNIQVBFX1RZUEVTOwogIC8qKgogICAqIFRyYW5zZm9ybWF0aW9uIHV0aWxpdGllcy4KICAgKi8KCiAgY2xhc3MgVHJhbnNmb3JtIHsKICAgIC8qKgogICAgICogcG9zaXRpb24KICAgICAqLwoKICAgIC8qKgogICAgICogcXVhdGVybmlvbgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHsKICAgICAgdGhpcy5wb3NpdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5xdWF0ZXJuaW9uID0gdm9pZCAwOwogICAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5xdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgICAgIGlmIChvcHRpb25zLnBvc2l0aW9uKSB7CiAgICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5xdWF0ZXJuaW9uKSB7CiAgICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSBnbG9iYWwgcG9pbnQgaW4gbG9jYWwgdHJhbnNmb3JtIGNvb3JkaW5hdGVzLgogICAgICovCgoKICAgIHBvaW50VG9Mb2NhbCh3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgcmV0dXJuIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZSh0aGlzLnBvc2l0aW9uLCB0aGlzLnF1YXRlcm5pb24sIHdvcmxkUG9pbnQsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIGxvY2FsIHBvaW50IGluIGdsb2JhbCB0cmFuc2Zvcm0gY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgcG9pbnRUb1dvcmxkKGxvY2FsUG9pbnQsIHJlc3VsdCkgewogICAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0KTsKICAgIH0KICAgIC8qKgogICAgICogdmVjdG9yVG9Xb3JsZEZyYW1lCiAgICAgKi8KCgogICAgdmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsVmVjdG9yLCByZXN1bHQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFZlY3RvciwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogcG9pbnRUb0xvY2FsRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgcG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXRlcm5pb24sIHdvcmxkUG9pbnQsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHsKICAgICAgd29ybGRQb2ludC52c3ViKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpOwogICAgICB0bXBRdWF0JDEudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBwb2ludFRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyBwb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0ID0gbmV3IFZlYzMoKSkgewogICAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsUG9pbnQsIHJlc3VsdCk7CiAgICAgIHJlc3VsdC52YWRkKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb1dvcmxkRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgdmVjdG9yVG9Xb3JsZEZyYW1lKHF1YXRlcm5pb24sIGxvY2FsVmVjdG9yLCByZXN1bHQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHZlY3RvclRvTG9jYWxGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyB2ZWN0b3JUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXRlcm5pb24sIHdvcmxkVmVjdG9yLCByZXN1bHQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHF1YXRlcm5pb24udyAqPSAtMTsKICAgICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcXVhdGVybmlvbi53ICo9IC0xOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CgogIGNvbnN0IHRtcFF1YXQkMSA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgLyoqCiAgICogQSBzZXQgb2YgcG9seWdvbnMgZGVzY3JpYmluZyBhIGNvbnZleCBzaGFwZS4KICAgKgogICAqIFRoZSBzaGFwZSBNVVNUIGJlIGNvbnZleCBmb3IgdGhlIGNvZGUgdG8gd29yayBwcm9wZXJseS4gTm8gcG9seWdvbnMgbWF5IGJlIGNvcGxhbmFyIChjb250YWluZWQKICAgKiBpbiB0aGUgc2FtZSAzRCBwbGFuZSksIGluc3RlYWQgdGhlc2Ugc2hvdWxkIGJlIG1lcmdlZCBpbnRvIG9uZSBwb2x5Z29uLgogICAqCiAgICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW8gKG9yaWdpbmFsIGF1dGhvciwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvL3RocmVlLmpzL2NvbW1pdC84NTAyNmYwYzc2OWU0MDAwMTQ4YTY3ZDQ1YTllOWI5YzUxMDg4MzZmKQogICAqIEBhdXRob3Igc2NodGVwcGUgLyBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUKICAgKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvCiAgICoKICAgKiBAdG9kbyBNb3ZlIHRoZSBjbGlwcGluZyBmdW5jdGlvbnMgdG8gQ29udGFjdEdlbmVyYXRvcj8KICAgKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGNvbnZleFNoYXBlID0gbmV3IENBTk5PTi5Db252ZXhQb2x5aGVkcm9uKHsgdmVydGljZXMsIGZhY2VzIH0pCiAgICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShjb252ZXhCb2R5KQogICAqLwoKICBjbGFzcyBDb252ZXhQb2x5aGVkcm9uIGV4dGVuZHMgU2hhcGUgewogICAgLyoqIHZlcnRpY2VzICovCgogICAgLyoqCiAgICAgKiBBcnJheSBvZiBpbnRlZ2VyIGFycmF5cywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIGZhY2UgY29uc2lzdHMgb2YKICAgICAqLwoKICAgIC8qKiBmYWNlTm9ybWFscyAqLwoKICAgIC8qKiB3b3JsZFZlcnRpY2VzICovCgogICAgLyoqIHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSAqLwoKICAgIC8qKiB3b3JsZEZhY2VOb3JtYWxzICovCgogICAgLyoqIHdvcmxkRmFjZU5vcm1hbHNOZWVkc1VwZGF0ZSAqLwoKICAgIC8qKgogICAgICogSWYgZ2l2ZW4sIHRoZXNlIGxvY2FsbHkgZGVmaW5lZCwgbm9ybWFsaXplZCBheGVzIGFyZSB0aGUgb25seSBvbmVzIGJlaW5nIGNoZWNrZWQgd2hlbiBkb2luZyBzZXBhcmF0aW5nIGF4aXMgY2hlY2suCiAgICAgKi8KCiAgICAvKiogdW5pcXVlRWRnZXMgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSB2ZXJ0aWNlcyBBbiBhcnJheSBvZiBWZWMzJ3MKICAgICAqIEBwYXJhbSBmYWNlcyBBcnJheSBvZiBpbnRlZ2VyIGFycmF5cywgZGVzY3JpYmluZyB3aGljaCB2ZXJ0aWNlcyB0aGF0IGlzIGluY2x1ZGVkIGluIGVhY2ggZmFjZS4KICAgICAqLwogICAgY29uc3RydWN0b3IocHJvcHMgPSB7fSkgewogICAgICBjb25zdCB7CiAgICAgICAgdmVydGljZXMgPSBbXSwKICAgICAgICBmYWNlcyA9IFtdLAogICAgICAgIG5vcm1hbHMgPSBbXSwKICAgICAgICBheGVzLAogICAgICAgIGJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgIH0gPSBwcm9wczsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04KICAgICAgfSk7CiAgICAgIHRoaXMudmVydGljZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZmFjZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGRWZXJ0aWNlcyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB2b2lkIDA7CiAgICAgIHRoaXMudW5pcXVlQXhlcyA9IHZvaWQgMDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IHZvaWQgMDsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzOwogICAgICB0aGlzLmZhY2VzID0gZmFjZXM7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSBub3JtYWxzOwoKICAgICAgaWYgKHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpOwogICAgICB9CgogICAgICBpZiAoIWJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBib3VuZGluZ1NwaGVyZVJhZGl1czsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzID0gW107IC8vIFdvcmxkIHRyYW5zZm9ybWVkIHZlcnNpb24gb2YgLnZlcnRpY2VzCgogICAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFscwoKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLnVuaXF1ZUF4ZXMgPSBheGVzID8gYXhlcy5zbGljZSgpIDogbnVsbDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IFtdOwogICAgICB0aGlzLmNvbXB1dGVFZGdlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlcwogICAgICovCgoKICAgIGNvbXB1dGVFZGdlcygpIHsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlczsKICAgICAgZWRnZXMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgZWRnZSA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07CiAgICAgICAgY29uc3QgbnVtVmVydGljZXMgPSBmYWNlLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IG51bVZlcnRpY2VzOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGsgPSAoaiArIDEpICUgbnVtVmVydGljZXM7CiAgICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTsKICAgICAgICAgIGVkZ2Uubm9ybWFsaXplKCk7CiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCAhPT0gZWRnZXMubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGVkZ2VzLnB1c2goZWRnZS5jbG9uZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuCiAgICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LgogICAgICovCgoKICAgIGNvbXB1dGVOb3JtYWxzKCkgewogICAgICB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9IHRoaXMuZmFjZXMubGVuZ3RoOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDaGVjayBzbyBhbGwgdmVydGljZXMgZXhpc3RzIGZvciB0aGlzIGZhY2UKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICghdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlZlcnRleCAiICsgdGhpcy5mYWNlc1tpXVtqXSArICIgbm90IGZvdW5kISIpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY29uc3QgbiA9IHRoaXMuZmFjZU5vcm1hbHNbaV0gfHwgbmV3IFZlYzMoKTsKICAgICAgICB0aGlzLmdldEZhY2VOb3JtYWwoaSwgbik7CiAgICAgICAgbi5uZWdhdGUobik7CiAgICAgICAgdGhpcy5mYWNlTm9ybWFsc1tpXSA9IG47CiAgICAgICAgY29uc3QgdmVydGV4ID0gdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldWzBdXTsKCiAgICAgICAgaWYgKG4uZG90KHZlcnRleCkgPCAwKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCIuZmFjZU5vcm1hbHNbIiArIGkgKyAiXSA9IFZlYzMoIiArIG4udG9TdHJpbmcoKSArICIpIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuIik7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybigiLnZlcnRpY2VzWyIgKyB0aGlzLmZhY2VzW2ldW2pdICsgIl0gPSBWZWMzKCIgKyB0aGlzLnZlcnRpY2VzW3RoaXMuZmFjZXNbaV1bal1dLnRvU3RyaW5nKCkgKyAiKSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBub3JtYWwgb2YgYSBmYWNlIGZyb20gaXRzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgZ2V0RmFjZU5vcm1hbChpLCB0YXJnZXQpIHsKICAgICAgY29uc3QgZiA9IHRoaXMuZmFjZXNbaV07CiAgICAgIGNvbnN0IHZhID0gdGhpcy52ZXJ0aWNlc1tmWzBdXTsKICAgICAgY29uc3QgdmIgPSB0aGlzLnZlcnRpY2VzW2ZbMV1dOwogICAgICBjb25zdCB2YyA9IHRoaXMudmVydGljZXNbZlsyXV07CiAgICAgIENvbnZleFBvbHloZWRyb24uY29tcHV0ZU5vcm1hbCh2YSwgdmIsIHZjLCB0YXJnZXQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlcwogICAgICovCgoKICAgIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkgewogICAgICBjb25zdCBjYiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGFiID0gbmV3IFZlYzMoKTsKICAgICAgdmIudnN1Yih2YSwgYWIpOwogICAgICB2Yy52c3ViKHZiLCBjYik7CiAgICAgIGNiLmNyb3NzKGFiLCB0YXJnZXQpOwoKICAgICAgaWYgKCF0YXJnZXQuaXNaZXJvKCkpIHsKICAgICAgICB0YXJnZXQubm9ybWFsaXplKCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIG1pbkRpc3QgQ2xhbXAgZGlzdGFuY2UKICAgICAqIEBwYXJhbSByZXN1bHQgVGhlIGFuIGFycmF5IG9mIGNvbnRhY3QgcG9pbnQgb2JqZWN0cywgc2VlIGNsaXBGYWNlQWdhaW5zdEh1bGwKICAgICAqLwoKCiAgICBjbGlwQWdhaW5zdEh1bGwocG9zQSwgcXVhdEEsIGh1bGxCLCBwb3NCLCBxdWF0Qiwgc2VwYXJhdGluZ05vcm1hbCwgbWluRGlzdCwgbWF4RGlzdCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IFdvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTsKICAgICAgbGV0IGNsb3Nlc3RGYWNlQiA9IC0xOwogICAgICBsZXQgZG1heCA9IC1OdW1iZXIuTUFYX1ZBTFVFOwoKICAgICAgZm9yIChsZXQgZmFjZSA9IDA7IGZhY2UgPCBodWxsQi5mYWNlcy5sZW5ndGg7IGZhY2UrKykgewogICAgICAgIFdvcmxkTm9ybWFsLmNvcHkoaHVsbEIuZmFjZU5vcm1hbHNbZmFjZV0pOwogICAgICAgIHF1YXRCLnZtdWx0KFdvcmxkTm9ybWFsLCBXb3JsZE5vcm1hbCk7CiAgICAgICAgY29uc3QgZCA9IFdvcmxkTm9ybWFsLmRvdChzZXBhcmF0aW5nTm9ybWFsKTsKCiAgICAgICAgaWYgKGQgPiBkbWF4KSB7CiAgICAgICAgICBkbWF4ID0gZDsKICAgICAgICAgIGNsb3Nlc3RGYWNlQiA9IGZhY2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCB3b3JsZFZlcnRzQjEgPSBbXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaHVsbEIuZmFjZXNbY2xvc2VzdEZhY2VCXS5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBodWxsQi52ZXJ0aWNlc1todWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdW2ldXTsKICAgICAgICBjb25zdCB3b3JsZGIgPSBuZXcgVmVjMygpOwogICAgICAgIHdvcmxkYi5jb3B5KGIpOwogICAgICAgIHF1YXRCLnZtdWx0KHdvcmxkYiwgd29ybGRiKTsKICAgICAgICBwb3NCLnZhZGQod29ybGRiLCB3b3JsZGIpOwogICAgICAgIHdvcmxkVmVydHNCMS5wdXNoKHdvcmxkYik7CiAgICAgIH0KCiAgICAgIGlmIChjbG9zZXN0RmFjZUIgPj0gMCkgewogICAgICAgIHRoaXMuY2xpcEZhY2VBZ2FpbnN0SHVsbChzZXBhcmF0aW5nTm9ybWFsLCBwb3NBLCBxdWF0QSwgd29ybGRWZXJ0c0IxLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEZpbmQgdGhlIHNlcGFyYXRpbmcgYXhpcyBiZXR3ZWVuIHRoaXMgaHVsbCBhbmQgYW5vdGhlcgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IHZlY3RvciB0byBzYXZlIHRoZSBheGlzIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgZmFsc2UgaWYgYSBzZXBhcmF0aW9uIGlzIGZvdW5kLCBlbHNlIHRydWUKICAgICAqLwoKCiAgICBmaW5kU2VwYXJhdGluZ0F4aXMoaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0QiwgdGFyZ2V0LCBmYWNlTGlzdEEsIGZhY2VMaXN0QikgewogICAgICBjb25zdCBmYWNlQU5vcm1hbFdTMyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IFdvcmxkbm9ybWFsMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGRlbHRhQyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkRWRnZTAgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB3b3JsZEVkZ2UxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgQ3Jvc3MgPSBuZXcgVmVjMygpOwogICAgICBsZXQgZG1pbiA9IE51bWJlci5NQVhfVkFMVUU7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKCiAgICAgIGlmICghaHVsbEEudW5pcXVlQXhlcykgewogICAgICAgIGNvbnN0IG51bUZhY2VzQSA9IGZhY2VMaXN0QSA/IGZhY2VMaXN0QS5sZW5ndGggOiBodWxsQS5mYWNlcy5sZW5ndGg7IC8vIFRlc3QgZmFjZSBub3JtYWxzIGZyb20gaHVsbEEKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1GYWNlc0E7IGkrKykgewogICAgICAgICAgY29uc3QgZmkgPSBmYWNlTGlzdEEgPyBmYWNlTGlzdEFbaV0gOiBpOyAvLyBHZXQgd29ybGQgZmFjZSBub3JtYWwKCiAgICAgICAgICBmYWNlQU5vcm1hbFdTMy5jb3B5KGh1bGxBLmZhY2VOb3JtYWxzW2ZpXSk7CiAgICAgICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTMywgZmFjZUFOb3JtYWxXUzMpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKGZhY2VBTm9ybWFsV1MzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKTsKCiAgICAgICAgICBpZiAoZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChkIDwgZG1pbikgewogICAgICAgICAgICBkbWluID0gZDsKICAgICAgICAgICAgdGFyZ2V0LmNvcHkoZmFjZUFOb3JtYWxXUzMpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUZXN0IHVuaXF1ZSBheGVzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGh1bGxBLnVuaXF1ZUF4ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIC8vIEdldCB3b3JsZCBheGlzCiAgICAgICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVBeGVzW2ldLCBmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoIWh1bGxCLnVuaXF1ZUF4ZXMpIHsKICAgICAgICAvLyBUZXN0IGZhY2Ugbm9ybWFscyBmcm9tIGh1bGxCCiAgICAgICAgY29uc3QgbnVtRmFjZXNCID0gZmFjZUxpc3RCID8gZmFjZUxpc3RCLmxlbmd0aCA6IGh1bGxCLmZhY2VzLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1GYWNlc0I7IGkrKykgewogICAgICAgICAgY29uc3QgZmkgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEJbaV0gOiBpOwogICAgICAgICAgV29ybGRub3JtYWwxLmNvcHkoaHVsbEIuZmFjZU5vcm1hbHNbZmldKTsKICAgICAgICAgIHF1YXRCLnZtdWx0KFdvcmxkbm9ybWFsMSwgV29ybGRub3JtYWwxKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhXb3JsZG5vcm1hbDEsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShXb3JsZG5vcm1hbDEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUZXN0IHVuaXF1ZSBheGVzIGluIEIKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEIudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlQXhlc1tpXSwgV29ybGRub3JtYWwxKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhXb3JsZG5vcm1hbDEsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShXb3JsZG5vcm1hbDEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBUZXN0IGVkZ2VzCgoKICAgICAgZm9yIChsZXQgZTAgPSAwOyBlMCAhPT0gaHVsbEEudW5pcXVlRWRnZXMubGVuZ3RoOyBlMCsrKSB7CiAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UKICAgICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVFZGdlc1tlMF0sIHdvcmxkRWRnZTApOwoKICAgICAgICBmb3IgKGxldCBlMSA9IDA7IGUxICE9PSBodWxsQi51bmlxdWVFZGdlcy5sZW5ndGg7IGUxKyspIHsKICAgICAgICAgIC8vIEdldCB3b3JsZCBlZGdlIDIKICAgICAgICAgIHF1YXRCLnZtdWx0KGh1bGxCLnVuaXF1ZUVkZ2VzW2UxXSwgd29ybGRFZGdlMSk7CiAgICAgICAgICB3b3JsZEVkZ2UwLmNyb3NzKHdvcmxkRWRnZTEsIENyb3NzKTsKCiAgICAgICAgICBpZiAoIUNyb3NzLmFsbW9zdFplcm8oKSkgewogICAgICAgICAgICBDcm9zcy5ub3JtYWxpemUoKTsKICAgICAgICAgICAgY29uc3QgZGlzdCA9IGh1bGxBLnRlc3RTZXBBeGlzKENyb3NzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKTsKCiAgICAgICAgICAgIGlmIChkaXN0ID09PSBmYWxzZSkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGRpc3QgPCBkbWluKSB7CiAgICAgICAgICAgICAgZG1pbiA9IGRpc3Q7CiAgICAgICAgICAgICAgdGFyZ2V0LmNvcHkoQ3Jvc3MpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBwb3NCLnZzdWIocG9zQSwgZGVsdGFDKTsKCiAgICAgIGlmIChkZWx0YUMuZG90KHRhcmdldCkgPiAwLjApIHsKICAgICAgICB0YXJnZXQubmVnYXRlKHRhcmdldCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBUZXN0IHNlcGFyYXRpbmcgYXhpcyBhZ2FpbnN0IHR3byBodWxscy4gQm90aCBodWxscyBhcmUgcHJvamVjdGVkIG9udG8gdGhlIGF4aXMgYW5kIHRoZSBvdmVybGFwIHNpemUgaXMgcmV0dXJuZWQgaWYgdGhlcmUgaXMgb25lLgogICAgICogQHJldHVybiBUaGUgb3ZlcmxhcCBkZXB0aCwgb3IgRkFMU0UgaWYgbm8gcGVuZXRyYXRpb24uCiAgICAgKi8KCgogICAgdGVzdFNlcEF4aXMoYXhpcywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0QikgewogICAgICBjb25zdCBodWxsQSA9IHRoaXM7CiAgICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQSwgYXhpcywgcG9zQSwgcXVhdEEsIG1heG1pbkEpOwogICAgICBDb252ZXhQb2x5aGVkcm9uLnByb2plY3QoaHVsbEIsIGF4aXMsIHBvc0IsIHF1YXRCLCBtYXhtaW5CKTsKICAgICAgY29uc3QgbWF4QSA9IG1heG1pbkFbMF07CiAgICAgIGNvbnN0IG1pbkEgPSBtYXhtaW5BWzFdOwogICAgICBjb25zdCBtYXhCID0gbWF4bWluQlswXTsKICAgICAgY29uc3QgbWluQiA9IG1heG1pbkJbMV07CgogICAgICBpZiAobWF4QSA8IG1pbkIgfHwgbWF4QiA8IG1pbkEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIFNlcGFyYXRlZAogICAgICB9CgogICAgICBjb25zdCBkMCA9IG1heEEgLSBtaW5COwogICAgICBjb25zdCBkMSA9IG1heEIgLSBtaW5BOwogICAgICBjb25zdCBkZXB0aCA9IGQwIDwgZDEgPyBkMCA6IGQxOwogICAgICByZXR1cm4gZGVwdGg7CiAgICB9CiAgICAvKioKICAgICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYQogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgLy8gQXBwcm94aW1hdGUgd2l0aCBib3ggaW5lcnRpYQogICAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXQKICAgICAgY29uc3QgYWFiYm1heCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGFhYmJtaW4gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoYWFiYm1pbiwgYWFiYm1heCk7CiAgICAgIGNvbnN0IHggPSBhYWJibWF4LnggLSBhYWJibWluLng7CiAgICAgIGNvbnN0IHkgPSBhYWJibWF4LnkgLSBhYWJibWluLnk7CiAgICAgIGNvbnN0IHogPSBhYWJibWF4LnogLSBhYWJibWluLno7CiAgICAgIHRhcmdldC54ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB6ICogMiAqIHopOwogICAgICB0YXJnZXQueSA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB4ICogMiAqIHggKyAyICogeiAqIDIgKiB6KTsKICAgICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHggKiAyICogeCk7CiAgICB9CiAgICAvKioKICAgICAqIEBwYXJhbSBmYWNlX2kgSW5kZXggb2YgdGhlIGZhY2UKICAgICAqLwoKCiAgICBnZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGZhY2VfaSkgewogICAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tmYWNlX2ldOwogICAgICBjb25zdCBuID0gdGhpcy5mYWNlTm9ybWFsc1tmYWNlX2ldOwogICAgICBjb25zdCB2ID0gdGhpcy52ZXJ0aWNlc1tmWzBdXTsKICAgICAgY29uc3QgYyA9IC1uLmRvdCh2KTsKICAgICAgcmV0dXJuIGM7CiAgICB9CiAgICAvKioKICAgICAqIENsaXAgYSBmYWNlIGFnYWluc3QgYSBodWxsLgogICAgICogQHBhcmFtIHdvcmxkVmVydHNCMSBBbiBhcnJheSBvZiBWZWMzIHdpdGggdmVydGljZXMgaW4gdGhlIHdvcmxkIGZyYW1lLgogICAgICogQHBhcmFtIG1pbkRpc3QgRGlzdGFuY2UgY2xhbXBpbmcKICAgICAqIEBwYXJhbSBBcnJheSByZXN1bHQgQXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGNvbnRhY3QgcG9pbnRzIGluLiBXaWxsIGJlIG9iamVjdHMgd2l0aCBwcm9wZXJ0aWVzOiBwb2ludCwgZGVwdGgsIG5vcm1hbC4gVGhlc2UgYXJlIHJlcHJlc2VudGVkIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICovCgoKICAgIGNsaXBGYWNlQWdhaW5zdEh1bGwoc2VwYXJhdGluZ05vcm1hbCwgcG9zQSwgcXVhdEEsIHdvcmxkVmVydHNCMSwgbWluRGlzdCwgbWF4RGlzdCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBlZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IFdvcmxkRWRnZTAgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB3b3JsZFBsYW5lQW5vcm1hbDEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwbGFuZU5vcm1hbFdTMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkQTEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBsb2NhbFBsYW5lTm9ybWFsID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGxhbmVOb3JtYWxXUyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKICAgICAgY29uc3Qgd29ybGRWZXJ0c0IyID0gW107CiAgICAgIGNvbnN0IHBWdHhJbiA9IHdvcmxkVmVydHNCMTsKICAgICAgY29uc3QgcFZ0eE91dCA9IHdvcmxkVmVydHNCMjsKICAgICAgbGV0IGNsb3Nlc3RGYWNlQSA9IC0xOwogICAgICBsZXQgZG1pbiA9IE51bWJlci5NQVhfVkFMVUU7IC8vIEZpbmQgdGhlIGZhY2Ugd2l0aCBub3JtYWwgY2xvc2VzdCB0byB0aGUgc2VwYXJhdGluZyBheGlzCgogICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7CiAgICAgICAgZmFjZUFOb3JtYWxXUy5jb3B5KGh1bGxBLmZhY2VOb3JtYWxzW2ZhY2VdKTsKICAgICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTLCBmYWNlQU5vcm1hbFdTKTsKICAgICAgICBjb25zdCBkID0gZmFjZUFOb3JtYWxXUy5kb3Qoc2VwYXJhdGluZ05vcm1hbCk7CgogICAgICAgIGlmIChkIDwgZG1pbikgewogICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICBjbG9zZXN0RmFjZUEgPSBmYWNlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGNsb3Nlc3RGYWNlQSA8IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gR2V0IHRoZSBmYWNlIGFuZCBjb25zdHJ1Y3QgY29ubmVjdGVkIGZhY2VzCgoKICAgICAgY29uc3QgcG9seUEgPSBodWxsQS5mYWNlc1tjbG9zZXN0RmFjZUFdOwogICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcyA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBodWxsQS5mYWNlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaHVsbEEuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICgKICAgICAgICAgIC8qIFNoYXJpbmcgYSB2ZXJ0ZXgqLwogICAgICAgICAgcG9seUEuaW5kZXhPZihodWxsQS5mYWNlc1tpXVtqXSkgIT09IC0xICYmCiAgICAgICAgICAvKiBOb3QgdGhlIG9uZSB3ZSBhcmUgbG9va2luZyBmb3IgY29ubmVjdGlvbnMgZnJvbSAqLwogICAgICAgICAgaSAhPT0gY2xvc2VzdEZhY2VBICYmCiAgICAgICAgICAvKiBOb3QgYWxyZWFkeSBhZGRlZCAqLwogICAgICAgICAgcG9seUEuY29ubmVjdGVkRmFjZXMuaW5kZXhPZihpKSA9PT0gLTEpIHsKICAgICAgICAgICAgcG9seUEuY29ubmVjdGVkRmFjZXMucHVzaChpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gLy8gQ2xpcCB0aGUgcG9seWdvbiB0byB0aGUgYmFjayBvZiB0aGUgcGxhbmVzIG9mIGFsbCBmYWNlcyBvZiBodWxsIEEsCiAgICAgIC8vIHRoYXQgYXJlIGFkamFjZW50IHRvIHRoZSB3aXRuZXNzIGZhY2UKCgogICAgICBjb25zdCBudW1WZXJ0aWNlc0EgPSBwb2x5QS5sZW5ndGg7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVZlcnRpY2VzQTsgaSsrKSB7CiAgICAgICAgY29uc3QgYSA9IGh1bGxBLnZlcnRpY2VzW3BvbHlBW2ldXTsKICAgICAgICBjb25zdCBiID0gaHVsbEEudmVydGljZXNbcG9seUFbKGkgKyAxKSAlIG51bVZlcnRpY2VzQV1dOwogICAgICAgIGEudnN1YihiLCBlZGdlMCk7CiAgICAgICAgV29ybGRFZGdlMC5jb3B5KGVkZ2UwKTsKICAgICAgICBxdWF0QS52bXVsdChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTsKICAgICAgICBwb3NBLnZhZGQoV29ybGRFZGdlMCwgV29ybGRFZGdlMCk7CiAgICAgICAgd29ybGRQbGFuZUFub3JtYWwxLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTsKICAgICAgICBxdWF0QS52bXVsdCh3b3JsZFBsYW5lQW5vcm1hbDEsIHdvcmxkUGxhbmVBbm9ybWFsMSk7CiAgICAgICAgcG9zQS52YWRkKHdvcmxkUGxhbmVBbm9ybWFsMSwgd29ybGRQbGFuZUFub3JtYWwxKTsKICAgICAgICBXb3JsZEVkZ2UwLmNyb3NzKHdvcmxkUGxhbmVBbm9ybWFsMSwgcGxhbmVOb3JtYWxXUzEpOwogICAgICAgIHBsYW5lTm9ybWFsV1MxLm5lZ2F0ZShwbGFuZU5vcm1hbFdTMSk7CiAgICAgICAgd29ybGRBMS5jb3B5KGEpOwogICAgICAgIHF1YXRBLnZtdWx0KHdvcmxkQTEsIHdvcmxkQTEpOwogICAgICAgIHBvc0EudmFkZCh3b3JsZEExLCB3b3JsZEExKTsKICAgICAgICBjb25zdCBvdGhlckZhY2UgPSBwb2x5QS5jb25uZWN0ZWRGYWNlc1tpXTsKICAgICAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tvdGhlckZhY2VdKTsKICAgICAgICBjb25zdCBsb2NhbFBsYW5lRXEgPSB0aGlzLmdldFBsYW5lQ29uc3RhbnRPZkZhY2Uob3RoZXJGYWNlKTsKICAgICAgICBwbGFuZU5vcm1hbFdTLmNvcHkobG9jYWxQbGFuZU5vcm1hbCk7CiAgICAgICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7CiAgICAgICAgY29uc3QgcGxhbmVFcVdTID0gbG9jYWxQbGFuZUVxIC0gcGxhbmVOb3JtYWxXUy5kb3QocG9zQSk7IC8vIENsaXAgZmFjZSBhZ2FpbnN0IG91ciBjb25zdHJ1Y3RlZCBwbGFuZQoKICAgICAgICB0aGlzLmNsaXBGYWNlQWdhaW5zdFBsYW5lKHBWdHhJbiwgcFZ0eE91dCwgcGxhbmVOb3JtYWxXUywgcGxhbmVFcVdTKTsgLy8gVGhyb3cgYXdheSBhbGwgY2xpcHBlZCBwb2ludHMsIGJ1dCBzYXZlIHRoZSByZW1haW5pbmcgdW50aWwgbmV4dCBjbGlwCgogICAgICAgIHdoaWxlIChwVnR4SW4ubGVuZ3RoKSB7CiAgICAgICAgICBwVnR4SW4uc2hpZnQoKTsKICAgICAgICB9CgogICAgICAgIHdoaWxlIChwVnR4T3V0Lmxlbmd0aCkgewogICAgICAgICAgcFZ0eEluLnB1c2gocFZ0eE91dC5zaGlmdCgpKTsKICAgICAgICB9CiAgICAgIH0gLy8gb25seSBrZWVwIGNvbnRhY3QgcG9pbnRzIHRoYXQgYXJlIGJlaGluZCB0aGUgd2l0bmVzcyBmYWNlCgoKICAgICAgbG9jYWxQbGFuZU5vcm1hbC5jb3B5KHRoaXMuZmFjZU5vcm1hbHNbY2xvc2VzdEZhY2VBXSk7CiAgICAgIGNvbnN0IGxvY2FsUGxhbmVFcSA9IHRoaXMuZ2V0UGxhbmVDb25zdGFudE9mRmFjZShjbG9zZXN0RmFjZUEpOwogICAgICBwbGFuZU5vcm1hbFdTLmNvcHkobG9jYWxQbGFuZU5vcm1hbCk7CiAgICAgIHF1YXRBLnZtdWx0KHBsYW5lTm9ybWFsV1MsIHBsYW5lTm9ybWFsV1MpOwogICAgICBjb25zdCBwbGFuZUVxV1MgPSBsb2NhbFBsYW5lRXEgLSBwbGFuZU5vcm1hbFdTLmRvdChwb3NBKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcFZ0eEluLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IGRlcHRoID0gcGxhbmVOb3JtYWxXUy5kb3QocFZ0eEluW2ldKSArIHBsYW5lRXFXUzsgLy8gPz8/CgogICAgICAgIGlmIChkZXB0aCA8PSBtaW5EaXN0KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiY2xhbXBlZDogZGVwdGg9IiArIGRlcHRoICsgIiB0byBtaW5EaXN0PSIgKyBtaW5EaXN0KTsKICAgICAgICAgIGRlcHRoID0gbWluRGlzdDsKICAgICAgICB9CgogICAgICAgIGlmIChkZXB0aCA8PSBtYXhEaXN0KSB7CiAgICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTsKCiAgICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikgewogICAgICAgICAgICBjb25zdCBwID0gewogICAgICAgICAgICAgIHBvaW50LAogICAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUywKICAgICAgICAgICAgICBkZXB0aAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXN1bHQucHVzaChwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS4KICAgICAqIEBwYXJhbSBwbGFuZUNvbnN0YW50IFRoZSBjb25zdGFudCBpbiB0aGUgbWF0aGVtYXRpY2FsIHBsYW5lIGVxdWF0aW9uCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0UGxhbmUoaW5WZXJ0aWNlcywgb3V0VmVydGljZXMsIHBsYW5lTm9ybWFsLCBwbGFuZUNvbnN0YW50KSB7CiAgICAgIGxldCBuX2RvdF9maXJzdDsKICAgICAgbGV0IG5fZG90X2xhc3Q7CiAgICAgIGNvbnN0IG51bVZlcnRzID0gaW5WZXJ0aWNlcy5sZW5ndGg7CgogICAgICBpZiAobnVtVmVydHMgPCAyKSB7CiAgICAgICAgcmV0dXJuIG91dFZlcnRpY2VzOwogICAgICB9CgogICAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07CiAgICAgIGxldCBsYXN0VmVydGV4ID0gaW5WZXJ0aWNlc1swXTsKICAgICAgbl9kb3RfZmlyc3QgPSBwbGFuZU5vcm1hbC5kb3QoZmlyc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgIGZvciAobGV0IHZpID0gMDsgdmkgPCBudW1WZXJ0czsgdmkrKykgewogICAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTsKICAgICAgICBuX2RvdF9sYXN0ID0gcGxhbmVOb3JtYWwuZG90KGxhc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgICAgaWYgKG5fZG90X2ZpcnN0IDwgMCkgewogICAgICAgICAgaWYgKG5fZG90X2xhc3QgPCAwKSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXgKICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIG5ld3YuY29weShsYXN0VmVydGV4KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kID49IDAsIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24KICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7CiAgICAgICAgICAgIG91dFZlcnRpY2VzLnB1c2gobmV3dik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkgewogICAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZAogICAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChsYXN0VmVydGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDsKICAgICAgICBuX2RvdF9maXJzdCA9IG5fZG90X2xhc3Q7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRWZXJ0aWNlczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgLndvcmxkVmVydGljZXNgIGFuZCBzZXRzIGAud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlYCB0byBmYWxzZS4KICAgICAqLwoKCiAgICBjb21wdXRlV29ybGRWZXJ0aWNlcyhwb3NpdGlvbiwgcXVhdCkgewogICAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy53b3JsZFZlcnRpY2VzLnB1c2gobmV3IFZlYzMoKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVhdC52bXVsdCh2ZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7CiAgICAgICAgcG9zaXRpb24udmFkZCh3b3JsZFZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmJtaW4sIGFhYmJtYXgpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgYWFiYm1heC5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydGljZXNbaV07CgogICAgICAgIGlmICh2LnggPCBhYWJibWluLngpIHsKICAgICAgICAgIGFhYmJtaW4ueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IGFhYmJtYXgueCkgewogICAgICAgICAgYWFiYm1heC54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkgewogICAgICAgICAgYWFiYm1pbi55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gYWFiYm1heC55KSB7CiAgICAgICAgICBhYWJibWF4LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgYWFiYm1pbi56KSB7CiAgICAgICAgICBhYWJibWluLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHsKICAgICAgICAgIGFhYmJtYXgueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuCiAgICAgKi8KCgogICAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkgewogICAgICBjb25zdCBOID0gdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7CgogICAgICB3aGlsZSAodGhpcy53b3JsZEZhY2VOb3JtYWxzLmxlbmd0aCA8IE4pIHsKICAgICAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMucHVzaChuZXcgVmVjMygpKTsKICAgICAgfQoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFscyA9IHRoaXMud29ybGRGYWNlTm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBxdWF0LnZtdWx0KG5vcm1hbHNbaV0sIHdvcmxkTm9ybWFsc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBub3JtMiA9IHZlcnRzW2ldLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBsZXQgbWlueDsKICAgICAgbGV0IG1pbnk7CiAgICAgIGxldCBtaW56OwogICAgICBsZXQgbWF4eDsKICAgICAgbGV0IG1heHk7CiAgICAgIGxldCBtYXh6OwogICAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0ZW1wV29ybGRWZXJ0ZXguY29weSh2ZXJ0c1tpXSk7CiAgICAgICAgcXVhdC52bXVsdCh0ZW1wV29ybGRWZXJ0ZXgsIHRlbXBXb3JsZFZlcnRleCk7CiAgICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7CgogICAgICAgIGlmIChtaW54ID09PSB1bmRlZmluZWQgfHwgdi54IDwgbWlueCkgewogICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkgewogICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtaW55ID09PSB1bmRlZmluZWQgfHwgdi55IDwgbWlueSkgewogICAgICAgICAgbWlueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh5ID09PSB1bmRlZmluZWQgfHwgdi55ID4gbWF4eSkgewogICAgICAgICAgbWF4eSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikgewogICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh6ID09PSB1bmRlZmluZWQgfHwgdi56ID4gbWF4eikgewogICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbi5zZXQobWlueCwgbWlueSwgbWlueik7CiAgICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBhdmVyYWdlIG9mIGFsbCB0aGUgdmVydGljZXMgcG9zaXRpb25zCiAgICAgKi8KCgogICAgZ2V0QXZlcmFnZVBvaW50TG9jYWwodGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGFyZ2V0LnZhZGQodmVydHNbaV0sIHRhcmdldCk7CiAgICAgIH0KCiAgICAgIHRhcmdldC5zY2FsZSgxIC8gdmVydHMubGVuZ3RoLCB0YXJnZXQpOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBUcmFuc2Zvcm0gYWxsIGxvY2FsIHBvaW50cy4gV2lsbCBjaGFuZ2UgdGhlIC52ZXJ0aWNlcwogICAgICovCgoKICAgIHRyYW5zZm9ybUFsbFBvaW50cyhvZmZzZXQsIHF1YXQpIHsKICAgICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7IC8vIEFwcGx5IHJvdGF0aW9uCgogICAgICBpZiAocXVhdCkgewogICAgICAgIC8vIFJvdGF0ZSB2ZXJ0aWNlcwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07CiAgICAgICAgICBxdWF0LnZtdWx0KHYsIHYpOwogICAgICAgIH0gLy8gUm90YXRlIGZhY2Ugbm9ybWFscwoKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdGhpcy5mYWNlTm9ybWFsc1tpXTsKICAgICAgICAgIHF1YXQudm11bHQodiwgdik7CiAgICAgICAgfQogICAgICAgIC8qCiAgICAgICAgICAgICAgLy8gUm90YXRlIGVkZ2VzCiAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy51bmlxdWVFZGdlcy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLnVuaXF1ZUVkZ2VzW2ldOwogICAgICAgICAgICAgICAgICBxdWF0LnZtdWx0KHYsdik7CiAgICAgICAgICAgICAgfSovCgogICAgICB9IC8vIEFwcGx5IG9mZnNldAoKCiAgICAgIGlmIChvZmZzZXQpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOwogICAgICAgICAgdi52YWRkKG9mZnNldCwgdik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrcyB3aGV0aGVyIHAgaXMgaW5zaWRlIHRoZSBwb2x5aGVkcmEuIE11c3QgYmUgaW4gbG9jYWwgY29vcmRzLgogICAgICogVGhlIHBvaW50IGxpZXMgb3V0c2lkZSBvZiB0aGUgY29udmV4IGh1bGwgb2YgdGhlIG90aGVyIHBvaW50cyBpZiBhbmQgb25seSBpZiB0aGUgZGlyZWN0aW9uCiAgICAgKiBvZiBhbGwgdGhlIHZlY3RvcnMgZnJvbSBpdCB0byB0aG9zZSBvdGhlciBwb2ludHMgYXJlIG9uIGxlc3MgdGhhbiBvbmUgaGFsZiBvZiBhIHNwaGVyZSBhcm91bmQgaXQuCiAgICAgKiBAcGFyYW0gcCBBIHBvaW50IGdpdmVuIGluIGxvY2FsIGNvb3JkaW5hdGVzCiAgICAgKi8KCgogICAgcG9pbnRJc0luc2lkZShwKSB7CiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCBub3JtYWxzID0gdGhpcy5mYWNlTm9ybWFsczsKICAgICAgY29uc3QgcG9pbnRJbnNpZGUgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmdldEF2ZXJhZ2VQb2ludExvY2FsKHBvaW50SW5zaWRlKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mYWNlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGxldCBuID0gbm9ybWFsc1tpXTsKICAgICAgICBjb25zdCB2ID0gdmVydHNbZmFjZXNbaV1bMF1dOyAvLyBXZSBvbmx5IG5lZWQgb25lIHBvaW50IGluIHRoZSBmYWNlCiAgICAgICAgLy8gVGhpcyBkb3QgcHJvZHVjdCBkZXRlcm1pbmVzIHdoaWNoIHNpZGUgb2YgdGhlIGVkZ2UgdGhlIHBvaW50IGlzCgogICAgICAgIGNvbnN0IHZUb1AgPSBuZXcgVmVjMygpOwogICAgICAgIHAudnN1Yih2LCB2VG9QKTsKICAgICAgICBjb25zdCByMSA9IG4uZG90KHZUb1ApOwogICAgICAgIGNvbnN0IHZUb1BvaW50SW5zaWRlID0gbmV3IFZlYzMoKTsKICAgICAgICBwb2ludEluc2lkZS52c3ViKHYsIHZUb1BvaW50SW5zaWRlKTsKICAgICAgICBjb25zdCByMiA9IG4uZG90KHZUb1BvaW50SW5zaWRlKTsKCiAgICAgICAgaWYgKHIxIDwgMCAmJiByMiA+IDAgfHwgcjEgPiAwICYmIHIyIDwgMCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmNvdW50ZXJlZCBzb21lIG90aGVyIHNpZ24uIEV4aXQuCiAgICAgICAgfQogICAgICB9IC8vIElmIHdlIGdvdCBoZXJlLCBhbGwgZG90IHByb2R1Y3RzIHdlcmUgb2YgdGhlIHNhbWUgc2lnbi4KCgogICAgICByZXR1cm4gLTE7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBtYXggYW5kIG1pbiBkb3QgcHJvZHVjdCBvZiBhIGNvbnZleCBodWxsIGF0IHBvc2l0aW9uIChwb3MscXVhdCkgcHJvamVjdGVkIG9udG8gYW4gYXhpcy4KICAgICAqIFJlc3VsdHMgYXJlIHNhdmVkIGluIHRoZSBhcnJheSBtYXhtaW4uCiAgICAgKiBAcGFyYW0gcmVzdWx0IHJlc3VsdFswXSBhbmQgcmVzdWx0WzFdIHdpbGwgYmUgc2V0IHRvIG1heGltdW0gYW5kIG1pbmltdW0sIHJlc3BlY3RpdmVseS4KICAgICAqLwoKCiAgICBzdGF0aWMgcHJvamVjdChzaGFwZSwgYXhpcywgcG9zLCBxdWF0LCByZXN1bHQpIHsKICAgICAgY29uc3QgbiA9IHNoYXBlLnZlcnRpY2VzLmxlbmd0aDsKICAgICAgY29uc3QgbG9jYWxBeGlzID0gcHJvamVjdF9sb2NhbEF4aXM7CiAgICAgIGxldCBtYXggPSAwOwogICAgICBsZXQgbWluID0gMDsKICAgICAgY29uc3QgbG9jYWxPcmlnaW4gPSBwcm9qZWN0X2xvY2FsT3JpZ2luOwogICAgICBjb25zdCB2cyA9IHNoYXBlLnZlcnRpY2VzOwogICAgICBsb2NhbE9yaWdpbi5zZXRaZXJvKCk7IC8vIFRyYW5zZm9ybSB0aGUgYXhpcyB0byBsb2NhbAoKICAgICAgVHJhbnNmb3JtLnZlY3RvclRvTG9jYWxGcmFtZShwb3MsIHF1YXQsIGF4aXMsIGxvY2FsQXhpcyk7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3MsIHF1YXQsIGxvY2FsT3JpZ2luLCBsb2NhbE9yaWdpbik7CiAgICAgIGNvbnN0IGFkZCA9IGxvY2FsT3JpZ2luLmRvdChsb2NhbEF4aXMpOwogICAgICBtaW4gPSBtYXggPSB2c1swXS5kb3QobG9jYWxBeGlzKTsKCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgY29uc3QgdmFsID0gdnNbaV0uZG90KGxvY2FsQXhpcyk7CgogICAgICAgIGlmICh2YWwgPiBtYXgpIHsKICAgICAgICAgIG1heCA9IHZhbDsKICAgICAgICB9CgogICAgICAgIGlmICh2YWwgPCBtaW4pIHsKICAgICAgICAgIG1pbiA9IHZhbDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbiAtPSBhZGQ7CiAgICAgIG1heCAtPSBhZGQ7CgogICAgICBpZiAobWluID4gbWF4KSB7CiAgICAgICAgLy8gSW5jb25zaXN0ZW50IC0gc3dhcAogICAgICAgIGNvbnN0IHRlbXAgPSBtaW47CiAgICAgICAgbWluID0gbWF4OwogICAgICAgIG1heCA9IHRlbXA7CiAgICAgIH0gLy8gT3V0cHV0CgoKICAgICAgcmVzdWx0WzBdID0gbWF4OwogICAgICByZXN1bHRbMV0gPSBtaW47CiAgICB9CgogIH0KCiAgY29uc3QgbWF4bWluQSA9IFtdOwogIGNvbnN0IG1heG1pbkIgPSBbXTsKICBjb25zdCBwcm9qZWN0X2xvY2FsQXhpcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcHJvamVjdF9sb2NhbE9yaWdpbiA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQSAzZCBib3ggc2hhcGUuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc2l6ZSA9IDEKICAgKiAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBuZXcgQ0FOTk9OLlZlYzMoc2l6ZSwgc2l6ZSwgc2l6ZSkKICAgKiAgICAgY29uc3QgYm94U2hhcGUgPSBuZXcgQ0FOTk9OLkJveChoYWxmRXh0ZW50cykKICAgKiAgICAgY29uc3QgYm94Qm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBib3hTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJveEJvZHkpCiAgICovCgogIGNsYXNzIEJveCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogVGhlIGhhbGYgZXh0ZW50cyBvZiB0aGUgYm94LgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VkIGJ5IHRoZSBjb250YWN0IGdlbmVyYXRvciB0byBtYWtlIGNvbnRhY3RzIHdpdGggb3RoZXIgY29udmV4IHBvbHloZWRyYSBmb3IgZXhhbXBsZS4KICAgICAqLwogICAgY29uc3RydWN0b3IoaGFsZkV4dGVudHMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkJPWAogICAgICB9KTsKICAgICAgdGhpcy5oYWxmRXh0ZW50cyA9IHZvaWQgMDsKICAgICAgdGhpcy5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuaGFsZkV4dGVudHMgPSBoYWxmRXh0ZW50czsKICAgICAgdGhpcy5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24gPSBudWxsOwogICAgICB0aGlzLnVwZGF0ZUNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbigpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZXMgdGhlIGxvY2FsIGNvbnZleCBwb2x5aGVkcm9uIHJlcHJlc2VudGF0aW9uIHVzZWQgZm9yIHNvbWUgY29sbGlzaW9ucy4KICAgICAqLwoKCiAgICB1cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKSB7CiAgICAgIGNvbnN0IHN4ID0gdGhpcy5oYWxmRXh0ZW50cy54OwogICAgICBjb25zdCBzeSA9IHRoaXMuaGFsZkV4dGVudHMueTsKICAgICAgY29uc3Qgc3ogPSB0aGlzLmhhbGZFeHRlbnRzLno7CiAgICAgIGNvbnN0IFYgPSBWZWMzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtuZXcgVigtc3gsIC1zeSwgLXN6KSwgbmV3IFYoc3gsIC1zeSwgLXN6KSwgbmV3IFYoc3gsIHN5LCAtc3opLCBuZXcgVigtc3gsIHN5LCAtc3opLCBuZXcgVigtc3gsIC1zeSwgc3opLCBuZXcgVihzeCwgLXN5LCBzeiksIG5ldyBWKHN4LCBzeSwgc3opLCBuZXcgVigtc3gsIHN5LCBzeildOwogICAgICBjb25zdCBmYWNlcyA9IFtbMywgMiwgMSwgMF0sIC8vIC16CiAgICAgIFs0LCA1LCA2LCA3XSwgLy8gK3oKICAgICAgWzUsIDQsIDAsIDFdLCAvLyAteQogICAgICBbMiwgMywgNywgNl0sIC8vICt5CiAgICAgIFswLCA0LCA3LCAzXSwgLy8gLXgKICAgICAgWzEsIDIsIDYsIDVdIC8vICt4CiAgICAgIF07CiAgICAgIGNvbnN0IGF4ZXMgPSBbbmV3IFYoMCwgMCwgMSksIG5ldyBWKDAsIDEsIDApLCBuZXcgVigxLCAwLCAwKV07CiAgICAgIGNvbnN0IGggPSBuZXcgQ29udmV4UG9seWhlZHJvbih7CiAgICAgICAgdmVydGljZXMsCiAgICAgICAgZmFjZXMsCiAgICAgICAgYXhlcwogICAgICB9KTsKICAgICAgdGhpcy5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24gPSBoOwogICAgICBoLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbDsKICAgIH0KICAgIC8qKgogICAgICogQ2FsY3VsYXRlIHRoZSBpbmVydGlhIG9mIHRoZSBib3guCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHsKICAgICAgQm94LmNhbGN1bGF0ZUluZXJ0aWEodGhpcy5oYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICBzdGF0aWMgY2FsY3VsYXRlSW5lcnRpYShoYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGUgPSBoYWxmRXh0ZW50czsKICAgICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnogKiAyICogZS56KTsKICAgICAgdGFyZ2V0LnkgPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS54ICogMiAqIGUueCArIDIgKiBlLnogKiAyICogZS56KTsKICAgICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnggKiAyICogZS54KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBib3ggNiBzaWRlIG5vcm1hbHMKICAgICAqIEBwYXJhbSBzaXhUYXJnZXRWZWN0b3JzIEFuIGFycmF5IG9mIDYgdmVjdG9ycywgdG8gc3RvcmUgdGhlIHJlc3VsdGluZyBzaWRlIG5vcm1hbHMgaW4uCiAgICAgKiBAcGFyYW0gcXVhdCBPcmllbnRhdGlvbiB0byBhcHBseSB0byB0aGUgbm9ybWFsIHZlY3RvcnMuIElmIG5vdCBwcm92aWRlZCwgdGhlIHZlY3RvcnMgd2lsbCBiZSBpbiByZXNwZWN0IHRvIHRoZSBsb2NhbCBmcmFtZS4KICAgICAqLwoKCiAgICBnZXRTaWRlTm9ybWFscyhzaXhUYXJnZXRWZWN0b3JzLCBxdWF0KSB7CiAgICAgIGNvbnN0IHNpZGVzID0gc2l4VGFyZ2V0VmVjdG9yczsKICAgICAgY29uc3QgZXggPSB0aGlzLmhhbGZFeHRlbnRzOwogICAgICBzaWRlc1swXS5zZXQoZXgueCwgMCwgMCk7CiAgICAgIHNpZGVzWzFdLnNldCgwLCBleC55LCAwKTsKICAgICAgc2lkZXNbMl0uc2V0KDAsIDAsIGV4LnopOwogICAgICBzaWRlc1szXS5zZXQoLWV4LngsIDAsIDApOwogICAgICBzaWRlc1s0XS5zZXQoMCwgLWV4LnksIDApOwogICAgICBzaWRlc1s1XS5zZXQoMCwgMCwgLWV4LnopOwoKICAgICAgaWYgKHF1YXQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBzaWRlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgcXVhdC52bXVsdChzaWRlc1tpXSwgc2lkZXNbaV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHNpZGVzOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSB2b2x1bWUgb2YgdGhlIGJveC4KICAgICAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiA4LjAgKiB0aGlzLmhhbGZFeHRlbnRzLnggKiB0aGlzLmhhbGZFeHRlbnRzLnkgKiB0aGlzLmhhbGZFeHRlbnRzLno7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB0aGlzLmhhbGZFeHRlbnRzLmxlbmd0aCgpOwogICAgfQogICAgLyoqCiAgICAgKiBmb3JFYWNoV29ybGRDb3JuZXIKICAgICAqLwoKCiAgICBmb3JFYWNoV29ybGRDb3JuZXIocG9zLCBxdWF0LCBjYWxsYmFjaykgewogICAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgY29uc3QgY29ybmVycyA9IFtbZS54LCBlLnksIGUuel0sIFstZS54LCBlLnksIGUuel0sIFstZS54LCAtZS55LCBlLnpdLCBbLWUueCwgLWUueSwgLWUuel0sIFtlLngsIC1lLnksIC1lLnpdLCBbZS54LCBlLnksIC1lLnpdLCBbLWUueCwgZS55LCAtZS56XSwgW2UueCwgLWUueSwgZS56XV07CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvcm5lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICB3b3JsZENvcm5lclRlbXBQb3Muc2V0KGNvcm5lcnNbaV1bMF0sIGNvcm5lcnNbaV1bMV0sIGNvcm5lcnNbaV1bMl0pOwogICAgICAgIHF1YXQudm11bHQod29ybGRDb3JuZXJUZW1wUG9zLCB3b3JsZENvcm5lclRlbXBQb3MpOwogICAgICAgIHBvcy52YWRkKHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTsKICAgICAgICBjYWxsYmFjayh3b3JsZENvcm5lclRlbXBQb3MueCwgd29ybGRDb3JuZXJUZW1wUG9zLnksIHdvcmxkQ29ybmVyVGVtcFBvcy56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBjYWxjdWxhdGVXb3JsZEFBQkIKICAgICAqLwoKCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgd29ybGRDb3JuZXJzVGVtcFswXS5zZXQoZS54LCBlLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMV0uc2V0KC1lLngsIGUueSwgZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFsyXS5zZXQoLWUueCwgLWUueSwgZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFszXS5zZXQoLWUueCwgLWUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNF0uc2V0KGUueCwgLWUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNV0uc2V0KGUueCwgZS55LCAtZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFs2XS5zZXQoLWUueCwgZS55LCAtZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFs3XS5zZXQoZS54LCAtZS55LCBlLnopOwogICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbMF07CiAgICAgIHF1YXQudm11bHQod2MsIHdjKTsKICAgICAgcG9zLnZhZGQod2MsIHdjKTsKICAgICAgbWF4LmNvcHkod2MpOwogICAgICBtaW4uY29weSh3Yyk7CgogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IDg7IGkrKykgewogICAgICAgIGNvbnN0IHdjID0gd29ybGRDb3JuZXJzVGVtcFtpXTsKICAgICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7CiAgICAgICAgcG9zLnZhZGQod2MsIHdjKTsKICAgICAgICBjb25zdCB4ID0gd2MueDsKICAgICAgICBjb25zdCB5ID0gd2MueTsKICAgICAgICBjb25zdCB6ID0gd2MuejsKCiAgICAgICAgaWYgKHggPiBtYXgueCkgewogICAgICAgICAgbWF4LnggPSB4OwogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPiBtYXgueSkgewogICAgICAgICAgbWF4LnkgPSB5OwogICAgICAgIH0KCiAgICAgICAgaWYgKHogPiBtYXgueikgewogICAgICAgICAgbWF4LnogPSB6OwogICAgICAgIH0KCiAgICAgICAgaWYgKHggPCBtaW4ueCkgewogICAgICAgICAgbWluLnggPSB4OwogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPCBtaW4ueSkgewogICAgICAgICAgbWluLnkgPSB5OwogICAgICAgIH0KCiAgICAgICAgaWYgKHogPCBtaW4ueikgewogICAgICAgICAgbWluLnogPSB6OwogICAgICAgIH0KICAgICAgfSAvLyBHZXQgZWFjaCBheGlzIG1heAogICAgICAvLyBtaW4uc2V0KEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTsKICAgICAgLy8gbWF4LnNldCgtSW5maW5pdHksLUluZmluaXR5LC1JbmZpbml0eSk7CiAgICAgIC8vIHRoaXMuZm9yRWFjaFdvcmxkQ29ybmVyKHBvcyxxdWF0LGZ1bmN0aW9uKHgseSx6KXsKICAgICAgLy8gICAgIGlmKHggPiBtYXgueCl7CiAgICAgIC8vICAgICAgICAgbWF4LnggPSB4OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeSA+IG1heC55KXsKICAgICAgLy8gICAgICAgICBtYXgueSA9IHk7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih6ID4gbWF4LnopewogICAgICAvLyAgICAgICAgIG1heC56ID0gejsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHggPCBtaW4ueCl7CiAgICAgIC8vICAgICAgICAgbWluLnggPSB4OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeSA8IG1pbi55KXsKICAgICAgLy8gICAgICAgICBtaW4ueSA9IHk7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih6IDwgbWluLnopewogICAgICAvLyAgICAgICAgIG1pbi56ID0gejsKICAgICAgLy8gICAgIH0KICAgICAgLy8gfSk7CgogICAgfQoKICB9CgogIGNvbnN0IHdvcmxkQ29ybmVyVGVtcFBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgd29ybGRDb3JuZXJzVGVtcCA9IFtuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpXTsKICAvKioKICAgKiBCT0RZX1RZUEVTCiAgICovCgogIGNvbnN0IEJPRFlfVFlQRVMgPSB7CiAgICAvKiogRFlOQU1JQyAqLwogICAgRFlOQU1JQzogMSwKCiAgICAvKiogU1RBVElDICovCiAgICBTVEFUSUM6IDIsCgogICAgLyoqIEtJTkVNQVRJQyAqLwogICAgS0lORU1BVElDOiA0CiAgfTsKICAvKioKICAgKiBCb2R5VHlwZQogICAqLwoKICAvKioKICAgKiBCT0RZX1NMRUVQX1NUQVRFUwogICAqLwoKICBjb25zdCBCT0RZX1NMRUVQX1NUQVRFUyA9IHsKICAgIC8qKiBBV0FLRSAqLwogICAgQVdBS0U6IDAsCgogICAgLyoqIFNMRUVQWSAqLwogICAgU0xFRVBZOiAxLAoKICAgIC8qKiBTTEVFUElORyAqLwogICAgU0xFRVBJTkc6IDIKICB9OwogIC8qKgogICAqIEJvZHlTbGVlcFN0YXRlCiAgICovCgogIC8qKgogICAqIEJhc2UgY2xhc3MgZm9yIGFsbCBib2R5IHR5cGVzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNoYXBlID0gbmV3IENBTk5PTi5TcGhlcmUoMSkKICAgKiAgICAgY29uc3QgYm9keSA9IG5ldyBDQU5OT04uQm9keSh7CiAgICogICAgICAgbWFzczogMSwKICAgKiAgICAgICBzaGFwZSwKICAgKiAgICAgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShib2R5KQogICAqLwoKICBjbGFzcyBCb2R5IGV4dGVuZHMgRXZlbnRUYXJnZXQgewogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIHR3byBib2RpZXMgY29sbGlkZS4gVGhpcyBldmVudCBpcyBkaXNwYXRjaGVkIG9uIGVhY2gKICAgICAqIG9mIHRoZSB0d28gYm9kaWVzIGludm9sdmVkIGluIHRoZSBjb2xsaXNpb24uCiAgICAgKiBAZXZlbnQgY29sbGlkZQogICAgICogQHBhcmFtIGJvZHkgVGhlIGJvZHkgdGhhdCB3YXMgaW52b2x2ZWQgaW4gdGhlIGNvbGxpc2lvbi4KICAgICAqIEBwYXJhbSBjb250YWN0IFRoZSBkZXRhaWxzIG9mIHRoZSBjb2xsaXNpb24uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEEgZHluYW1pYyBib2R5IGlzIGZ1bGx5IHNpbXVsYXRlZC4gQ2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHRoZSB1c2VyLCBidXQgbm9ybWFsbHkgdGhleSBtb3ZlIGFjY29yZGluZyB0byBmb3JjZXMuIEEgZHluYW1pYyBib2R5IGNhbiBjb2xsaWRlIHdpdGggYWxsIGJvZHkgdHlwZXMuIEEgZHluYW1pYyBib2R5IGFsd2F5cyBoYXMgZmluaXRlLCBub24temVybyBtYXNzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIHN0YXRpYyBib2R5IGRvZXMgbm90IG1vdmUgZHVyaW5nIHNpbXVsYXRpb24gYW5kIGJlaGF2ZXMgYXMgaWYgaXQgaGFzIGluZmluaXRlIG1hc3MuIFN0YXRpYyBib2RpZXMgY2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHNldHRpbmcgdGhlIHBvc2l0aW9uIG9mIHRoZSBib2R5LiBUaGUgdmVsb2NpdHkgb2YgYSBzdGF0aWMgYm9keSBpcyBhbHdheXMgemVyby4gU3RhdGljIGJvZGllcyBkbyBub3QgY29sbGlkZSB3aXRoIG90aGVyIHN0YXRpYyBvciBraW5lbWF0aWMgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIGtpbmVtYXRpYyBib2R5IG1vdmVzIHVuZGVyIHNpbXVsYXRpb24gYWNjb3JkaW5nIHRvIGl0cyB2ZWxvY2l0eS4gVGhleSBkbyBub3QgcmVzcG9uZCB0byBmb3JjZXMuIFRoZXkgY2FuIGJlIG1vdmVkIG1hbnVhbGx5LCBidXQgbm9ybWFsbHkgYSBraW5lbWF0aWMgYm9keSBpcyBtb3ZlZCBieSBzZXR0aW5nIGl0cyB2ZWxvY2l0eS4gQSBraW5lbWF0aWMgYm9keSBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBLaW5lbWF0aWMgYm9kaWVzIGRvIG5vdCBjb2xsaWRlIHdpdGggb3RoZXIgc3RhdGljIG9yIGtpbmVtYXRpYyBib2RpZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFXQUtFCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNMRUVQWQogICAgICovCgogICAgLyoqCiAgICAgKiBTTEVFUElORwogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgc2xlZXBpbmcgYm9keSBoYXMgd29rZW4gdXAuCiAgICAgKiBAZXZlbnQgd2FrZXVwCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBnb25lIGluIHRvIHRoZSBzbGVlcHkgc3RhdGUuCiAgICAgKiBAZXZlbnQgc2xlZXB5CiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBmYWxsZW4gYXNsZWVwLgogICAgICogQGV2ZW50IHNsZWVwCiAgICAgKi8KCiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBvc2l0aW9uIG9mIGJvZHkgaW4gV29ybGQuYm9kaWVzLiBVcGRhdGVkIGJ5IFdvcmxkIGFuZCB1c2VkIGluIEFycmF5Q29sbGlzaW9uTWF0cml4LgogICAgICovCgogICAgLyoqCiAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIHdvcmxkIHRoZSBib2R5IGlzIGxpdmluZyBpbi4KICAgICAqLwoKICAgIC8qKgogICAgICogQ2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIEJFRk9SRSBzdGVwcGluZyB0aGUgc3lzdGVtLiBVc2UgaXQgdG8gYXBwbHkgZm9yY2VzLCBmb3IgZXhhbXBsZS4gSW5zaWRlIHRoZSBmdW5jdGlvbiwgInRoaXMiIHdpbGwgcmVmZXIgdG8gdGhpcyBCb2R5IG9iamVjdC4gRGVwcmVjYXRlZCAtIHVzZSBXb3JsZCBldmVudHMgaW5zdGVhZC4KICAgICAqIEBkZXByZWNhdGVkIFVzZSBXb3JsZCBldmVudHMgaW5zdGVhZAogICAgICovCgogICAgLyoqCiAgICAgKiBDYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIHVzZWQgQUZURVIgc3RlcHBpbmcgdGhlIHN5c3RlbS4gSW5zaWRlIHRoZSBmdW5jdGlvbiwgInRoaXMiIHdpbGwgcmVmZXIgdG8gdGhpcyBCb2R5IG9iamVjdC4gRGVwcmVjYXRlZCAtIHVzZSBXb3JsZCBldmVudHMgaW5zdGVhZC4KICAgICAqIEBkZXByZWNhdGVkIFVzZSBXb3JsZCBldmVudHMgaW5zdGVhZAogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgY29sbGlzaW9uIGdyb3VwIHRoZSBib2R5IGJlbG9uZ3MgdG8uCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBjb2xsaXNpb24gZ3JvdXAgdGhlIGJvZHkgY2FuIGNvbGxpZGUgd2l0aC4KICAgICAqIEBkZWZhdWx0IC0xCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZCAtIGkuZS4gImNvbGxpZGUiIGV2ZW50cyB3aWxsIGJlIHJhaXNlZCwgYnV0IGZvcmNlcyB3aWxsIG5vdCBiZSBhbHRlcmVkLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBzcGFjZSBwb3NpdGlvbiBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogSW50ZXJwb2xhdGVkIHBvc2l0aW9uIG9mIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBJbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBzcGFjZSB2ZWxvY2l0eSBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogSW5pdGlhbCB2ZWxvY2l0eSBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogTGluZWFyIGZvcmNlIG9uIHRoZSBib2R5IGluIHdvcmxkIHNwYWNlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbWFzcyBvZiB0aGUgYm9keS4KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHBoeXNpY3MgbWF0ZXJpYWwgb2YgdGhlIGJvZHkuIEl0IGRlZmluZXMgdGhlIGJvZHkgaW50ZXJhY3Rpb24gd2l0aCBvdGhlciBib2RpZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEhvdyBtdWNoIHRvIGRhbXAgdGhlIGJvZHkgdmVsb2NpdHkgZWFjaCBzdGVwLiBJdCBjYW4gZ28gZnJvbSAwIHRvIDEuCiAgICAgKiBAZGVmYXVsdCAwLjAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIE9uZSBvZjogYEJvZHkuRFlOQU1JQ2AsIGBCb2R5LlNUQVRJQ2AgYW5kIGBCb2R5LktJTkVNQVRJQ2AuCiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHRydWUsIHRoZSBib2R5IHdpbGwgYXV0b21hdGljYWxseSBmYWxsIHRvIHNsZWVwLgogICAgICogQGRlZmF1bHQgdHJ1ZQogICAgICovCgogICAgLyoqCiAgICAgKiBDdXJyZW50IHNsZWVwIHN0YXRlLgogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0aGUgc3BlZWQgKHRoZSBub3JtIG9mIHRoZSB2ZWxvY2l0eSkgaXMgc21hbGxlciB0aGFuIHRoaXMgdmFsdWUsIHRoZSBib2R5IGlzIGNvbnNpZGVyZWQgc2xlZXB5LgogICAgICogQGRlZmF1bHQgMC4xCiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHRoZSBib2R5IGhhcyBiZWVuIHNsZWVweSBmb3IgdGhpcyBzbGVlcFRpbWVMaW1pdCBzZWNvbmRzLCBpdCBpcyBjb25zaWRlcmVkIHNsZWVwaW5nLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBzcGFjZSByb3RhdGlvbmFsIGZvcmNlIG9uIHRoZSBib2R5LCBhcm91bmQgY2VudGVyIG9mIG1hc3MuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkIHNwYWNlIG9yaWVudGF0aW9uIG9mIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBJbml0aWFsIHF1YXRlcm5pb24gb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEludGVycG9sYXRlZCBvcmllbnRhdGlvbiBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogQW5ndWxhciB2ZWxvY2l0eSBvZiB0aGUgYm9keSwgaW4gd29ybGQgc3BhY2UuIFRoaW5rIG9mIHRoZSBhbmd1bGFyIHZlbG9jaXR5IGFzIGEgdmVjdG9yLCB3aGljaCB0aGUgYm9keSByb3RhdGVzIGFyb3VuZC4gVGhlIGxlbmd0aCBvZiB0aGlzIHZlY3RvciBkZXRlcm1pbmVzIGhvdyBmYXN0IChpbiByYWRpYW5zIHBlciBzZWNvbmQpIHRoZSBib2R5IHJvdGF0ZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEluaXRpYWwgYW5ndWxhciB2ZWxvY2l0eSBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogTGlzdCBvZiBTaGFwZXMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgdG8gdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBvc2l0aW9uIG9mIGVhY2ggU2hhcGUgaW4gdGhlIGJvZHksIGdpdmVuIGluIGxvY2FsIEJvZHkgc3BhY2UuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE9yaWVudGF0aW9uIG9mIGVhY2ggU2hhcGUsIGdpdmVuIGluIGxvY2FsIEJvZHkgc3BhY2UuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbmVydGlhIG9mIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBTZXQgdG8gdHJ1ZSBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgYm9keSB0byByb3RhdGUuIE1ha2Ugc3VyZSB0byBydW4gLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCkgaWYgeW91IGNoYW5nZSB0aGlzIGFmdGVyIHRoZSBib2R5IGNyZWF0aW9uLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogSG93IG11Y2ggdG8gZGFtcCB0aGUgYm9keSBhbmd1bGFyIHZlbG9jaXR5IGVhY2ggc3RlcC4gSXQgY2FuIGdvIGZyb20gMCB0byAxLgogICAgICogQGRlZmF1bHQgMC4wMQogICAgICovCgogICAgLyoqCiAgICAgKiBVc2UgdGhpcyBwcm9wZXJ0eSB0byBsaW1pdCB0aGUgbW90aW9uIGFsb25nIGFueSB3b3JsZCBheGlzLiAoMSwxLDEpIHdpbGwgYWxsb3cgbW90aW9uIGFsb25nIGFsbCBheGVzIHdoaWxlICgwLDAsMCkgYWxsb3dzIG5vbmUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZSB0aGlzIHByb3BlcnR5IHRvIGxpbWl0IHRoZSByb3RhdGlvbmFsIG1vdGlvbiBhbG9uZyBhbnkgd29ybGQgYXhpcy4gKDEsMSwxKSB3aWxsIGFsbG93IHJvdGF0aW9uIGFsb25nIGFsbCBheGVzIHdoaWxlICgwLDAsMCkgYWxsb3dzIG5vbmUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkIHNwYWNlIGJvdW5kaW5nIGJveCBvZiB0aGUgYm9keSBhbmQgaXRzIHNoYXBlcy4KICAgICAqLwoKICAgIC8qKgogICAgICogSW5kaWNhdGVzIGlmIHRoZSBBQUJCIG5lZWRzIHRvIGJlIHVwZGF0ZWQgYmVmb3JlIHVzZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVG90YWwgYm91bmRpbmcgcmFkaXVzIG9mIHRoZSBCb2R5IGluY2x1ZGluZyBpdHMgc2hhcGVzLCByZWxhdGl2ZSB0byBib2R5LnBvc2l0aW9uLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVuIHRydWUgdGhlIGJvZHkgYmVoYXZlcyBsaWtlIGEgdHJpZ2dlci4gSXQgZG9lcyBub3QgY29sbGlkZQogICAgICogd2l0aCBvdGhlciBib2RpZXMgYnV0IGNvbGxpc2lvbiBldmVudHMgYXJlIHN0aWxsIHRyaWdnZXJlZC4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLmlkID0gdm9pZCAwOwogICAgICB0aGlzLmluZGV4ID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLnByZVN0ZXAgPSB2b2lkIDA7CiAgICAgIHRoaXMucG9zdFN0ZXAgPSB2b2lkIDA7CiAgICAgIHRoaXMudmxhbWJkYSA9IHZvaWQgMDsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHZvaWQgMDsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwOwogICAgICB0aGlzLnBvc2l0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUG9zaXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuaW5pdFBvc2l0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnZlbG9jaXR5ID0gdm9pZCAwOwogICAgICB0aGlzLmluaXRWZWxvY2l0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5mb3JjZSA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXNzID0gdm9pZCAwOwogICAgICB0aGlzLmludk1hc3MgPSB2b2lkIDA7CiAgICAgIHRoaXMubWF0ZXJpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMubGluZWFyRGFtcGluZyA9IHZvaWQgMDsKICAgICAgdGhpcy50eXBlID0gdm9pZCAwOwogICAgICB0aGlzLmFsbG93U2xlZXAgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IHZvaWQgMDsKICAgICAgdGhpcy5zbGVlcFNwZWVkTGltaXQgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2xlZXBUaW1lTGltaXQgPSB2b2lkIDA7CiAgICAgIHRoaXMudGltZUxhc3RTbGVlcHkgPSB2b2lkIDA7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHZvaWQgMDsKICAgICAgdGhpcy50b3JxdWUgPSB2b2lkIDA7CiAgICAgIHRoaXMucXVhdGVybmlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5pbml0UXVhdGVybmlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5wcmV2aW91c1F1YXRlcm5pb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW5pdEFuZ3VsYXJWZWxvY2l0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5zaGFwZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzID0gdm9pZCAwOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zID0gdm9pZCAwOwogICAgICB0aGlzLmluZXJ0aWEgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW52SW5lcnRpYSA9IHZvaWQgMDsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdm9pZCAwOwogICAgICB0aGlzLmludkluZXJ0aWFTb2x2ZSA9IHZvaWQgMDsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZSA9IHZvaWQgMDsKICAgICAgdGhpcy5maXhlZFJvdGF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLmFuZ3VsYXJEYW1waW5nID0gdm9pZCAwOwogICAgICB0aGlzLmxpbmVhckZhY3RvciA9IHZvaWQgMDsKICAgICAgdGhpcy5hbmd1bGFyRmFjdG9yID0gdm9pZCAwOwogICAgICB0aGlzLmFhYmIgPSB2b2lkIDA7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdm9pZCAwOwogICAgICB0aGlzLmJvdW5kaW5nUmFkaXVzID0gdm9pZCAwOwogICAgICB0aGlzLndsYW1iZGEgPSB2b2lkIDA7CiAgICAgIHRoaXMuaXNUcmlnZ2VyID0gdm9pZCAwOwogICAgICB0aGlzLmlkID0gQm9keS5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5pbmRleCA9IC0xOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy5wcmVTdGVwID0gbnVsbDsKICAgICAgdGhpcy5wb3N0U3RlcCA9IG51bGw7CiAgICAgIHRoaXMudmxhbWJkYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5jb2xsaXNpb25SZXNwb25zZSA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID09PSAnYm9vbGVhbicgPyBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlIDogdHJ1ZTsKICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmluaXRQb3NpdGlvbiA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5wb3NpdGlvbikgewogICAgICAgIHRoaXMucG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5pbml0UG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy52ZWxvY2l0eSkgewogICAgICAgIHRoaXMudmVsb2NpdHkuY29weShvcHRpb25zLnZlbG9jaXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5pbml0VmVsb2NpdHkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmZvcmNlID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgbWFzcyA9IHR5cGVvZiBvcHRpb25zLm1hc3MgPT09ICdudW1iZXInID8gb3B0aW9ucy5tYXNzIDogMDsKICAgICAgdGhpcy5tYXNzID0gbWFzczsKICAgICAgdGhpcy5pbnZNYXNzID0gbWFzcyA+IDAgPyAxLjAgLyBtYXNzIDogMDsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgfHwgbnVsbDsKICAgICAgdGhpcy5saW5lYXJEYW1waW5nID0gdHlwZW9mIG9wdGlvbnMubGluZWFyRGFtcGluZyA9PT0gJ251bWJlcicgPyBvcHRpb25zLmxpbmVhckRhbXBpbmcgOiAwLjAxOwogICAgICB0aGlzLnR5cGUgPSBtYXNzIDw9IDAuMCA/IEJvZHkuU1RBVElDIDogQm9keS5EWU5BTUlDOwoKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnR5cGUgPT09IHR5cGVvZiBCb2R5LlNUQVRJQykgewogICAgICAgIHRoaXMudHlwZSA9IG9wdGlvbnMudHlwZTsKICAgICAgfQoKICAgICAgdGhpcy5hbGxvd1NsZWVwID0gdHlwZW9mIG9wdGlvbnMuYWxsb3dTbGVlcCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFsbG93U2xlZXAgOiB0cnVlOwogICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LkFXQUtFOwogICAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCA6IDAuMTsKICAgICAgdGhpcy5zbGVlcFRpbWVMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwVGltZUxpbWl0ICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuc2xlZXBUaW1lTGltaXQgOiAxOwogICAgICB0aGlzLnRpbWVMYXN0U2xlZXB5ID0gMDsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICAgIHRoaXMudG9ycXVlID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5xdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgdGhpcy5pbml0UXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICAgIHRoaXMuaW5pdFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLmludGVycG9sYXRlZFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CgogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5hbmd1bGFyVmVsb2NpdHkpIHsKICAgICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5jb3B5KG9wdGlvbnMuYW5ndWxhclZlbG9jaXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5pbml0QW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5zaGFwZXMgPSBbXTsKICAgICAgdGhpcy5zaGFwZU9mZnNldHMgPSBbXTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucyA9IFtdOwogICAgICB0aGlzLmluZXJ0aWEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZCA9IG5ldyBNYXQzKCk7CiAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gMDsKICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlID0gbmV3IE1hdDMoKTsKICAgICAgdGhpcy5maXhlZFJvdGF0aW9uID0gdHlwZW9mIG9wdGlvbnMuZml4ZWRSb3RhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmZpeGVkUm90YXRpb24gOiBmYWxzZTsKICAgICAgdGhpcy5hbmd1bGFyRGFtcGluZyA9IHR5cGVvZiBvcHRpb25zLmFuZ3VsYXJEYW1waW5nICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYW5ndWxhckRhbXBpbmcgOiAwLjAxOwogICAgICB0aGlzLmxpbmVhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpOwoKICAgICAgaWYgKG9wdGlvbnMubGluZWFyRmFjdG9yKSB7CiAgICAgICAgdGhpcy5saW5lYXJGYWN0b3IuY29weShvcHRpb25zLmxpbmVhckZhY3Rvcik7CiAgICAgIH0KCiAgICAgIHRoaXMuYW5ndWxhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpOwoKICAgICAgaWYgKG9wdGlvbnMuYW5ndWxhckZhY3RvcikgewogICAgICAgIHRoaXMuYW5ndWxhckZhY3Rvci5jb3B5KG9wdGlvbnMuYW5ndWxhckZhY3Rvcik7CiAgICAgIH0KCiAgICAgIHRoaXMuYWFiYiA9IG5ldyBBQUJCKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IDA7CiAgICAgIHRoaXMud2xhbWJkYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaXNUcmlnZ2VyID0gQm9vbGVhbihvcHRpb25zLmlzVHJpZ2dlcik7CgogICAgICBpZiAob3B0aW9ucy5zaGFwZSkgewogICAgICAgIHRoaXMuYWRkU2hhcGUob3B0aW9ucy5zaGFwZSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgIH0KICAgIC8qKgogICAgICogV2FrZSB0aGUgYm9keSB1cC4KICAgICAqLwoKCiAgICB3YWtlVXAoKSB7CiAgICAgIGNvbnN0IHByZXZTdGF0ZSA9IHRoaXMuc2xlZXBTdGF0ZTsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CgogICAgICBpZiAocHJldlN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEJvZHkud2FrZXVwRXZlbnQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEZvcmNlIGJvZHkgc2xlZXAKICAgICAqLwoKCiAgICBzbGVlcCgpIHsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5TTEVFUElORzsKICAgICAgdGhpcy52ZWxvY2l0eS5zZXQoMCwgMCwgMCk7CiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnNldCgwLCAwLCAwKTsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIENhbGxlZCBldmVyeSB0aW1lc3RlcCB0byB1cGRhdGUgaW50ZXJuYWwgc2xlZXAgdGltZXIgYW5kIGNoYW5nZSBzbGVlcCBzdGF0ZSBpZiBuZWVkZWQuCiAgICAgKiBAcGFyYW0gdGltZSBUaGUgd29ybGQgdGltZSBpbiBzZWNvbmRzCiAgICAgKi8KCgogICAgc2xlZXBUaWNrKHRpbWUpIHsKICAgICAgaWYgKHRoaXMuYWxsb3dTbGVlcCkgewogICAgICAgIGNvbnN0IHNsZWVwU3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7CiAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkID0gdGhpcy52ZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCkgKyB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWQgPSB0aGlzLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBzcGVlZFNxdWFyZWQgPCBzcGVlZExpbWl0U3F1YXJlZCkgewogICAgICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5TTEVFUFk7IC8vIFNsZWVweQoKICAgICAgICAgIHRoaXMudGltZUxhc3RTbGVlcHkgPSB0aW1lOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEJvZHkuc2xlZXB5RXZlbnQpOwogICAgICAgIH0gZWxzZSBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUFkgJiYgc3BlZWRTcXVhcmVkID4gc3BlZWRMaW1pdFNxdWFyZWQpIHsKICAgICAgICAgIHRoaXMud2FrZVVwKCk7IC8vIFdha2UgdXAKICAgICAgICB9IGVsc2UgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBZICYmIHRpbWUgLSB0aGlzLnRpbWVMYXN0U2xlZXB5ID4gdGhpcy5zbGVlcFRpbWVMaW1pdCkgewogICAgICAgICAgdGhpcy5zbGVlcCgpOyAvLyBTbGVlcGluZwoKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVwRXZlbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBJZiB0aGUgYm9keSBpcyBzbGVlcGluZywgaXQgc2hvdWxkIGJlIGltbW92YWJsZSAvIGhhdmUgaW5maW5pdGUgbWFzcyBkdXJpbmcgc29sdmUuIFdlIHNvbHZlIGl0IGJ5IGhhdmluZyBhIHNlcGFyYXRlICJzb2x2ZSBtYXNzIi4KICAgICAqLwoKCiAgICB1cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCkgewogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HIHx8IHRoaXMudHlwZSA9PT0gQm9keS5LSU5FTUFUSUMpIHsKICAgICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IDA7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuc2V0WmVybygpOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkU29sdmUuc2V0WmVybygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdGhpcy5pbnZNYXNzOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlLmNvcHkodGhpcy5pbnZJbmVydGlhKTsKICAgICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlLmNvcHkodGhpcy5pbnZJbmVydGlhV29ybGQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSB3b3JsZCBwb2ludCB0byBsb2NhbCBib2R5IGZyYW1lLgogICAgICovCgoKICAgIHBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkUG9pbnQsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHsKICAgICAgd29ybGRQb2ludC52c3ViKHRoaXMucG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHRoaXMucXVhdGVybmlvbi5jb25qdWdhdGUoKS52bXVsdChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSB3b3JsZCB2ZWN0b3IgdG8gbG9jYWwgYm9keSBmcmFtZS4KICAgICAqLwoKCiAgICB2ZWN0b3JUb0xvY2FsRnJhbWUod29ybGRWZWN0b3IsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHsKICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvbmp1Z2F0ZSgpLnZtdWx0KHdvcmxkVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgbG9jYWwgYm9keSBwb2ludCB0byB3b3JsZCBmcmFtZS4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGRGcmFtZShsb2NhbFBvaW50LCByZXN1bHQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFBvaW50LCByZXN1bHQpOwogICAgICByZXN1bHQudmFkZCh0aGlzLnBvc2l0aW9uLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgbG9jYWwgYm9keSBwb2ludCB0byB3b3JsZCBmcmFtZS4KICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHsKICAgICAgdGhpcy5xdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBzaGFwZSB0byB0aGUgYm9keSB3aXRoIGEgbG9jYWwgb2Zmc2V0IGFuZCBvcmllbnRhdGlvbi4KICAgICAqIEByZXR1cm4gVGhlIGJvZHkgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGFkZFNoYXBlKHNoYXBlLCBfb2Zmc2V0LCBfb3JpZW50YXRpb24pIHsKICAgICAgY29uc3Qgb2Zmc2V0ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKF9vZmZzZXQpIHsKICAgICAgICBvZmZzZXQuY29weShfb2Zmc2V0KTsKICAgICAgfQoKICAgICAgaWYgKF9vcmllbnRhdGlvbikgewogICAgICAgIG9yaWVudGF0aW9uLmNvcHkoX29yaWVudGF0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5zaGFwZXMucHVzaChzaGFwZSk7CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzLnB1c2gob2Zmc2V0KTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucy5wdXNoKG9yaWVudGF0aW9uKTsKICAgICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgc2hhcGUuYm9keSA9IHRoaXM7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYSBzaGFwZSBmcm9tIHRoZSBib2R5LgogICAgICogQHJldHVybiBUaGUgYm9keSBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlU2hhcGUoc2hhcGUpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNoYXBlcy5pbmRleE9mKHNoYXBlKTsKCiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ1NoYXBlIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgYm9keScpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICB0aGlzLnNoYXBlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT2Zmc2V0cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1JhZGl1cygpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHNoYXBlLmJvZHkgPSBudWxsOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBib3VuZGluZyByYWRpdXMgb2YgdGhlIGJvZHkuIFNob3VsZCBiZSBkb25lIGlmIGFueSBvZiB0aGUgc2hhcGVzIGFyZSBjaGFuZ2VkLgogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nUmFkaXVzKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IE4gPSBzaGFwZXMubGVuZ3RoOwogICAgICBsZXQgcmFkaXVzID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tpXTsKICAgICAgICBzaGFwZS51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICAgIGNvbnN0IG9mZnNldCA9IHNoYXBlT2Zmc2V0c1tpXS5sZW5ndGgoKTsKICAgICAgICBjb25zdCByID0gc2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXM7CgogICAgICAgIGlmIChvZmZzZXQgKyByID4gcmFkaXVzKSB7CiAgICAgICAgICByYWRpdXMgPSBvZmZzZXQgKyByOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IHJhZGl1czsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgLmFhYmIKICAgICAqLwoKCiAgICB1cGRhdGVBQUJCKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IHNoYXBlT3JpZW50YXRpb25zID0gdGhpcy5zaGFwZU9yaWVudGF0aW9uczsKICAgICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7CiAgICAgIGNvbnN0IG9mZnNldCA9IHRtcFZlYzsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSB0bXBRdWF0OwogICAgICBjb25zdCBib2R5UXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgYWFiYiA9IHRoaXMuYWFiYjsKICAgICAgY29uc3Qgc2hhcGVBQUJCID0gdXBkYXRlQUFCQl9zaGFwZUFBQkI7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07IC8vIEdldCBzaGFwZSB3b3JsZCBwb3NpdGlvbgoKICAgICAgICBib2R5UXVhdC52bXVsdChzaGFwZU9mZnNldHNbaV0sIG9mZnNldCk7CiAgICAgICAgb2Zmc2V0LnZhZGQodGhpcy5wb3NpdGlvbiwgb2Zmc2V0KTsgLy8gR2V0IHNoYXBlIHdvcmxkIHF1YXRlcm5pb24KCiAgICAgICAgYm9keVF1YXQubXVsdChzaGFwZU9yaWVudGF0aW9uc1tpXSwgb3JpZW50YXRpb24pOyAvLyBHZXQgc2hhcGUgQUFCQgoKICAgICAgICBzaGFwZS5jYWxjdWxhdGVXb3JsZEFBQkIob2Zmc2V0LCBvcmllbnRhdGlvbiwgc2hhcGVBQUJCLmxvd2VyQm91bmQsIHNoYXBlQUFCQi51cHBlckJvdW5kKTsKCiAgICAgICAgaWYgKGkgPT09IDApIHsKICAgICAgICAgIGFhYmIuY29weShzaGFwZUFBQkIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhYWJiLmV4dGVuZChzaGFwZUFBQkIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIGAuaW5lcnRpYVdvcmxkYCBhbmQgYC5pbnZJbmVydGlhV29ybGRgCiAgICAgKi8KCgogICAgdXBkYXRlSW5lcnRpYVdvcmxkKGZvcmNlKSB7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmludkluZXJ0aWE7CiAgICAgIGlmIChJLnggPT09IEkueSAmJiBJLnkgPT09IEkueiAmJiAhZm9yY2UpIDtlbHNlIHsKICAgICAgICBjb25zdCBtMSA9IHVpd19tMTsKICAgICAgICBjb25zdCBtMiA9IHVpd19tMjsKICAgICAgICBtMS5zZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHRoaXMucXVhdGVybmlvbik7CiAgICAgICAgbTEudHJhbnNwb3NlKG0yKTsKICAgICAgICBtMS5zY2FsZShJLCBtMSk7CiAgICAgICAgbTEubW11bHQobTIsIHRoaXMuaW52SW5lcnRpYVdvcmxkKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBmb3JjZSB0byBhIHBvaW50IG9mIHRoZSBib2R5LiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGJlIGEgcG9pbnQgb24gdGhlIEJvZHkgc3VyZmFjZS4KICAgICAqIEFwcGx5aW5nIGZvcmNlIHRoaXMgd2F5IHdpbGwgYWRkIHRvIEJvZHkuZm9yY2UgYW5kIEJvZHkudG9ycXVlLgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBhbW91bnQgb2YgZm9yY2UgdG8gYWRkLgogICAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5Rm9yY2UoZm9yY2UsIHJlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpKSB7CiAgICAgIC8vIE5lZWRlZD8KICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgZm9yY2UKCgogICAgICBjb25zdCByb3RGb3JjZSA9IEJvZHlfYXBwbHlGb3JjZV9yb3RGb3JjZTsKICAgICAgcmVsYXRpdmVQb2ludC5jcm9zcyhmb3JjZSwgcm90Rm9yY2UpOyAvLyBBZGQgbGluZWFyIGZvcmNlCgogICAgICB0aGlzLmZvcmNlLnZhZGQoZm9yY2UsIHRoaXMuZm9yY2UpOyAvLyBBZGQgcm90YXRpb25hbCBmb3JjZQoKICAgICAgdGhpcy50b3JxdWUudmFkZChyb3RGb3JjZSwgdGhpcy50b3JxdWUpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBmb3JjZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBmb3JjZSB2ZWN0b3IgdG8gYXBwbHksIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgYm9keSBmcmFtZS4KICAgICAqIEBwYXJhbSBsb2NhbFBvaW50IEEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5TG9jYWxGb3JjZShsb2NhbEZvcmNlLCBsb2NhbFBvaW50ID0gbmV3IFZlYzMoKSkgewogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkRm9yY2UgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV93b3JsZEZvcmNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEZvcmNlLCB3b3JsZEZvcmNlKTsKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgICAgdGhpcy5hcHBseUZvcmNlKHdvcmxkRm9yY2UsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IHRvcnF1ZSB0byB0aGUgYm9keS4KICAgICAqIEBwYXJhbSB0b3JxdWUgVGhlIGFtb3VudCBvZiB0b3JxdWUgdG8gYWRkLgogICAgICovCgoKICAgIGFwcGx5VG9ycXVlKHRvcnF1ZSkgewogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIEFkZCByb3RhdGlvbmFsIGZvcmNlCgoKICAgICAgdGhpcy50b3JxdWUudmFkZCh0b3JxdWUsIHRoaXMudG9ycXVlKTsKICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgaW1wdWxzZSB0byBhIHBvaW50IG9mIHRoZSBib2R5LiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGJlIGEgcG9pbnQgb24gdGhlIEJvZHkgc3VyZmFjZS4KICAgICAqIEFuIGltcHVsc2UgaXMgYSBmb3JjZSBhZGRlZCB0byBhIGJvZHkgZHVyaW5nIGEgc2hvcnQgcGVyaW9kIG9mIHRpbWUgKGltcHVsc2UgPSBmb3JjZSAqIHRpbWUpLgogICAgICogSW1wdWxzZXMgd2lsbCBiZSBhZGRlZCB0byBCb2R5LnZlbG9jaXR5IGFuZCBCb2R5LmFuZ3VsYXJWZWxvY2l0eS4KICAgICAqIEBwYXJhbSBpbXB1bHNlIFRoZSBhbW91bnQgb2YgaW1wdWxzZSB0byBhZGQuCiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQb2ludCBBIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpKSB7CiAgICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgewogICAgICAgIHRoaXMud2FrZVVwKCk7CiAgICAgIH0gLy8gQ29tcHV0ZSBwb2ludCBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgYm9keSBjZW50ZXIKCgogICAgICBjb25zdCByID0gcmVsYXRpdmVQb2ludDsgLy8gQ29tcHV0ZSBwcm9kdWNlZCBjZW50cmFsIGltcHVsc2UgdmVsb2NpdHkKCiAgICAgIGNvbnN0IHZlbG8gPSBCb2R5X2FwcGx5SW1wdWxzZV92ZWxvOwogICAgICB2ZWxvLmNvcHkoaW1wdWxzZSk7CiAgICAgIHZlbG8uc2NhbGUodGhpcy5pbnZNYXNzLCB2ZWxvKTsgLy8gQWRkIGxpbmVhciBpbXB1bHNlCgogICAgICB0aGlzLnZlbG9jaXR5LnZhZGQodmVsbywgdGhpcy52ZWxvY2l0eSk7IC8vIENvbXB1dGUgcHJvZHVjZWQgcm90YXRpb25hbCBpbXB1bHNlIHZlbG9jaXR5CgogICAgICBjb25zdCByb3RWZWxvID0gQm9keV9hcHBseUltcHVsc2Vfcm90VmVsbzsKICAgICAgci5jcm9zcyhpbXB1bHNlLCByb3RWZWxvKTsKICAgICAgLyoKICAgICAgIHJvdFZlbG8ueCAqPSB0aGlzLmludkluZXJ0aWEueDsKICAgICAgIHJvdFZlbG8ueSAqPSB0aGlzLmludkluZXJ0aWEueTsKICAgICAgIHJvdFZlbG8ueiAqPSB0aGlzLmludkluZXJ0aWEuejsKICAgICAgICovCgogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZC52bXVsdChyb3RWZWxvLCByb3RWZWxvKTsgLy8gQWRkIHJvdGF0aW9uYWwgSW1wdWxzZQoKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkudmFkZChyb3RWZWxvLCB0aGlzLmFuZ3VsYXJWZWxvY2l0eSk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGxvY2FsbHktZGVmaW5lZCBpbXB1bHNlIHRvIGEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLgogICAgICogQHBhcmFtIGxvY2FsUG9pbnQgQSBsb2NhbCBwb2ludCBpbiB0aGUgYm9keSB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlMb2NhbEltcHVsc2UobG9jYWxJbXB1bHNlLCBsb2NhbFBvaW50ID0gbmV3IFZlYzMoKSkgewogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkSW1wdWxzZSA9IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3JlbGF0aXZlUG9pbnQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEltcHVsc2UsIHdvcmxkSW1wdWxzZSk7CiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuYXBwbHlJbXB1bHNlKHdvcmxkSW1wdWxzZSwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgIH0KICAgIC8qKgogICAgICogU2hvdWxkIGJlIGNhbGxlZCB3aGVuZXZlciB5b3UgY2hhbmdlIHRoZSBib2R5IHNoYXBlIG9yIG1hc3MuCiAgICAgKi8KCgogICAgdXBkYXRlTWFzc1Byb3BlcnRpZXMoKSB7CiAgICAgIGNvbnN0IGhhbGZFeHRlbnRzID0gQm9keV91cGRhdGVNYXNzUHJvcGVydGllc19oYWxmRXh0ZW50czsKICAgICAgdGhpcy5pbnZNYXNzID0gdGhpcy5tYXNzID4gMCA/IDEuMCAvIHRoaXMubWFzcyA6IDA7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmluZXJ0aWE7CiAgICAgIGNvbnN0IGZpeGVkID0gdGhpcy5maXhlZFJvdGF0aW9uOyAvLyBBcHByb3hpbWF0ZSB3aXRoIEFBQkIgYm94CgogICAgICB0aGlzLnVwZGF0ZUFBQkIoKTsKICAgICAgaGFsZkV4dGVudHMuc2V0KCh0aGlzLmFhYmIudXBwZXJCb3VuZC54IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueCkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueSAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnkpIC8gMiwgKHRoaXMuYWFiYi51cHBlckJvdW5kLnogLSB0aGlzLmFhYmIubG93ZXJCb3VuZC56KSAvIDIpOwogICAgICBCb3guY2FsY3VsYXRlSW5lcnRpYShoYWxmRXh0ZW50cywgdGhpcy5tYXNzLCBJKTsKICAgICAgdGhpcy5pbnZJbmVydGlhLnNldChJLnggPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueCA6IDAsIEkueSA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS55IDogMCwgSS56ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnogOiAwKTsKICAgICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQodHJ1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB3b3JsZCB2ZWxvY2l0eSBvZiBhIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIHdvcmxkUG9pbnQKICAgICAqIEBwYXJhbSByZXN1bHQKICAgICAqIEByZXR1cm4gVGhlIHJlc3VsdCB2ZWN0b3IuCiAgICAgKi8KCgogICAgZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod29ybGRQb2ludCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IHIgPSBuZXcgVmVjMygpOwogICAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcik7CiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHIsIHJlc3VsdCk7CiAgICAgIHRoaXMudmVsb2NpdHkudmFkZChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIE1vdmUgdGhlIGJvZHkgZm9yd2FyZCBpbiB0aW1lLgogICAgICogQHBhcmFtIGR0IFRpbWUgc3RlcAogICAgICogQHBhcmFtIHF1YXROb3JtYWxpemUgU2V0IHRvIHRydWUgdG8gbm9ybWFsaXplIHRoZSBib2R5IHF1YXRlcm5pb24KICAgICAqIEBwYXJhbSBxdWF0Tm9ybWFsaXplRmFzdCBJZiB0aGUgcXVhdGVybmlvbiBzaG91bGQgYmUgbm9ybWFsaXplZCB1c2luZyAiZmFzdCIgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uCiAgICAgKi8KCgogICAgaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAvLyBTYXZlIHByZXZpb3VzIHBvc2l0aW9uCiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbi5jb3B5KHRoaXMucG9zaXRpb24pOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvbik7CgogICAgICBpZiAoISh0aGlzLnR5cGUgPT09IEJvZHkuRFlOQU1JQyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB8fCB0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB2ZWxvID0gdGhpcy52ZWxvY2l0eTsKICAgICAgY29uc3QgYW5ndWxhclZlbG8gPSB0aGlzLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgY29uc3QgcG9zID0gdGhpcy5wb3NpdGlvbjsKICAgICAgY29uc3QgZm9yY2UgPSB0aGlzLmZvcmNlOwogICAgICBjb25zdCB0b3JxdWUgPSB0aGlzLnRvcnF1ZTsKICAgICAgY29uc3QgcXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgaW52TWFzcyA9IHRoaXMuaW52TWFzczsKICAgICAgY29uc3QgaW52SW5lcnRpYSA9IHRoaXMuaW52SW5lcnRpYVdvcmxkOwogICAgICBjb25zdCBsaW5lYXJGYWN0b3IgPSB0aGlzLmxpbmVhckZhY3RvcjsKICAgICAgY29uc3QgaU1kdCA9IGludk1hc3MgKiBkdDsKICAgICAgdmVsby54ICs9IGZvcmNlLnggKiBpTWR0ICogbGluZWFyRmFjdG9yLng7CiAgICAgIHZlbG8ueSArPSBmb3JjZS55ICogaU1kdCAqIGxpbmVhckZhY3Rvci55OwogICAgICB2ZWxvLnogKz0gZm9yY2UueiAqIGlNZHQgKiBsaW5lYXJGYWN0b3IuejsKICAgICAgY29uc3QgZSA9IGludkluZXJ0aWEuZWxlbWVudHM7CiAgICAgIGNvbnN0IGFuZ3VsYXJGYWN0b3IgPSB0aGlzLmFuZ3VsYXJGYWN0b3I7CiAgICAgIGNvbnN0IHR4ID0gdG9ycXVlLnggKiBhbmd1bGFyRmFjdG9yLng7CiAgICAgIGNvbnN0IHR5ID0gdG9ycXVlLnkgKiBhbmd1bGFyRmFjdG9yLnk7CiAgICAgIGNvbnN0IHR6ID0gdG9ycXVlLnogKiBhbmd1bGFyRmFjdG9yLno7CiAgICAgIGFuZ3VsYXJWZWxvLnggKz0gZHQgKiAoZVswXSAqIHR4ICsgZVsxXSAqIHR5ICsgZVsyXSAqIHR6KTsKICAgICAgYW5ndWxhclZlbG8ueSArPSBkdCAqIChlWzNdICogdHggKyBlWzRdICogdHkgKyBlWzVdICogdHopOwogICAgICBhbmd1bGFyVmVsby56ICs9IGR0ICogKGVbNl0gKiB0eCArIGVbN10gKiB0eSArIGVbOF0gKiB0eik7IC8vIFVzZSBuZXcgdmVsb2NpdHkgIC0gbGVhcCBmcm9nCgogICAgICBwb3MueCArPSB2ZWxvLnggKiBkdDsKICAgICAgcG9zLnkgKz0gdmVsby55ICogZHQ7CiAgICAgIHBvcy56ICs9IHZlbG8ueiAqIGR0OwogICAgICBxdWF0LmludGVncmF0ZSh0aGlzLmFuZ3VsYXJWZWxvY2l0eSwgZHQsIHRoaXMuYW5ndWxhckZhY3RvciwgcXVhdCk7CgogICAgICBpZiAocXVhdE5vcm1hbGl6ZSkgewogICAgICAgIGlmIChxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAgICAgcXVhdC5ub3JtYWxpemVGYXN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHF1YXQubm9ybWFsaXplKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7IC8vIFVwZGF0ZSB3b3JsZCBpbmVydGlhCgogICAgICB0aGlzLnVwZGF0ZUluZXJ0aWFXb3JsZCgpOwogICAgfQoKICB9CgogIEJvZHkuaWRDb3VudGVyID0gMDsKICBCb2R5LkNPTExJREVfRVZFTlRfTkFNRSA9ICdjb2xsaWRlJzsKICBCb2R5LkRZTkFNSUMgPSBCT0RZX1RZUEVTLkRZTkFNSUM7CiAgQm9keS5TVEFUSUMgPSBCT0RZX1RZUEVTLlNUQVRJQzsKICBCb2R5LktJTkVNQVRJQyA9IEJPRFlfVFlQRVMuS0lORU1BVElDOwogIEJvZHkuQVdBS0UgPSBCT0RZX1NMRUVQX1NUQVRFUy5BV0FLRTsKICBCb2R5LlNMRUVQWSA9IEJPRFlfU0xFRVBfU1RBVEVTLlNMRUVQWTsKICBCb2R5LlNMRUVQSU5HID0gQk9EWV9TTEVFUF9TVEFURVMuU0xFRVBJTkc7CiAgQm9keS53YWtldXBFdmVudCA9IHsKICAgIHR5cGU6ICd3YWtldXAnCiAgfTsKICBCb2R5LnNsZWVweUV2ZW50ID0gewogICAgdHlwZTogJ3NsZWVweScKICB9OwogIEJvZHkuc2xlZXBFdmVudCA9IHsKICAgIHR5cGU6ICdzbGVlcCcKICB9OwogIGNvbnN0IHRtcFZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wUXVhdCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgdXBkYXRlQUFCQl9zaGFwZUFBQkIgPSBuZXcgQUFCQigpOwogIGNvbnN0IHVpd19tMSA9IG5ldyBNYXQzKCk7CiAgY29uc3QgdWl3X20yID0gbmV3IE1hdDMoKTsKICBjb25zdCBCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEZvcmNlX3dvcmxkRm9yY2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEZvcmNlX3JlbGF0aXZlUG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUltcHVsc2VfdmVsbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUltcHVsc2Vfcm90VmVsbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV91cGRhdGVNYXNzUHJvcGVydGllc19oYWxmRXh0ZW50cyA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3IgYnJvYWRwaGFzZSBpbXBsZW1lbnRhdGlvbnMKICAgKiBAYXV0aG9yIHNjaHRlcHBlCiAgICovCgogIGNsYXNzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBUaGUgd29ybGQgdG8gc2VhcmNoIGZvciBjb2xsaXNpb25zIGluLgogICAgICovCgogICAgLyoqCiAgICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGJyb2FkcGhhc2UgdXNlcyBib3VuZGluZyBib3hlcyBmb3IgaW50ZXJzZWN0aW9uIHRlc3RzLCBlbHNlIGl0IHVzZXMgYm91bmRpbmcgc3BoZXJlcy4KICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIHRydWUgaWYgdGhlIG9iamVjdHMgaW4gdGhlIHdvcmxkIG1vdmVkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy53b3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy51c2VCb3VuZGluZ0JveGVzID0gdm9pZCAwOwogICAgICB0aGlzLmRpcnR5ID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy51c2VCb3VuZGluZ0JveGVzID0gZmFsc2U7CiAgICAgIHRoaXMuZGlydHkgPSB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNvbGxpc2lvbiBwYWlycyBmcm9tIHRoZSB3b3JsZAogICAgICogQHBhcmFtIHdvcmxkIFRoZSB3b3JsZCB0byBzZWFyY2ggaW4KICAgICAqIEBwYXJhbSBwMSBFbXB0eSBhcnJheSB0byBiZSBmaWxsZWQgd2l0aCBib2R5IG9iamVjdHMKICAgICAqIEBwYXJhbSBwMiBFbXB0eSBhcnJheSB0byBiZSBmaWxsZWQgd2l0aCBib2R5IG9iamVjdHMKICAgICAqLwoKCiAgICBjb2xsaXNpb25QYWlycyh3b3JsZCwgcDEsIHAyKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY29sbGlzaW9uUGFpcnMgbm90IGltcGxlbWVudGVkIGZvciB0aGlzIEJyb2FkUGhhc2UgY2xhc3MhJyk7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgYm9keSBwYWlyIG5lZWRzIHRvIGJlIGludGVyc2VjdGlvbiB0ZXN0ZWQgYXQgYWxsLgogICAgICovCgoKICAgIG5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uKGJvZHlBLCBib2R5QikgewogICAgICAvLyBDaGVjayBjb2xsaXNpb24gZmlsdGVyIG1hc2tzCiAgICAgIGlmICgoYm9keUEuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiBib2R5Qi5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCB8fCAoYm9keUIuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiBib2R5QS5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSAvLyBDaGVjayB0eXBlcwoKCiAgICAgIGlmICgoKGJvZHlBLnR5cGUgJiBCb2R5LlNUQVRJQykgIT09IDAgfHwgYm9keUEuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgJiYgKChib2R5Qi50eXBlICYgQm9keS5TVEFUSUMpICE9PSAwIHx8IGJvZHlCLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpKSB7CiAgICAgICAgLy8gQm90aCBib2RpZXMgYXJlIHN0YXRpYyBvciBzbGVlcGluZy4gU2tpcC4KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRpbmcgdm9sdW1lcyBvZiB0d28gYm9kaWVzIGludGVyc2VjdC4KICAgICAqLwoKCiAgICBpbnRlcnNlY3Rpb25UZXN0KGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpIHsKICAgICAgaWYgKHRoaXMudXNlQm91bmRpbmdCb3hlcykgewogICAgICAgIHRoaXMuZG9Cb3VuZGluZ0JveEJyb2FkcGhhc2UoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRpbmcgc3BoZXJlcyBvZiB0d28gYm9kaWVzIGFyZSBpbnRlcnNlY3RpbmcuCiAgICAgKiBAcGFyYW0gcGFpcnMxIGJvZHlBIGlzIGFwcGVuZGVkIHRvIHRoaXMgYXJyYXkgaWYgaW50ZXJzZWN0aW9uCiAgICAgKiBAcGFyYW0gcGFpcnMyIGJvZHlCIGlzIGFwcGVuZGVkIHRvIHRoaXMgYXJyYXkgaWYgaW50ZXJzZWN0aW9uCiAgICAgKi8KCgogICAgZG9Cb3VuZGluZ1NwaGVyZUJyb2FkcGhhc2UoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikgewogICAgICBjb25zdCByID0gQnJvYWRwaGFzZV9jb2xsaXNpb25QYWlyc19yOwogICAgICBib2R5Qi5wb3NpdGlvbi52c3ViKGJvZHlBLnBvc2l0aW9uLCByKTsKICAgICAgY29uc3QgYm91bmRpbmdSYWRpdXNTdW0yID0gKGJvZHlBLmJvdW5kaW5nUmFkaXVzICsgYm9keUIuYm91bmRpbmdSYWRpdXMpICoqIDI7CiAgICAgIGNvbnN0IG5vcm0yID0gci5sZW5ndGhTcXVhcmVkKCk7CgogICAgICBpZiAobm9ybTIgPCBib3VuZGluZ1JhZGl1c1N1bTIpIHsKICAgICAgICBwYWlyczEucHVzaChib2R5QSk7CiAgICAgICAgcGFpcnMyLnB1c2goYm9keUIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBib3hlcyBvZiB0d28gYm9kaWVzIGFyZSBpbnRlcnNlY3RpbmcuCiAgICAgKi8KCgogICAgZG9Cb3VuZGluZ0JveEJyb2FkcGhhc2UoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikgewogICAgICBpZiAoYm9keUEuYWFiYk5lZWRzVXBkYXRlKSB7CiAgICAgICAgYm9keUEudXBkYXRlQUFCQigpOwogICAgICB9CgogICAgICBpZiAoYm9keUIuYWFiYk5lZWRzVXBkYXRlKSB7CiAgICAgICAgYm9keUIudXBkYXRlQUFCQigpOwogICAgICB9IC8vIENoZWNrIEFBQkIgLyBBQUJCCgoKICAgICAgaWYgKGJvZHlBLmFhYmIub3ZlcmxhcHMoYm9keUIuYWFiYikpIHsKICAgICAgICBwYWlyczEucHVzaChib2R5QSk7CiAgICAgICAgcGFpcnMyLnB1c2goYm9keUIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZXMgZHVwbGljYXRlIHBhaXJzIGZyb20gdGhlIHBhaXIgYXJyYXlzLgogICAgICovCgoKICAgIG1ha2VQYWlyc1VuaXF1ZShwYWlyczEsIHBhaXJzMikgewogICAgICBjb25zdCB0ID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcDsKICAgICAgY29uc3QgcDEgPSBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMTsKICAgICAgY29uc3QgcDIgPSBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMjsKICAgICAgY29uc3QgTiA9IHBhaXJzMS5sZW5ndGg7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgcDFbaV0gPSBwYWlyczFbaV07CiAgICAgICAgcDJbaV0gPSBwYWlyczJbaV07CiAgICAgIH0KCiAgICAgIHBhaXJzMS5sZW5ndGggPSAwOwogICAgICBwYWlyczIubGVuZ3RoID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBpZDEgPSBwMVtpXS5pZDsKICAgICAgICBjb25zdCBpZDIgPSBwMltpXS5pZDsKICAgICAgICBjb25zdCBrZXkgPSBpZDEgPCBpZDIgPyBpZDEgKyAiLCIgKyBpZDIgOiBpZDIgKyAiLCIgKyBpZDE7CiAgICAgICAgdFtrZXldID0gaTsKICAgICAgICB0LmtleXMucHVzaChrZXkpOwogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdC5rZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3Qga2V5ID0gdC5rZXlzLnBvcCgpOwogICAgICAgIGNvbnN0IHBhaXJJbmRleCA9IHRba2V5XTsKICAgICAgICBwYWlyczEucHVzaChwMVtwYWlySW5kZXhdKTsKICAgICAgICBwYWlyczIucHVzaChwMltwYWlySW5kZXhdKTsKICAgICAgICBkZWxldGUgdFtrZXldOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNhc3NlcwogICAgICovCgoKICAgIHNldFdvcmxkKHdvcmxkKSB7fQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRpbmcgc3BoZXJlcyBvZiB0d28gYm9kaWVzIG92ZXJsYXAuCiAgICAgKi8KCgogICAgc3RhdGljIGJvdW5kaW5nU3BoZXJlQ2hlY2soYm9keUEsIGJvZHlCKSB7CiAgICAgIGNvbnN0IGRpc3QgPSBuZXcgVmVjMygpOyAvLyBic2NfZGlzdDsKCiAgICAgIGJvZHlBLnBvc2l0aW9uLnZzdWIoYm9keUIucG9zaXRpb24sIGRpc3QpOwogICAgICBjb25zdCBzYSA9IGJvZHlBLnNoYXBlc1swXTsKICAgICAgY29uc3Qgc2IgPSBib2R5Qi5zaGFwZXNbMF07CiAgICAgIHJldHVybiBNYXRoLnBvdyhzYS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNiLmJvdW5kaW5nU3BoZXJlUmFkaXVzLCAyKSA+IGRpc3QubGVuZ3RoU3F1YXJlZCgpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiB0aGUgQUFCQi4KICAgICAqLwoKCiAgICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkgewogICAgICBjb25zb2xlLndhcm4oJy5hYWJiUXVlcnkgaXMgbm90IGltcGxlbWVudGVkIGluIHRoaXMgQnJvYWRwaGFzZSBzdWJjbGFzcy4nKTsKICAgICAgcmV0dXJuIFtdOwogICAgfQoKICB9IC8vIFRlbXAgb2JqZWN0cwoKCiAgY29uc3QgQnJvYWRwaGFzZV9jb2xsaXNpb25QYWlyc19yID0gbmV3IFZlYzMoKTsKICBjb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV90ZW1wID0gewogICAga2V5czogW10KICB9OwogIGNvbnN0IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxID0gW107CiAgY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDIgPSBbXTsKCiAgbmV3IFZlYzMoKTsKICAvKioKICAgKiBOYWl2ZSBicm9hZHBoYXNlIGltcGxlbWVudGF0aW9uLCB1c2VkIGluIGxhY2sgb2YgYmV0dGVyIG9uZXMuCiAgICoKICAgKiBUaGUgbmFpdmUgYnJvYWRwaGFzZSBsb29rcyBhdCBhbGwgcG9zc2libGUgcGFpcnMgd2l0aG91dCByZXN0cmljdGlvbiwgdGhlcmVmb3JlIGl0IGhhcyBjb21wbGV4aXR5IE5eMiBfKHdoaWNoIGlzIGJhZClfCiAgICovCgogIGNsYXNzIE5haXZlQnJvYWRwaGFzZSBleHRlbmRzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBAdG9kbyBSZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFsbCB0aGUgY29sbGlzaW9uIHBhaXJzIGluIHRoZSBwaHlzaWNzIHdvcmxkCiAgICAgKi8KCgogICAgY29sbGlzaW9uUGFpcnMod29ybGQsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllczsKICAgICAgY29uc3QgbiA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGxldCBiaTsKICAgICAgbGV0IGJqOyAvLyBOYWl2ZSBOXjIgZnR3IQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IG47IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBpOyBqKyspIHsKICAgICAgICAgIGJpID0gYm9kaWVzW2ldOwogICAgICAgICAgYmogPSBib2RpZXNbal07CgogICAgICAgICAgaWYgKCF0aGlzLm5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uKGJpLCBiaikpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcGFpcnMxLCBwYWlyczIpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0ID0gW10pIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JsZC5ib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gd29ybGQuYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0gLy8gVWdseSBoYWNrIHVudGlsIEJvZHkgZ2V0cyBhYWJiCgoKICAgICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICByZXN1bHQucHVzaChiKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogIH0KICAvKioKICAgKiBTdG9yYWdlIGZvciBSYXkgY2FzdGluZyBkYXRhCiAgICovCgoKICBjbGFzcyBSYXljYXN0UmVzdWx0IHsKICAgIC8qKgogICAgICogcmF5RnJvbVdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIHJheVRvV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogaGl0Tm9ybWFsV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogaGl0UG9pbnRXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBoYXNIaXQKICAgICAqLwoKICAgIC8qKgogICAgICogc2hhcGUKICAgICAqLwoKICAgIC8qKgogICAgICogYm9keQogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGhpdCB0cmlhbmdsZSwgaWYgdGhlIGhpdCBzaGFwZSB3YXMgYSB0cmltZXNoCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3RhbmNlIHRvIHRoZSBoaXQuIFdpbGwgYmUgc2V0IHRvIC0xIGlmIHRoZXJlIHdhcyBubyBoaXQKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgdGhlIHJheSBzaG91bGQgc3RvcCB0cmF2ZXJzaW5nIHRoZSBib2RpZXMKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMucmF5RnJvbVdvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLnJheVRvV29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuaGl0UG9pbnRXb3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5oYXNIaXQgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2hhcGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm9keSA9IHZvaWQgMDsKICAgICAgdGhpcy5oaXRGYWNlSW5kZXggPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IHZvaWQgMDsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJheVRvV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFJlc2V0IGFsbCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLnJheVRvV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIGFib3J0CiAgICAgKi8KCgogICAgYWJvcnQoKSB7CiAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICBzZXQocmF5RnJvbVdvcmxkLCByYXlUb1dvcmxkLCBoaXROb3JtYWxXb3JsZCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKSB7CiAgICAgIHRoaXMucmF5RnJvbVdvcmxkLmNvcHkocmF5RnJvbVdvcmxkKTsKICAgICAgdGhpcy5yYXlUb1dvcmxkLmNvcHkocmF5VG9Xb3JsZCk7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQuY29weShoaXROb3JtYWxXb3JsZCk7CiAgICAgIHRoaXMuaGl0UG9pbnRXb3JsZC5jb3B5KGhpdFBvaW50V29ybGQpOwogICAgICB0aGlzLnNoYXBlID0gc2hhcGU7CiAgICAgIHRoaXMuYm9keSA9IGJvZHk7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTsKICAgIH0KCiAgfQoKICBsZXQgX1NoYXBlJHR5cGVzJFNQSEVSRSwgX1NoYXBlJHR5cGVzJFBMQU5FLCBfU2hhcGUkdHlwZXMkQk9YLCBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIsIF9TaGFwZSR0eXBlcyRDT05WRVhQTywgX1NoYXBlJHR5cGVzJEhFSUdIVEZJLCBfU2hhcGUkdHlwZXMkVFJJTUVTSDsKICAvKioKICAgKiBSQVlfTU9ERVMKICAgKi8KCgogIGNvbnN0IFJBWV9NT0RFUyA9IHsKICAgIC8qKiBDTE9TRVNUICovCiAgICBDTE9TRVNUOiAxLAoKICAgIC8qKiBBTlkgKi8KICAgIEFOWTogMiwKCiAgICAvKiogQUxMICovCiAgICBBTEw6IDQKICB9OwogIC8qKgogICAqIFJheU1vZGUKICAgKi8KCiAgX1NoYXBlJHR5cGVzJFNQSEVSRSA9IFNoYXBlLnR5cGVzLlNQSEVSRTsKICBfU2hhcGUkdHlwZXMkUExBTkUgPSBTaGFwZS50eXBlcy5QTEFORTsKICBfU2hhcGUkdHlwZXMkQk9YID0gU2hhcGUudHlwZXMuQk9YOwogIF9TaGFwZSR0eXBlcyRDWUxJTkRFUiA9IFNoYXBlLnR5cGVzLkNZTElOREVSOwogIF9TaGFwZSR0eXBlcyRDT05WRVhQTyA9IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST047CiAgX1NoYXBlJHR5cGVzJEhFSUdIVEZJID0gU2hhcGUudHlwZXMuSEVJR0hURklFTEQ7CiAgX1NoYXBlJHR5cGVzJFRSSU1FU0ggPSBTaGFwZS50eXBlcy5UUklNRVNIOwogIC8qKgogICAqIEEgbGluZSBpbiAzRCBzcGFjZSB0aGF0IGludGVyc2VjdHMgYm9kaWVzIGFuZCByZXR1cm4gcG9pbnRzLgogICAqLwoKICBjbGFzcyBSYXkgewogICAgLyoqCiAgICAgKiBmcm9tCiAgICAgKi8KCiAgICAvKioKICAgICAqIHRvCiAgICAgKi8KCiAgICAvKioKICAgICAqIGRpcmVjdGlvbgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgcHJlY2lzaW9uIG9mIHRoZSByYXkuIFVzZWQgd2hlbiBjaGVja2luZyBwYXJhbGxlbGl0eSBldGMuCiAgICAgKiBAZGVmYXVsdCAwLjAwMDEKICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIGBmYWxzZWAgaWYgeW91IGRvbid0IHdhbnQgdGhlIFJheSB0byB0YWtlIGBjb2xsaXNpb25SZXNwb25zZWAgZmxhZ3MgaW50byBhY2NvdW50IG9uIGJvZGllcyBhbmQgc2hhcGVzLgogICAgICogQGRlZmF1bHQgdHJ1ZQogICAgICovCgogICAgLyoqCiAgICAgKiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgcmF5IHNraXBzIGFueSBoaXRzIHdpdGggbm9ybWFsLmRvdChyYXlEaXJlY3Rpb24pIDwgMC4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGNvbGxpc2lvbkZpbHRlck1hc2sKICAgICAqIEBkZWZhdWx0IC0xCiAgICAgKi8KCiAgICAvKioKICAgICAqIGNvbGxpc2lvbkZpbHRlckdyb3VwCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgaW50ZXJzZWN0aW9uIG1vZGUuIFNob3VsZCBiZSBSYXkuQU5ZLCBSYXkuQUxMIG9yIFJheS5DTE9TRVNULgogICAgICogQGRlZmF1bHQgUkFZLkFOWQogICAgICovCgogICAgLyoqCiAgICAgKiBDdXJyZW50IHJlc3VsdCBvYmplY3QuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdpbGwgYmUgc2V0IHRvIGB0cnVlYCBkdXJpbmcgaW50ZXJzZWN0V29ybGQoKSBpZiB0aGUgcmF5IGhpdCBhbnl0aGluZy4KICAgICAqLwoKICAgIC8qKgogICAgICogVXNlci1wcm92aWRlZCByZXN1bHQgY2FsbGJhY2suIFdpbGwgYmUgdXNlZCBpZiBtb2RlIGlzIFJheS5BTEwuCiAgICAgKi8KCiAgICAvKioKICAgICAqIENMT1NFU1QKICAgICAqLwoKICAgIC8qKgogICAgICogQU5ZCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFMTAogICAgICovCiAgICBnZXQgW19TaGFwZSR0eXBlcyRTUEhFUkVdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0U3BoZXJlOwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJFBMQU5FXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdFBsYW5lOwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJEJPWF0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RCb3g7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkQ1lMSU5ERVJdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Q29udmV4OwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJENPTlZFWFBPXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdENvbnZleDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRIRUlHSFRGSV0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RIZWlnaHRmaWVsZDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRUUklNRVNIXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdFRyaW1lc2g7CiAgICB9CgogICAgY29uc3RydWN0b3IoZnJvbSA9IG5ldyBWZWMzKCksIHRvID0gbmV3IFZlYzMoKSkgewogICAgICB0aGlzLmZyb20gPSB2b2lkIDA7CiAgICAgIHRoaXMudG8gPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlyZWN0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnByZWNpc2lvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwOwogICAgICB0aGlzLnNraXBCYWNrZmFjZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHZvaWQgMDsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHZvaWQgMDsKICAgICAgdGhpcy5tb2RlID0gdm9pZCAwOwogICAgICB0aGlzLnJlc3VsdCA9IHZvaWQgMDsKICAgICAgdGhpcy5oYXNIaXQgPSB2b2lkIDA7CiAgICAgIHRoaXMuY2FsbGJhY2sgPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJvbSA9IGZyb20uY2xvbmUoKTsKICAgICAgdGhpcy50byA9IHRvLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5wcmVjaXNpb24gPSAwLjAwMDE7CiAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRydWU7CiAgICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9IGZhbHNlOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSAtMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IC0xOwogICAgICB0aGlzLm1vZGUgPSBSYXkuQU5ZOwogICAgICB0aGlzLnJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CgogICAgICB0aGlzLmNhbGxiYWNrID0gcmVzdWx0ID0+IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBEbyBpdGVyc2VjdGlvbiBhZ2FpbnN0IGFsbCBib2RpZXMgaW4gdGhlIGdpdmVuIFdvcmxkLgogICAgICogQHJldHVybiBUcnVlIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLCBvdGhlcndpc2UgZmFsc2UuCiAgICAgKi8KCgogICAgaW50ZXJzZWN0V29ybGQod29ybGQsIG9wdGlvbnMpIHsKICAgICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IFJheS5BTlk7CiAgICAgIHRoaXMucmVzdWx0ID0gb3B0aW9ucy5yZXN1bHQgfHwgbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy5za2lwQmFja2ZhY2VzID0gISFvcHRpb25zLnNraXBCYWNrZmFjZXM7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrIDogLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogLTE7CiAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHR5cGVvZiBvcHRpb25zLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jaGVja0NvbGxpc2lvblJlc3BvbnNlIDogdHJ1ZTsKCiAgICAgIGlmIChvcHRpb25zLmZyb20pIHsKICAgICAgICB0aGlzLmZyb20uY29weShvcHRpb25zLmZyb20pOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy50bykgewogICAgICAgIHRoaXMudG8uY29weShvcHRpb25zLnRvKTsKICAgICAgfQoKICAgICAgdGhpcy5jYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2sgfHwgKCgpID0+IHt9KTsKCiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CiAgICAgIHRoaXMucmVzdWx0LnJlc2V0KCk7CiAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIHRoaXMuZ2V0QUFCQih0bXBBQUJCJDEpOwogICAgICB0bXBBcnJheS5sZW5ndGggPSAwOwogICAgICB3b3JsZC5icm9hZHBoYXNlLmFhYmJRdWVyeSh3b3JsZCwgdG1wQUFCQiQxLCB0bXBBcnJheSk7CiAgICAgIHRoaXMuaW50ZXJzZWN0Qm9kaWVzKHRtcEFycmF5KTsKICAgICAgcmV0dXJuIHRoaXMuaGFzSGl0OwogICAgfQogICAgLyoqCiAgICAgKiBTaG9vdCBhIHJheSBhdCBhIGJvZHksIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuCiAgICAgKiBAZGVwcmVjYXRlZCBAcGFyYW0gcmVzdWx0IHNldCB0aGUgcmVzdWx0IHByb3BlcnR5IG9mIHRoZSBSYXkgaW5zdGVhZC4KICAgICAqLwoKCiAgICBpbnRlcnNlY3RCb2R5KGJvZHksIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZTsKCiAgICAgIGlmIChjaGVja0NvbGxpc2lvblJlc3BvbnNlICYmICFib2R5LmNvbGxpc2lvblJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoKHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiBib2R5LmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5LmNvbGxpc2lvbkZpbHRlckdyb3VwICYgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgeGkgPSBpbnRlcnNlY3RCb2R5X3hpOwogICAgICBjb25zdCBxaSA9IGludGVyc2VjdEJvZHlfcWk7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IGJvZHkuc2hhcGVzLmxlbmd0aDsgaSA8IE47IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlID0gYm9keS5zaGFwZXNbaV07CgogICAgICAgIGlmIChjaGVja0NvbGxpc2lvblJlc3BvbnNlICYmICFzaGFwZS5jb2xsaXNpb25SZXNwb25zZSkgewogICAgICAgICAgY29udGludWU7IC8vIFNraXAKICAgICAgICB9CgogICAgICAgIGJvZHkucXVhdGVybmlvbi5tdWx0KGJvZHkuc2hhcGVPcmllbnRhdGlvbnNbaV0sIHFpKTsKICAgICAgICBib2R5LnF1YXRlcm5pb24udm11bHQoYm9keS5zaGFwZU9mZnNldHNbaV0sIHhpKTsKICAgICAgICB4aS52YWRkKGJvZHkucG9zaXRpb24sIHhpKTsKICAgICAgICB0aGlzLmludGVyc2VjdFNoYXBlKHNoYXBlLCBxaSwgeGksIGJvZHkpOwoKICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNob290IGEgcmF5IGF0IGFuIGFycmF5IGJvZGllcywgZ2V0IGJhY2sgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGhpdC4KICAgICAqIEBwYXJhbSBib2RpZXMgQW4gYXJyYXkgb2YgQm9keSBvYmplY3RzLgogICAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuCiAgICAgKgogICAgICovCgoKICAgIGludGVyc2VjdEJvZGllcyhib2RpZXMsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBib2RpZXMubGVuZ3RoOyAhdGhpcy5yZXN1bHQuc2hvdWxkU3RvcCAmJiBpIDwgbDsgaSsrKSB7CiAgICAgICAgdGhpcy5pbnRlcnNlY3RCb2R5KGJvZGllc1tpXSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgZGlyZWN0aW9uIHZlY3Rvci4KICAgICAqLwoKCiAgICB1cGRhdGVEaXJlY3Rpb24oKSB7CiAgICAgIHRoaXMudG8udnN1Yih0aGlzLmZyb20sIHRoaXMuZGlyZWN0aW9uKTsKICAgICAgdGhpcy5kaXJlY3Rpb24ubm9ybWFsaXplKCk7CiAgICB9CgogICAgaW50ZXJzZWN0U2hhcGUoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5KSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207IC8vIENoZWNraW5nIGJvdW5kaW5nU3BoZXJlCgogICAgICBjb25zdCBkaXN0YW5jZSA9IGRpc3RhbmNlRnJvbUludGVyc2VjdGlvbihmcm9tLCB0aGlzLmRpcmVjdGlvbiwgcG9zaXRpb24pOwoKICAgICAgaWYgKGRpc3RhbmNlID4gc2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IGludGVyc2VjdE1ldGhvZCA9IHRoaXNbc2hhcGUudHlwZV07CgogICAgICBpZiAoaW50ZXJzZWN0TWV0aG9kKSB7CiAgICAgICAgaW50ZXJzZWN0TWV0aG9kLmNhbGwodGhpcywgc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCBzaGFwZSk7CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0Qm94KGJveCwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdENvbnZleChib3guY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSk7CiAgICB9CgogICAgX2ludGVyc2VjdFBsYW5lKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOyAvLyBHZXQgcGxhbmUgbm9ybWFsCgogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IG5ldyBWZWMzKDAsIDAsIDEpOwogICAgICBxdWF0LnZtdWx0KHdvcmxkTm9ybWFsLCB3b3JsZE5vcm1hbCk7CiAgICAgIGNvbnN0IGxlbiA9IG5ldyBWZWMzKCk7CiAgICAgIGZyb20udnN1Yihwb3NpdGlvbiwgbGVuKTsKICAgICAgY29uc3QgcGxhbmVUb0Zyb20gPSBsZW4uZG90KHdvcmxkTm9ybWFsKTsKICAgICAgdG8udnN1Yihwb3NpdGlvbiwgbGVuKTsKICAgICAgY29uc3QgcGxhbmVUb1RvID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7CgogICAgICBpZiAocGxhbmVUb0Zyb20gKiBwbGFuZVRvVG8gPiAwKSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIGFyZSBvbiB0aGUgc2FtZSBzaWRlIG9mIHRoZSBwbGFuZS4uLiBiYWlsIG91dAogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGZyb20uZGlzdGFuY2VUbyh0bykgPCBwbGFuZVRvRnJvbSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3Qgbl9kb3RfZGlyID0gd29ybGROb3JtYWwuZG90KGRpcmVjdGlvbik7CgogICAgICBpZiAoTWF0aC5hYnMobl9kb3RfZGlyKSA8IHRoaXMucHJlY2lzaW9uKSB7CiAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBwbGFuZVBvaW50VG9Gcm9tID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgZGlyX3NjYWxlZF93aXRoX3QgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBoaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgZnJvbS52c3ViKHBvc2l0aW9uLCBwbGFuZVBvaW50VG9Gcm9tKTsKICAgICAgY29uc3QgdCA9IC13b3JsZE5vcm1hbC5kb3QocGxhbmVQb2ludFRvRnJvbSkgLyBuX2RvdF9kaXI7CiAgICAgIGRpcmVjdGlvbi5zY2FsZSh0LCBkaXJfc2NhbGVkX3dpdGhfdCk7CiAgICAgIGZyb20udmFkZChkaXJfc2NhbGVkX3dpdGhfdCwgaGl0UG9pbnRXb3JsZCk7CiAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKHdvcmxkTm9ybWFsLCBoaXRQb2ludFdvcmxkLCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgd29ybGQgQUFCQiBvZiB0aGUgcmF5LgogICAgICovCgoKICAgIGdldEFBQkIoYWFiYikgewogICAgICBjb25zdCB7CiAgICAgICAgbG93ZXJCb3VuZCwKICAgICAgICB1cHBlckJvdW5kCiAgICAgIH0gPSBhYWJiOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGxvd2VyQm91bmQueCA9IE1hdGgubWluKHRvLngsIGZyb20ueCk7CiAgICAgIGxvd2VyQm91bmQueSA9IE1hdGgubWluKHRvLnksIGZyb20ueSk7CiAgICAgIGxvd2VyQm91bmQueiA9IE1hdGgubWluKHRvLnosIGZyb20ueik7CiAgICAgIHVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRvLngsIGZyb20ueCk7CiAgICAgIHVwcGVyQm91bmQueSA9IE1hdGgubWF4KHRvLnksIGZyb20ueSk7CiAgICAgIHVwcGVyQm91bmQueiA9IE1hdGgubWF4KHRvLnosIGZyb20ueik7CiAgICB9CgogICAgX2ludGVyc2VjdEhlaWdodGZpZWxkKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICBzaGFwZS5kYXRhOwogICAgICBzaGFwZS5lbGVtZW50U2l6ZTsgLy8gQ29udmVydCB0aGUgcmF5IHRvIGxvY2FsIGhlaWdodGZpZWxkIGNvb3JkaW5hdGVzCgogICAgICBjb25zdCBsb2NhbFJheSA9IGludGVyc2VjdEhlaWdodGZpZWxkX2xvY2FsUmF5OyAvL25ldyBSYXkodGhpcy5mcm9tLCB0aGlzLnRvKTsKCiAgICAgIGxvY2FsUmF5LmZyb20uY29weSh0aGlzLmZyb20pOwogICAgICBsb2NhbFJheS50by5jb3B5KHRoaXMudG8pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGxvY2FsUmF5LmZyb20sIGxvY2FsUmF5LmZyb20pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGxvY2FsUmF5LnRvLCBsb2NhbFJheS50byk7CiAgICAgIGxvY2FsUmF5LnVwZGF0ZURpcmVjdGlvbigpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3QKCiAgICAgIGNvbnN0IGluZGV4ID0gaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXg7CiAgICAgIGxldCBpTWluWDsKICAgICAgbGV0IGlNaW5ZOwogICAgICBsZXQgaU1heFg7CiAgICAgIGxldCBpTWF4WTsgLy8gU2V0IHRvIG1heAoKICAgICAgaU1pblggPSBpTWluWSA9IDA7CiAgICAgIGlNYXhYID0gaU1heFkgPSBzaGFwZS5kYXRhLmxlbmd0aCAtIDE7CiAgICAgIGNvbnN0IGFhYmIgPSBuZXcgQUFCQigpOwogICAgICBsb2NhbFJheS5nZXRBQUJCKGFhYmIpOwogICAgICBzaGFwZS5nZXRJbmRleE9mUG9zaXRpb24oYWFiYi5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC55LCBpbmRleCwgdHJ1ZSk7CiAgICAgIGlNaW5YID0gTWF0aC5tYXgoaU1pblgsIGluZGV4WzBdKTsKICAgICAgaU1pblkgPSBNYXRoLm1heChpTWluWSwgaW5kZXhbMV0pOwogICAgICBzaGFwZS5nZXRJbmRleE9mUG9zaXRpb24oYWFiYi51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC55LCBpbmRleCwgdHJ1ZSk7CiAgICAgIGlNYXhYID0gTWF0aC5taW4oaU1heFgsIGluZGV4WzBdICsgMSk7CiAgICAgIGlNYXhZID0gTWF0aC5taW4oaU1heFksIGluZGV4WzFdICsgMSk7CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPCBpTWF4WDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IGlNaW5ZOyBqIDwgaU1heFk7IGorKykgewogICAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHNoYXBlLmdldEFhYmJBdEluZGV4KGksIGosIGFhYmIpOwoKICAgICAgICAgIGlmICghYWFiYi5vdmVybGFwc1JheShsb2NhbFJheSkpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9IC8vIExvd2VyIHRyaWFuZ2xlCgoKICAgICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdCwgc2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgdGhpcy5faW50ZXJzZWN0Q29udmV4KHNoYXBlLnBpbGxhckNvbnZleCwgcXVhdCwgd29ybGRQaWxsYXJPZmZzZXQsIGJvZHksIHJlcG9ydGVkU2hhcGUsIGludGVyc2VjdENvbnZleE9wdGlvbnMpOwoKICAgICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgc2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0U3BoZXJlKHNwaGVyZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCByID0gc3BoZXJlLnJhZGl1czsKICAgICAgY29uc3QgYSA9ICh0by54IC0gZnJvbS54KSAqKiAyICsgKHRvLnkgLSBmcm9tLnkpICoqIDIgKyAodG8ueiAtIGZyb20ueikgKiogMjsKICAgICAgY29uc3QgYiA9IDIgKiAoKHRvLnggLSBmcm9tLngpICogKGZyb20ueCAtIHBvc2l0aW9uLngpICsgKHRvLnkgLSBmcm9tLnkpICogKGZyb20ueSAtIHBvc2l0aW9uLnkpICsgKHRvLnogLSBmcm9tLnopICogKGZyb20ueiAtIHBvc2l0aW9uLnopKTsKICAgICAgY29uc3QgYyA9IChmcm9tLnggLSBwb3NpdGlvbi54KSAqKiAyICsgKGZyb20ueSAtIHBvc2l0aW9uLnkpICoqIDIgKyAoZnJvbS56IC0gcG9zaXRpb24ueikgKiogMiAtIHIgKiogMjsKICAgICAgY29uc3QgZGVsdGEgPSBiICoqIDIgLSA0ICogYSAqIGM7CiAgICAgIGNvbnN0IGludGVyc2VjdGlvblBvaW50ID0gUmF5X2ludGVyc2VjdFNwaGVyZV9pbnRlcnNlY3Rpb25Qb2ludDsKICAgICAgY29uc3Qgbm9ybWFsID0gUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWw7CgogICAgICBpZiAoZGVsdGEgPCAwKSB7CiAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uCiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKGRlbHRhID09PSAwKSB7CiAgICAgICAgLy8gc2luZ2xlIGludGVyc2VjdGlvbiBwb2ludAogICAgICAgIGZyb20ubGVycCh0bywgZGVsdGEsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpOwogICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgZDEgPSAoLWIgLSBNYXRoLnNxcnQoZGVsdGEpKSAvICgyICogYSk7CiAgICAgICAgY29uc3QgZDIgPSAoLWIgKyBNYXRoLnNxcnQoZGVsdGEpKSAvICgyICogYSk7CgogICAgICAgIGlmIChkMSA+PSAwICYmIGQxIDw9IDEpIHsKICAgICAgICAgIGZyb20ubGVycCh0bywgZDEsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7CiAgICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGQyID49IDAgJiYgZDIgPD0gMSkgewogICAgICAgICAgZnJvbS5sZXJwKHRvLCBkMiwgaW50ZXJzZWN0aW9uUG9pbnQpOwogICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0aW9uUG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIC0xKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0Q29udmV4KHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgb3B0aW9ucykgewogICAgICBjb25zdCBub3JtYWwgPSBpbnRlcnNlY3RDb252ZXhfbm9ybWFsOwogICAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yOwogICAgICBjb25zdCBmYWNlTGlzdCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5mYWNlTGlzdCB8fCBudWxsOyAvLyBDaGVja2luZyBmYWNlcwoKICAgICAgY29uc3QgZmFjZXMgPSBzaGFwZS5mYWNlczsKICAgICAgY29uc3QgdmVydGljZXMgPSBzaGFwZS52ZXJ0aWNlczsKICAgICAgY29uc3Qgbm9ybWFscyA9IHNoYXBlLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbjsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBmcm9tVG9EaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyh0byk7CiAgICAgIGNvbnN0IE5mYWNlcyA9IGZhY2VMaXN0ID8gZmFjZUxpc3QubGVuZ3RoIDogZmFjZXMubGVuZ3RoOwogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsKCiAgICAgIGZvciAobGV0IGogPSAwOyAhcmVzdWx0LnNob3VsZFN0b3AgJiYgaiA8IE5mYWNlczsgaisrKSB7CiAgICAgICAgY29uc3QgZmkgPSBmYWNlTGlzdCA/IGZhY2VMaXN0W2pdIDogajsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbZmldOwogICAgICAgIGNvbnN0IGZhY2VOb3JtYWwgPSBub3JtYWxzW2ZpXTsKICAgICAgICBjb25zdCBxID0gcXVhdDsKICAgICAgICBjb25zdCB4ID0gcG9zaXRpb247IC8vIGRldGVybWluZSBpZiByYXkgaW50ZXJzZWN0cyB0aGUgcGxhbmUgb2YgdGhlIGZhY2UKICAgICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWwKICAgICAgICAvLyBHZXQgcGxhbmUgcG9pbnQgaW4gd29ybGQgY29vcmRpbmF0ZXMuLi4KCiAgICAgICAgdmVjdG9yLmNvcHkodmVydGljZXNbZmFjZVswXV0pOwogICAgICAgIHEudm11bHQodmVjdG9yLCB2ZWN0b3IpOwogICAgICAgIHZlY3Rvci52YWRkKHgsIHZlY3Rvcik7IC8vIC4uLmJ1dCBtYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSByYXkgZnJvbS4gV2UnbGwgZml4IHRoaXMgbGF0ZXIuCgogICAgICAgIHZlY3Rvci52c3ViKGZyb20sIHZlY3Rvcik7IC8vIEdldCBwbGFuZSBub3JtYWwKCiAgICAgICAgcS52bXVsdChmYWNlTm9ybWFsLCBub3JtYWwpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZwoKICAgICAgICBjb25zdCBkb3QgPSBkaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsCgogICAgICAgIGlmIChNYXRoLmFicyhkb3QpIDwgdGhpcy5wcmVjaXNpb24pIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gY2FsYyBkaXN0YW5jZSB0byBwbGFuZQoKCiAgICAgICAgY29uc3Qgc2NhbGFyID0gbm9ybWFsLmRvdCh2ZWN0b3IpIC8gZG90OyAvLyBpZiBuZWdhdGl2ZSBkaXN0YW5jZSwgdGhlbiBwbGFuZSBpcyBiZWhpbmQgcmF5CgogICAgICAgIGlmIChzY2FsYXIgPCAwKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIGlmIChkb3QgPCAwKSB7CiAgICAgICAgLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXIKCgogICAgICAgIGRpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTsKICAgICAgICBpbnRlcnNlY3RQb2ludC52YWRkKGZyb20sIGludGVyc2VjdFBvaW50KTsgLy8gYSBpcyB0aGUgcG9pbnQgd2UgY29tcGFyZSBwb2ludHMgYiBhbmQgYyB3aXRoLgoKICAgICAgICBhLmNvcHkodmVydGljZXNbZmFjZVswXV0pOwogICAgICAgIHEudm11bHQoYSwgYSk7CiAgICAgICAgeC52YWRkKGEsIGEpOwoKICAgICAgICBmb3IgKGxldCBpID0gMTsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGkgPCBmYWNlLmxlbmd0aCAtIDE7IGkrKykgewogICAgICAgICAgLy8gVHJhbnNmb3JtIDMgdmVydGljZXMgdG8gd29ybGQgY29vcmRzCiAgICAgICAgICBiLmNvcHkodmVydGljZXNbZmFjZVtpXV0pOwogICAgICAgICAgYy5jb3B5KHZlcnRpY2VzW2ZhY2VbaSArIDFdXSk7CiAgICAgICAgICBxLnZtdWx0KGIsIGIpOwogICAgICAgICAgcS52bXVsdChjLCBjKTsKICAgICAgICAgIHgudmFkZChiLCBiKTsKICAgICAgICAgIHgudmFkZChjLCBjKTsKICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VUbyhmcm9tKTsKCiAgICAgICAgICBpZiAoIShSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBhLCBiLCBjKSB8fCBSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBiLCBhLCBjKSkgfHwgZGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdFBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCBmaSk7CiAgICAgICAgfSAvLyB9CgogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIE9wdGltaXplIGJ5IHRyYW5zZm9ybWluZyB0aGUgd29ybGQgdG8gbG9jYWwgc3BhY2UgZmlyc3QuCiAgICAgKiBAdG9kbyBVc2UgT2N0cmVlIGxvb2t1cAogICAgICovCgoKICAgIF9pbnRlcnNlY3RUcmltZXNoKG1lc2gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7CiAgICAgIGNvbnN0IG5vcm1hbCA9IGludGVyc2VjdFRyaW1lc2hfbm9ybWFsOwogICAgICBjb25zdCB0cmlhbmdsZXMgPSBpbnRlcnNlY3RUcmltZXNoX3RyaWFuZ2xlczsKICAgICAgY29uc3QgdHJlZVRyYW5zZm9ybSA9IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybTsKICAgICAgY29uc3QgdmVjdG9yID0gaW50ZXJzZWN0Q29udmV4X3ZlY3RvcjsKICAgICAgY29uc3QgbG9jYWxEaXJlY3Rpb24gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRGlyZWN0aW9uOwogICAgICBjb25zdCBsb2NhbEZyb20gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRnJvbTsKICAgICAgY29uc3QgbG9jYWxUbyA9IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbzsKICAgICAgY29uc3Qgd29ybGRJbnRlcnNlY3RQb2ludCA9IGludGVyc2VjdFRyaW1lc2hfd29ybGRJbnRlcnNlY3RQb2ludDsKICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsOyAvLyBDaGVja2luZyBmYWNlcwoKICAgICAgY29uc3QgaW5kaWNlcyA9IG1lc2guaW5kaWNlczsKICAgICAgbWVzaC52ZXJ0aWNlczsgLy8gY29uc3Qgbm9ybWFscyA9IG1lc2guZmFjZU5vcm1hbHMKCiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247CiAgICAgIHRyZWVUcmFuc2Zvcm0ucG9zaXRpb24uY29weShwb3NpdGlvbik7CiAgICAgIHRyZWVUcmFuc2Zvcm0ucXVhdGVybmlvbi5jb3B5KHF1YXQpOyAvLyBUcmFuc2Zvcm0gcmF5IHRvIGxvY2FsIHNwYWNlIQoKICAgICAgVHJhbnNmb3JtLnZlY3RvclRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZGlyZWN0aW9uLCBsb2NhbERpcmVjdGlvbik7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZnJvbSwgbG9jYWxGcm9tKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCB0bywgbG9jYWxUbyk7CiAgICAgIGxvY2FsVG8ueCAqPSBtZXNoLnNjYWxlLng7CiAgICAgIGxvY2FsVG8ueSAqPSBtZXNoLnNjYWxlLnk7CiAgICAgIGxvY2FsVG8ueiAqPSBtZXNoLnNjYWxlLno7CiAgICAgIGxvY2FsRnJvbS54ICo9IG1lc2guc2NhbGUueDsKICAgICAgbG9jYWxGcm9tLnkgKj0gbWVzaC5zY2FsZS55OwogICAgICBsb2NhbEZyb20ueiAqPSBtZXNoLnNjYWxlLno7CiAgICAgIGxvY2FsVG8udnN1Yihsb2NhbEZyb20sIGxvY2FsRGlyZWN0aW9uKTsKICAgICAgbG9jYWxEaXJlY3Rpb24ubm9ybWFsaXplKCk7CiAgICAgIGNvbnN0IGZyb21Ub0Rpc3RhbmNlU3F1YXJlZCA9IGxvY2FsRnJvbS5kaXN0YW5jZVNxdWFyZWQobG9jYWxUbyk7CiAgICAgIG1lc2gudHJlZS5yYXlRdWVyeSh0aGlzLCB0cmVlVHJhbnNmb3JtLCB0cmlhbmdsZXMpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB0cmlhbmdsZXMubGVuZ3RoOyAhdGhpcy5yZXN1bHQuc2hvdWxkU3RvcCAmJiBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCB0cmlhbmdsZXNJbmRleCA9IHRyaWFuZ2xlc1tpXTsKICAgICAgICBtZXNoLmdldE5vcm1hbCh0cmlhbmdsZXNJbmRleCwgbm9ybWFsKTsgLy8gZGV0ZXJtaW5lIGlmIHJheSBpbnRlcnNlY3RzIHRoZSBwbGFuZSBvZiB0aGUgZmFjZQogICAgICAgIC8vIG5vdGU6IHRoaXMgd29ya3MgcmVnYXJkbGVzcyBvZiB0aGUgZGlyZWN0aW9uIG9mIHRoZSBmYWNlIG5vcm1hbAogICAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLgoKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogM10sIGEpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLgoKICAgICAgICBhLnZzdWIobG9jYWxGcm9tLCB2ZWN0b3IpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZwoKICAgICAgICBjb25zdCBkb3QgPSBsb2NhbERpcmVjdGlvbi5kb3Qobm9ybWFsKTsgLy8gQmFpbCBvdXQgaWYgcmF5IGFuZCBwbGFuZSBhcmUgcGFyYWxsZWwKICAgICAgICAvLyBpZiAoTWF0aC5hYnMoIGRvdCApIDwgdGhpcy5wcmVjaXNpb24pewogICAgICAgIC8vICAgICBjb250aW51ZTsKICAgICAgICAvLyB9CiAgICAgICAgLy8gY2FsYyBkaXN0YW5jZSB0byBwbGFuZQoKICAgICAgICBjb25zdCBzY2FsYXIgPSBub3JtYWwuZG90KHZlY3RvcikgLyBkb3Q7IC8vIGlmIG5lZ2F0aXZlIGRpc3RhbmNlLCB0aGVuIHBsYW5lIGlzIGJlaGluZCByYXkKCiAgICAgICAgaWYgKHNjYWxhciA8IDApIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXIKCgogICAgICAgIGxvY2FsRGlyZWN0aW9uLnNjYWxlKHNjYWxhciwgaW50ZXJzZWN0UG9pbnQpOwogICAgICAgIGludGVyc2VjdFBvaW50LnZhZGQobG9jYWxGcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIEdldCB0cmlhbmdsZSB2ZXJ0aWNlcwoKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDFdLCBiKTsKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDJdLCBjKTsKICAgICAgICBjb25zdCBzcXVhcmVkRGlzdGFuY2UgPSBpbnRlcnNlY3RQb2ludC5kaXN0YW5jZVNxdWFyZWQobG9jYWxGcm9tKTsKCiAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykpIHx8IHNxdWFyZWREaXN0YW5jZSA+IGZyb21Ub0Rpc3RhbmNlU3F1YXJlZCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyB0cmFuc2Zvcm0gaW50ZXJzZWN0cG9pbnQgYW5kIG5vcm1hbCB0byB3b3JsZAoKCiAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZShxdWF0LCBub3JtYWwsIHdvcmxkTm9ybWFsKTsKICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIGludGVyc2VjdFBvaW50LCB3b3JsZEludGVyc2VjdFBvaW50KTsKICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgd29ybGRJbnRlcnNlY3RQb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgdHJpYW5nbGVzSW5kZXgpOwogICAgICB9CgogICAgICB0cmlhbmdsZXMubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBUcnVlIGlmIHRoZSBpbnRlcnNlY3Rpb25zIHNob3VsZCBjb250aW51ZQogICAgICovCgoKICAgIHJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBoaXRGYWNlSW5kZXgpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBkaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyhoaXRQb2ludFdvcmxkKTsKICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7IC8vIFNraXAgYmFjayBmYWNlcz8KCiAgICAgIGlmICh0aGlzLnNraXBCYWNrZmFjZXMgJiYgbm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbikgPiAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZXN1bHQuaGl0RmFjZUluZGV4ID0gdHlwZW9mIGhpdEZhY2VJbmRleCAhPT0gJ3VuZGVmaW5lZCcgPyBoaXRGYWNlSW5kZXggOiAtMTsKCiAgICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7CiAgICAgICAgY2FzZSBSYXkuQUxMOgogICAgICAgICAgdGhpcy5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpOwogICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICB0aGlzLmNhbGxiYWNrKHJlc3VsdCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBSYXkuQ0xPU0VTVDoKICAgICAgICAgIC8vIFN0b3JlIGlmIGNsb3NlciB0aGFuIGN1cnJlbnQgY2xvc2VzdAogICAgICAgICAgaWYgKGRpc3RhbmNlIDwgcmVzdWx0LmRpc3RhbmNlIHx8ICFyZXN1bHQuaGFzSGl0KSB7CiAgICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBSYXkuQU5ZOgogICAgICAgICAgLy8gUmVwb3J0IGFuZCBzdG9wLgogICAgICAgICAgdGhpcy5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7CiAgICAgICAgICByZXN1bHQuc2hvdWxkU3RvcCA9IHRydWU7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBBcyBwZXIgIkJhcnljZW50cmljIFRlY2huaXF1ZSIgYXMgbmFtZWQKICAgICAqIHtAbGluayBodHRwczovL3d3dy5ibGFja3Bhd24uY29tL3RleHRzL3BvaW50aW5wb2x5L2RlZmF1bHQuaHRtbCBoZXJlfSBidXQgd2l0aG91dCB0aGUgZGl2aXNpb24KICAgICAqLwoKCiAgICBzdGF0aWMgcG9pbnRJblRyaWFuZ2xlKHAsIGEsIGIsIGMpIHsKICAgICAgYy52c3ViKGEsIHYwKTsKICAgICAgYi52c3ViKGEsIHYxKTsKICAgICAgcC52c3ViKGEsIHYyKTsKICAgICAgY29uc3QgZG90MDAgPSB2MC5kb3QodjApOwogICAgICBjb25zdCBkb3QwMSA9IHYwLmRvdCh2MSk7CiAgICAgIGNvbnN0IGRvdDAyID0gdjAuZG90KHYyKTsKICAgICAgY29uc3QgZG90MTEgPSB2MS5kb3QodjEpOwogICAgICBjb25zdCBkb3QxMiA9IHYxLmRvdCh2Mik7CiAgICAgIGxldCB1OwogICAgICBsZXQgdjsKICAgICAgcmV0dXJuICh1ID0gZG90MTEgKiBkb3QwMiAtIGRvdDAxICogZG90MTIpID49IDAgJiYgKHYgPSBkb3QwMCAqIGRvdDEyIC0gZG90MDEgKiBkb3QwMikgPj0gMCAmJiB1ICsgdiA8IGRvdDAwICogZG90MTEgLSBkb3QwMSAqIGRvdDAxOwogICAgfQoKICB9CgogIFJheS5DTE9TRVNUID0gUkFZX01PREVTLkNMT1NFU1Q7CiAgUmF5LkFOWSA9IFJBWV9NT0RFUy5BTlk7CiAgUmF5LkFMTCA9IFJBWV9NT0RFUy5BTEw7CiAgY29uc3QgdG1wQUFCQiQxID0gbmV3IEFBQkIoKTsKICBjb25zdCB0bXBBcnJheSA9IFtdOwogIGNvbnN0IHYxID0gbmV3IFZlYzMoKTsKICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV94aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV9xaSA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgaW50ZXJzZWN0UG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdENvbnZleE9wdGlvbnMgPSB7CiAgICBmYWNlTGlzdDogWzBdCiAgfTsKICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0SGVpZ2h0ZmllbGRfbG9jYWxSYXkgPSBuZXcgUmF5KCk7CiAgY29uc3QgaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXggPSBbXTsKICBjb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX2ludGVyc2VjdGlvblBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Q29udmV4X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Q29udmV4X3ZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxEaXJlY3Rpb24gPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxGcm9tID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX2xvY2FsVG8gPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfd29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfd29ybGRJbnRlcnNlY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgbmV3IEFBQkIoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX3RyaWFuZ2xlcyA9IFtdOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTsKICBjb25zdCB2MCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0ID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gZGlzdGFuY2VGcm9tSW50ZXJzZWN0aW9uKGZyb20sIGRpcmVjdGlvbiwgcG9zaXRpb24pIHsKICAgIC8vIHYwIGlzIHZlY3RvciBmcm9tIGZyb20gdG8gcG9zaXRpb24KICAgIHBvc2l0aW9uLnZzdWIoZnJvbSwgdjApOwogICAgY29uc3QgZG90ID0gdjAuZG90KGRpcmVjdGlvbik7IC8vIGludGVyc2VjdCA9IGRpcmVjdGlvbipkb3QgKyBmcm9tCgogICAgZGlyZWN0aW9uLnNjYWxlKGRvdCwgaW50ZXJzZWN0KTsKICAgIGludGVyc2VjdC52YWRkKGZyb20sIGludGVyc2VjdCk7CiAgICBjb25zdCBkaXN0YW5jZSA9IHBvc2l0aW9uLmRpc3RhbmNlVG8oaW50ZXJzZWN0KTsKICAgIHJldHVybiBkaXN0YW5jZTsKICB9CiAgLyoqCiAgICogU3dlZXAgYW5kIHBydW5lIGJyb2FkcGhhc2UgYWxvbmcgb25lIGF4aXMuCiAgICovCgoKICBjbGFzcyBTQVBCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7CiAgICAvKioKICAgICAqIExpc3Qgb2YgYm9kaWVzIGN1cnJlbnRseSBpbiB0aGUgYnJvYWRwaGFzZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHdvcmxkIHRvIHNlYXJjaCBpbi4KICAgICAqLwoKICAgIC8qKgogICAgICogQXhpcyB0byBzb3J0IHRoZSBib2RpZXMgYWxvbmcuCiAgICAgKiBTZXQgdG8gMCBmb3IgeCBheGlzLCBhbmQgMSBmb3IgeSBheGlzLgogICAgICogRm9yIGJlc3QgcGVyZm9ybWFuY2UsIHBpY2sgdGhlIGF4aXMgd2hlcmUgYm9kaWVzIGFyZSBtb3N0IGRpc3RyaWJ1dGVkLgogICAgICovCgogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRzIG9mIHR3byBib2RpZXMgb3ZlcmxhcCwgYWxvbmcgdGhlIGdpdmVuIFNBUCBheGlzLgogICAgICovCiAgICBzdGF0aWMgY2hlY2tCb3VuZHMoYmksIGJqLCBheGlzSW5kZXgpIHsKICAgICAgbGV0IGJpUG9zOwogICAgICBsZXQgYmpQb3M7CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAwKSB7CiAgICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi54OwogICAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueDsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHsKICAgICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLnk7CiAgICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi55OwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIGJpUG9zID0gYmkucG9zaXRpb24uejsKICAgICAgICBialBvcyA9IGJqLnBvc2l0aW9uLno7CiAgICAgIH0KCiAgICAgIGNvbnN0IHJpID0gYmkuYm91bmRpbmdSYWRpdXMsCiAgICAgICAgICAgIHJqID0gYmouYm91bmRpbmdSYWRpdXMsCiAgICAgICAgICAgIGJvdW5kQTIgPSBiaVBvcyArIHJpLAogICAgICAgICAgICBib3VuZEIxID0gYmpQb3MgLSByajsKICAgICAgcmV0dXJuIGJvdW5kQjEgPCBib3VuZEEyOwogICAgfSAvLyBOb3RlOiB0aGVzZSBhcmUgaWRlbnRpY2FsLCBzYXZlIGZvciB4L3kveiBsb3dlcmJvdW5kCgogICAgLyoqCiAgICAgKiBpbnNlcnRpb25Tb3J0WAogICAgICovCgoKICAgIHN0YXRpYyBpbnNlcnRpb25Tb3J0WChhKSB7CiAgICAgIGZvciAobGV0IGkgPSAxLCBsID0gYS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gYVtpXTsKICAgICAgICBsZXQgajsKCiAgICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBpZiAoYVtqXS5hYWJiLmxvd2VyQm91bmQueCA8PSB2LmFhYmIubG93ZXJCb3VuZC54KSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFbaiArIDFdID0gYVtqXTsKICAgICAgICB9CgogICAgICAgIGFbaiArIDFdID0gdjsKICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9CiAgICAvKioKICAgICAqIGluc2VydGlvblNvcnRZCiAgICAgKi8KCgogICAgc3RhdGljIGluc2VydGlvblNvcnRZKGEpIHsKICAgICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSBhW2ldOwogICAgICAgIGxldCBqOwoKICAgICAgICBmb3IgKGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC55IDw9IHYuYWFiYi5sb3dlckJvdW5kLnkpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgYVtqICsgMV0gPSBhW2pdOwogICAgICAgIH0KCiAgICAgICAgYVtqICsgMV0gPSB2OwogICAgICB9CgogICAgICByZXR1cm4gYTsKICAgIH0KICAgIC8qKgogICAgICogaW5zZXJ0aW9uU29ydFoKICAgICAqLwoKCiAgICBzdGF0aWMgaW5zZXJ0aW9uU29ydFooYSkgewogICAgICBmb3IgKGxldCBpID0gMSwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IGFbaV07CiAgICAgICAgbGV0IGo7CgogICAgICAgIGZvciAoaiA9IGkgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKGFbal0uYWFiYi5sb3dlckJvdW5kLnogPD0gdi5hYWJiLmxvd2VyQm91bmQueikgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBhW2ogKyAxXSA9IGFbal07CiAgICAgICAgfQoKICAgICAgICBhW2ogKyAxXSA9IHY7CiAgICAgIH0KCiAgICAgIHJldHVybiBhOwogICAgfQoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuYXhpc0xpc3QgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0luZGV4ID0gdm9pZCAwOwogICAgICB0aGlzLl9hZGRCb2R5SGFuZGxlciA9IHZvaWQgMDsKICAgICAgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0xpc3QgPSBbXTsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICAgIHRoaXMuYXhpc0luZGV4ID0gMDsKICAgICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0OwoKICAgICAgdGhpcy5fYWRkQm9keUhhbmRsZXIgPSBldmVudCA9PiB7CiAgICAgICAgYXhpc0xpc3QucHVzaChldmVudC5ib2R5KTsKICAgICAgfTsKCiAgICAgIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyID0gZXZlbnQgPT4gewogICAgICAgIGNvbnN0IGlkeCA9IGF4aXNMaXN0LmluZGV4T2YoZXZlbnQuYm9keSk7CgogICAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgICBheGlzTGlzdC5zcGxpY2UoaWR4LCAxKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAod29ybGQpIHsKICAgICAgICB0aGlzLnNldFdvcmxkKHdvcmxkKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDaGFuZ2UgdGhlIHdvcmxkCiAgICAgKi8KCgogICAgc2V0V29ybGQod29ybGQpIHsKICAgICAgLy8gQ2xlYXIgdGhlIG9sZCBheGlzIGFycmF5CiAgICAgIHRoaXMuYXhpc0xpc3QubGVuZ3RoID0gMDsgLy8gQWRkIGFsbCBib2RpZXMgZnJvbSB0aGUgbmV3IHdvcmxkCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuYXhpc0xpc3QucHVzaCh3b3JsZC5ib2RpZXNbaV0pOwogICAgICB9IC8vIFJlbW92ZSBvbGQgaGFuZGxlcnMsIGlmIGFueQoKCiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7CiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3JlbW92ZUJvZHknLCB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlcik7IC8vIEFkZCBoYW5kbGVycyB0byB1cGRhdGUgdGhlIGxpc3Qgb2YgYm9kaWVzLgoKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcignYWRkQm9keScsIHRoaXMuX2FkZEJvZHlIYW5kbGVyKTsKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncmVtb3ZlQm9keScsIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29sbGVjdCBhbGwgY29sbGlzaW9uIHBhaXJzCiAgICAgKi8KCgogICAgY29sbGlzaW9uUGFpcnMod29ybGQsIHAxLCBwMikgewogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7CiAgICAgIGxldCBpOwogICAgICBsZXQgajsKCiAgICAgIGlmICh0aGlzLmRpcnR5KSB7CiAgICAgICAgdGhpcy5zb3J0TGlzdCgpOwogICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTsKICAgICAgfSAvLyBMb29rIHRocm91Z2ggdGhlIGxpc3QKCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBOOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGJqID0gYm9kaWVzW2pdOwoKICAgICAgICAgIGlmICghdGhpcy5uZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihiaSwgYmopKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghU0FQQnJvYWRwaGFzZS5jaGVja0JvdW5kcyhiaSwgYmosIGF4aXNJbmRleCkpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcDEsIHAyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzb3J0TGlzdCgpIHsKICAgICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgY29uc3QgTiA9IGF4aXNMaXN0Lmxlbmd0aDsgLy8gVXBkYXRlIEFBQkJzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBheGlzTGlzdFtpXTsKCiAgICAgICAgaWYgKGJpLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgICAgYmkudXBkYXRlQUFCQigpOwogICAgICAgIH0KICAgICAgfSAvLyBTb3J0IHRoZSBsaXN0CgoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMCkgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFgoYXhpc0xpc3QpOwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMSkgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFkoYXhpc0xpc3QpOwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFooYXhpc0xpc3QpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIHRoZSB2YXJpYW5jZSBvZiB0aGUgYm9keSBwb3NpdGlvbnMgYW5kIGVzdGltYXRlcyB0aGUgYmVzdCBheGlzIHRvIHVzZS4KICAgICAqIFdpbGwgYXV0b21hdGljYWxseSBzZXQgcHJvcGVydHkgYGF4aXNJbmRleGAuCiAgICAgKi8KCgogICAgYXV0b0RldGVjdEF4aXMoKSB7CiAgICAgIGxldCBzdW1YID0gMDsKICAgICAgbGV0IHN1bVgyID0gMDsKICAgICAgbGV0IHN1bVkgPSAwOwogICAgICBsZXQgc3VtWTIgPSAwOwogICAgICBsZXQgc3VtWiA9IDA7CiAgICAgIGxldCBzdW1aMiA9IDA7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYXhpc0xpc3Q7CiAgICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBpbnZOID0gMSAvIE47CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICBjb25zdCBjZW50ZXJYID0gYi5wb3NpdGlvbi54OwogICAgICAgIHN1bVggKz0gY2VudGVyWDsKICAgICAgICBzdW1YMiArPSBjZW50ZXJYICogY2VudGVyWDsKICAgICAgICBjb25zdCBjZW50ZXJZID0gYi5wb3NpdGlvbi55OwogICAgICAgIHN1bVkgKz0gY2VudGVyWTsKICAgICAgICBzdW1ZMiArPSBjZW50ZXJZICogY2VudGVyWTsKICAgICAgICBjb25zdCBjZW50ZXJaID0gYi5wb3NpdGlvbi56OwogICAgICAgIHN1bVogKz0gY2VudGVyWjsKICAgICAgICBzdW1aMiArPSBjZW50ZXJaICogY2VudGVyWjsKICAgICAgfQoKICAgICAgY29uc3QgdmFyaWFuY2VYID0gc3VtWDIgLSBzdW1YICogc3VtWCAqIGludk47CiAgICAgIGNvbnN0IHZhcmlhbmNlWSA9IHN1bVkyIC0gc3VtWSAqIHN1bVkgKiBpbnZOOwogICAgICBjb25zdCB2YXJpYW5jZVogPSBzdW1aMiAtIHN1bVogKiBzdW1aICogaW52TjsKCiAgICAgIGlmICh2YXJpYW5jZVggPiB2YXJpYW5jZVkpIHsKICAgICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VaKSB7CiAgICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodmFyaWFuY2VZID4gdmFyaWFuY2VaKSB7CiAgICAgICAgdGhpcy5heGlzSW5kZXggPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0ID0gW10pIHsKICAgICAgaWYgKHRoaXMuZGlydHkpIHsKICAgICAgICB0aGlzLnNvcnRMaXN0KCk7CiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlOwogICAgICB9CgogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgbGV0IGF4aXMgPSAneCc7CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgYXhpcyA9ICd5JzsKICAgICAgfQoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIGF4aXMgPSAneic7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKICAgICAgYWFiYi5sb3dlckJvdW5kW2F4aXNdOwogICAgICBhYWJiLnVwcGVyQm91bmRbYXhpc107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4aXNMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGF4aXNMaXN0W2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGIuYWFiYi5vdmVybGFwcyhhYWJiKSkgewogICAgICAgICAgcmVzdWx0LnB1c2goYik7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CgogIGNsYXNzIFV0aWxzIHsKICAgIC8qKgogICAgICogRXh0ZW5kIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBvYmplY3QuIE1heSBiZSBmYWxzeTogaW4gdGhpcyBjYXNlLCBhIG5ldyBvYmplY3QgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuCiAgICAgKiBAcGFyYW0gZGVmYXVsdHMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcmV0dXJuIFRoZSBtb2RpZmllZCBvcHRpb25zIG9iamVjdC4KICAgICAqLwogICAgc3RhdGljIGRlZmF1bHRzKG9wdGlvbnMgPSB7fSwgZGVmYXVsdHMpIHsKICAgICAgZm9yIChsZXQga2V5IGluIGRlZmF1bHRzKSB7CiAgICAgICAgaWYgKCEoa2V5IGluIG9wdGlvbnMpKSB7CiAgICAgICAgICBvcHRpb25zW2tleV0gPSBkZWZhdWx0c1trZXldOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG9wdGlvbnM7CiAgICB9CgogIH0KICAvKioKICAgKiBDb25zdHJhaW50IGJhc2UgY2xhc3MKICAgKi8KCgogIGNsYXNzIENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBFcXVhdGlvbnMgdG8gYmUgc29sdmVkIGluIHRoaXMgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogQm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBCb2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byBmYWxzZSBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgYm9kaWVzIHRvIGNvbGxpZGUgd2hlbiB0aGV5IGFyZSBjb25uZWN0ZWQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gdm9pZCAwOwogICAgICB0aGlzLmJvZHlBID0gdm9pZCAwOwogICAgICB0aGlzLmJvZHlCID0gdm9pZCAwOwogICAgICB0aGlzLmlkID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSB2b2lkIDA7CiAgICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7CiAgICAgICAgY29sbGlkZUNvbm5lY3RlZDogdHJ1ZSwKICAgICAgICB3YWtlVXBCb2RpZXM6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gW107CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmlkID0gQ29uc3RyYWludC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkOwoKICAgICAgaWYgKG9wdGlvbnMud2FrZVVwQm9kaWVzKSB7CiAgICAgICAgaWYgKGJvZHlBKSB7CiAgICAgICAgICBib2R5QS53YWtlVXAoKTsKICAgICAgICB9CgogICAgICAgIGlmIChib2R5QikgewogICAgICAgICAgYm9keUIud2FrZVVwKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBhbGwgdGhlIGVxdWF0aW9ucyB3aXRoIGRhdGEuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGhvZCB1cGRhdGUoKSBub3QgaW1wbG1lbWVudGVkIGluIHRoaXMgQ29uc3RyYWludCBzdWJjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogRW5hYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGVuYWJsZSgpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVxcy5sZW5ndGg7IGkrKykgewogICAgICAgIGVxc1tpXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBEaXNhYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGRpc2FibGUoKSB7CiAgICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBlcXNbaV0uZW5hYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9CgogIH0KCiAgQ29uc3RyYWludC5pZENvdW50ZXIgPSAwOwogIC8qKgogICAqIEFuIGVsZW1lbnQgY29udGFpbmluZyA2IGVudHJpZXMsIDMgc3BhdGlhbCBhbmQgMyByb3RhdGlvbmFsIGRlZ3JlZXMgb2YgZnJlZWRvbS4KICAgKi8KCiAgY2xhc3MgSmFjb2JpYW5FbGVtZW50IHsKICAgIC8qKgogICAgICogc3BhdGlhbAogICAgICovCgogICAgLyoqCiAgICAgKiByb3RhdGlvbmFsCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnNwYXRpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMucm90YXRpb25hbCA9IHZvaWQgMDsKICAgICAgdGhpcy5zcGF0aWFsID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yb3RhdGlvbmFsID0gbmV3IFZlYzMoKTsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgd2l0aCBvdGhlciBKYWNvYmlhbkVsZW1lbnQKICAgICAqLwoKCiAgICBtdWx0aXBseUVsZW1lbnQoZWxlbWVudCkgewogICAgICByZXR1cm4gZWxlbWVudC5zcGF0aWFsLmRvdCh0aGlzLnNwYXRpYWwpICsgZWxlbWVudC5yb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB3aXRoIHR3byB2ZWN0b3JzCiAgICAgKi8KCgogICAgbXVsdGlwbHlWZWN0b3JzKHNwYXRpYWwsIHJvdGF0aW9uYWwpIHsKICAgICAgcmV0dXJuIHNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyByb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQoKICB9CiAgLyoqCiAgICogRXF1YXRpb24gYmFzZSBjbGFzcy4KICAgKgogICAqIGBhYCwgYGJgIGFuZCBgZXBzYCBhcmUge0BsaW5rIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDE1L2xlY3R1cmVzL1NQT09LbGFibm90ZXMucGRmIFNQT09LfSBwYXJhbWV0ZXJzIHRoYXQgZGVmYXVsdCB0byBgMC4wYC4gU2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUvY2Fubm9uLmpzL2lzc3Vlcy8yMzgjaXNzdWVjb21tZW50LTE0NzE3MjMyNyB0aGlzIGV4Y2hhbmdlfSBmb3IgbW9yZSBkZXRhaWxzIG9uIENhbm5vbidzIHBoeXNpY3MgaW1wbGVtZW50YXRpb24uCiAgICovCgoKICBjbGFzcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIE1pbmltdW0gKHJlYWQ6IG5lZ2F0aXZlIG1heCkgZm9yY2UgdG8gYmUgYXBwbGllZCBieSB0aGUgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogTWF4aW11bSAocmVhZDogcG9zaXRpdmUgbWF4KSBmb3JjZSB0byBiZSBhcHBsaWVkIGJ5IHRoZSBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBTUE9PSyBwYXJhbWV0ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogU1BPT0sgcGFyYW1ldGVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNQT09LIHBhcmFtZXRlcgogICAgICovCgogICAgLyoqCiAgICAgKiBBIG51bWJlciwgcHJvcG9ydGlvbmFsIHRvIHRoZSBmb3JjZSBhZGRlZCB0byB0aGUgYm9kaWVzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihiaSwgYmosIG1pbkZvcmNlID0gLTFlNiwgbWF4Rm9yY2UgPSAxZTYpIHsKICAgICAgdGhpcy5pZCA9IHZvaWQgMDsKICAgICAgdGhpcy5taW5Gb3JjZSA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXhGb3JjZSA9IHZvaWQgMDsKICAgICAgdGhpcy5iaSA9IHZvaWQgMDsKICAgICAgdGhpcy5iaiA9IHZvaWQgMDsKICAgICAgdGhpcy5zaSA9IHZvaWQgMDsKICAgICAgdGhpcy5zaiA9IHZvaWQgMDsKICAgICAgdGhpcy5hID0gdm9pZCAwOwogICAgICB0aGlzLmIgPSB2b2lkIDA7CiAgICAgIHRoaXMuZXBzID0gdm9pZCAwOwogICAgICB0aGlzLmphY29iaWFuRWxlbWVudEEgPSB2b2lkIDA7CiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QiA9IHZvaWQgMDsKICAgICAgdGhpcy5lbmFibGVkID0gdm9pZCAwOwogICAgICB0aGlzLm11bHRpcGxpZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMuaWQgPSBFcXVhdGlvbi5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5taW5Gb3JjZSA9IG1pbkZvcmNlOwogICAgICB0aGlzLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICAgIHRoaXMuYmkgPSBiaTsKICAgICAgdGhpcy5iaiA9IGJqOwogICAgICB0aGlzLmEgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlcgoKICAgICAgdGhpcy5iID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuZXBzID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QSA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTsKICAgICAgdGhpcy5qYWNvYmlhbkVsZW1lbnRCID0gbmV3IEphY29iaWFuRWxlbWVudCgpOwogICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlOwogICAgICB0aGlzLm11bHRpcGxpZXIgPSAwOwogICAgICB0aGlzLnNldFNwb29rUGFyYW1zKDFlNywgNCwgMSAvIDYwKTsgLy8gU2V0IHR5cGljYWwgc3Bvb2sgcGFyYW1zCiAgICB9CiAgICAvKioKICAgICAqIFJlY2FsY3VsYXRlcyBhLCBiLCBhbmQgZXBzLgogICAgICoKICAgICAqIFRoZSBFcXVhdGlvbiBjb25zdHJ1Y3RvciBzZXRzIHR5cGljYWwgU1BPT0sgcGFyYW1ldGVycyBhcyBzdWNoOgogICAgICogKiBgc3RpZmZuZXNzYCA9IDFlNwogICAgICogKiBgcmVsYXhhdGlvbmAgPSA0CiAgICAgKiAqIGB0aW1lU3RlcGA9IDEgLyA2MCwgX25vdGUgdGhlIGhhcmRjb2RlZCByZWZyZXNoIHJhdGUuXwogICAgICovCgoKICAgIHNldFNwb29rUGFyYW1zKHN0aWZmbmVzcywgcmVsYXhhdGlvbiwgdGltZVN0ZXApIHsKICAgICAgY29uc3QgZCA9IHJlbGF4YXRpb247CiAgICAgIGNvbnN0IGsgPSBzdGlmZm5lc3M7CiAgICAgIGNvbnN0IGggPSB0aW1lU3RlcDsKICAgICAgdGhpcy5hID0gNC4wIC8gKGggKiAoMSArIDQgKiBkKSk7CiAgICAgIHRoaXMuYiA9IDQuMCAqIGQgLyAoMSArIDQgKiBkKTsKICAgICAgdGhpcy5lcHMgPSA0LjAgLyAoaCAqIGggKiBrICogKDEgKyA0ICogZCkpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgcmlnaHQgaGFuZCBzaWRlIG9mIHRoZSBTUE9PSyBlcXVhdGlvbgogICAgICovCgoKICAgIGNvbXB1dGVCKGEsIGIsIGgpIHsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHcSA9IHRoaXMuY29tcHV0ZUdxKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIHJldHVybiAtR3EgKiBhIC0gR1cgKiBiIC0gR2lNZiAqIGg7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqcSwgd2hlcmUgcSBhcmUgdGhlIGdlbmVyYWxpemVkIGJvZHkgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBjb21wdXRlR3EoKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHhpID0gYmkucG9zaXRpb247CiAgICAgIGNvbnN0IHhqID0gYmoucG9zaXRpb247CiAgICAgIHJldHVybiBHQS5zcGF0aWFsLmRvdCh4aSkgKyBHQi5zcGF0aWFsLmRvdCh4aik7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqVywgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllcwogICAgICovCgoKICAgIGNvbXB1dGVHVygpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdmkgPSBiaS52ZWxvY2l0eTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2kgPSBiaS5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGNvbnN0IHdqID0gYmouYW5ndWxhclZlbG9jaXR5OwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRypXbGFtYmRhLCB3aGVyZSBXIGFyZSB0aGUgYm9keSB2ZWxvY2l0aWVzCiAgICAgKi8KCgogICAgY29tcHV0ZUdXbGFtYmRhKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB2aSA9IGJpLnZsYW1iZGE7CiAgICAgIGNvbnN0IHZqID0gYmoudmxhbWJkYTsKICAgICAgY29uc3Qgd2kgPSBiaS53bGFtYmRhOwogICAgICBjb25zdCB3aiA9IGJqLndsYW1iZGE7CiAgICAgIHJldHVybiBHQS5tdWx0aXBseVZlY3RvcnModmksIHdpKSArIEdCLm11bHRpcGx5VmVjdG9ycyh2aiwgd2opOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpmLCB3aGVyZSBNIGlzIHRoZSBtYXNzIG1hdHJpeCB3aXRoIGRpYWdvbmFsIGJsb2NrcyBmb3IgZWFjaCBib2R5LCBhbmQgZiBhcmUgdGhlIGZvcmNlcyBvbiB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGNvbXB1dGVHaU1mKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCBmaSA9IGJpLmZvcmNlOwogICAgICBjb25zdCB0aSA9IGJpLnRvcnF1ZTsKICAgICAgY29uc3QgZmogPSBiai5mb3JjZTsKICAgICAgY29uc3QgdGogPSBiai50b3JxdWU7CiAgICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZNYXNzaiA9IGJqLmludk1hc3NTb2x2ZTsKICAgICAgZmkuc2NhbGUoaW52TWFzc2ksIGlNZmkpOwogICAgICBmai5zY2FsZShpbnZNYXNzaiwgaU1maik7CiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRpLCBpbnZJaV92bXVsdF90YXVpKTsKICAgICAgYmouaW52SW5lcnRpYVdvcmxkU29sdmUudm11bHQodGosIGludklqX3ZtdWx0X3RhdWopOwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKGlNZmksIGludklpX3ZtdWx0X3RhdWkpICsgR0IubXVsdGlwbHlWZWN0b3JzKGlNZmosIGludklqX3ZtdWx0X3RhdWopOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpHJwogICAgICovCgoKICAgIGNvbXB1dGVHaU1HdCgpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgaW52TWFzc2kgPSBiaS5pbnZNYXNzU29sdmU7CiAgICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZJaSA9IGJpLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBjb25zdCBpbnZJaiA9IGJqLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBsZXQgcmVzdWx0ID0gaW52TWFzc2kgKyBpbnZNYXNzajsKICAgICAgaW52SWkudm11bHQoR0Eucm90YXRpb25hbCwgdG1wKTsKICAgICAgcmVzdWx0ICs9IHRtcC5kb3QoR0Eucm90YXRpb25hbCk7CiAgICAgIGludklqLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRtcCk7CiAgICAgIHJlc3VsdCArPSB0bXAuZG90KEdCLnJvdGF0aW9uYWwpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgY29uc3RyYWludCB2ZWxvY2l0eSB0byB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB0ZW1wID0gYWRkVG9XbGFtYmRhX3RlbXA7IC8vIEFkZCB0byBsaW5lYXIgdmVsb2NpdHkKICAgICAgLy8gdl9sYW1iZGEgKz0gaW52KE0pICogZGVsdGFfbGFtYmEgKiBHCgogICAgICBiaS52bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihiaS5pbnZNYXNzU29sdmUgKiBkZWx0YWxhbWJkYSwgR0Euc3BhdGlhbCwgYmkudmxhbWJkYSk7CiAgICAgIGJqLnZsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGJqLmludk1hc3NTb2x2ZSAqIGRlbHRhbGFtYmRhLCBHQi5zcGF0aWFsLCBiai52bGFtYmRhKTsgLy8gQWRkIHRvIGFuZ3VsYXIgdmVsb2NpdHkKCiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiaS53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmkud2xhbWJkYSk7CiAgICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiai53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmoud2xhbWJkYSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGRlbm9taW5hdG9yIHBhcnQgb2YgdGhlIFNQT09LIGVxdWF0aW9uOiBDID0gRyppbnYoTSkqRycgKyBlcHMKICAgICAqLwoKCiAgICBjb21wdXRlQygpIHsKICAgICAgcmV0dXJuIHRoaXMuY29tcHV0ZUdpTUd0KCkgKyB0aGlzLmVwczsKICAgIH0KCiAgfQoKICBFcXVhdGlvbi5pZENvdW50ZXIgPSAwOwogIGNvbnN0IGlNZmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGlNZmogPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklpX3ZtdWx0X3RhdWkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklqX3ZtdWx0X3RhdWogPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYWRkVG9XbGFtYmRhX3RlbXAgPSBuZXcgVmVjMygpOwogIC8qKgogICAqIENvbnRhY3Qvbm9uLXBlbmV0cmF0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb24KICAgKi8KCiAgY2xhc3MgQ29udGFjdEVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiAiYm91bmNpbmVzcyI6IHUxID0gLWUqdTAKICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgZ29lcyBmcm9tIHRoZSBjZW50ZXIgb2YgYmkgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkLW9yaWVudGVkIHZlY3RvciB0aGF0IHN0YXJ0cyBpbiBib2R5IGogcG9zaXRpb24gYW5kIGdvZXMgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbnRhY3Qgbm9ybWFsLCBwb2ludGluZyBvdXQgb2YgYm9keSBpLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlID0gMWU2KSB7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgMCwgbWF4Rm9yY2UpOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnJpID0gdm9pZCAwOwogICAgICB0aGlzLnJqID0gdm9pZCAwOwogICAgICB0aGlzLm5pID0gdm9pZCAwOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gMC4wOwogICAgICB0aGlzLnJpID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yaiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubmkgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHJpID0gdGhpcy5yaTsKICAgICAgY29uc3QgcmogPSB0aGlzLnJqOwogICAgICBjb25zdCByaXhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB2aSA9IGJpLnZlbG9jaXR5OwogICAgICBjb25zdCB3aSA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgYmkuZm9yY2U7CiAgICAgIGJpLnRvcnF1ZTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2ogPSBiai5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGJqLmZvcmNlOwogICAgICBiai50b3JxdWU7CiAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IG4gPSB0aGlzLm5pOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKG4sIHJpeG4pOwogICAgICByai5jcm9zcyhuLCByanhuKTsgLy8gZyA9IHhqK3JqIC0oeGkrcmkpCiAgICAgIC8vIEcgPSBbIC1uaSAgLXJpeG4gIG5pICByanhuIF0KCiAgICAgIG4ubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXhuLm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KG4pOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4bik7IC8vIENhbGN1bGF0ZSB0aGUgcGVuZXRyYXRpb24gdmVjdG9yCgogICAgICBwZW5ldHJhdGlvblZlYy5jb3B5KGJqLnBvc2l0aW9uKTsKICAgICAgcGVuZXRyYXRpb25WZWMudmFkZChyaiwgcGVuZXRyYXRpb25WZWMpOwogICAgICBwZW5ldHJhdGlvblZlYy52c3ViKGJpLnBvc2l0aW9uLCBwZW5ldHJhdGlvblZlYyk7CiAgICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIocmksIHBlbmV0cmF0aW9uVmVjKTsKICAgICAgY29uc3QgZyA9IG4uZG90KHBlbmV0cmF0aW9uVmVjKTsgLy8gQ29tcHV0ZSBpdGVyYXRpb24KCiAgICAgIGNvbnN0IGVQbHVzT25lID0gdGhpcy5yZXN0aXR1dGlvbiArIDE7CiAgICAgIGNvbnN0IEdXID0gZVBsdXNPbmUgKiB2ai5kb3QobikgLSBlUGx1c09uZSAqIHZpLmRvdChuKSArIHdqLmRvdChyanhuKSAtIHdpLmRvdChyaXhuKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjdXJyZW50IHJlbGF0aXZlIHZlbG9jaXR5IGluIHRoZSBjb250YWN0IHBvaW50LgogICAgICovCgoKICAgIGdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwoKSB7CiAgICAgIGNvbnN0IHZpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmk7CiAgICAgIGNvbnN0IHZqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmo7CiAgICAgIGNvbnN0IHhpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGk7CiAgICAgIGNvbnN0IHhqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGo7CiAgICAgIGNvbnN0IHJlbFZlbCA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbDsKICAgICAgdGhpcy5iaS5wb3NpdGlvbi52YWRkKHRoaXMucmksIHhpKTsKICAgICAgdGhpcy5iai5wb3NpdGlvbi52YWRkKHRoaXMucmosIHhqKTsKICAgICAgdGhpcy5iaS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh4aSwgdmkpOwogICAgICB0aGlzLmJqLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHhqLCB2aik7CiAgICAgIHZpLnZzdWIodmosIHJlbFZlbCk7CiAgICAgIHJldHVybiB0aGlzLm5pLmRvdChyZWxWZWwpOwogICAgfQoKICB9CgogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMSA9IG5ldyBWZWMzKCk7IC8vIFRlbXAgdmVjdG9ycwoKICBjb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZqID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGogPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbCA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQ29ubmVjdHMgdHdvIGJvZGllcyBhdCBnaXZlbiBvZmZzZXQgcG9pbnRzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGJvZHlBID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGNvbnN0IGJvZHlCID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGJvZHlBLnBvc2l0aW9uLnNldCgtMSwgMCwgMCkKICAgKiAgICAgYm9keUIucG9zaXRpb24uc2V0KDEsIDAsIDApCiAgICogICAgIGJvZHlBLmFkZFNoYXBlKHNoYXBlQSkKICAgKiAgICAgYm9keUIuYWRkU2hhcGUoc2hhcGVCKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlBKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlCKQogICAqICAgICBjb25zdCBsb2NhbFBpdm90QSA9IG5ldyBWZWMzKDEsIDAsIDApCiAgICogICAgIGNvbnN0IGxvY2FsUGl2b3RCID0gbmV3IFZlYzMoLTEsIDAsIDApCiAgICogICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChib2R5QSwgbG9jYWxQaXZvdEEsIGJvZHlCLCBsb2NhbFBpdm90QikKICAgKiAgICAgd29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KQogICAqLwoKICBjbGFzcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IGV4dGVuZHMgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIFBpdm90LCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBpdm90LCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBwaXZvdEEgVGhlIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyBvZiBib2R5QSB3aGljaCBib2R5QSBpcyBjb25zdHJhaW5lZCB0by4KICAgICAqIEBwYXJhbSBib2R5QiBCb2R5IHRoYXQgd2lsbCBiZSBjb25zdHJhaW5lZCBpbiBhIHNpbWlsYXIgd2F5IHRvIHRoZSBzYW1lIHBvaW50IGFzIGJvZHlBLiBXZSB3aWxsIHRoZXJlZm9yZSBnZXQgYSBsaW5rIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCLiBJZiBub3Qgc3BlY2lmaWVkLCBib2R5QSB3aWxsIGJlIGNvbnN0cmFpbmVkIHRvIGEgc3RhdGljIHBvaW50LgogICAgICogQHBhcmFtIHBpdm90QiBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlCIHdoaWNoIGJvZHlCIGlzIGNvbnN0cmFpbmVkIHRvLgogICAgICogQHBhcmFtIG1heEZvcmNlIFRoZSBtYXhpbXVtIGZvcmNlIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gY29uc3RyYWluIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBwaXZvdEEgPSBuZXcgVmVjMygpLCBib2R5QiwgcGl2b3RCID0gbmV3IFZlYzMoKSwgbWF4Rm9yY2UgPSAxZTYpIHsKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCKTsKICAgICAgdGhpcy5waXZvdEEgPSB2b2lkIDA7CiAgICAgIHRoaXMucGl2b3RCID0gdm9pZCAwOwogICAgICB0aGlzLmVxdWF0aW9uWCA9IHZvaWQgMDsKICAgICAgdGhpcy5lcXVhdGlvblkgPSB2b2lkIDA7CiAgICAgIHRoaXMuZXF1YXRpb25aID0gdm9pZCAwOwogICAgICB0aGlzLnBpdm90QSA9IHBpdm90QS5jbG9uZSgpOwogICAgICB0aGlzLnBpdm90QiA9IHBpdm90Qi5jbG9uZSgpOwogICAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblggPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWSA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsKICAgICAgY29uc3QgeiA9IHRoaXMuZXF1YXRpb25aID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOyAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXIKCiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goeCwgeSwgeik7IC8vIE1ha2UgdGhlIGVxdWF0aW9ucyBiaWRpcmVjdGlvbmFsCgogICAgICB4Lm1pbkZvcmNlID0geS5taW5Gb3JjZSA9IHoubWluRm9yY2UgPSAtbWF4Rm9yY2U7CiAgICAgIHgubWF4Rm9yY2UgPSB5Lm1heEZvcmNlID0gei5tYXhGb3JjZSA9IG1heEZvcmNlOwogICAgICB4Lm5pLnNldCgxLCAwLCAwKTsKICAgICAgeS5uaS5zZXQoMCwgMSwgMCk7CiAgICAgIHoubmkuc2V0KDAsIDAsIDEpOwogICAgfQoKICAgIHVwZGF0ZSgpIHsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IHggPSB0aGlzLmVxdWF0aW9uWDsKICAgICAgY29uc3QgeSA9IHRoaXMuZXF1YXRpb25ZOwogICAgICBjb25zdCB6ID0gdGhpcy5lcXVhdGlvblo7IC8vIFJvdGF0ZSB0aGUgcGl2b3RzIHRvIHdvcmxkIHNwYWNlCgogICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMucGl2b3RBLCB4LnJpKTsKICAgICAgYm9keUIucXVhdGVybmlvbi52bXVsdCh0aGlzLnBpdm90QiwgeC5yaik7CiAgICAgIHkucmkuY29weSh4LnJpKTsKICAgICAgeS5yai5jb3B5KHgucmopOwogICAgICB6LnJpLmNvcHkoeC5yaSk7CiAgICAgIHoucmouY29weSh4LnJqKTsKICAgIH0KCiAgfQogIC8qKgogICAqIENvbmUgZXF1YXRpb24uIFdvcmtzIHRvIGtlZXAgdGhlIGdpdmVuIGJvZHkgd29ybGQgdmVjdG9ycyBhbGlnbmVkLCBvciB0aWx0ZWQgd2l0aGluIGEgZ2l2ZW4gYW5nbGUgZnJvbSBlYWNoIG90aGVyLgogICAqLwoKCiAgY2xhc3MgQ29uZUVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBMb2NhbCBheGlzIGluIEEKICAgICAqLwoKICAgIC8qKgogICAgICogTG9jYWwgYXhpcyBpbiBCCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSAiY29uZSBhbmdsZSIgdG8ga2VlcAogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkgewogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7CiAgICAgIHRoaXMuYW5nbGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMCwgMSwgMCk7CiAgICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgbmogPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMjsKICAgICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDI7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICBuaS5jcm9zcyhuaiwgbml4bmopOwogICAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBUaGUgYW5nbGUgYmV0d2VlbiB0d28gdmVjdG9yIGlzOgogICAgICAvLyBjb3ModGhldGEpID0gYSAqIGIgLyAobGVuZ3RoKGEpICogbGVuZ3RoKGIpID0geyBsZW4oYSkgPSBsZW4oYikgPSAxIH0gPSBhICogYgogICAgICAvLyBnID0gYSAqIGIKICAgICAgLy8gZ2RvdCA9IChiIHggYSkgKiB3aSArIChhIHggYikgKiB3agogICAgICAvLyBHID0gWzAgYnhhIDAgYXhiXQogICAgICAvLyBXID0gW3ZpIHdpIHZqIHdqXQoKICAgICAgR0Eucm90YXRpb25hbC5jb3B5KG5qeG5pKTsKICAgICAgR0Iucm90YXRpb25hbC5jb3B5KG5peG5qKTsKICAgICAgY29uc3QgZyA9IE1hdGguY29zKHRoaXMuYW5nbGUpIC0gbmkuZG90KG5qKTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLWcgKiBhIC0gR1cgKiBiIC0gaCAqIEdpTWY7CiAgICAgIHJldHVybiBCOwogICAgfQoKICB9CgogIGNvbnN0IHRtcFZlYzEkMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMiQyID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBSb3RhdGlvbmFsIGNvbnN0cmFpbnQuIFdvcmtzIHRvIGtlZXAgdGhlIGxvY2FsIHZlY3RvcnMgb3J0aG9nb25hbCB0byBlYWNoIG90aGVyIGluIHdvcmxkIHNwYWNlLgogICAqLwoKICBjbGFzcyBSb3RhdGlvbmFsRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBtYXhBbmdsZQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkgewogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7CiAgICAgIHRoaXMubWF4QW5nbGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMCwgMSwgMCk7CiAgICAgIHRoaXMubWF4QW5nbGUgPSBNYXRoLlBJIC8gMjsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgbmogPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMTsKICAgICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDE7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICBuaS5jcm9zcyhuaiwgbml4bmopOwogICAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBnID0gbmkgKiBuagogICAgICAvLyBnZG90ID0gKG5qIHggbmkpICogd2kgKyAobmkgeCBuaikgKiB3agogICAgICAvLyBHID0gWzAgbmp4bmkgMCBuaXhual0KICAgICAgLy8gVyA9IFt2aSB3aSB2aiB3al0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShuaXhuaik7CiAgICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLm1heEFuZ2xlKSAtIG5pLmRvdChuaik7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQoKICBjb25zdCB0bXBWZWMxJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIkMSA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQSBDb25lIFR3aXN0IGNvbnN0cmFpbnQsIHVzZWZ1bCBmb3IgcmFnZG9sbHMuCiAgICovCgogIGNsYXNzIENvbmVUd2lzdENvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYXhpcyBkaXJlY3Rpb24gZm9yIHRoZSBjb25zdHJhaW50IG9mIHRoZSBib2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBhcGVydHVyZSBhbmdsZSBvZiB0aGUgY29uZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHR3aXN0IGFuZ2xlIG9mIHRoZSBqb2ludC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zID0ge30pIHsKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlbgoKICAgICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gb3B0aW9ucy5waXZvdEIgPyBvcHRpb25zLnBpdm90Qi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gdm9pZCAwOwogICAgICB0aGlzLmF4aXNCID0gdm9pZCAwOwogICAgICB0aGlzLmFuZ2xlID0gdm9pZCAwOwogICAgICB0aGlzLnR3aXN0QW5nbGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29uZUVxdWF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnR3aXN0RXF1YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgdGhpcy5heGlzQiA9IG9wdGlvbnMuYXhpc0IgPyBvcHRpb25zLmF4aXNCLmNsb25lKCkgOiBuZXcgVmVjMygpOwogICAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSAhIW9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKICAgICAgdGhpcy5hbmdsZSA9IHR5cGVvZiBvcHRpb25zLmFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYW5nbGUgOiAwOwogICAgICBjb25zdCBjID0gdGhpcy5jb25lRXF1YXRpb24gPSBuZXcgQ29uZUVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHQgPSB0aGlzLnR3aXN0RXF1YXRpb24gPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIHRoaXMudHdpc3RBbmdsZSA9IHR5cGVvZiBvcHRpb25zLnR3aXN0QW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy50d2lzdEFuZ2xlIDogMDsgLy8gTWFrZSB0aGUgY29uZSBlcXVhdGlvbiBwdXNoIHRoZSBib2RpZXMgdG93YXJkIHRoZSBjb25lIGF4aXMsIG5vdCBvdXR3YXJkCgogICAgICBjLm1heEZvcmNlID0gMDsKICAgICAgYy5taW5Gb3JjZSA9IC1tYXhGb3JjZTsgLy8gTWFrZSB0aGUgdHdpc3QgZXF1YXRpb24gYWRkIHRvcnF1ZSB0b3dhcmQgdGhlIGluaXRpYWwgcG9zaXRpb24KCiAgICAgIHQubWF4Rm9yY2UgPSAwOwogICAgICB0Lm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGMsIHQpOwogICAgfQoKICAgIHVwZGF0ZSgpIHsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IGNvbmUgPSB0aGlzLmNvbmVFcXVhdGlvbjsKICAgICAgY29uc3QgdHdpc3QgPSB0aGlzLnR3aXN0RXF1YXRpb247CiAgICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBVcGRhdGUgdGhlIGF4ZXMgdG8gdGhlIGNvbmUgY29uc3RyYWludAoKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuYXhpc0EsIGNvbmUuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy5heGlzQiwgY29uZS5heGlzQik7IC8vIFVwZGF0ZSB0aGUgd29ybGQgYXhlcyBpbiB0aGUgdHdpc3QgY29uc3RyYWludAoKICAgICAgdGhpcy5heGlzQS50YW5nZW50cyh0d2lzdC5heGlzQSwgdHdpc3QuYXhpc0EpOwogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodHdpc3QuYXhpc0EsIHR3aXN0LmF4aXNBKTsKICAgICAgdGhpcy5heGlzQi50YW5nZW50cyh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodHdpc3QuYXhpc0IsIHR3aXN0LmF4aXNCKTsKICAgICAgY29uZS5hbmdsZSA9IHRoaXMuYW5nbGU7CiAgICAgIHR3aXN0Lm1heEFuZ2xlID0gdGhpcy50d2lzdEFuZ2xlOwogICAgfQoKICB9CiAgLyoqCiAgICogQ29uc3RyYWlucyB0d28gYm9kaWVzIHRvIGJlIGF0IGEgY29uc3RhbnQgZGlzdGFuY2UgZnJvbSBlYWNoIG90aGVycyBjZW50ZXIgb2YgbWFzcy4KICAgKi8KCgogIGNsYXNzIERpc3RhbmNlQ29uc3RyYWludCBleHRlbmRzIENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBUaGUgZGlzdGFuY2UgdG8ga2VlcC4gSWYgdW5kZWZpbmVkLCBpdCB3aWxsIGJlIHNldCB0byB0aGUgY3VycmVudCBkaXN0YW5jZSBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5QgogICAgICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gZGlzdGFuY2UgVGhlIGRpc3RhbmNlIHRvIGtlZXAuIElmIHVuZGVmaW5lZCwgaXQgd2lsbCBiZSBzZXQgdG8gdGhlIGN1cnJlbnQgZGlzdGFuY2UgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIuCiAgICAgKiBAcGFyYW0gbWF4Rm9yY2UgVGhlIG1heGltdW0gZm9yY2UgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byBjb25zdHJhaW4gdGhlIGJvZGllcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBkaXN0YW5jZSwgbWF4Rm9yY2UgPSAxZTYpIHsKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCKTsKICAgICAgdGhpcy5kaXN0YW5jZSA9IHZvaWQgMDsKICAgICAgdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gdm9pZCAwOwoKICAgICAgaWYgKHR5cGVvZiBkaXN0YW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBkaXN0YW5jZSA9IGJvZHlBLnBvc2l0aW9uLmRpc3RhbmNlVG8oYm9keUIucG9zaXRpb24pOwogICAgICB9CgogICAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7CiAgICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGVxKTsgLy8gTWFrZSBpdCBiaWRpcmVjdGlvbmFsCgogICAgICBlcS5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgICAgZXEubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgZXEgPSB0aGlzLmRpc3RhbmNlRXF1YXRpb247CiAgICAgIGNvbnN0IGhhbGZEaXN0ID0gdGhpcy5kaXN0YW5jZSAqIDAuNTsKICAgICAgY29uc3Qgbm9ybWFsID0gZXEubmk7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIG5vcm1hbCk7CiAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgbm9ybWFsLnNjYWxlKGhhbGZEaXN0LCBlcS5yaSk7CiAgICAgIG5vcm1hbC5zY2FsZSgtaGFsZkRpc3QsIGVxLnJqKTsKICAgIH0KCiAgfQogIC8qKgogICAqIExvY2sgY29uc3RyYWludC4gV2lsbCByZW1vdmUgYWxsIGRlZ3JlZXMgb2YgZnJlZWRvbSBiZXR3ZWVuIHRoZSBib2RpZXMuCiAgICovCgoKICBjbGFzcyBMb2NrQ29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgewogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zID0ge30pIHsKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlbgoKICAgICAgY29uc3QgcGl2b3RBID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaGFsZldheSA9IG5ldyBWZWMzKCk7CiAgICAgIGJvZHlBLnBvc2l0aW9uLnZhZGQoYm9keUIucG9zaXRpb24sIGhhbGZXYXkpOwogICAgICBoYWxmV2F5LnNjYWxlKDAuNSwgaGFsZldheSk7CiAgICAgIGJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90Qik7CiAgICAgIGJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90QSk7IC8vIFRoZSBwb2ludC10by1wb2ludCBjb25zdHJhaW50IHdpbGwga2VlcCBhIHBvaW50IHNoYXJlZCBiZXR3ZWVuIHRoZSBib2RpZXMKCiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsgLy8gU3RvcmUgaW5pdGlhbCByb3RhdGlvbiBvZiB0aGUgYm9kaWVzIGFzIHVuaXQgdmVjdG9ycyBpbiB0aGUgbG9jYWwgYm9keSBzcGFjZXMKCiAgICAgIHRoaXMueEEgPSB2b2lkIDA7CiAgICAgIHRoaXMueEIgPSB2b2lkIDA7CiAgICAgIHRoaXMueUEgPSB2b2lkIDA7CiAgICAgIHRoaXMueUIgPSB2b2lkIDA7CiAgICAgIHRoaXMuekEgPSB2b2lkIDA7CiAgICAgIHRoaXMuekIgPSB2b2lkIDA7CiAgICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IHZvaWQgMDsKICAgICAgdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gdm9pZCAwOwogICAgICB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjMgPSB2b2lkIDA7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy54QSA9IGJvZHlBLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWCk7CiAgICAgIHRoaXMueEIgPSBib2R5Qi52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1gpOwogICAgICB0aGlzLnlBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTsKICAgICAgdGhpcy55QiA9IGJvZHlCLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWSk7CiAgICAgIHRoaXMuekEgPSBib2R5QS52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1opOwogICAgICB0aGlzLnpCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsgLy8gLi4uYW5kIHRoZSBmb2xsb3dpbmcgcm90YXRpb25hbCBlcXVhdGlvbnMgd2lsbCBrZWVwIGFsbCByb3RhdGlvbmFsIERPRidzIGluIHBsYWNlCgogICAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjIgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHIzID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHIxLCByMiwgcjMpOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICB0aGlzLm1vdG9yRXF1YXRpb247CiAgICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xOwogICAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMjsKICAgICAgY29uc3QgcjMgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjM7CiAgICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBUaGVzZSB2ZWN0b3IgcGFpcnMgbXVzdCBiZSBvcnRob2dvbmFsCgogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QSwgcjEuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QiwgcjEuYXhpc0IpOwogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QSwgcjIuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy56QiwgcjIuYXhpc0IpOwogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy56QSwgcjMuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QiwgcjMuYXhpc0IpOwogICAgfQoKICB9CiAgLyoqCiAgICogUm90YXRpb25hbCBtb3RvciBjb25zdHJhaW50LiBUcmllcyB0byBrZWVwIHRoZSByZWxhdGl2ZSBhbmd1bGFyIHZlbG9jaXR5IG9mIHRoZSBib2RpZXMgdG8gYSBnaXZlbiB2YWx1ZS4KICAgKi8KCgogIGNsYXNzIFJvdGF0aW9uYWxNb3RvckVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogTW90b3IgdmVsb2NpdHkuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5QiwgbWF4Rm9yY2UgPSAxZTYpIHsKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCLCAtbWF4Rm9yY2UsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzQiA9IHZvaWQgMDsKICAgICAgdGhpcy50YXJnZXRWZWxvY2l0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzQSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuYXhpc0IgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnRhcmdldFZlbG9jaXR5ID0gMDsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgdGhpcy5iaTsKICAgICAgdGhpcy5iajsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gZyA9IDAKICAgICAgLy8gZ2RvdCA9IGF4aXNBICogd2kgLSBheGlzQiAqIHdqCiAgICAgIC8vIGdkb3QgPSBHICogVyA9IEcgKiBbdmkgd2kgdmogd2pdCiAgICAgIC8vID0+CiAgICAgIC8vIEcgPSBbMCBheGlzQSAwIC1heGlzQl0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShheGlzQSk7CiAgICAgIGF4aXNCLm5lZ2F0ZShHQi5yb3RhdGlvbmFsKTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpIC0gdGhpcy50YXJnZXRWZWxvY2l0eTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KICAvKioKICAgKiBIaW5nZSBjb25zdHJhaW50LiBUaGluayBvZiBpdCBhcyBhIGRvb3IgaGluZ2UuIEl0IHRyaWVzIHRvIGtlZXAgdGhlIGRvb3IgaW4gdGhlIGNvcnJlY3QgcGxhY2UgYW5kIHdpdGggdGhlIGNvcnJlY3Qgb3JpZW50YXRpb24uCiAgICovCgoKICBjbGFzcyBIaW5nZUNvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLgogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiBheGlzLCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUIuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7CiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsKICAgICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gb3B0aW9ucy5waXZvdEIgPyBvcHRpb25zLnBpdm90Qi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gdm9pZCAwOwogICAgICB0aGlzLmF4aXNCID0gdm9pZCAwOwogICAgICB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSB2b2lkIDA7CiAgICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IHZvaWQgMDsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uID0gdm9pZCAwOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNBLm5vcm1hbGl6ZSgpOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNCLm5vcm1hbGl6ZSgpOwogICAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSAhIW9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKICAgICAgY29uc3Qgcm90YXRpb25hbDEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHJvdGF0aW9uYWwyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbihib2R5QSwgYm9keUIsIG1heEZvcmNlKTsKICAgICAgbW90b3IuZW5hYmxlZCA9IGZhbHNlOyAvLyBOb3QgZW5hYmxlZCBieSBkZWZhdWx0CiAgICAgIC8vIEVxdWF0aW9ucyB0byBiZSBmZWQgdG8gdGhlIHNvbHZlcgoKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChyb3RhdGlvbmFsMSwgcm90YXRpb25hbDIsIG1vdG9yKTsKICAgIH0KICAgIC8qKgogICAgICogZW5hYmxlTW90b3IKICAgICAqLwoKCiAgICBlbmFibGVNb3RvcigpIHsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBkaXNhYmxlTW90b3IKICAgICAqLwoKCiAgICBkaXNhYmxlTW90b3IoKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5lbmFibGVkID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHNldE1vdG9yU3BlZWQKICAgICAqLwoKCiAgICBzZXRNb3RvclNwZWVkKHNwZWVkKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi50YXJnZXRWZWxvY2l0eSA9IHNwZWVkOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRNb3Rvck1heEZvcmNlCiAgICAgKi8KCgogICAgc2V0TW90b3JNYXhGb3JjZShtYXhGb3JjZSkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbjsKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjE7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yOwogICAgICBjb25zdCB3b3JsZEF4aXNBID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxOwogICAgICBjb25zdCB3b3JsZEF4aXNCID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMyOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IGF4aXNCID0gdGhpcy5heGlzQjsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIEdldCB3b3JsZCBheGVzCgogICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KGF4aXNBLCB3b3JsZEF4aXNBKTsKICAgICAgYm9keUIucXVhdGVybmlvbi52bXVsdChheGlzQiwgd29ybGRBeGlzQik7CiAgICAgIHdvcmxkQXhpc0EudGFuZ2VudHMocjEuYXhpc0EsIHIyLmF4aXNBKTsKICAgICAgcjEuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKICAgICAgcjIuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKCiAgICAgIGlmICh0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCkgewogICAgICAgIGJvZHlBLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQSwgbW90b3IuYXhpc0EpOwogICAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQiwgbW90b3IuYXhpc0IpOwogICAgICB9CiAgICB9CgogIH0KCiAgY29uc3QgSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzIgPSBuZXcgVmVjMygpOwogIC8qKgogICAqIENvbnN0cmFpbnMgdGhlIHNsaXBwaW5nIGluIGEgY29udGFjdCBhbG9uZyBhIHRhbmdlbnQKICAgKi8KCiAgY2xhc3MgRnJpY3Rpb25FcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8vIFRhbmdlbnQKCiAgICAvKioKICAgICAqIEBwYXJhbSBzbGlwRm9yY2Ugc2hvdWxkIGJlICstRl9mcmljdGlvbiA9ICstbXUgKiBGX25vcm1hbCA9ICstbXUgKiBtICogZwogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIHNsaXBGb3JjZSkgewogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1zbGlwRm9yY2UsIHNsaXBGb3JjZSk7CiAgICAgIHRoaXMucmkgPSB2b2lkIDA7CiAgICAgIHRoaXMucmogPSB2b2lkIDA7CiAgICAgIHRoaXMudCA9IHZvaWQgMDsKICAgICAgdGhpcy5yaSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucmogPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnQgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICB0aGlzLmJpOwogICAgICB0aGlzLmJqOwogICAgICBjb25zdCByaSA9IHRoaXMucmk7CiAgICAgIGNvbnN0IHJqID0gdGhpcy5yajsKICAgICAgY29uc3Qgcml4dCA9IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDE7CiAgICAgIGNvbnN0IHJqeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB0ID0gdGhpcy50OyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKHQsIHJpeHQpOwogICAgICByai5jcm9zcyh0LCByanh0KTsgLy8gRyA9IFstdCAtcml4dCB0IHJqeHRdCiAgICAgIC8vIEFuZCByZW1lbWJlciwgdGhpcyBpcyBhIHB1cmUgdmVsb2NpdHkgY29uc3RyYWludCwgZyBpcyBhbHdheXMgemVybyEKCiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgdC5uZWdhdGUoR0Euc3BhdGlhbCk7CiAgICAgIHJpeHQubmVnYXRlKEdBLnJvdGF0aW9uYWwpOwogICAgICBHQi5zcGF0aWFsLmNvcHkodCk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShyanh0KTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLUdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQoKICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBEZWZpbmVzIHdoYXQgaGFwcGVucyB3aGVuIHR3byBtYXRlcmlhbHMgbWVldC4KICAgKiBAdG9kbyBSZWZhY3RvciBtYXRlcmlhbHMgdG8gbWF0ZXJpYWxBIGFuZCBtYXRlcmlhbEIKICAgKi8KCiAgY2xhc3MgQ29udGFjdE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogSWRlbnRpZmllciBvZiB0aGlzIG1hdGVyaWFsLgogICAgICovCgogICAgLyoqCiAgICAgKiBQYXJ0aWNpcGF0aW5nIG1hdGVyaWFscy4KICAgICAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogUmVzdGl0dXRpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogU3RpZmZuZXNzIG9mIHRoZSBwcm9kdWNlZCBjb250YWN0IGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGNvbnRhY3QgZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMwogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucwogICAgICogQGRlZmF1bHQgMwogICAgICovCiAgICBjb25zdHJ1Y3RvcihtMSwgbTIsIG9wdGlvbnMpIHsKICAgICAgdGhpcy5pZCA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXRlcmlhbHMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiA9IHZvaWQgMDsKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjMsCiAgICAgICAgY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbjogMywKICAgICAgICBmcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb246IDMKICAgICAgfSk7CiAgICAgIHRoaXMuaWQgPSBDb250YWN0TWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWF0ZXJpYWxzID0gW20xLCBtMl07CiAgICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gb3B0aW9ucy5yZXN0aXR1dGlvbjsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzczsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24gPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uOwogICAgfQoKICB9CgogIENvbnRhY3RNYXRlcmlhbC5pZENvdW50ZXIgPSAwOwogIC8qKgogICAqIERlZmluZXMgYSBwaHlzaWNzIG1hdGVyaWFsLgogICAqLwoKICBjbGFzcyBNYXRlcmlhbCB7CiAgICAvKioKICAgICAqIE1hdGVyaWFsIG5hbWUuCiAgICAgKiBJZiBvcHRpb25zIGlzIGEgc3RyaW5nLCBuYW1lIHdpbGwgYmUgc2V0IHRvIHRoYXQgc3RyaW5nLgogICAgICogQHRvZG8gRGVwcmVjYXRlIHRoaXMKICAgICAqLwoKICAgIC8qKiBNYXRlcmlhbCBpZC4gKi8KCiAgICAvKioKICAgICAqIEZyaWN0aW9uIGZvciB0aGlzIG1hdGVyaWFsLgogICAgICogSWYgbm9uLW5lZ2F0aXZlLCBpdCB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgZnJpY3Rpb24gZ2l2ZW4gYnkgQ29udGFjdE1hdGVyaWFscy4gSWYgdGhlcmUncyBubyBtYXRjaGluZyBDb250YWN0TWF0ZXJpYWwsIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0Q29udGFjdE1hdGVyaWFsYCBpbiB0aGUgV29ybGQgd2lsbCBiZSB1c2VkLgogICAgICovCgogICAgLyoqCiAgICAgKiBSZXN0aXR1dGlvbiBmb3IgdGhpcyBtYXRlcmlhbC4KICAgICAqIElmIG5vbi1uZWdhdGl2ZSwgaXQgd2lsbCBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIHJlc3RpdHV0aW9uIGdpdmVuIGJ5IENvbnRhY3RNYXRlcmlhbHMuIElmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgQ29udGFjdE1hdGVyaWFsLCB0aGUgdmFsdWUgZnJvbSBgZGVmYXVsdENvbnRhY3RNYXRlcmlhbGAgaW4gdGhlIFdvcmxkIHdpbGwgYmUgdXNlZC4KICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7CiAgICAgIHRoaXMubmFtZSA9IHZvaWQgMDsKICAgICAgdGhpcy5pZCA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5yZXN0aXR1dGlvbiA9IHZvaWQgMDsKICAgICAgbGV0IG5hbWUgPSAnJzsgLy8gQmFja3dhcmRzIGNvbXBhdGliaWxpdHkgZml4CgogICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgLy9jb25zb2xlLndhcm4oYFBhc3NpbmcgYSBzdHJpbmcgdG8gTWF0ZXJpYWxPcHRpb25zIGlzIGRlcHJlY2F0ZWQsIGFuZCBoYXMgbm8gZWZmZWN0YCkKICAgICAgICBuYW1lID0gb3B0aW9uczsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMuaWQgPSBNYXRlcmlhbC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5mcmljdGlvbiA9IHR5cGVvZiBvcHRpb25zLmZyaWN0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZnJpY3Rpb24gOiAtMTsKICAgICAgdGhpcy5yZXN0aXR1dGlvbiA9IHR5cGVvZiBvcHRpb25zLnJlc3RpdHV0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMucmVzdGl0dXRpb24gOiAtMTsKICAgIH0KCiAgfQoKICBNYXRlcmlhbC5pZENvdW50ZXIgPSAwOwogIC8qKgogICAqIEEgc3ByaW5nLCBjb25uZWN0aW5nIHR3byBib2RpZXMuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc3ByaW5nID0gbmV3IFNwcmluZyhib3hCb2R5LCBzcGhlcmVCb2R5LCB7CiAgICogICAgICAgcmVzdExlbmd0aDogMCwKICAgKiAgICAgICBzdGlmZm5lc3M6IDUwLAogICAqICAgICAgIGRhbXBpbmc6IDEsCiAgICogICAgIH0pCiAgICoKICAgKiAgICAgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwCiAgICogICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgKGV2ZW50KSA9PiB7CiAgICogICAgICAgc3ByaW5nLmFwcGx5Rm9yY2UoKQogICAqICAgICB9KQogICAqLwoKICBjbGFzcyBTcHJpbmcgewogICAgLyoqCiAgICAgKiBSZXN0IGxlbmd0aCBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+IDAuCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFN0aWZmbmVzcyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLgogICAgICogQGRlZmF1bHQgMTAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIERhbXBpbmcgb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPj0gMC4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogRmlyc3QgY29ubmVjdGVkIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNlY29uZCBjb25uZWN0ZWQgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogQW5jaG9yIGZvciBib2R5QSBpbiBsb2NhbCBib2R5QSBjb29yZGluYXRlcy4KICAgICAqIFdoZXJlIHRvIGhvb2sgdGhlIHNwcmluZyB0byBib2R5IEEsIGluIGxvY2FsIGJvZHkgY29vcmRpbmF0ZXMuCiAgICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFuY2hvciBmb3IgYm9keUIgaW4gbG9jYWwgYm9keUIgY29vcmRpbmF0ZXMuCiAgICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBCLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLgogICAgICogQGRlZmF1bHQgbmV3IFZlYzMoKQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkgewogICAgICB0aGlzLnJlc3RMZW5ndGggPSB2b2lkIDA7CiAgICAgIHRoaXMuc3RpZmZuZXNzID0gdm9pZCAwOwogICAgICB0aGlzLmRhbXBpbmcgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm9keUEgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm9keUIgPSB2b2lkIDA7CiAgICAgIHRoaXMubG9jYWxBbmNob3JBID0gdm9pZCAwOwogICAgICB0aGlzLmxvY2FsQW5jaG9yQiA9IHZvaWQgMDsKICAgICAgdGhpcy5yZXN0TGVuZ3RoID0gdHlwZW9mIG9wdGlvbnMucmVzdExlbmd0aCA9PT0gJ251bWJlcicgPyBvcHRpb25zLnJlc3RMZW5ndGggOiAxOwogICAgICB0aGlzLnN0aWZmbmVzcyA9IG9wdGlvbnMuc3RpZmZuZXNzIHx8IDEwMDsKICAgICAgdGhpcy5kYW1waW5nID0gb3B0aW9ucy5kYW1waW5nIHx8IDE7CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubG9jYWxBbmNob3JCID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQSkgewogICAgICAgIHRoaXMubG9jYWxBbmNob3JBLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5sb2NhbEFuY2hvckIpIHsKICAgICAgICB0aGlzLmxvY2FsQW5jaG9yQi5jb3B5KG9wdGlvbnMubG9jYWxBbmNob3JCKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JBKSB7CiAgICAgICAgdGhpcy5zZXRXb3JsZEFuY2hvckEob3B0aW9ucy53b3JsZEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy53b3JsZEFuY2hvckIpIHsKICAgICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQihvcHRpb25zLndvcmxkQW5jaG9yQik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBBLCB1c2luZyB3b3JsZCBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBzZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKSB7CiAgICAgIHRoaXMuYm9keUEucG9pbnRUb0xvY2FsRnJhbWUod29ybGRBbmNob3JBLCB0aGlzLmxvY2FsQW5jaG9yQSk7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQiwgdXNpbmcgd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgc2V0V29ybGRBbmNob3JCKHdvcmxkQW5jaG9yQikgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQiwgdGhpcy5sb2NhbEFuY2hvckIpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JBKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlBLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JBLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEIsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JCKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSB0aGUgc3ByaW5nIGZvcmNlIHRvIHRoZSBjb25uZWN0ZWQgYm9kaWVzLgogICAgICovCgoKICAgIGFwcGx5Rm9yY2UoKSB7CiAgICAgIGNvbnN0IGsgPSB0aGlzLnN0aWZmbmVzczsKICAgICAgY29uc3QgZCA9IHRoaXMuZGFtcGluZzsKICAgICAgY29uc3QgbCA9IHRoaXMucmVzdExlbmd0aDsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IHIgPSBhcHBseUZvcmNlX3I7CiAgICAgIGNvbnN0IHJfdW5pdCA9IGFwcGx5Rm9yY2Vfcl91bml0OwogICAgICBjb25zdCB1ID0gYXBwbHlGb3JjZV91OwogICAgICBjb25zdCBmID0gYXBwbHlGb3JjZV9mOwogICAgICBjb25zdCB0bXAgPSBhcHBseUZvcmNlX3RtcDsKICAgICAgY29uc3Qgd29ybGRBbmNob3JBID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckE7CiAgICAgIGNvbnN0IHdvcmxkQW5jaG9yQiA9IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCOwogICAgICBjb25zdCByaSA9IGFwcGx5Rm9yY2Vfcmk7CiAgICAgIGNvbnN0IHJqID0gYXBwbHlGb3JjZV9yajsKICAgICAgY29uc3QgcmlfeF9mID0gYXBwbHlGb3JjZV9yaV94X2Y7CiAgICAgIGNvbnN0IHJqX3hfZiA9IGFwcGx5Rm9yY2VfcmpfeF9mOyAvLyBHZXQgd29ybGQgYW5jaG9ycwoKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKTsKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKTsgLy8gR2V0IG9mZnNldCBwb2ludHMKCiAgICAgIHdvcmxkQW5jaG9yQS52c3ViKGJvZHlBLnBvc2l0aW9uLCByaSk7CiAgICAgIHdvcmxkQW5jaG9yQi52c3ViKGJvZHlCLnBvc2l0aW9uLCByaik7IC8vIENvbXB1dGUgZGlzdGFuY2UgdmVjdG9yIGJldHdlZW4gd29ybGQgYW5jaG9yIHBvaW50cwoKICAgICAgd29ybGRBbmNob3JCLnZzdWIod29ybGRBbmNob3JBLCByKTsKICAgICAgY29uc3QgcmxlbiA9IHIubGVuZ3RoKCk7CiAgICAgIHJfdW5pdC5jb3B5KHIpOwogICAgICByX3VuaXQubm9ybWFsaXplKCk7IC8vIENvbXB1dGUgcmVsYXRpdmUgdmVsb2NpdHkgb2YgdGhlIGFuY2hvciBwb2ludHMsIHUKCiAgICAgIGJvZHlCLnZlbG9jaXR5LnZzdWIoYm9keUEudmVsb2NpdHksIHUpOyAvLyBBZGQgcm90YXRpb25hbCB2ZWxvY2l0eQoKICAgICAgYm9keUIuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJqLCB0bXApOwogICAgICB1LnZhZGQodG1wLCB1KTsKICAgICAgYm9keUEuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJpLCB0bXApOwogICAgICB1LnZzdWIodG1wLCB1KTsgLy8gRiA9IC0gayAqICggeCAtIEwgKSAtIEQgKiAoIHUgKQoKICAgICAgcl91bml0LnNjYWxlKC1rICogKHJsZW4gLSBsKSAtIGQgKiB1LmRvdChyX3VuaXQpLCBmKTsgLy8gQWRkIGZvcmNlcyB0byBib2RpZXMKCiAgICAgIGJvZHlBLmZvcmNlLnZzdWIoZiwgYm9keUEuZm9yY2UpOwogICAgICBib2R5Qi5mb3JjZS52YWRkKGYsIGJvZHlCLmZvcmNlKTsgLy8gQW5ndWxhciBmb3JjZQoKICAgICAgcmkuY3Jvc3MoZiwgcmlfeF9mKTsKICAgICAgcmouY3Jvc3MoZiwgcmpfeF9mKTsKICAgICAgYm9keUEudG9ycXVlLnZzdWIocmlfeF9mLCBib2R5QS50b3JxdWUpOwogICAgICBib2R5Qi50b3JxdWUudmFkZChyal94X2YsIGJvZHlCLnRvcnF1ZSk7CiAgICB9CgogIH0KCiAgY29uc3QgYXBwbHlGb3JjZV9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JfdW5pdCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV91ID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX2YgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JBID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3dvcmxkQW5jaG9yQiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yaSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yaiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yaV94X2YgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfcmpfeF9mID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3RtcCA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogV2hlZWxJbmZvCiAgICovCgogIGNsYXNzIFdoZWVsSW5mbyB7CiAgICAvKioKICAgICAqIE1heCB0cmF2ZWwgZGlzdGFuY2Ugb2YgdGhlIHN1c3BlbnNpb24sIGluIG1ldGVycy4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogU3BlZWQgdG8gYXBwbHkgdG8gdGhlIHdoZWVsIHJvdGF0aW9uIHdoZW4gdGhlIHdoZWVsIGlzIHNsaWRpbmcuCiAgICAgKiBAZGVmYXVsdCAtMC4xCiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHRoZSBjdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkIHNob3VsZCBiZSB1c2VkLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogc2xpZGluZwogICAgICovCgogICAgLyoqCiAgICAgKiBDb25uZWN0aW9uIHBvaW50LCBkZWZpbmVkIGxvY2FsbHkgaW4gdGhlIGNoYXNzaXMgYm9keSBmcmFtZS4KICAgICAqLwoKICAgIC8qKgogICAgICogY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGRpcmVjdGlvbkxvY2FsCiAgICAgKi8KCiAgICAvKioKICAgICAqIGRpcmVjdGlvbldvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGF4bGVMb2NhbAogICAgICovCgogICAgLyoqCiAgICAgKiBheGxlV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvblJlc3RMZW5ndGgKICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvbk1heExlbmd0aAogICAgICogQGRlZmF1bHQgMgogICAgICovCgogICAgLyoqCiAgICAgKiByYWRpdXMKICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvblN0aWZmbmVzcwogICAgICogQGRlZmF1bHQgMTAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIGRhbXBpbmdDb21wcmVzc2lvbgogICAgICogQGRlZmF1bHQgMTAKICAgICAqLwoKICAgIC8qKgogICAgICogZGFtcGluZ1JlbGF4YXRpb24KICAgICAqIEBkZWZhdWx0IDEwCiAgICAgKi8KCiAgICAvKioKICAgICAqIGZyaWN0aW9uU2xpcAogICAgICogQGRlZmF1bHQgMTAuNQogICAgICovCgogICAgLyoqIGZvcndhcmRBY2NlbGVyYXRpb24gKi8KCiAgICAvKiogc2lkZUFjY2VsZXJhdGlvbiAqLwoKICAgIC8qKgogICAgICogc3RlZXJpbmcKICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogUm90YXRpb24gdmFsdWUsIGluIHJhZGlhbnMuCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIGRlbHRhUm90YXRpb24KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogcm9sbEluZmx1ZW5jZQogICAgICogQGRlZmF1bHQgMC4wMQogICAgICovCgogICAgLyoqCiAgICAgKiBtYXhTdXNwZW5zaW9uRm9yY2UKICAgICAqLwoKICAgIC8qKgogICAgICogZW5naW5lRm9yY2UKICAgICAqLwoKICAgIC8qKgogICAgICogYnJha2UKICAgICAqLwoKICAgIC8qKgogICAgICogaXNGcm9udFdoZWVsCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eQogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uRm9yY2UKICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogc2xpcEluZm8KICAgICAqLwoKICAgIC8qKgogICAgICogc2tpZEluZm8KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvbkxlbmd0aAogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzaWRlSW1wdWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBmb3J3YXJkSW1wdWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgcmVzdWx0IGZyb20gcmF5Y2FzdGluZy4KICAgICAqLwoKICAgIC8qKgogICAgICogV2hlZWwgd29ybGQgdHJhbnNmb3JtLgogICAgICovCgogICAgLyoqCiAgICAgKiBpc0luQ29udGFjdAogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHsKICAgICAgdGhpcy5tYXhTdXNwZW5zaW9uVHJhdmVsID0gdm9pZCAwOwogICAgICB0aGlzLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgPSB2b2lkIDA7CiAgICAgIHRoaXMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IHZvaWQgMDsKICAgICAgdGhpcy5zbGlkaW5nID0gdm9pZCAwOwogICAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IHZvaWQgMDsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhsZUxvY2FsID0gdm9pZCAwOwogICAgICB0aGlzLmF4bGVXb3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aCA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uTWF4TGVuZ3RoID0gdm9pZCAwOwogICAgICB0aGlzLnJhZGl1cyA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uU3RpZmZuZXNzID0gdm9pZCAwOwogICAgICB0aGlzLmRhbXBpbmdDb21wcmVzc2lvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5kYW1waW5nUmVsYXhhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvblNsaXAgPSB2b2lkIDA7CiAgICAgIHRoaXMuZm9yd2FyZEFjY2VsZXJhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5zaWRlQWNjZWxlcmF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnN0ZWVyaW5nID0gdm9pZCAwOwogICAgICB0aGlzLnJvdGF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLmRlbHRhUm90YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucm9sbEluZmx1ZW5jZSA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXhTdXNwZW5zaW9uRm9yY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuZW5naW5lRm9yY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuYnJha2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuaXNGcm9udFdoZWVsID0gdm9pZCAwOwogICAgICB0aGlzLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uRm9yY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2xpcEluZm8gPSB2b2lkIDA7CiAgICAgIHRoaXMuc2tpZEluZm8gPSB2b2lkIDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkxlbmd0aCA9IHZvaWQgMDsKICAgICAgdGhpcy5zaWRlSW1wdWxzZSA9IHZvaWQgMDsKICAgICAgdGhpcy5mb3J3YXJkSW1wdWxzZSA9IHZvaWQgMDsKICAgICAgdGhpcy5yYXljYXN0UmVzdWx0ID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkVHJhbnNmb3JtID0gdm9pZCAwOwogICAgICB0aGlzLmlzSW5Db250YWN0ID0gdm9pZCAwOwogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbDogbmV3IFZlYzMoKSwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uTG9jYWw6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uV29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgYXhsZUxvY2FsOiBuZXcgVmVjMygpLAogICAgICAgIGF4bGVXb3JsZDogbmV3IFZlYzMoKSwKICAgICAgICBzdXNwZW5zaW9uUmVzdExlbmd0aDogMSwKICAgICAgICBzdXNwZW5zaW9uTWF4TGVuZ3RoOiAyLAogICAgICAgIHJhZGl1czogMSwKICAgICAgICBzdXNwZW5zaW9uU3RpZmZuZXNzOiAxMDAsCiAgICAgICAgZGFtcGluZ0NvbXByZXNzaW9uOiAxMCwKICAgICAgICBkYW1waW5nUmVsYXhhdGlvbjogMTAsCiAgICAgICAgZnJpY3Rpb25TbGlwOiAxMC41LAogICAgICAgIGZvcndhcmRBY2NlbGVyYXRpb246IDEsCiAgICAgICAgc2lkZUFjY2VsZXJhdGlvbjogMSwKICAgICAgICBzdGVlcmluZzogMCwKICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICBkZWx0YVJvdGF0aW9uOiAwLAogICAgICAgIHJvbGxJbmZsdWVuY2U6IDAuMDEsCiAgICAgICAgbWF4U3VzcGVuc2lvbkZvcmNlOiBOdW1iZXIuTUFYX1ZBTFVFLAogICAgICAgIGlzRnJvbnRXaGVlbDogdHJ1ZSwKICAgICAgICBjbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb246IDEsCiAgICAgICAgc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHk6IDAsCiAgICAgICAgc3VzcGVuc2lvbkZvcmNlOiAwLAogICAgICAgIHNsaXBJbmZvOiAwLAogICAgICAgIHNraWRJbmZvOiAwLAogICAgICAgIHN1c3BlbnNpb25MZW5ndGg6IDAsCiAgICAgICAgbWF4U3VzcGVuc2lvblRyYXZlbDogMSwKICAgICAgICB1c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiBmYWxzZSwKICAgICAgICBjdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiAtMC4xCiAgICAgIH0pOwogICAgICB0aGlzLm1heFN1c3BlbnNpb25UcmF2ZWwgPSBvcHRpb25zLm1heFN1c3BlbnNpb25UcmF2ZWw7CiAgICAgIHRoaXMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDsKICAgICAgdGhpcy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gb3B0aW9ucy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbC5jbG9uZSgpOwogICAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCA9IG9wdGlvbnMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSBvcHRpb25zLmRpcmVjdGlvbkxvY2FsLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSBvcHRpb25zLmRpcmVjdGlvbldvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuYXhsZUxvY2FsID0gb3B0aW9ucy5heGxlTG9jYWwuY2xvbmUoKTsKICAgICAgdGhpcy5heGxlV29ybGQgPSBvcHRpb25zLmF4bGVXb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgdGhpcy5zdXNwZW5zaW9uTWF4TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uTWF4TGVuZ3RoOwogICAgICB0aGlzLnJhZGl1cyA9IG9wdGlvbnMucmFkaXVzOwogICAgICB0aGlzLnN1c3BlbnNpb25TdGlmZm5lc3MgPSBvcHRpb25zLnN1c3BlbnNpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZGFtcGluZ0NvbXByZXNzaW9uID0gb3B0aW9ucy5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSBvcHRpb25zLmRhbXBpbmdSZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uU2xpcCA9IG9wdGlvbnMuZnJpY3Rpb25TbGlwOwogICAgICB0aGlzLmZvcndhcmRBY2NlbGVyYXRpb24gPSBvcHRpb25zLmZvcndhcmRBY2NlbGVyYXRpb247CiAgICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IG9wdGlvbnMuc2lkZUFjY2VsZXJhdGlvbjsKICAgICAgdGhpcy5zdGVlcmluZyA9IDA7CiAgICAgIHRoaXMucm90YXRpb24gPSAwOwogICAgICB0aGlzLmRlbHRhUm90YXRpb24gPSAwOwogICAgICB0aGlzLnJvbGxJbmZsdWVuY2UgPSBvcHRpb25zLnJvbGxJbmZsdWVuY2U7CiAgICAgIHRoaXMubWF4U3VzcGVuc2lvbkZvcmNlID0gb3B0aW9ucy5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgIHRoaXMuZW5naW5lRm9yY2UgPSAwOwogICAgICB0aGlzLmJyYWtlID0gMDsKICAgICAgdGhpcy5pc0Zyb250V2hlZWwgPSBvcHRpb25zLmlzRnJvbnRXaGVlbDsKICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxOwogICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICB0aGlzLnNsaXBJbmZvID0gMDsKICAgICAgdGhpcy5za2lkSW5mbyA9IDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkxlbmd0aCA9IDA7CiAgICAgIHRoaXMuc2lkZUltcHVsc2UgPSAwOwogICAgICB0aGlzLmZvcndhcmRJbXB1bHNlID0gMDsKICAgICAgdGhpcy5yYXljYXN0UmVzdWx0ID0gbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTsKICAgICAgdGhpcy5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgfQoKICAgIHVwZGF0ZVdoZWVsKGNoYXNzaXMpIHsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHRoaXMucmF5Y2FzdFJlc3VsdDsKCiAgICAgIGlmICh0aGlzLmlzSW5Db250YWN0KSB7CiAgICAgICAgY29uc3QgcHJvamVjdCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KHJheWNhc3RSZXN1bHQuZGlyZWN0aW9uV29ybGQpOwogICAgICAgIHJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXMucG9zaXRpb24sIHJlbHBvcyk7CiAgICAgICAgY2hhc3Npcy5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChyZWxwb3MsIGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKICAgICAgICBjb25zdCBwcm9qVmVsID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QoY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwoKICAgICAgICBpZiAocHJvamVjdCA+PSAtMC4xKSB7CiAgICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjAgLyAwLjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGludiA9IC0xIC8gcHJvamVjdDsKICAgICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSBpbnY7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIE5vdCBpbiBjb250YWN0IDogcG9zaXRpb24gd2hlZWwgaW4gYSBuaWNlIChyZXN0IGxlbmd0aCkgcG9zaXRpb24KICAgICAgICByYXljYXN0UmVzdWx0LnN1c3BlbnNpb25MZW5ndGggPSB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoOwogICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwLjA7CiAgICAgICAgcmF5Y2FzdFJlc3VsdC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjA7CiAgICAgIH0KICAgIH0KCiAgfQoKICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVscG9zID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBWZWhpY2xlIGhlbHBlciBjbGFzcyB0aGF0IGNhc3RzIHJheXMgZnJvbSB0aGUgd2hlZWwgcG9zaXRpb25zIHRvd2FyZHMgdGhlIGdyb3VuZCBhbmQgYXBwbGllcyBmb3JjZXMuCiAgICovCgogIGNsYXNzIFJheWNhc3RWZWhpY2xlIHsKICAgIC8qKiBUaGUgY2FyIGNoYXNzaXMgYm9keS4gKi8KCiAgICAvKiogVGhlIHdoZWVscy4gKi8KCiAgICAvKiogV2lsbCBiZSBzZXQgdG8gdHJ1ZSBpZiB0aGUgY2FyIGlzIHNsaWRpbmcuICovCgogICAgLyoqIEluZGV4IG9mIHRoZSByaWdodCBheGlzLiB4PTAsIHk9MSwgej0yICovCgogICAgLyoqIEluZGV4IG9mIHRoZSBmb3J3YXJkIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIHVwIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogVGhlIGNvbnN0cmFpbnRzLiAqLwoKICAgIC8qKiBPcHRpb25hbCBwcmUtc3RlcCBjYWxsYmFjay4gKi8KCiAgICAvKiogTnVtYmVyIG9mIHdoZWVscyBvbiB0aGUgZ3JvdW5kLiAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICB0aGlzLmNoYXNzaXNCb2R5ID0gdm9pZCAwOwogICAgICB0aGlzLndoZWVsSW5mb3MgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2xpZGluZyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5pbmRleFJpZ2h0QXhpcyA9IHZvaWQgMDsKICAgICAgdGhpcy5pbmRleEZvcndhcmRBeGlzID0gdm9pZCAwOwogICAgICB0aGlzLmluZGV4VXBBeGlzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnN0cmFpbnRzID0gdm9pZCAwOwogICAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9IHZvaWQgMDsKICAgICAgdGhpcy5jdXJyZW50VmVoaWNsZVNwZWVkS21Ib3VyID0gdm9pZCAwOwogICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gdm9pZCAwOwogICAgICB0aGlzLmNoYXNzaXNCb2R5ID0gb3B0aW9ucy5jaGFzc2lzQm9keTsKICAgICAgdGhpcy53aGVlbEluZm9zID0gW107CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy5pbmRleFJpZ2h0QXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4UmlnaHRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgOiAyOwogICAgICB0aGlzLmluZGV4Rm9yd2FyZEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleEZvcndhcmRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhGb3J3YXJkQXhpcyA6IDA7CiAgICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleFVwQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4VXBBeGlzIDogMTsKICAgICAgdGhpcy5jb25zdHJhaW50cyA9IFtdOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7fTsKCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDA7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSB3aGVlbC4gRm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcHRpb25zLCBzZWUgYFdoZWVsSW5mb2AuCiAgICAgKi8KCgogICAgYWRkV2hlZWwob3B0aW9ucyA9IHt9KSB7CiAgICAgIGNvbnN0IGluZm8gPSBuZXcgV2hlZWxJbmZvKG9wdGlvbnMpOwogICAgICBjb25zdCBpbmRleCA9IHRoaXMud2hlZWxJbmZvcy5sZW5ndGg7CiAgICAgIHRoaXMud2hlZWxJbmZvcy5wdXNoKGluZm8pOwogICAgICByZXR1cm4gaW5kZXg7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgc3RlZXJpbmcgdmFsdWUgb2YgYSB3aGVlbC4KICAgICAqLwoKCiAgICBzZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KSB7CiAgICAgIGNvbnN0IHdoZWVsID0gdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdOwogICAgICB3aGVlbC5zdGVlcmluZyA9IHZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHdoZWVsIGZvcmNlIHRvIGFwcGx5IG9uIG9uZSBvZiB0aGUgd2hlZWxzIGVhY2ggdGltZSBzdGVwCiAgICAgKi8KCgogICAgYXBwbHlFbmdpbmVGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCkgewogICAgICB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0uZW5naW5lRm9yY2UgPSB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBicmFraW5nIGZvcmNlIG9mIGEgd2hlZWwKICAgICAqLwoKCiAgICBzZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleCkgewogICAgICB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0uYnJha2UgPSBicmFrZTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgdG8gdGhlIHdvcmxkLgogICAgICovCgoKICAgIGFkZFRvV29ybGQod29ybGQpIHsKICAgICAgd29ybGQuYWRkQm9keSh0aGlzLmNoYXNzaXNCb2R5KTsKICAgICAgY29uc3QgdGhhdCA9IHRoaXM7CgogICAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHsKICAgICAgICB0aGF0LnVwZGF0ZVZlaGljbGUod29ybGQuZHQpOwogICAgICB9OwoKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgb25lIG9mIHRoZSB3aGVlbCBheGxlcywgd29ybGQtb3JpZW50ZWQuCiAgICAgKi8KCgogICAgZ2V0VmVoaWNsZUF4aXNXb3JsZChheGlzSW5kZXgsIHJlc3VsdCkgewogICAgICByZXN1bHQuc2V0KGF4aXNJbmRleCA9PT0gMCA/IDEgOiAwLCBheGlzSW5kZXggPT09IDEgPyAxIDogMCwgYXhpc0luZGV4ID09PSAyID8gMSA6IDApOwogICAgICB0aGlzLmNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZShyZXN1bHQsIHJlc3VsdCk7CiAgICB9CgogICAgdXBkYXRlVmVoaWNsZSh0aW1lU3RlcCkgewogICAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zOwogICAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm0oaSk7CiAgICAgIH0KCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDMuNiAqIGNoYXNzaXNCb2R5LnZlbG9jaXR5Lmxlbmd0aCgpOwogICAgICBjb25zdCBmb3J3YXJkV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmdldFZlaGljbGVBeGlzV29ybGQodGhpcy5pbmRleEZvcndhcmRBeGlzLCBmb3J3YXJkV29ybGQpOwoKICAgICAgaWYgKGZvcndhcmRXb3JsZC5kb3QoY2hhc3Npc0JvZHkudmVsb2NpdHkpIDwgMCkgewogICAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciAqPSAtMTsKICAgICAgfSAvLyBzaW11bGF0ZSBzdXNwZW5zaW9uCgoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIHRoaXMuY2FzdFJheSh3aGVlbEluZm9zW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVTdXNwZW5zaW9uKHRpbWVTdGVwKTsKICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgLy9hcHBseSBzdXNwZW5zaW9uIGZvcmNlCiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGxldCBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2U7CgogICAgICAgIGlmIChzdXNwZW5zaW9uRm9yY2UgPiB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2UpIHsKICAgICAgICAgIHN1c3BlbnNpb25Gb3JjZSA9IHdoZWVsLm1heFN1c3BlbnNpb25Gb3JjZTsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuc2NhbGUoc3VzcGVuc2lvbkZvcmNlICogdGltZVN0ZXAsIGltcHVsc2UpOwogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNoYXNzaXNCb2R5LmFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxwb3MpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZUZyaWN0aW9uKHRpbWVTdGVwKTsKICAgICAgY29uc3QgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGZ3ZCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHZlbCA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOyAvL2NvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7CiAgICAgICAgLy93aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQudnN1YihjaGFzc2lzQm9keS5wb3NpdGlvbiwgcmVscG9zKTsKCiAgICAgICAgY2hhc3Npc0JvZHkuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLCB2ZWwpOyAvLyBIYWNrIHRvIGdldCB0aGUgcm90YXRpb24gaW4gdGhlIGNvcnJlY3QgZGlyZWN0aW9uCgogICAgICAgIGxldCBtID0gMTsKCiAgICAgICAgc3dpdGNoICh0aGlzLmluZGV4VXBBeGlzKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIG0gPSAtMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuaXNJbkNvbnRhY3QpIHsKICAgICAgICAgIHRoaXMuZ2V0VmVoaWNsZUF4aXNXb3JsZCh0aGlzLmluZGV4Rm9yd2FyZEF4aXMsIGZ3ZCk7CiAgICAgICAgICBjb25zdCBwcm9qID0gZndkLmRvdCh3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTsKICAgICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuc2NhbGUocHJvaiwgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaik7CiAgICAgICAgICBmd2QudnN1YihoaXROb3JtYWxXb3JsZFNjYWxlZFdpdGhQcm9qLCBmd2QpOwogICAgICAgICAgY29uc3QgcHJvajIgPSBmd2QuZG90KHZlbCk7CiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gbSAqIHByb2oyICogdGltZVN0ZXAgLyB3aGVlbC5yYWRpdXM7CiAgICAgICAgfQoKICAgICAgICBpZiAoKHdoZWVsLnNsaWRpbmcgfHwgIXdoZWVsLmlzSW5Db250YWN0KSAmJiB3aGVlbC5lbmdpbmVGb3JjZSAhPT0gMCAmJiB3aGVlbC51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkKSB7CiAgICAgICAgICAvLyBBcHBseSBjdXN0b20gcm90YXRpb24gd2hlbiBhY2NlbGVyYXRpbmcgYW5kIHNsaWRpbmcKICAgICAgICAgIHdoZWVsLmRlbHRhUm90YXRpb24gPSAod2hlZWwuZW5naW5lRm9yY2UgPiAwID8gMSA6IC0xKSAqIHdoZWVsLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgKiB0aW1lU3RlcDsKICAgICAgICB9IC8vIExvY2sgd2hlZWxzCgoKICAgICAgICBpZiAoTWF0aC5hYnMod2hlZWwuYnJha2UpID4gTWF0aC5hYnMod2hlZWwuZW5naW5lRm9yY2UpKSB7CiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gMDsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnJvdGF0aW9uICs9IHdoZWVsLmRlbHRhUm90YXRpb247IC8vIFVzZSB0aGUgb2xkIHZhbHVlCgogICAgICAgIHdoZWVsLmRlbHRhUm90YXRpb24gKj0gMC45OTsgLy8gZGFtcGluZyBvZiByb3RhdGlvbiB3aGVuIG5vdCBpbiBjb250YWN0CiAgICAgIH0KICAgIH0KCiAgICB1cGRhdGVTdXNwZW5zaW9uKGRlbHRhVGltZSkgewogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNvbnN0IGNoYXNzaXNNYXNzID0gY2hhc3Npc0JvZHkubWFzczsKICAgICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvczsKICAgICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCB3X2l0ID0gMDsgd19pdCA8IG51bVdoZWVsczsgd19pdCsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW3dfaXRdOwoKICAgICAgICBpZiAod2hlZWwuaXNJbkNvbnRhY3QpIHsKICAgICAgICAgIGxldCBmb3JjZTsgLy8gU3ByaW5nCgogICAgICAgICAgY29uc3Qgc3VzcF9sZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgICAgIGNvbnN0IGN1cnJlbnRfbGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvbkxlbmd0aDsKICAgICAgICAgIGNvbnN0IGxlbmd0aF9kaWZmID0gc3VzcF9sZW5ndGggLSBjdXJyZW50X2xlbmd0aDsKICAgICAgICAgIGZvcmNlID0gd2hlZWwuc3VzcGVuc2lvblN0aWZmbmVzcyAqIGxlbmd0aF9kaWZmICogd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOyAvLyBEYW1wZXIKCiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWRfcmVsX3ZlbCA9IHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5OwogICAgICAgICAgbGV0IHN1c3BfZGFtcGluZzsKCiAgICAgICAgICBpZiAocHJvamVjdGVkX3JlbF92ZWwgPCAwKSB7CiAgICAgICAgICAgIHN1c3BfZGFtcGluZyA9IHdoZWVsLmRhbXBpbmdDb21wcmVzc2lvbjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN1c3BfZGFtcGluZyA9IHdoZWVsLmRhbXBpbmdSZWxheGF0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIGZvcmNlIC09IHN1c3BfZGFtcGluZyAqIHByb2plY3RlZF9yZWxfdmVsOwogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gZm9yY2UgKiBjaGFzc2lzTWFzczsKCiAgICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkZvcmNlIDwgMCkgewogICAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIHZlaGljbGUgaW5jbHVkaW5nIGl0cyBjb25zdHJhaW50cyBmcm9tIHRoZSB3b3JsZC4KICAgICAqLwoKCiAgICByZW1vdmVGcm9tV29ybGQod29ybGQpIHsKICAgICAgdGhpcy5jb25zdHJhaW50czsKICAgICAgd29ybGQucmVtb3ZlQm9keSh0aGlzLmNoYXNzaXNCb2R5KTsKICAgICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICB9CgogICAgY2FzdFJheSh3aGVlbCkgewogICAgICBjb25zdCByYXl2ZWN0b3IgPSBjYXN0UmF5X3JheXZlY3RvcjsKICAgICAgY29uc3QgdGFyZ2V0ID0gY2FzdFJheV90YXJnZXQ7CiAgICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCk7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKICAgICAgbGV0IGRlcHRoID0gLTE7CiAgICAgIGNvbnN0IHJheWxlbiA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoICsgd2hlZWwucmFkaXVzOwogICAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZShyYXlsZW4sIHJheXZlY3Rvcik7CiAgICAgIGNvbnN0IHNvdXJjZSA9IHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZDsKICAgICAgc291cmNlLnZhZGQocmF5dmVjdG9yLCB0YXJnZXQpOwogICAgICBjb25zdCByYXljYXN0UmVzdWx0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdDsKICAgICAgcmF5Y2FzdFJlc3VsdC5yZXNldCgpOyAvLyBUdXJuIG9mZiByYXkgY29sbGlzaW9uIHdpdGggdGhlIGNoYXNzaXMgdGVtcG9yYXJpbHkKCiAgICAgIGNvbnN0IG9sZFN0YXRlID0gY2hhc3Npc0JvZHkuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gZmFsc2U7IC8vIENhc3QgcmF5IGFnYWluc3Qgd29ybGQKCiAgICAgIHRoaXMud29ybGQucmF5VGVzdChzb3VyY2UsIHRhcmdldCwgcmF5Y2FzdFJlc3VsdCk7CiAgICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gb2xkU3RhdGU7CiAgICAgIGNvbnN0IG9iamVjdCA9IHJheWNhc3RSZXN1bHQuYm9keTsKICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5ncm91bmRPYmplY3QgPSAwOwoKICAgICAgaWYgKG9iamVjdCkgewogICAgICAgIGRlcHRoID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTsKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZDsKICAgICAgICB3aGVlbC5pc0luQ29udGFjdCA9IHRydWU7CiAgICAgICAgY29uc3QgaGl0RGlzdGFuY2UgPSByYXljYXN0UmVzdWx0LmRpc3RhbmNlOwogICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBoaXREaXN0YW5jZSAtIHdoZWVsLnJhZGl1czsgLy8gY2xhbXAgb24gbWF4IHN1c3BlbnNpb24gdHJhdmVsCgogICAgICAgIGNvbnN0IG1pblN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCAtIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7CiAgICAgICAgY29uc3QgbWF4U3VzcGVuc2lvbkxlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoICsgd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDsKCiAgICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPCBtaW5TdXNwZW5zaW9uTGVuZ3RoKSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gbWluU3VzcGVuc2lvbkxlbmd0aDsKICAgICAgICB9CgogICAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID4gbWF4U3VzcGVuc2lvbkxlbmd0aCkgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IG1heFN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LnJlc2V0KCk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBkZW5vbWluYXRvciA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgICAgY2hhc3Npc0JvZHkuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CiAgICAgICAgY29uc3QgcHJvalZlbCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKCiAgICAgICAgaWYgKGRlbm9taW5hdG9yID49IC0wLjEpIHsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMDsKICAgICAgICAgIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IDEgLyAwLjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGludiA9IC0xIC8gZGVub21pbmF0b3I7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHByb2pWZWwgKiBpbnY7CiAgICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSBpbnY7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vcHV0IHdoZWVsIGluZm8gYXMgaW4gcmVzdCBwb3NpdGlvbgogICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIDAgKiB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgIHdoZWVsLmRpcmVjdGlvbldvcmxkLnNjYWxlKC0xLCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTsKICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjA7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZXB0aDsKICAgIH0KCiAgICB1cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsKSB7CiAgICAgIHdoZWVsLmlzSW5Db250YWN0ID0gZmFsc2U7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKICAgICAgY2hhc3Npc0JvZHkucG9pbnRUb1dvcmxkRnJhbWUod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsLCB3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQpOwogICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUod2hlZWwuZGlyZWN0aW9uTG9jYWwsIHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmF4bGVMb2NhbCwgd2hlZWwuYXhsZVdvcmxkKTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIG9uZSBvZiB0aGUgd2hlZWwgdHJhbnNmb3JtLgogICAgICogTm90ZSB3aGVuIHJlbmRlcmluZyB3aGVlbHM6IGR1cmluZyBlYWNoIHN0ZXAsIHdoZWVsIHRyYW5zZm9ybXMgYXJlIHVwZGF0ZWQgQkVGT1JFIHRoZSBjaGFzc2lzOyBpZS4gdGhlaXIgcG9zaXRpb24gYmVjb21lcyBpbnZhbGlkIGFmdGVyIHRoZSBzdGVwLiBUaHVzIHdoZW4geW91IHJlbmRlciB3aGVlbHMsIHlvdSBtdXN0IHVwZGF0ZSB3aGVlbCB0cmFuc2Zvcm1zIGJlZm9yZSByZW5kZXJpbmcgdGhlbS4gU2VlIHJheWNhc3RWZWhpY2xlIGRlbW8gZm9yIGFuIGV4YW1wbGUuCiAgICAgKiBAcGFyYW0gd2hlZWxJbmRleCBUaGUgd2hlZWwgaW5kZXggdG8gdXBkYXRlLgogICAgICovCgoKICAgIHVwZGF0ZVdoZWVsVHJhbnNmb3JtKHdoZWVsSW5kZXgpIHsKICAgICAgY29uc3QgdXAgPSB0bXBWZWM0OwogICAgICBjb25zdCByaWdodCA9IHRtcFZlYzU7CiAgICAgIGNvbnN0IGZ3ZCA9IHRtcFZlYzY7CiAgICAgIGNvbnN0IHdoZWVsID0gdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdOwogICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpOwogICAgICB3aGVlbC5kaXJlY3Rpb25Mb2NhbC5zY2FsZSgtMSwgdXApOwogICAgICByaWdodC5jb3B5KHdoZWVsLmF4bGVMb2NhbCk7CiAgICAgIHVwLmNyb3NzKHJpZ2h0LCBmd2QpOwogICAgICBmd2Qubm9ybWFsaXplKCk7CiAgICAgIHJpZ2h0Lm5vcm1hbGl6ZSgpOyAvLyBSb3RhdGUgYXJvdW5kIHN0ZWVyaW5nIG92ZXIgdGhlIHdoZWVsQXhsZQoKICAgICAgY29uc3Qgc3RlZXJpbmcgPSB3aGVlbC5zdGVlcmluZzsKICAgICAgY29uc3Qgc3RlZXJpbmdPcm4gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICBzdGVlcmluZ09ybi5zZXRGcm9tQXhpc0FuZ2xlKHVwLCBzdGVlcmluZyk7CiAgICAgIGNvbnN0IHJvdGF0aW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgcm90YXRpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZShyaWdodCwgd2hlZWwucm90YXRpb24pOyAvLyBXb3JsZCByb3RhdGlvbiBvZiB0aGUgd2hlZWwKCiAgICAgIGNvbnN0IHEgPSB3aGVlbC53b3JsZFRyYW5zZm9ybS5xdWF0ZXJuaW9uOwogICAgICB0aGlzLmNoYXNzaXNCb2R5LnF1YXRlcm5pb24ubXVsdChzdGVlcmluZ09ybiwgcSk7CiAgICAgIHEubXVsdChyb3RhdGluZ09ybiwgcSk7CiAgICAgIHEubm9ybWFsaXplKCk7IC8vIHdvcmxkIHBvc2l0aW9uIG9mIHRoZSB3aGVlbAoKICAgICAgY29uc3QgcCA9IHdoZWVsLndvcmxkVHJhbnNmb3JtLnBvc2l0aW9uOwogICAgICBwLmNvcHkod2hlZWwuZGlyZWN0aW9uV29ybGQpOwogICAgICBwLnNjYWxlKHdoZWVsLnN1c3BlbnNpb25MZW5ndGgsIHApOwogICAgICBwLnZhZGQod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLCBwKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB3b3JsZCB0cmFuc2Zvcm0gb2Ygb25lIG9mIHRoZSB3aGVlbHMKICAgICAqLwoKCiAgICBnZXRXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsSW5kZXgpIHsKICAgICAgcmV0dXJuIHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XS53b3JsZFRyYW5zZm9ybTsKICAgIH0KCiAgICB1cGRhdGVGcmljdGlvbih0aW1lU3RlcCkgewogICAgICBjb25zdCBzdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2ogPSB1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2o7IC8vY2FsY3VsYXRlIHRoZSBpbXB1bHNlLCBzbyB0aGF0IHRoZSB3aGVlbHMgZG9uJ3QgbW92ZSBzaWRld2FyZHMKCiAgICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7CiAgICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNvbnN0IGZvcndhcmRXUyA9IHVwZGF0ZUZyaWN0aW9uX2ZvcndhcmRXUzsKICAgICAgY29uc3QgYXhsZSA9IHVwZGF0ZUZyaWN0aW9uX2F4bGU7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CgogICAgICAgIGlmIChncm91bmRPYmplY3QpIHsKICAgICAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQrKzsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlID0gMDsKICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IDA7CgogICAgICAgIGlmICghZm9yd2FyZFdTW2ldKSB7CiAgICAgICAgICBmb3J3YXJkV1NbaV0gPSBuZXcgVmVjMygpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFheGxlW2ldKSB7CiAgICAgICAgICBheGxlW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICBjb25zdCBheGxlaSA9IGF4bGVbaV07CiAgICAgICAgICBjb25zdCB3aGVlbFRyYW5zID0gdGhpcy5nZXRXaGVlbFRyYW5zZm9ybVdvcmxkKGkpOyAvLyBHZXQgd29ybGQgYXhsZQoKICAgICAgICAgIHdoZWVsVHJhbnMudmVjdG9yVG9Xb3JsZEZyYW1lKGRpcmVjdGlvbnNbdGhpcy5pbmRleFJpZ2h0QXhpc10sIGF4bGVpKTsKICAgICAgICAgIGNvbnN0IHN1cmZOb3JtYWxXUyA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7CiAgICAgICAgICBjb25zdCBwcm9qID0gYXhsZWkuZG90KHN1cmZOb3JtYWxXUyk7CiAgICAgICAgICBzdXJmTm9ybWFsV1Muc2NhbGUocHJvaiwgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qKTsKICAgICAgICAgIGF4bGVpLnZzdWIoc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qLCBheGxlaSk7CiAgICAgICAgICBheGxlaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHN1cmZOb3JtYWxXUy5jcm9zcyhheGxlaSwgZm9yd2FyZFdTW2ldKTsKICAgICAgICAgIGZvcndhcmRXU1tpXS5ub3JtYWxpemUoKTsKICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbChjaGFzc2lzQm9keSwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBncm91bmRPYmplY3QsIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgYXhsZWkpOwogICAgICAgICAgd2hlZWwuc2lkZUltcHVsc2UgKj0gc2lkZUZyaWN0aW9uU3RpZmZuZXNzMjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHNpZGVGYWN0b3IgPSAxOwogICAgICBjb25zdCBmd2RGYWN0b3IgPSAwLjU7CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgICAgbGV0IHJvbGxpbmdGcmljdGlvbiA9IDA7CiAgICAgICAgd2hlZWwuc2xpcEluZm8gPSAxOwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICBjb25zdCBkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZSA9IDA7CiAgICAgICAgICBjb25zdCBtYXhJbXB1bHNlID0gd2hlZWwuYnJha2UgPyB3aGVlbC5icmFrZSA6IGRlZmF1bHRSb2xsaW5nRnJpY3Rpb25JbXB1bHNlOyAvLyBidFdoZWVsQ29udGFjdFBvaW50IGNvbnRhY3RQdChjaGFzc2lzQm9keSxncm91bmRPYmplY3Qsd2hlZWxJbmZyYXljYXN0SW5mby5oaXRQb2ludFdvcmxkLGZvcndhcmRXU1t3aGVlbF0sbWF4SW1wdWxzZSk7CiAgICAgICAgICAvLyByb2xsaW5nRnJpY3Rpb24gPSBjYWxjUm9sbGluZ0ZyaWN0aW9uKGNvbnRhY3RQdCk7CgogICAgICAgICAgcm9sbGluZ0ZyaWN0aW9uID0gY2FsY1JvbGxpbmdGcmljdGlvbihjaGFzc2lzQm9keSwgZ3JvdW5kT2JqZWN0LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGZvcndhcmRXU1tpXSwgbWF4SW1wdWxzZSk7CiAgICAgICAgICByb2xsaW5nRnJpY3Rpb24gKz0gd2hlZWwuZW5naW5lRm9yY2UgKiB0aW1lU3RlcDsgLy8gcm9sbGluZ0ZyaWN0aW9uID0gMDsKCiAgICAgICAgICBjb25zdCBmYWN0b3IgPSBtYXhJbXB1bHNlIC8gcm9sbGluZ0ZyaWN0aW9uOwogICAgICAgICAgd2hlZWwuc2xpcEluZm8gKj0gZmFjdG9yOwogICAgICAgIH0gLy9zd2l0Y2ggYmV0d2VlbiBhY3RpdmUgcm9sbGluZyAodGhyb3R0bGUpLCBicmFraW5nIGFuZCBub24tYWN0aXZlIHJvbGxpbmcgZnJpY3Rpb24gKG50aHJvdHRsZS9icmVhaykKCgogICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gMDsKICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7CgogICAgICAgIGlmIChncm91bmRPYmplY3QpIHsKICAgICAgICAgIHdoZWVsLnNraWRJbmZvID0gMTsKICAgICAgICAgIGNvbnN0IG1heGltcCA9IHdoZWVsLnN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwICogd2hlZWwuZnJpY3Rpb25TbGlwOwogICAgICAgICAgY29uc3QgbWF4aW1wU2lkZSA9IG1heGltcDsKICAgICAgICAgIGNvbnN0IG1heGltcFNxdWFyZWQgPSBtYXhpbXAgKiBtYXhpbXBTaWRlOwogICAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSByb2xsaW5nRnJpY3Rpb247IC8vd2hlZWxJbmZvLmVuZ2luZUZvcmNlKiB0aW1lU3RlcDsKCiAgICAgICAgICBjb25zdCB4ID0gd2hlZWwuZm9yd2FyZEltcHVsc2UgKiBmd2RGYWN0b3IgLyB3aGVlbC5mb3J3YXJkQWNjZWxlcmF0aW9uOwogICAgICAgICAgY29uc3QgeSA9IHdoZWVsLnNpZGVJbXB1bHNlICogc2lkZUZhY3RvciAvIHdoZWVsLnNpZGVBY2NlbGVyYXRpb247CiAgICAgICAgICBjb25zdCBpbXB1bHNlU3F1YXJlZCA9IHggKiB4ICsgeSAqIHk7CiAgICAgICAgICB3aGVlbC5zbGlkaW5nID0gZmFsc2U7CgogICAgICAgICAgaWYgKGltcHVsc2VTcXVhcmVkID4gbWF4aW1wU3F1YXJlZCkgewogICAgICAgICAgICB0aGlzLnNsaWRpbmcgPSB0cnVlOwogICAgICAgICAgICB3aGVlbC5zbGlkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4aW1wIC8gTWF0aC5zcXJ0KGltcHVsc2VTcXVhcmVkKTsKICAgICAgICAgICAgd2hlZWwuc2tpZEluZm8gKj0gZmFjdG9yOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2xpZGluZykgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKCiAgICAgICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHsKICAgICAgICAgICAgaWYgKHdoZWVsLnNraWRJbmZvIDwgMSkgewogICAgICAgICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvOwogICAgICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIGFwcGx5IHRoZSBpbXB1bHNlcwoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgcmVsX3BvcyA9IG5ldyBWZWMzKCk7CiAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbF9wb3MpOyAvLyBjYW5ub25zIGFwcGx5aW1wdWxzZSBpcyB1c2luZyB3b3JsZCBjb29yZCBmb3IgdGhlIHBvc2l0aW9uCiAgICAgICAgLy9yZWxfcG9zLmNvcHkod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkKTsKCiAgICAgICAgaWYgKHdoZWVsLmZvcndhcmRJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICBjb25zdCBpbXB1bHNlID0gbmV3IFZlYzMoKTsKICAgICAgICAgIGZvcndhcmRXU1tpXS5zY2FsZSh3aGVlbC5mb3J3YXJkSW1wdWxzZSwgaW1wdWxzZSk7CiAgICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2UoaW1wdWxzZSwgcmVsX3Bvcyk7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHsKICAgICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTsKICAgICAgICAgIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKICAgICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGdyb3VuZE9iamVjdC5wb3NpdGlvbiwgcmVsX3BvczIpOyAvL3JlbF9wb3MyLmNvcHkod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkKTsKCiAgICAgICAgICBjb25zdCBzaWRlSW1wID0gbmV3IFZlYzMoKTsKICAgICAgICAgIGF4bGVbaV0uc2NhbGUod2hlZWwuc2lkZUltcHVsc2UsIHNpZGVJbXApOyAvLyBTY2FsZSB0aGUgcmVsYXRpdmUgcG9zaXRpb24gaW4gdGhlIHVwIGRpcmVjdGlvbiB3aXRoIHJvbGxJbmZsdWVuY2UuCiAgICAgICAgICAvLyBJZiByb2xsSW5mbHVlbmNlIGlzIDEsIHRoZSBpbXB1bHNlIHdpbGwgYmUgYXBwbGllZCBvbiB0aGUgaGl0UG9pbnQgKGVhc3kgdG8gcm9sbCBvdmVyKSwgaWYgaXQgaXMgemVybyBpdCB3aWxsIGJlIGFwcGxpZWQgaW4gdGhlIHNhbWUgcGxhbmUgYXMgdGhlIGNlbnRlciBvZiBtYXNzIChub3QgZWFzeSB0byByb2xsIG92ZXIpLgoKICAgICAgICAgIGNoYXNzaXNCb2R5LnZlY3RvclRvTG9jYWxGcmFtZShyZWxfcG9zLCByZWxfcG9zKTsKICAgICAgICAgIHJlbF9wb3NbJ3h5eidbdGhpcy5pbmRleFVwQXhpc11dICo9IHdoZWVsLnJvbGxJbmZsdWVuY2U7CiAgICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7CiAgICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2Uoc2lkZUltcCwgcmVsX3Bvcyk7IC8vYXBwbHkgZnJpY3Rpb24gaW1wdWxzZSBvbiB0aGUgZ3JvdW5kCgogICAgICAgICAgc2lkZUltcC5zY2FsZSgtMSwgc2lkZUltcCk7CiAgICAgICAgICBncm91bmRPYmplY3QuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgfQoKICBjb25zdCB0bXBWZWM0ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM1ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM2ID0gbmV3IFZlYzMoKTsKICBuZXcgUmF5KCk7CiAgY29uc3QgY2FzdFJheV9yYXl2ZWN0b3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhc3RSYXlfdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBkaXJlY3Rpb25zID0gW25ldyBWZWMzKDEsIDAsIDApLCBuZXcgVmVjMygwLCAxLCAwKSwgbmV3IFZlYzMoMCwgMCwgMSldOwogIGNvbnN0IHVwZGF0ZUZyaWN0aW9uX3N1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdXBkYXRlRnJpY3Rpb25fYXhsZSA9IFtdOwogIGNvbnN0IHVwZGF0ZUZyaWN0aW9uX2ZvcndhcmRXUyA9IFtdOwogIGNvbnN0IHNpZGVGcmljdGlvblN0aWZmbmVzczIgPSAxOwogIGNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwyID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbCA9IG5ldyBWZWMzKCk7CgogIGZ1bmN0aW9uIGNhbGNSb2xsaW5nRnJpY3Rpb24oYm9keTAsIGJvZHkxLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkLCBtYXhJbXB1bHNlKSB7CiAgICBsZXQgajEgPSAwOwogICAgY29uc3QgY29udGFjdFBvc1dvcmxkID0gZnJpY3Rpb25Qb3NXb3JsZDsgLy8gY29uc3QgcmVsX3BvczEgPSBuZXcgVmVjMygpOwogICAgLy8gY29uc3QgcmVsX3BvczIgPSBuZXcgVmVjMygpOwoKICAgIGNvbnN0IHZlbDEgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDE7CiAgICBjb25zdCB2ZWwyID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwyOwogICAgY29uc3QgdmVsID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWw7IC8vIGNvbnRhY3RQb3NXb3JsZC52c3ViKGJvZHkwLnBvc2l0aW9uLCByZWxfcG9zMSk7CiAgICAvLyBjb250YWN0UG9zV29ybGQudnN1Yihib2R5MS5wb3NpdGlvbiwgcmVsX3BvczIpOwoKICAgIGJvZHkwLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KGNvbnRhY3RQb3NXb3JsZCwgdmVsMSk7CiAgICBib2R5MS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChjb250YWN0UG9zV29ybGQsIHZlbDIpOwogICAgdmVsMS52c3ViKHZlbDIsIHZlbCk7CiAgICBjb25zdCB2cmVsID0gZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZC5kb3QodmVsKTsKICAgIGNvbnN0IGRlbm9tMCA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keTAsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQpOwogICAgY29uc3QgZGVub20xID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5MSwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCk7CiAgICBjb25zdCByZWxheGF0aW9uID0gMTsKICAgIGNvbnN0IGphY0RpYWdBQkludiA9IHJlbGF4YXRpb24gLyAoZGVub20wICsgZGVub20xKTsgLy8gY2FsY3VsYXRlIGogdGhhdCBtb3ZlcyB1cyB0byB6ZXJvIHJlbGF0aXZlIHZlbG9jaXR5CgogICAgajEgPSAtdnJlbCAqIGphY0RpYWdBQkludjsKCiAgICBpZiAobWF4SW1wdWxzZSA8IGoxKSB7CiAgICAgIGoxID0gbWF4SW1wdWxzZTsKICAgIH0KCiAgICBpZiAoajEgPCAtbWF4SW1wdWxzZSkgewogICAgICBqMSA9IC1tYXhJbXB1bHNlOwogICAgfQoKICAgIHJldHVybiBqMTsKICB9CgogIGNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfcjAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfYzAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfdmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX20gPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHksIHBvcywgbm9ybWFsKSB7CiAgICBjb25zdCByMCA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfcjA7CiAgICBjb25zdCBjMCA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfYzA7CiAgICBjb25zdCB2ZWMgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3ZlYzsKICAgIGNvbnN0IG0gPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX207CiAgICBwb3MudnN1Yihib2R5LnBvc2l0aW9uLCByMCk7CiAgICByMC5jcm9zcyhub3JtYWwsIGMwKTsKICAgIGJvZHkuaW52SW5lcnRpYVdvcmxkLnZtdWx0KGMwLCBtKTsKICAgIG0uY3Jvc3MocjAsIHZlYyk7CiAgICByZXR1cm4gYm9keS5pbnZNYXNzICsgbm9ybWFsLmRvdCh2ZWMpOwogIH0KCiAgY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwxID0gbmV3IFZlYzMoKTsKICBjb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsID0gbmV3IFZlYzMoKTsgLy8gYmlsYXRlcmFsIGNvbnN0cmFpbnQgYmV0d2VlbiB0d28gZHluYW1pYyBvYmplY3RzCgogIGZ1bmN0aW9uIHJlc29sdmVTaW5nbGVCaWxhdGVyYWwoYm9keTEsIHBvczEsIGJvZHkyLCBwb3MyLCBub3JtYWwpIHsKICAgIGNvbnN0IG5vcm1hbExlblNxciA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7CgogICAgaWYgKG5vcm1hbExlblNxciA+IDEuMSkgewogICAgICByZXR1cm4gMDsgLy8gbm8gaW1wdWxzZQogICAgfSAvLyBjb25zdCByZWxfcG9zMSA9IG5ldyBWZWMzKCk7CiAgICAvLyBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CiAgICAvLyBwb3MxLnZzdWIoYm9keTEucG9zaXRpb24sIHJlbF9wb3MxKTsKICAgIC8vIHBvczIudnN1Yihib2R5Mi5wb3NpdGlvbiwgcmVsX3BvczIpOwoKCiAgICBjb25zdCB2ZWwxID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwxOwogICAgY29uc3QgdmVsMiA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMjsKICAgIGNvbnN0IHZlbCA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsOwogICAgYm9keTEuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocG9zMSwgdmVsMSk7CiAgICBib2R5Mi5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChwb3MyLCB2ZWwyKTsKICAgIHZlbDEudnN1Yih2ZWwyLCB2ZWwpOwogICAgY29uc3QgcmVsX3ZlbCA9IG5vcm1hbC5kb3QodmVsKTsKICAgIGNvbnN0IGNvbnRhY3REYW1waW5nID0gMC4yOwogICAgY29uc3QgbWFzc1Rlcm0gPSAxIC8gKGJvZHkxLmludk1hc3MgKyBib2R5Mi5pbnZNYXNzKTsKICAgIGNvbnN0IGltcHVsc2UgPSAtY29udGFjdERhbXBpbmcgKiByZWxfdmVsICogbWFzc1Rlcm07CiAgICByZXR1cm4gaW1wdWxzZTsKICB9CiAgLyoqCiAgICogU3BoZXJpY2FsIHNoYXBlCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzID0gMQogICAqICAgICBjb25zdCBzcGhlcmVTaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKHJhZGl1cykKICAgKiAgICAgY29uc3Qgc3BoZXJlQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBzcGhlcmVTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KHNwaGVyZUJvZHkpCiAgICovCgoKICBjbGFzcyBTcGhlcmUgZXh0ZW5kcyBTaGFwZSB7CiAgICAvKioKICAgICAqIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZS4KICAgICAqLwoKICAgIC8qKgogICAgICoKICAgICAqIEBwYXJhbSByYWRpdXMgVGhlIHJhZGl1cyBvZiB0aGUgc3BoZXJlLCBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHJhZGl1cykgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuU1BIRVJFCiAgICAgIH0pOwogICAgICB0aGlzLnJhZGl1cyA9IHZvaWQgMDsKICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXMgIT09IHVuZGVmaW5lZCA/IHJhZGl1cyA6IDEuMDsKCiAgICAgIGlmICh0aGlzLnJhZGl1cyA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzcGhlcmUgcmFkaXVzIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYSAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICBjb25zdCBJID0gMi4wICogbWFzcyAqIHRoaXMucmFkaXVzICogdGhpcy5yYWRpdXMgLyA1LjA7CiAgICAgIHRhcmdldC54ID0gSTsKICAgICAgdGFyZ2V0LnkgPSBJOwogICAgICB0YXJnZXQueiA9IEk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKiogdm9sdW1lICovCgoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuIDQuMCAqIE1hdGguUEkgKiBNYXRoLnBvdyh0aGlzLnJhZGl1cywgMykgLyAzLjA7CiAgICB9CgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB0aGlzLnJhZGl1czsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICBjb25zdCByID0gdGhpcy5yYWRpdXM7CiAgICAgIGNvbnN0IGF4ZXMgPSBbJ3gnLCAneScsICd6J107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBheCA9IGF4ZXNbaV07CiAgICAgICAgbWluW2F4XSA9IHBvc1theF0gLSByOwogICAgICAgIG1heFtheF0gPSBwb3NbYXhdICsgcjsKICAgICAgfQogICAgfQoKICB9CgogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzIGZvciBjYWxjdWxhdGlvbgoKICBuZXcgVmVjMygpOyAvLyBSZWxhdGl2ZSB2ZWxvY2l0eQoKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQ3lsaW5kZXIgY2xhc3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzVG9wID0gMC41CiAgICogICAgIGNvbnN0IHJhZGl1c0JvdHRvbSA9IDAuNQogICAqICAgICBjb25zdCBoZWlnaHQgPSAyCiAgICogICAgIGNvbnN0IG51bVNlZ21lbnRzID0gMTIKICAgKiAgICAgY29uc3QgY3lsaW5kZXJTaGFwZSA9IG5ldyBDQU5OT04uQ3lsaW5kZXIocmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMpCiAgICogICAgIGNvbnN0IGN5bGluZGVyQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBjeWxpbmRlclNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoY3lsaW5kZXJCb2R5KQogICAqLwoKICBjbGFzcyBDeWxpbmRlciBleHRlbmRzIENvbnZleFBvbHloZWRyb24gewogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRvIGJ1aWxkIHRoZSBjeWxpbmRlciBvdXQgb2YuICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gcmFkaXVzVG9wIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gcmFkaXVzQm90dG9tIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIG51bVNlZ21lbnRzIFRoZSBudW1iZXIgb2Ygc2VnbWVudHMgdG8gYnVpbGQgdGhlIGN5bGluZGVyIG91dCBvZi4KICAgICAqLwogICAgY29uc3RydWN0b3IocmFkaXVzVG9wID0gMSwgcmFkaXVzQm90dG9tID0gMSwgaGVpZ2h0ID0gMSwgbnVtU2VnbWVudHMgPSA4KSB7CiAgICAgIGlmIChyYWRpdXNUb3AgPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY3lsaW5kZXIgcmFkaXVzVG9wIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgaWYgKHJhZGl1c0JvdHRvbSA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjeWxpbmRlciByYWRpdXNCb3R0b20gY2Fubm90IGJlIG5lZ2F0aXZlLicpOwogICAgICB9CgogICAgICBjb25zdCBOID0gbnVtU2VnbWVudHM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW107CiAgICAgIGNvbnN0IGF4ZXMgPSBbXTsKICAgICAgY29uc3QgZmFjZXMgPSBbXTsKICAgICAgY29uc3QgYm90dG9tZmFjZSA9IFtdOwogICAgICBjb25zdCB0b3BmYWNlID0gW107CiAgICAgIGNvbnN0IGNvcyA9IE1hdGguY29zOwogICAgICBjb25zdCBzaW4gPSBNYXRoLnNpbjsgLy8gRmlyc3QgYm90dG9tIHBvaW50CgogICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNCb3R0b20gKiBzaW4oMCksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcygwKSkpOwogICAgICBib3R0b21mYWNlLnB1c2goMCk7IC8vIEZpcnN0IHRvcCBwb2ludAoKICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzVG9wICogc2luKDApLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcygwKSkpOwogICAgICB0b3BmYWNlLnB1c2goMSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIGNvbnN0IHRoZXRhID0gMiAqIE1hdGguUEkgLyBOICogKGkgKyAxKTsKICAgICAgICBjb25zdCB0aGV0YU4gPSAyICogTWF0aC5QSSAvIE4gKiAoaSArIDAuNSk7CgogICAgICAgIGlmIChpIDwgTiAtIDEpIHsKICAgICAgICAgIC8vIEJvdHRvbQogICAgICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKHRoZXRhKSwgLWhlaWdodCAqIDAuNSwgcmFkaXVzQm90dG9tICogY29zKHRoZXRhKSkpOwogICAgICAgICAgYm90dG9tZmFjZS5wdXNoKDIgKiBpICsgMik7IC8vIFRvcAoKICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbih0aGV0YSksIGhlaWdodCAqIDAuNSwgcmFkaXVzVG9wICogY29zKHRoZXRhKSkpOwogICAgICAgICAgdG9wZmFjZS5wdXNoKDIgKiBpICsgMyk7IC8vIEZhY2UKCiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAyICogaSArIDMsIDIgKiBpICsgMl0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAxLCAwXSk7IC8vIENvbm5lY3QKICAgICAgICB9IC8vIEF4aXM6IHdlIGNhbiBjdXQgb2ZmIGhhbGYgb2YgdGhlbSBpZiB3ZSBoYXZlIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzCgoKICAgICAgICBpZiAoTiAlIDIgPT09IDEgfHwgaSA8IE4gLyAyKSB7CiAgICAgICAgICBheGVzLnB1c2gobmV3IFZlYzMoLXNpbih0aGV0YU4pLCAwLCBjb3ModGhldGFOKSkpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZmFjZXMucHVzaChib3R0b21mYWNlKTsKICAgICAgYXhlcy5wdXNoKG5ldyBWZWMzKDAsIDEsIDApKTsgLy8gUmVvcmRlciB0b3AgZmFjZQoKICAgICAgY29uc3QgdGVtcCA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3BmYWNlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGVtcC5wdXNoKHRvcGZhY2VbdG9wZmFjZS5sZW5ndGggLSBpIC0gMV0pOwogICAgICB9CgogICAgICBmYWNlcy5wdXNoKHRlbXApOwogICAgICBzdXBlcih7CiAgICAgICAgdmVydGljZXMsCiAgICAgICAgZmFjZXMsCiAgICAgICAgYXhlcwogICAgICB9KTsKICAgICAgdGhpcy5yYWRpdXNUb3AgPSB2b2lkIDA7CiAgICAgIHRoaXMucmFkaXVzQm90dG9tID0gdm9pZCAwOwogICAgICB0aGlzLmhlaWdodCA9IHZvaWQgMDsKICAgICAgdGhpcy5udW1TZWdtZW50cyA9IHZvaWQgMDsKICAgICAgdGhpcy50eXBlID0gU2hhcGUudHlwZXMuQ1lMSU5ERVI7CiAgICAgIHRoaXMucmFkaXVzVG9wID0gcmFkaXVzVG9wOwogICAgICB0aGlzLnJhZGl1c0JvdHRvbSA9IHJhZGl1c0JvdHRvbTsKICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgIHRoaXMubnVtU2VnbWVudHMgPSBudW1TZWdtZW50czsKICAgIH0KCiAgfQogIC8qKgogICAqIFBhcnRpY2xlIHNoYXBlLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHBhcnRpY2xlU2hhcGUgPSBuZXcgQ0FOTk9OLlBhcnRpY2xlKCkKICAgKiAgICAgY29uc3QgcGFydGljbGVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IHBhcnRpY2xlU2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShwYXJ0aWNsZUJvZHkpCiAgICovCgoKICBjbGFzcyBQYXJ0aWNsZSBleHRlbmRzIFNoYXBlIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUEFSVElDTEUKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYQogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHRhcmdldC5zZXQoMCwgMCwgMCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLy8gR2V0IGVhY2ggYXhpcyBtYXgKICAgICAgbWluLmNvcHkocG9zKTsKICAgICAgbWF4LmNvcHkocG9zKTsKICAgIH0KCiAgfQogIC8qKgogICAqIEEgcGxhbmUsIGZhY2luZyBpbiB0aGUgWiBkaXJlY3Rpb24uIFRoZSBwbGFuZSBoYXMgaXRzIHN1cmZhY2UgYXQgej0wIGFuZCBldmVyeXRoaW5nIGJlbG93IHo9MCBpcyBhc3N1bWVkIHRvIGJlIHNvbGlkIHBsYW5lLiBUbyBtYWtlIHRoZSBwbGFuZSBmYWNlIGluIHNvbWUgb3RoZXIgZGlyZWN0aW9uIHRoYW4geiwgeW91IG11c3QgcHV0IGl0IGluc2lkZSBhIEJvZHkgYW5kIHJvdGF0ZSB0aGF0IGJvZHkuIFNlZSB0aGUgZGVtb3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcGxhbmVTaGFwZSA9IG5ldyBDQU5OT04uUGxhbmUoKQogICAqICAgICBjb25zdCBwbGFuZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAwLCBzaGFwZTogIHBsYW5lU2hhcGUgfSkKICAgKiAgICAgcGxhbmVCb2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKC1NYXRoLlBJIC8gMiwgMCwgMCkgLy8gbWFrZSBpdCBmYWNlIHVwCiAgICogICAgIHdvcmxkLmFkZEJvZHkocGxhbmVCb2R5KQogICAqLwoKCiAgY2xhc3MgUGxhbmUgZXh0ZW5kcyBTaGFwZSB7CiAgICAvKiogd29ybGROb3JtYWwgKi8KCiAgICAvKiogd29ybGROb3JtYWxOZWVkc1VwZGF0ZSAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5QTEFORQogICAgICB9KTsgLy8gV29ybGQgb3JpZW50ZWQgbm9ybWFsCgogICAgICB0aGlzLndvcmxkTm9ybWFsID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkTm9ybWFsTmVlZHNVcGRhdGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLndvcmxkTm9ybWFsTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgIH0KICAgIC8qKiBjb21wdXRlV29ybGROb3JtYWwgKi8KCgogICAgY29tcHV0ZVdvcmxkTm9ybWFsKHF1YXQpIHsKICAgICAgY29uc3QgbiA9IHRoaXMud29ybGROb3JtYWw7CiAgICAgIG4uc2V0KDAsIDAsIDEpOwogICAgICBxdWF0LnZtdWx0KG4sIG4pOwogICAgICB0aGlzLndvcmxkTm9ybWFsTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuICgvLyBUaGUgcGxhbmUgaXMgaW5maW5pdGUuLi4KICAgICAgICBOdW1iZXIuTUFYX1ZBTFVFCiAgICAgICk7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLy8gVGhlIHBsYW5lIEFBQkIgaXMgaW5maW5pdGUsIGV4Y2VwdCBpZiB0aGUgbm9ybWFsIGlzIHBvaW50aW5nIGFsb25nIGFueSBheGlzCiAgICAgIHRlbXBOb3JtYWwuc2V0KDAsIDAsIDEpOyAvLyBEZWZhdWx0IHBsYW5lIG5vcm1hbCBpcyB6CgogICAgICBxdWF0LnZtdWx0KHRlbXBOb3JtYWwsIHRlbXBOb3JtYWwpOwogICAgICBjb25zdCBtYXhWYWwgPSBOdW1iZXIuTUFYX1ZBTFVFOwogICAgICBtaW4uc2V0KC1tYXhWYWwsIC1tYXhWYWwsIC1tYXhWYWwpOwogICAgICBtYXguc2V0KG1heFZhbCwgbWF4VmFsLCBtYXhWYWwpOwoKICAgICAgaWYgKHRlbXBOb3JtYWwueCA9PT0gMSkgewogICAgICAgIG1heC54ID0gcG9zLng7CiAgICAgIH0gZWxzZSBpZiAodGVtcE5vcm1hbC54ID09PSAtMSkgewogICAgICAgIG1pbi54ID0gcG9zLng7CiAgICAgIH0KCiAgICAgIGlmICh0ZW1wTm9ybWFsLnkgPT09IDEpIHsKICAgICAgICBtYXgueSA9IHBvcy55OwogICAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueSA9PT0gLTEpIHsKICAgICAgICBtaW4ueSA9IHBvcy55OwogICAgICB9CgogICAgICBpZiAodGVtcE5vcm1hbC56ID09PSAxKSB7CiAgICAgICAgbWF4LnogPSBwb3MuejsKICAgICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnogPT09IC0xKSB7CiAgICAgICAgbWluLnogPSBwb3MuejsKICAgICAgfQogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgIH0KCiAgfQoKICBjb25zdCB0ZW1wTm9ybWFsID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBIZWlnaHRmaWVsZCBzaGFwZSBjbGFzcy4gSGVpZ2h0IGRhdGEgaXMgZ2l2ZW4gYXMgYW4gYXJyYXkuIFRoZXNlIGRhdGEgcG9pbnRzIGFyZSBzcHJlYWQgb3V0IGV2ZW5seSB3aXRoIGEgZ2l2ZW4gZGlzdGFuY2UuCiAgICogQHRvZG8gU2hvdWxkIGJlIHBvc3NpYmxlIHRvIHVzZSBhbG9uZyBhbGwgYXhlcywgbm90IGp1c3QgeQogICAqIEB0b2RvIHNob3VsZCBiZSBwb3NzaWJsZSB0byBzY2FsZSBhbG9uZyBhbGwgYXhlcwogICAqIEB0b2RvIFJlZmFjdG9yIGVsZW1lbnRTaXplIHRvIGVsZW1lbnRTaXplWCBhbmQgZWxlbWVudFNpemVZCiAgICoKICAgKiBAZXhhbXBsZQogICAqICAgICAvLyBHZW5lcmF0ZSBzb21lIGhlaWdodCBkYXRhICh5LXZhbHVlcykuCiAgICogICAgIGNvbnN0IGRhdGEgPSBbXQogICAqICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDA7IGkrKykgewogICAqICAgICAgICAgY29uc3QgeSA9IDAuNSAqIE1hdGguY29zKDAuMiAqIGkpCiAgICogICAgICAgICBkYXRhLnB1c2goeSkKICAgKiAgICAgfQogICAqCiAgICogICAgIC8vIENyZWF0ZSB0aGUgaGVpZ2h0ZmllbGQgc2hhcGUKICAgKiAgICAgY29uc3QgaGVpZ2h0ZmllbGRTaGFwZSA9IG5ldyBDQU5OT04uSGVpZ2h0ZmllbGQoZGF0YSwgewogICAqICAgICAgICAgZWxlbWVudFNpemU6IDEgLy8gRGlzdGFuY2UgYmV0d2VlbiB0aGUgZGF0YSBwb2ludHMgaW4gWCBhbmQgWSBkaXJlY3Rpb25zCiAgICogICAgIH0pCiAgICogICAgIGNvbnN0IGhlaWdodGZpZWxkQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IHNoYXBlOiBoZWlnaHRmaWVsZFNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoaGVpZ2h0ZmllbGRCb2R5KQogICAqLwoKICBjbGFzcyBIZWlnaHRmaWVsZCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYXggdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LgogICAgICovCgogICAgLyoqCiAgICAgKiBNaW5pbXVtIHZhbHVlIG9mIHRoZSBkYXRhIHBvaW50cyBpbiB0aGUgZGF0YSBhcnJheS4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgc3BhY2luZyBiZXR3ZWVuIHRoZSBkYXRhIHBvaW50cyBpbiBYIGFuZCBZIGRpcmVjdGlvbi4KICAgICAqIEB0b2RvIGVsZW1lbnRTaXplWCBhbmQgWQogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBkYXRhIEFuIGFycmF5IG9mIG51bWJlcnMsIG9yIGhlaWdodCB2YWx1ZXMsIHRoYXQgYXJlIHNwcmVhZCBvdXQgYWxvbmcgdGhlIHggYXhpcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoZGF0YSwgb3B0aW9ucyA9IHt9KSB7CiAgICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7CiAgICAgICAgbWF4VmFsdWU6IG51bGwsCiAgICAgICAgbWluVmFsdWU6IG51bGwsCiAgICAgICAgZWxlbWVudFNpemU6IDEKICAgICAgfSk7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRAogICAgICB9KTsKICAgICAgdGhpcy5kYXRhID0gdm9pZCAwOwogICAgICB0aGlzLm1heFZhbHVlID0gdm9pZCAwOwogICAgICB0aGlzLm1pblZhbHVlID0gdm9pZCAwOwogICAgICB0aGlzLmVsZW1lbnRTaXplID0gdm9pZCAwOwogICAgICB0aGlzLmNhY2hlRW5hYmxlZCA9IHZvaWQgMDsKICAgICAgdGhpcy5waWxsYXJDb252ZXggPSB2b2lkIDA7CiAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gdm9pZCAwOwogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0gdm9pZCAwOwogICAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgICB0aGlzLm1heFZhbHVlID0gb3B0aW9ucy5tYXhWYWx1ZTsKICAgICAgdGhpcy5taW5WYWx1ZSA9IG9wdGlvbnMubWluVmFsdWU7CiAgICAgIHRoaXMuZWxlbWVudFNpemUgPSBvcHRpb25zLmVsZW1lbnRTaXplOwoKICAgICAgaWYgKG9wdGlvbnMubWluVmFsdWUgPT09IG51bGwpIHsKICAgICAgICB0aGlzLnVwZGF0ZU1pblZhbHVlKCk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLm1heFZhbHVlID09PSBudWxsKSB7CiAgICAgICAgdGhpcy51cGRhdGVNYXhWYWx1ZSgpOwogICAgICB9CgogICAgICB0aGlzLmNhY2hlRW5hYmxlZCA9IHRydWU7CiAgICAgIHRoaXMucGlsbGFyQ29udmV4ID0gbmV3IENvbnZleFBvbHloZWRyb24oKTsKICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7IC8vICJpX2pfaXNVcHBlciIgPT4geyBjb252ZXg6IC4uLiwgb2Zmc2V0OiAuLi4gfQogICAgICAvLyBmb3IgZXhhbXBsZToKICAgICAgLy8gX2NhY2hlZFBpbGxhcnNbIjBfMl8xIl0KCiAgICAgIHRoaXMuX2NhY2hlZFBpbGxhcnMgPSB7fTsKICAgIH0KICAgIC8qKgogICAgICogQ2FsbCB3aGVuZXZlciB5b3UgY2hhbmdlIHRoZSBkYXRhIGFycmF5LgogICAgICovCgoKICAgIHVwZGF0ZSgpIHsKICAgICAgdGhpcy5fY2FjaGVkUGlsbGFycyA9IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGBtaW5WYWx1ZWAgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVNaW5WYWx1ZSgpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgbGV0IG1pblZhbHVlID0gZGF0YVswXVswXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSBkYXRhW2ldW2pdOwoKICAgICAgICAgIGlmICh2IDwgbWluVmFsdWUpIHsKICAgICAgICAgICAgbWluVmFsdWUgPSB2OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5taW5WYWx1ZSA9IG1pblZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGBtYXhWYWx1ZWAgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVNYXhWYWx1ZSgpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgbGV0IG1heFZhbHVlID0gZGF0YVswXVswXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSBkYXRhW2ldW2pdOwoKICAgICAgICAgIGlmICh2ID4gbWF4VmFsdWUpIHsKICAgICAgICAgICAgbWF4VmFsdWUgPSB2OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5tYXhWYWx1ZSA9IG1heFZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIGhlaWdodCB2YWx1ZSBhdCBhbiBpbmRleC4gRG9uJ3QgZm9yZ2V0IHRvIHVwZGF0ZSBtYXhWYWx1ZSBhbmQgbWluVmFsdWUgYWZ0ZXIgeW91J3JlIGRvbmUuCiAgICAgKi8KCgogICAgc2V0SGVpZ2h0VmFsdWVBdEluZGV4KHhpLCB5aSwgdmFsdWUpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgZGF0YVt4aV1beWldID0gdmFsdWU7IC8vIEludmFsaWRhdGUgY2FjaGUKCiAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGZhbHNlKTsKCiAgICAgIGlmICh4aSA+IDApIHsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSwgdHJ1ZSk7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWksIGZhbHNlKTsKICAgICAgfQoKICAgICAgaWYgKHlpID4gMCkgewogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWkgLSAxLCB0cnVlKTsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpIC0gMSwgZmFsc2UpOwogICAgICB9CgogICAgICBpZiAoeWkgPiAwICYmIHhpID4gMCkgewogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSAtIDEsIHlpIC0gMSwgdHJ1ZSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogR2V0IG1heC9taW4gaW4gYSByZWN0YW5nbGUgaW4gdGhlIG1hdHJpeCBkYXRhCiAgICAgKiBAcGFyYW0gcmVzdWx0IEFuIGFycmF5IHRvIHN0b3JlIHRoZSByZXN1bHRzIGluLgogICAgICogQHJldHVybiBUaGUgcmVzdWx0IGFycmF5LCBpZiBpdCB3YXMgcGFzc2VkIGluLiBNaW5pbXVtIHdpbGwgYmUgYXQgcG9zaXRpb24gMCBhbmQgbWF4IGF0IDEuCiAgICAgKi8KCgogICAgZ2V0UmVjdE1pbk1heChpTWluWCwgaU1pblksIGlNYXhYLCBpTWF4WSwgcmVzdWx0ID0gW10pIHsKICAgICAgLy8gR2V0IG1heCBhbmQgbWluIG9mIHRoZSBkYXRhCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7IC8vIFNldCBmaXJzdCB2YWx1ZQoKICAgICAgbGV0IG1heCA9IHRoaXMubWluVmFsdWU7CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPD0gaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8PSBpTWF4WTsgaisrKSB7CiAgICAgICAgICBjb25zdCBoZWlnaHQgPSBkYXRhW2ldW2pdOwoKICAgICAgICAgIGlmIChoZWlnaHQgPiBtYXgpIHsKICAgICAgICAgICAgbWF4ID0gaGVpZ2h0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmVzdWx0WzBdID0gdGhpcy5taW5WYWx1ZTsKICAgICAgcmVzdWx0WzFdID0gbWF4OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGluZGV4IG9mIGEgbG9jYWwgcG9zaXRpb24gb24gdGhlIGhlaWdodGZpZWxkLiBUaGUgaW5kZXhlcyBpbmRpY2F0ZSB0aGUgcmVjdGFuZ2xlcywgc28gaWYgeW91ciB0ZXJyYWluIGlzIG1hZGUgb2YgTiB4IE4gaGVpZ2h0IGRhdGEgcG9pbnRzLCB5b3Ugd2lsbCBoYXZlIHJlY3RhbmdsZSBpbmRleGVzIHJhbmdpbmcgZnJvbSAwIHRvIE4tMS4KICAgICAqIEBwYXJhbSByZXN1bHQgVHdvLWVsZW1lbnQgYXJyYXkKICAgICAqIEBwYXJhbSBjbGFtcCBJZiB0aGUgcG9zaXRpb24gc2hvdWxkIGJlIGNsYW1wZWQgdG8gdGhlIGhlaWdodGZpZWxkIGVkZ2UuCiAgICAgKi8KCgogICAgZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIHJlc3VsdCwgY2xhbXApIHsKICAgICAgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CiAgICAgIGNvbnN0IHcgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgeGkgPSBNYXRoLmZsb29yKHggLyB3KTsKICAgICAgbGV0IHlpID0gTWF0aC5mbG9vcih5IC8gdyk7CiAgICAgIHJlc3VsdFswXSA9IHhpOwogICAgICByZXN1bHRbMV0gPSB5aTsKCiAgICAgIGlmIChjbGFtcCkgewogICAgICAgIC8vIENsYW1wIGluZGV4IHRvIGVkZ2VzCiAgICAgICAgaWYgKHhpIDwgMCkgewogICAgICAgICAgeGkgPSAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKHlpIDwgMCkgewogICAgICAgICAgeWkgPSAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKHhpID49IGRhdGEubGVuZ3RoIC0gMSkgewogICAgICAgICAgeGkgPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgICAgfQoKICAgICAgICBpZiAoeWkgPj0gZGF0YVswXS5sZW5ndGggLSAxKSB7CiAgICAgICAgICB5aSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgICB9CiAgICAgIH0gLy8gQmFpbCBvdXQgaWYgd2UgYXJlIG91dCBvZiB0aGUgdGVycmFpbgoKCiAgICAgIGlmICh4aSA8IDAgfHwgeWkgPCAwIHx8IHhpID49IGRhdGEubGVuZ3RoIC0gMSB8fCB5aSA+PSBkYXRhWzBdLmxlbmd0aCAtIDEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGdldFRyaWFuZ2xlQXQoeCwgeSwgZWRnZUNsYW1wLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGlkeCA9IGdldEhlaWdodEF0X2lkeDsKICAgICAgdGhpcy5nZXRJbmRleE9mUG9zaXRpb24oeCwgeSwgaWR4LCBlZGdlQ2xhbXApOwogICAgICBsZXQgeGkgPSBpZHhbMF07CiAgICAgIGxldCB5aSA9IGlkeFsxXTsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKCiAgICAgIGlmIChlZGdlQ2xhbXApIHsKICAgICAgICB4aSA9IE1hdGgubWluKGRhdGEubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeGkpKTsKICAgICAgICB5aSA9IE1hdGgubWluKGRhdGFbMF0ubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeWkpKTsKICAgICAgfQoKICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICBjb25zdCBsb3dlckRpc3QyID0gKHggLyBlbGVtZW50U2l6ZSAtIHhpKSAqKiAyICsgKHkgLyBlbGVtZW50U2l6ZSAtIHlpKSAqKiAyOwogICAgICBjb25zdCB1cHBlckRpc3QyID0gKHggLyBlbGVtZW50U2l6ZSAtICh4aSArIDEpKSAqKiAyICsgKHkgLyBlbGVtZW50U2l6ZSAtICh5aSArIDEpKSAqKiAyOwogICAgICBjb25zdCB1cHBlciA9IGxvd2VyRGlzdDIgPiB1cHBlckRpc3QyOwogICAgICB0aGlzLmdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpOwogICAgICByZXR1cm4gdXBwZXI7CiAgICB9CgogICAgZ2V0Tm9ybWFsQXQoeCwgeSwgZWRnZUNsYW1wLCByZXN1bHQpIHsKICAgICAgY29uc3QgYSA9IGdldE5vcm1hbEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXROb3JtYWxBdF9iOwogICAgICBjb25zdCBjID0gZ2V0Tm9ybWFsQXRfYzsKICAgICAgY29uc3QgZTAgPSBnZXROb3JtYWxBdF9lMDsKICAgICAgY29uc3QgZTEgPSBnZXROb3JtYWxBdF9lMTsKICAgICAgdGhpcy5nZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYyk7CiAgICAgIGIudnN1YihhLCBlMCk7CiAgICAgIGMudnN1YihhLCBlMSk7CiAgICAgIGUwLmNyb3NzKGUxLCByZXN1bHQpOwogICAgICByZXN1bHQubm9ybWFsaXplKCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBBQUJCIG9mIGEgc3F1YXJlIGluIHRoZSBoZWlnaHRmaWVsZAogICAgICogQHBhcmFtIHhpCiAgICAgKiBAcGFyYW0geWkKICAgICAqIEBwYXJhbSByZXN1bHQKICAgICAqLwoKCiAgICBnZXRBYWJiQXRJbmRleCh4aSwgeWksIHsKICAgICAgbG93ZXJCb3VuZCwKICAgICAgdXBwZXJCb3VuZAogICAgfSkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIGxvd2VyQm91bmQuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgIHVwcGVyQm91bmQuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBoZWlnaHQgaW4gdGhlIGhlaWdodGZpZWxkIGF0IGEgZ2l2ZW4gcG9zaXRpb24KICAgICAqLwoKCiAgICBnZXRIZWlnaHRBdCh4LCB5LCBlZGdlQ2xhbXApIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgYSA9IGdldEhlaWdodEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXRIZWlnaHRBdF9iOwogICAgICBjb25zdCBjID0gZ2V0SGVpZ2h0QXRfYzsKICAgICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4OwogICAgICB0aGlzLmdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCBpZHgsIGVkZ2VDbGFtcCk7CiAgICAgIGxldCB4aSA9IGlkeFswXTsKICAgICAgbGV0IHlpID0gaWR4WzFdOwoKICAgICAgaWYgKGVkZ2VDbGFtcCkgewogICAgICAgIHhpID0gTWF0aC5taW4oZGF0YS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB4aSkpOwogICAgICAgIHlpID0gTWF0aC5taW4oZGF0YVswXS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB5aSkpOwogICAgICB9CgogICAgICBjb25zdCB1cHBlciA9IHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYS54LCBhLnksIGIueCwgYi55LCBjLngsIGMueSwgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyk7CiAgICAgIGNvbnN0IHcgPSBnZXRIZWlnaHRBdF93ZWlnaHRzOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGkgKyAxXVt5aSArIDFdICogdy54ICsgZGF0YVt4aV1beWkgKyAxXSAqIHcueSArIGRhdGFbeGkgKyAxXVt5aV0gKiB3Lno7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGldW3lpXSAqIHcueCArIGRhdGFbeGkgKyAxXVt5aV0gKiB3LnkgKyBkYXRhW3hpXVt5aSArIDFdICogdy56OwogICAgICB9CiAgICB9CgogICAgZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgcmV0dXJuIHhpICsgIl8iICsgeWkgKyAiXyIgKyAoZ2V0VXBwZXJUcmlhbmdsZSA/IDEgOiAwKTsKICAgIH0KCiAgICBnZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldOwogICAgfQoKICAgIHNldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSwgY29udmV4LCBvZmZzZXQpIHsKICAgICAgdGhpcy5fY2FjaGVkUGlsbGFyc1t0aGlzLmdldENhY2hlQ29udmV4VHJpYW5nbGVQaWxsYXJLZXkoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKV0gPSB7CiAgICAgICAgY29udmV4LAogICAgICAgIG9mZnNldAogICAgICB9OwogICAgfQoKICAgIGNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgIGRlbGV0ZSB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdHJpYW5nbGUgZnJvbSB0aGUgaGVpZ2h0ZmllbGQKICAgICAqLwoKCiAgICBnZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKCiAgICAgIGlmICh1cHBlcikgewogICAgICAgIC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGEuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdKTsKICAgICAgICBiLnNldCh4aSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdKTsKICAgICAgICBjLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHMKICAgICAgICBhLnNldCh4aSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0pOwogICAgICAgIGIuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0pOwogICAgICAgIGMuc2V0KHhpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIHRyaWFuZ2xlIGluIHRoZSB0ZXJyYWluIGluIHRoZSBmb3JtIG9mIGEgdHJpYW5ndWxhciBjb252ZXggc2hhcGUuCiAgICAgKi8KCgogICAgZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgIGxldCByZXN1bHQgPSB0aGlzLnBpbGxhckNvbnZleDsKICAgICAgbGV0IG9mZnNldFJlc3VsdCA9IHRoaXMucGlsbGFyT2Zmc2V0OwoKICAgICAgaWYgKHRoaXMuY2FjaGVFbmFibGVkKSB7CiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKTsKCiAgICAgICAgaWYgKGRhdGEpIHsKICAgICAgICAgIHRoaXMucGlsbGFyQ29udmV4ID0gZGF0YS5jb252ZXg7CiAgICAgICAgICB0aGlzLnBpbGxhck9mZnNldCA9IGRhdGEub2Zmc2V0OwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0ID0gbmV3IENvbnZleFBvbHloZWRyb24oKTsKICAgICAgICBvZmZzZXRSZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICAgIHRoaXMucGlsbGFyQ29udmV4ID0gcmVzdWx0OwogICAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gb2Zmc2V0UmVzdWx0OwogICAgICB9CgogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIGNvbnN0IGZhY2VzID0gcmVzdWx0LmZhY2VzOyAvLyBSZXVzZSB2ZXJ0cyBpZiBwb3NzaWJsZQoKICAgICAgcmVzdWx0LnZlcnRpY2VzLmxlbmd0aCA9IDY7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykgewogICAgICAgIGlmICghcmVzdWx0LnZlcnRpY2VzW2ldKSB7CiAgICAgICAgICByZXN1bHQudmVydGljZXNbaV0gPSBuZXcgVmVjMygpOwogICAgICAgIH0KICAgICAgfSAvLyBSZXVzZSBmYWNlcyBpZiBwb3NzaWJsZQoKCiAgICAgIGZhY2VzLmxlbmd0aCA9IDU7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykgewogICAgICAgIGlmICghZmFjZXNbaV0pIHsKICAgICAgICAgIGZhY2VzW2ldID0gW107CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCB2ZXJ0cyA9IHJlc3VsdC52ZXJ0aWNlczsKICAgICAgY29uc3QgaCA9IChNYXRoLm1pbihkYXRhW3hpXVt5aV0sIGRhdGFbeGkgKyAxXVt5aV0sIGRhdGFbeGldW3lpICsgMV0sIGRhdGFbeGkgKyAxXVt5aSArIDFdKSAtIHRoaXMubWluVmFsdWUpIC8gMiArIHRoaXMubWluVmFsdWU7CgogICAgICBpZiAoIWdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgICAvLyBDZW50ZXIgb2YgdGhlIHRyaWFuZ2xlIHBpbGxhciAtIGFsbCBwb2x5Z29ucyBhcmUgZ2l2ZW4gcmVsYXRpdmUgdG8gdGhpcyBvbmUKICAgICAgICBvZmZzZXRSZXN1bHQuc2V0KCh4aSArIDAuMjUpICogZWxlbWVudFNpemUsIC8vIHNvcnQgb2YgY2VudGVyIG9mIGEgdHJpYW5nbGUKICAgICAgICAoeWkgKyAwLjI1KSAqIGVsZW1lbnRTaXplLCBoIC8vIHZlcnRpY2FsIGNlbnRlcgogICAgICAgICk7IC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1swXS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWldIC0gaCk7CiAgICAgICAgdmVydHNbMV0uc2V0KDAuNzUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSAtIGgpOwogICAgICAgIHZlcnRzWzJdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAwLjc1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0gLSBoKTsgLy8gYm90dG9tIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzNdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s0XS5zZXQoMC43NSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s1XS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgMC43NSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsgLy8gdG9wIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzBdWzBdID0gMDsKICAgICAgICBmYWNlc1swXVsxXSA9IDE7CiAgICAgICAgZmFjZXNbMF1bMl0gPSAyOyAvLyBib3R0b20gdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMV1bMF0gPSA1OwogICAgICAgIGZhY2VzWzFdWzFdID0gNDsKICAgICAgICBmYWNlc1sxXVsyXSA9IDM7IC8vIC14IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzJdWzBdID0gMDsKICAgICAgICBmYWNlc1syXVsxXSA9IDI7CiAgICAgICAgZmFjZXNbMl1bMl0gPSA1OwogICAgICAgIGZhY2VzWzJdWzNdID0gMzsgLy8gLXkgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbM11bMF0gPSAxOwogICAgICAgIGZhY2VzWzNdWzFdID0gMDsKICAgICAgICBmYWNlc1szXVsyXSA9IDM7CiAgICAgICAgZmFjZXNbM11bM10gPSA0OyAvLyAreHkgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbNF1bMF0gPSA0OwogICAgICAgIGZhY2VzWzRdWzFdID0gNTsKICAgICAgICBmYWNlc1s0XVsyXSA9IDI7CiAgICAgICAgZmFjZXNbNF1bM10gPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIENlbnRlciBvZiB0aGUgdHJpYW5nbGUgcGlsbGFyIC0gYWxsIHBvbHlnb25zIGFyZSBnaXZlbiByZWxhdGl2ZSB0byB0aGlzIG9uZQogICAgICAgIG9mZnNldFJlc3VsdC5zZXQoKHhpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgLy8gc29ydCBvZiBjZW50ZXIgb2YgYSB0cmlhbmdsZQogICAgICAgICh5aSArIDAuNzUpICogZWxlbWVudFNpemUsIGggLy8gdmVydGljYWwgY2VudGVyCiAgICAgICAgKTsgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzBdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0gLSBoKTsKICAgICAgICB2ZXJ0c1sxXS5zZXQoLTAuNzUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdIC0gaCk7CiAgICAgICAgdmVydHNbMl0uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuNzUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSAtIGgpOyAvLyBib3R0b20gdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbM10uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s0XS5zZXQoLTAuNzUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s1XS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsgLy8gVG9wIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzBdWzBdID0gMDsKICAgICAgICBmYWNlc1swXVsxXSA9IDE7CiAgICAgICAgZmFjZXNbMF1bMl0gPSAyOyAvLyBib3R0b20gdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMV1bMF0gPSA1OwogICAgICAgIGZhY2VzWzFdWzFdID0gNDsKICAgICAgICBmYWNlc1sxXVsyXSA9IDM7IC8vICt4IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzJdWzBdID0gMjsKICAgICAgICBmYWNlc1syXVsxXSA9IDU7CiAgICAgICAgZmFjZXNbMl1bMl0gPSAzOwogICAgICAgIGZhY2VzWzJdWzNdID0gMDsgLy8gK3kgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbM11bMF0gPSAzOwogICAgICAgIGZhY2VzWzNdWzFdID0gNDsKICAgICAgICBmYWNlc1szXVsyXSA9IDE7CiAgICAgICAgZmFjZXNbM11bM10gPSAwOyAvLyAteHkgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbNF1bMF0gPSAxOwogICAgICAgIGZhY2VzWzRdWzFdID0gNDsKICAgICAgICBmYWNlc1s0XVsyXSA9IDU7CiAgICAgICAgZmFjZXNbNF1bM10gPSAyOwogICAgICB9CgogICAgICByZXN1bHQuY29tcHV0ZU5vcm1hbHMoKTsKICAgICAgcmVzdWx0LmNvbXB1dGVFZGdlcygpOwogICAgICByZXN1bHQudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgICAgdGhpcy5zZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUsIHJlc3VsdCwgb2Zmc2V0UmVzdWx0KTsKICAgIH0KCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICB0YXJnZXQuc2V0KDAsIDAsIDApOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuICgvLyBUaGUgdGVycmFpbiBpcyBpbmZpbml0ZQogICAgICAgIE51bWJlci5NQVhfVkFMVUUKICAgICAgKTsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvKiogQFRPRE8gZG8gaXQgcHJvcGVybHkgKi8KICAgICAgbWluLnNldCgtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgbWF4LnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgLy8gVXNlIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIG1pbi9tYXggdmFsdWVzCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IHMgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gbmV3IFZlYzMoZGF0YS5sZW5ndGggKiBzLCBkYXRhWzBdLmxlbmd0aCAqIHMsIE1hdGgubWF4KE1hdGguYWJzKHRoaXMubWF4VmFsdWUpLCBNYXRoLmFicyh0aGlzLm1pblZhbHVlKSkpLmxlbmd0aCgpOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBoZWlnaHQgdmFsdWVzIGZyb20gYW4gaW1hZ2UuIEN1cnJlbnRseSBvbmx5IHN1cHBvcnRlZCBpbiBicm93c2VyLgogICAgICovCgoKICAgIHNldEhlaWdodHNGcm9tSW1hZ2UoaW1hZ2UsIHNjYWxlKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICB4LAogICAgICAgIHosCiAgICAgICAgeQogICAgICB9ID0gc2NhbGU7CiAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICBjYW52YXMud2lkdGggPSBpbWFnZS53aWR0aDsKICAgICAgY2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDsKICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7CiAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpOwogICAgICBjb25zdCBtYXRyaXggPSB0aGlzLmRhdGE7CiAgICAgIG1hdHJpeC5sZW5ndGggPSAwOwogICAgICB0aGlzLmVsZW1lbnRTaXplID0gTWF0aC5hYnMoeCkgLyBpbWFnZURhdGEud2lkdGg7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlRGF0YS5oZWlnaHQ7IGkrKykgewogICAgICAgIGNvbnN0IHJvdyA9IFtdOwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGltYWdlRGF0YS53aWR0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCBhID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0XTsKICAgICAgICAgIGNvbnN0IGIgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAxXTsKICAgICAgICAgIGNvbnN0IGMgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAyXTsKICAgICAgICAgIGNvbnN0IGhlaWdodCA9IChhICsgYiArIGMpIC8gNCAvIDI1NSAqIHo7CgogICAgICAgICAgaWYgKHggPCAwKSB7CiAgICAgICAgICAgIHJvdy5wdXNoKGhlaWdodCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByb3cudW5zaGlmdChoZWlnaHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPCAwKSB7CiAgICAgICAgICBtYXRyaXgudW5zaGlmdChyb3cpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtYXRyaXgucHVzaChyb3cpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVNYXhWYWx1ZSgpOwogICAgICB0aGlzLnVwZGF0ZU1pblZhbHVlKCk7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CgogIH0KCiAgY29uc3QgZ2V0SGVpZ2h0QXRfaWR4ID0gW107CiAgY29uc3QgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfZTAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGdldE5vcm1hbEF0X2UxID0gbmV3IFZlYzMoKTsgLy8gZnJvbSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXJ5Y2VudHJpY19jb29yZGluYXRlX3N5c3RlbQoKICBmdW5jdGlvbiBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgcmVzdWx0KSB7CiAgICByZXN1bHQueCA9ICgoYnkgLSBjeSkgKiAoeCAtIGN4KSArIChjeCAtIGJ4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpOwogICAgcmVzdWx0LnkgPSAoKGN5IC0gYXkpICogKHggLSBjeCkgKyAoYXggLSBjeCkgKiAoeSAtIGN5KSkgLyAoKGJ5IC0gY3kpICogKGF4IC0gY3gpICsgKGN4IC0gYngpICogKGF5IC0gY3kpKTsKICAgIHJlc3VsdC56ID0gMSAtIHJlc3VsdC54IC0gcmVzdWx0Lnk7CiAgfQogIC8qKgogICAqIE9jdHJlZU5vZGUKICAgKi8KCgogIGNsYXNzIE9jdHJlZU5vZGUgewogICAgLyoqIFRoZSByb290IG5vZGUgKi8KCiAgICAvKiogQm91bmRhcnkgb2YgdGhpcyBub2RlICovCgogICAgLyoqIENvbnRhaW5lZCBkYXRhIGF0IHRoZSBjdXJyZW50IG5vZGUgbGV2ZWwgKi8KCiAgICAvKiogQ2hpbGRyZW4gdG8gdGhpcyBub2RlICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHsKICAgICAgdGhpcy5yb290ID0gdm9pZCAwOwogICAgICB0aGlzLmFhYmIgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGF0YSA9IHZvaWQgMDsKICAgICAgdGhpcy5jaGlsZHJlbiA9IHZvaWQgMDsKICAgICAgdGhpcy5yb290ID0gb3B0aW9ucy5yb290IHx8IG51bGw7CiAgICAgIHRoaXMuYWFiYiA9IG9wdGlvbnMuYWFiYiA/IG9wdGlvbnMuYWFiYi5jbG9uZSgpIDogbmV3IEFBQkIoKTsKICAgICAgdGhpcy5kYXRhID0gW107CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogcmVzZXQKICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5jaGlsZHJlbi5sZW5ndGggPSB0aGlzLmRhdGEubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogSW5zZXJ0IGRhdGEgaW50byB0aGlzIG5vZGUKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2UKICAgICAqLwoKCiAgICBpbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsID0gMCkgewogICAgICBjb25zdCBub2RlRGF0YSA9IHRoaXMuZGF0YTsgLy8gSWdub3JlIG9iamVjdHMgdGhhdCBkbyBub3QgYmVsb25nIGluIHRoaXMgbm9kZQoKICAgICAgaWYgKCF0aGlzLmFhYmIuY29udGFpbnMoYWFiYikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG9iamVjdCBjYW5ub3QgYmUgYWRkZWQKICAgICAgfQoKICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICBjb25zdCBtYXhEZXB0aCA9IHRoaXMubWF4RGVwdGggfHwgdGhpcy5yb290Lm1heERlcHRoOwoKICAgICAgaWYgKGxldmVsIDwgbWF4RGVwdGgpIHsKICAgICAgICAvLyBTdWJkaXZpZGUgaWYgdGhlcmUgYXJlIG5vIGNoaWxkcmVuIHlldAogICAgICAgIGxldCBzdWJkaXZpZGVkID0gZmFsc2U7CgogICAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLnN1YmRpdmlkZSgpOwogICAgICAgICAgc3ViZGl2aWRlZCA9IHRydWU7CiAgICAgICAgfSAvLyBhZGQgdG8gd2hpY2hldmVyIG5vZGUgd2lsbCBhY2NlcHQgaXQKCgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHsKICAgICAgICAgIGlmIChjaGlsZHJlbltpXS5pbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsICsgMSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoc3ViZGl2aWRlZCkgewogICAgICAgICAgLy8gTm8gY2hpbGRyZW4gYWNjZXB0ZWQhIE1pZ2h0IGFzIHdlbGwganVzdCByZW1vdmUgZW0gc2luY2UgdGhleSBjb250YWluIG5vbmUKICAgICAgICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgfQogICAgICB9IC8vIFRvbyBkZWVwLCBvciBjaGlsZHJlbiBkaWRudCB3YW50IGl0LiBhZGQgaXQgaW4gY3VycmVudCBub2RlCgoKICAgICAgbm9kZURhdGEucHVzaChlbGVtZW50RGF0YSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGUgOCBlcXVhbGx5IHNpemVkIGNoaWxkcmVuIG5vZGVzIGFuZCBwdXQgdGhlbSBpbiB0aGUgYGNoaWxkcmVuYCBhcnJheS4KICAgICAqLwoKCiAgICBzdWJkaXZpZGUoKSB7CiAgICAgIGNvbnN0IGFhYmIgPSB0aGlzLmFhYmI7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjsKICAgICAgY2hpbGRyZW4ucHVzaChuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMCwgMCkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDApCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAxLCAwKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMSwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDEpCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygwLCAwLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDApCiAgICAgICAgfSkKICAgICAgfSkpOwogICAgICB1LnZzdWIobCwgaGFsZkRpYWdvbmFsKTsKICAgICAgaGFsZkRpYWdvbmFsLnNjYWxlKDAuNSwgaGFsZkRpYWdvbmFsKTsKICAgICAgY29uc3Qgcm9vdCA9IHRoaXMucm9vdCB8fCB0aGlzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07IC8vIFNldCBjdXJyZW50IG5vZGUgYXMgcm9vdAoKICAgICAgICBjaGlsZC5yb290ID0gcm9vdDsgLy8gQ29tcHV0ZSBib3VuZHMKCiAgICAgICAgY29uc3QgbG93ZXJCb3VuZCA9IGNoaWxkLmFhYmIubG93ZXJCb3VuZDsKICAgICAgICBsb3dlckJvdW5kLnggKj0gaGFsZkRpYWdvbmFsLng7CiAgICAgICAgbG93ZXJCb3VuZC55ICo9IGhhbGZEaWFnb25hbC55OwogICAgICAgIGxvd2VyQm91bmQueiAqPSBoYWxmRGlhZ29uYWwuejsKICAgICAgICBsb3dlckJvdW5kLnZhZGQobCwgbG93ZXJCb3VuZCk7IC8vIFVwcGVyIGJvdW5kIGlzIGFsd2F5cyBsb3dlciBib3VuZCArIGhhbGZEaWFnb25hbAoKICAgICAgICBsb3dlckJvdW5kLnZhZGQoaGFsZkRpYWdvbmFsLCBjaGlsZC5hYWJiLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgd2l0aGluIGFuIEFBQkIKICAgICAqIEByZXR1cm4gVGhlICJyZXN1bHQiIG9iamVjdAogICAgICovCgoKICAgIGFhYmJRdWVyeShhYWJiLCByZXN1bHQpIHsKICAgICAgdGhpcy5kYXRhOyAvLyBhYm9ydCBpZiB0aGUgcmFuZ2UgZG9lcyBub3QgaW50ZXJzZWN0IHRoaXMgbm9kZQogICAgICAvLyBpZiAoIXRoaXMuYWFiYi5vdmVybGFwcyhhYWJiKSl7CiAgICAgIC8vICAgICByZXR1cm4gcmVzdWx0OwogICAgICAvLyB9CiAgICAgIC8vIEFkZCBvYmplY3RzIGF0IHRoaXMgbGV2ZWwKICAgICAgLy8gQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocmVzdWx0LCBub2RlRGF0YSk7CiAgICAgIC8vIEFkZCBjaGlsZCBkYXRhCiAgICAgIC8vIEB0b2RvIHVud3JhcCByZWN1cnNpb24gaW50byBhIHF1ZXVlIC8gbG9vcCwgdGhhdCdzIGZhc3RlciBpbiBKUwoKICAgICAgdGhpcy5jaGlsZHJlbjsgLy8gZm9yIChsZXQgaSA9IDAsIE4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgIC8vICAgICBjaGlsZHJlbltpXS5hYWJiUXVlcnkoYWFiYiwgcmVzdWx0KTsKICAgICAgLy8gfQoKICAgICAgY29uc3QgcXVldWUgPSBbdGhpc107CgogICAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOwoKICAgICAgICBpZiAobm9kZS5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGUuZGF0YSk7CiAgICAgICAgfQoKICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShxdWV1ZSwgbm9kZS5jaGlsZHJlbik7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgaW50ZXJzZWN0ZWQgYnkgYSByYXkuCiAgICAgKiBAcmV0dXJuIFRoZSAicmVzdWx0IiBvYmplY3QKICAgICAqLwoKCiAgICByYXlRdWVyeShyYXksIHRyZWVUcmFuc2Zvcm0sIHJlc3VsdCkgewogICAgICAvLyBVc2UgYWFiYiBxdWVyeSBmb3Igbm93LgoKICAgICAgLyoqIEB0b2RvIGltcGxlbWVudCByZWFsIHJheSBxdWVyeSB3aGljaCBuZWVkcyBsZXNzIGxvb2t1cHMgKi8KICAgICAgcmF5LmdldEFBQkIodG1wQUFCQik7CiAgICAgIHRtcEFBQkIudG9Mb2NhbEZyYW1lKHRyZWVUcmFuc2Zvcm0sIHRtcEFBQkIpOwogICAgICB0aGlzLmFhYmJRdWVyeSh0bXBBQUJCLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiByZW1vdmVFbXB0eU5vZGVzCiAgICAgKi8KCgogICAgcmVtb3ZlRW1wdHlOb2RlcygpIHsKICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB0aGlzLmNoaWxkcmVuW2ldLnJlbW92ZUVtcHR5Tm9kZXMoKTsKCiAgICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuW2ldLmNoaWxkcmVuLmxlbmd0aCAmJiAhdGhpcy5jaGlsZHJlbltpXS5kYXRhLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICAvKioKICAgKiBPY3RyZWUKICAgKi8KCgogIGNsYXNzIE9jdHJlZSBleHRlbmRzIE9jdHJlZU5vZGUgewogICAgLyoqCiAgICAgKiBNYXhpbXVtIHN1YmRpdmlzaW9uIGRlcHRoCiAgICAgKiBAZGVmYXVsdCA4CiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBhYWJiIFRoZSB0b3RhbCBBQUJCIG9mIHRoZSB0cmVlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGFhYmIsIG9wdGlvbnMgPSB7fSkgewogICAgICBzdXBlcih7CiAgICAgICAgcm9vdDogbnVsbCwKICAgICAgICBhYWJiCiAgICAgIH0pOwogICAgICB0aGlzLm1heERlcHRoID0gdm9pZCAwOwogICAgICB0aGlzLm1heERlcHRoID0gdHlwZW9mIG9wdGlvbnMubWF4RGVwdGggIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhEZXB0aCA6IDg7CiAgICB9CgogIH0KCiAgY29uc3QgaGFsZkRpYWdvbmFsID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBBQUJCID0gbmV3IEFBQkIoKTsKICAvKioKICAgKiBUcmltZXNoLgogICAqIEBleGFtcGxlCiAgICogICAgIC8vIEhvdyB0byBtYWtlIGEgbWVzaCB3aXRoIGEgc2luZ2xlIHRyaWFuZ2xlCiAgICogICAgIGNvbnN0IHZlcnRpY2VzID0gWwogICAqICAgICAgICAgMCwgMCwgMCwgLy8gdmVydGV4IDAKICAgKiAgICAgICAgIDEsIDAsIDAsIC8vIHZlcnRleCAxCiAgICogICAgICAgICAwLCAxLCAwICAvLyB2ZXJ0ZXggMgogICAqICAgICBdCiAgICogICAgIGNvbnN0IGluZGljZXMgPSBbCiAgICogICAgICAgICAwLCAxLCAyICAvLyB0cmlhbmdsZSAwCiAgICogICAgIF0KICAgKiAgICAgY29uc3QgdHJpbWVzaFNoYXBlID0gbmV3IENBTk5PTi5UcmltZXNoKHZlcnRpY2VzLCBpbmRpY2VzKQogICAqLwoKICBjbGFzcyBUcmltZXNoIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiB2ZXJ0aWNlcwogICAgICovCgogICAgLyoqCiAgICAgKiBBcnJheSBvZiBpbnRlZ2VycywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIHRyaWFuZ2xlIGNvbnNpc3RzIG9mLiBUaGUgbGVuZ3RoIG9mIHRoaXMgYXJyYXkgaXMgdGh1cyAzIHRpbWVzIHRoZSBudW1iZXIgb2YgdHJpYW5nbGVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbm9ybWFscyBkYXRhLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbG9jYWwgQUFCQiBvZiB0aGUgbWVzaC4KICAgICAqLwoKICAgIC8qKgogICAgICogUmVmZXJlbmNlcyB0byB2ZXJ0ZXggcGFpcnMsIG1ha2luZyB1cCBhbGwgdW5pcXVlIGVkZ2VzIGluIHRoZSB0cmltZXNoLgogICAgICovCgogICAgLyoqCiAgICAgKiBMb2NhbCBzY2FsaW5nIG9mIHRoZSBtZXNoLiBVc2UgLnNldFNjYWxlKCkgdG8gc2V0IGl0LgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgaW5kZXhlZCB0cmlhbmdsZXMuIFVzZSAudXBkYXRlVHJlZSgpIHRvIHVwZGF0ZSBpdC4KICAgICAqLwogICAgY29uc3RydWN0b3IodmVydGljZXMsIGluZGljZXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlRSSU1FU0gKICAgICAgfSk7CiAgICAgIHRoaXMudmVydGljZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW5kaWNlcyA9IHZvaWQgMDsKICAgICAgdGhpcy5ub3JtYWxzID0gdm9pZCAwOwogICAgICB0aGlzLmFhYmIgPSB2b2lkIDA7CiAgICAgIHRoaXMuZWRnZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2NhbGUgPSB2b2lkIDA7CiAgICAgIHRoaXMudHJlZSA9IHZvaWQgMDsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGljZXMpOwogICAgICB0aGlzLmluZGljZXMgPSBuZXcgSW50MTZBcnJheShpbmRpY2VzKTsKICAgICAgdGhpcy5ub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShpbmRpY2VzLmxlbmd0aCk7CiAgICAgIHRoaXMuYWFiYiA9IG5ldyBBQUJCKCk7CiAgICAgIHRoaXMuZWRnZXMgPSBudWxsOwogICAgICB0aGlzLnNjYWxlID0gbmV3IFZlYzMoMSwgMSwgMSk7CiAgICAgIHRoaXMudHJlZSA9IG5ldyBPY3RyZWUoKTsKICAgICAgdGhpcy51cGRhdGVFZGdlcygpOwogICAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTsKICAgICAgdGhpcy51cGRhdGVBQUJCKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgICAgdGhpcy51cGRhdGVUcmVlKCk7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZVRyZWUKICAgICAqLwoKCiAgICB1cGRhdGVUcmVlKCkgewogICAgICBjb25zdCB0cmVlID0gdGhpcy50cmVlOwogICAgICB0cmVlLnJlc2V0KCk7CiAgICAgIHRyZWUuYWFiYi5jb3B5KHRoaXMuYWFiYik7CiAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5zY2FsZTsgLy8gVGhlIGxvY2FsIG1lc2ggQUFCQiBpcyBzY2FsZWQsIGJ1dCB0aGUgb2N0cmVlIEFBQkIgc2hvdWxkIGJlIHVuc2NhbGVkCgogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC54ICo9IDEgLyBzY2FsZS54OwogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC55ICo9IDEgLyBzY2FsZS55OwogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC54ICo9IDEgLyBzY2FsZS54OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC55ICo9IDEgLyBzY2FsZS55OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56OyAvLyBJbnNlcnQgYWxsIHRyaWFuZ2xlcwoKICAgICAgY29uc3QgdHJpYW5nbGVBQUJCID0gbmV3IEFBQkIoKTsKICAgICAgY29uc3QgYSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGIgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBjID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcG9pbnRzID0gW2EsIGIsIGNdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgLy90aGlzLmdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYyk7CiAgICAgICAgLy8gR2V0IHVuc2NhbGVkIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKCiAgICAgICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzXSwgYSk7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDFdLCBiKTsKCiAgICAgICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMl0sIGMpOwoKICAgICAgICB0cmlhbmdsZUFBQkIuc2V0RnJvbVBvaW50cyhwb2ludHMpOwogICAgICAgIHRyZWUuaW5zZXJ0KHRyaWFuZ2xlQUFCQiwgaSk7CiAgICAgIH0KCiAgICAgIHRyZWUucmVtb3ZlRW1wdHlOb2RlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdHJpYW5nbGVzIGluIGEgbG9jYWwgQUFCQiBmcm9tIHRoZSB0cmltZXNoLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSBvZiBpbnRlZ2VycywgcmVmZXJlbmNpbmcgdGhlIHF1ZXJpZWQgdHJpYW5nbGVzLgogICAgICovCgoKICAgIGdldFRyaWFuZ2xlc0luQUFCQihhYWJiLCByZXN1bHQpIHsKICAgICAgdW5zY2FsZWRBQUJCLmNvcHkoYWFiYik7IC8vIFNjYWxlIGl0IHRvIGxvY2FsCgogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7CiAgICAgIGNvbnN0IGlzeCA9IHNjYWxlLng7CiAgICAgIGNvbnN0IGlzeSA9IHNjYWxlLnk7CiAgICAgIGNvbnN0IGlzeiA9IHNjYWxlLno7CiAgICAgIGNvbnN0IGwgPSB1bnNjYWxlZEFBQkIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IHVuc2NhbGVkQUFCQi51cHBlckJvdW5kOwogICAgICBsLnggLz0gaXN4OwogICAgICBsLnkgLz0gaXN5OwogICAgICBsLnogLz0gaXN6OwogICAgICB1LnggLz0gaXN4OwogICAgICB1LnkgLz0gaXN5OwogICAgICB1LnogLz0gaXN6OwogICAgICByZXR1cm4gdGhpcy50cmVlLmFhYmJRdWVyeSh1bnNjYWxlZEFBQkIsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIHNldFNjYWxlCiAgICAgKi8KCgogICAgc2V0U2NhbGUoc2NhbGUpIHsKICAgICAgY29uc3Qgd2FzVW5pZm9ybSA9IHRoaXMuc2NhbGUueCA9PT0gdGhpcy5zY2FsZS55ICYmIHRoaXMuc2NhbGUueSA9PT0gdGhpcy5zY2FsZS56OwogICAgICBjb25zdCBpc1VuaWZvcm0gPSBzY2FsZS54ID09PSBzY2FsZS55ICYmIHNjYWxlLnkgPT09IHNjYWxlLno7CgogICAgICBpZiAoISh3YXNVbmlmb3JtICYmIGlzVW5pZm9ybSkpIHsKICAgICAgICAvLyBOb24tdW5pZm9ybSBzY2FsaW5nLiBOZWVkIHRvIHVwZGF0ZSBub3JtYWxzLgogICAgICAgIHRoaXMudXBkYXRlTm9ybWFscygpOwogICAgICB9CgogICAgICB0aGlzLnNjYWxlLmNvcHkoc2NhbGUpOwogICAgICB0aGlzLnVwZGF0ZUFBQkIoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBub3JtYWxzIG9mIHRoZSBmYWNlcy4gV2lsbCBzYXZlIGluIHRoZSBgLm5vcm1hbHNgIGFycmF5LgogICAgICovCgoKICAgIHVwZGF0ZU5vcm1hbHMoKSB7CiAgICAgIGNvbnN0IG4gPSBjb21wdXRlTm9ybWFsc19uOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBjb25zdCBub3JtYWxzID0gdGhpcy5ub3JtYWxzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTsKICAgICAgICBjb25zdCBiID0gdGhpcy5pbmRpY2VzW2kzICsgMV07CiAgICAgICAgY29uc3QgYyA9IHRoaXMuaW5kaWNlc1tpMyArIDJdOwogICAgICAgIHRoaXMuZ2V0VmVydGV4KGEsIHZhKTsKICAgICAgICB0aGlzLmdldFZlcnRleChiLCB2Yik7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoYywgdmMpOwogICAgICAgIFRyaW1lc2guY29tcHV0ZU5vcm1hbCh2YiwgdmEsIHZjLCBuKTsKICAgICAgICBub3JtYWxzW2kzXSA9IG4ueDsKICAgICAgICBub3JtYWxzW2kzICsgMV0gPSBuLnk7CiAgICAgICAgbm9ybWFsc1tpMyArIDJdID0gbi56OwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYC5lZGdlc2AgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVFZGdlcygpIHsKICAgICAgY29uc3QgZWRnZXMgPSB7fTsKCiAgICAgIGNvbnN0IGFkZCA9IChhLCBiKSA9PiB7CiAgICAgICAgY29uc3Qga2V5ID0gYSA8IGIgPyBhICsgIl8iICsgYiA6IGIgKyAiXyIgKyBhOwogICAgICAgIGVkZ2VzW2tleV0gPSB0cnVlOwogICAgICB9OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTsKICAgICAgICBjb25zdCBiID0gdGhpcy5pbmRpY2VzW2kzICsgMV07CiAgICAgICAgY29uc3QgYyA9IHRoaXMuaW5kaWNlc1tpMyArIDJdOwogICAgICAgIGFkZChhLCBiKTsKICAgICAgICBhZGQoYiwgYyk7CiAgICAgICAgYWRkKGMsIGEpOwogICAgICB9CgogICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZWRnZXMpOwogICAgICB0aGlzLmVkZ2VzID0gbmV3IEludDE2QXJyYXkoa2V5cy5sZW5ndGggKiAyKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGluZGljZXMgPSBrZXlzW2ldLnNwbGl0KCdfJyk7CiAgICAgICAgdGhpcy5lZGdlc1syICogaV0gPSBwYXJzZUludChpbmRpY2VzWzBdLCAxMCk7CiAgICAgICAgdGhpcy5lZGdlc1syICogaSArIDFdID0gcGFyc2VJbnQoaW5kaWNlc1sxXSwgMTApOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlZGdlIHZlcnRleAogICAgICogQHBhcmFtIGZpcnN0T3JTZWNvbmQgMCBvciAxLCBkZXBlbmRpbmcgb24gd2hpY2ggb25lIG9mIHRoZSB2ZXJ0aWNlcyB5b3UgbmVlZC4KICAgICAqIEBwYXJhbSB2ZXJ0ZXhTdG9yZSBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0CiAgICAgKi8KCgogICAgZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIGZpcnN0T3JTZWNvbmQsIHZlcnRleFN0b3JlKSB7CiAgICAgIGNvbnN0IHZlcnRleEluZGV4ID0gdGhpcy5lZGdlc1tlZGdlSW5kZXggKiAyICsgKGZpcnN0T3JTZWNvbmQgPyAxIDogMCldOwogICAgICB0aGlzLmdldFZlcnRleCh2ZXJ0ZXhJbmRleCwgdmVydGV4U3RvcmUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB2ZWN0b3IgYWxvbmcgYW4gZWRnZS4KICAgICAqLwoKCiAgICBnZXRFZGdlVmVjdG9yKGVkZ2VJbmRleCwgdmVjdG9yU3RvcmUpIHsKICAgICAgY29uc3QgdmEgPSBnZXRFZGdlVmVjdG9yX3ZhOwogICAgICBjb25zdCB2YiA9IGdldEVkZ2VWZWN0b3JfdmI7CiAgICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDAsIHZhKTsKICAgICAgdGhpcy5nZXRFZGdlVmVydGV4KGVkZ2VJbmRleCwgMSwgdmIpOwogICAgICB2Yi52c3ViKHZhLCB2ZWN0b3JTdG9yZSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7CiAgICAgIHZiLnZzdWIodmEsIGFiKTsKICAgICAgdmMudnN1Yih2YiwgY2IpOwogICAgICBjYi5jcm9zcyhhYiwgdGFyZ2V0KTsKCiAgICAgIGlmICghdGFyZ2V0LmlzWmVybygpKSB7CiAgICAgICAgdGFyZ2V0Lm5vcm1hbGl6ZSgpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCB2ZXJ0ZXggaS4KICAgICAqIEByZXR1cm4gVGhlICJvdXQiIHZlY3RvciBvYmplY3QKICAgICAqLwoKCiAgICBnZXRWZXJ0ZXgoaSwgb3V0KSB7CiAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5zY2FsZTsKCiAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KGksIG91dCk7CgogICAgICBvdXQueCAqPSBzY2FsZS54OwogICAgICBvdXQueSAqPSBzY2FsZS55OwogICAgICBvdXQueiAqPSBzY2FsZS56OwogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgcmF3IHZlcnRleCBpCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgX2dldFVuc2NhbGVkVmVydGV4KGksIG91dCkgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIHJldHVybiBvdXQuc2V0KHZlcnRpY2VzW2kzXSwgdmVydGljZXNbaTMgKyAxXSwgdmVydGljZXNbaTMgKyAyXSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIHZlcnRleCBmcm9tIHRoZSB0cmltZXNoLHRyYW5zZm9ybWVkIGJ5IHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgcXVhdGVybmlvbi4KICAgICAqIEByZXR1cm4gVGhlICJvdXQiIHZlY3RvciBvYmplY3QKICAgICAqLwoKCiAgICBnZXRXb3JsZFZlcnRleChpLCBwb3MsIHF1YXQsIG91dCkgewogICAgICB0aGlzLmdldFZlcnRleChpLCBvdXQpOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zLCBxdWF0LCBvdXQsIG91dCk7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgdGhyZWUgdmVydGljZXMgZm9yIHRyaWFuZ2xlIGkuCiAgICAgKi8KCgogICAgZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgIHRoaXMuZ2V0VmVydGV4KHRoaXMuaW5kaWNlc1tpM10sIGEpOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7CiAgICAgIHRoaXMuZ2V0VmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFsIG9mIHRyaWFuZ2xlIGkuCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0Tm9ybWFsKGksIHRhcmdldCkgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICByZXR1cm4gdGFyZ2V0LnNldCh0aGlzLm5vcm1hbHNbaTNdLCB0aGlzLm5vcm1hbHNbaTMgKyAxXSwgdGhpcy5ub3JtYWxzW2kzICsgMl0pOwogICAgfQogICAgLyoqCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhCiAgICAgIC8vIEV4YWN0IGluZXJ0aWEgY2FsY3VsYXRpb24gaXMgb3ZlcmtpbGwsIGJ1dCBzZWUgaHR0cDovL2dlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1BvbHloZWRyYWxNYXNzUHJvcGVydGllcy5wZGYgZm9yIHRoZSBjb3JyZWN0IHdheSB0byBkbyBpdAogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoY2xpX2FhYmIpOwogICAgICBjb25zdCB4ID0gY2xpX2FhYmIudXBwZXJCb3VuZC54IC0gY2xpX2FhYmIubG93ZXJCb3VuZC54OwogICAgICBjb25zdCB5ID0gY2xpX2FhYmIudXBwZXJCb3VuZC55IC0gY2xpX2FhYmIubG93ZXJCb3VuZC55OwogICAgICBjb25zdCB6ID0gY2xpX2FhYmIudXBwZXJCb3VuZC56IC0gY2xpX2FhYmIubG93ZXJCb3VuZC56OwogICAgICByZXR1cm4gdGFyZ2V0LnNldCgxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB4ICogMiAqIHggKyAyICogeiAqIDIgKiB6KSwgMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB4ICogMiAqIHgpKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbG9jYWwgQUFCQiBmb3IgdGhlIHRyaW1lc2gKICAgICAqLwoKCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmIpIHsKICAgICAgY29uc3QgbCA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IGFhYmIudXBwZXJCb3VuZDsKICAgICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoOwogICAgICB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCB2ID0gY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQ7CiAgICAgIHRoaXMuZ2V0VmVydGV4KDAsIHYpOwogICAgICBsLmNvcHkodik7CiAgICAgIHUuY29weSh2KTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBuOyBpKyspIHsKICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKCiAgICAgICAgaWYgKHYueCA8IGwueCkgewogICAgICAgICAgbC54ID0gdi54OwogICAgICAgIH0gZWxzZSBpZiAodi54ID4gdS54KSB7CiAgICAgICAgICB1LnggPSB2Lng7CiAgICAgICAgfQoKICAgICAgICBpZiAodi55IDwgbC55KSB7CiAgICAgICAgICBsLnkgPSB2Lnk7CiAgICAgICAgfSBlbHNlIGlmICh2LnkgPiB1LnkpIHsKICAgICAgICAgIHUueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmICh2LnogPCBsLnopIHsKICAgICAgICAgIGwueiA9IHYuejsKICAgICAgICB9IGVsc2UgaWYgKHYueiA+IHUueikgewogICAgICAgICAgdS56ID0gdi56OwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGAuYWFiYmAgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVBQUJCKCkgewogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIodGhpcy5hYWJiKTsKICAgIH0KICAgIC8qKgogICAgICogV2lsbCB1cGRhdGUgdGhlIGAuYm91bmRpbmdTcGhlcmVSYWRpdXNgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IHYgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB2ZXJ0aWNlcy5sZW5ndGggLyAzOyBpICE9PSBOOyBpKyspIHsKICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKICAgICAgICBjb25zdCBub3JtMiA9IHYubGVuZ3RoU3F1YXJlZCgpOwoKICAgICAgICBpZiAobm9ybTIgPiBtYXgyKSB7CiAgICAgICAgICBtYXgyID0gbm9ybTI7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTWF0aC5zcXJ0KG1heDIpOwogICAgfQogICAgLyoqCiAgICAgKiBjYWxjdWxhdGVXb3JsZEFBQkIKICAgICAqLwoKCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvKgogICAgICAgICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoIC8gMywKICAgICAgICAgICAgICB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CiAgICAgICAgICBjb25zdCBtaW54LG1pbnksbWlueixtYXh4LG1heHksbWF4ejsKICAgICAgICAgICBjb25zdCB2ID0gdGVtcFdvcmxkVmVydGV4OwogICAgICAgICAgZm9yKGxldCBpPTA7IGk8bjsgaSsrKXsKICAgICAgICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKICAgICAgICAgICAgICBxdWF0LnZtdWx0KHYsIHYpOwogICAgICAgICAgICAgIHBvcy52YWRkKHYsIHYpOwogICAgICAgICAgICAgIGlmICh2LnggPCBtaW54IHx8IG1pbng9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtaW54ID0gdi54OwogICAgICAgICAgICAgIH0gZWxzZSBpZih2LnggPiBtYXh4IHx8IG1heHg9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtYXh4ID0gdi54OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgaWYgKHYueSA8IG1pbnkgfHwgbWlueT09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1pbnkgPSB2Lnk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHYueSA+IG1heHkgfHwgbWF4eT09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1heHkgPSB2Lnk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICBpZiAodi56IDwgbWlueiB8fCBtaW56PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICAgICAgICB9IGVsc2UgaWYodi56ID4gbWF4eiB8fCBtYXh6PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBtaW4uc2V0KG1pbngsbWlueSxtaW56KTsKICAgICAgICAgIG1heC5zZXQobWF4eCxtYXh5LG1heHopOwogICAgICAgICAgKi8KICAgICAgLy8gRmFzdGVyIGFwcHJveGltYXRpb24gdXNpbmcgbG9jYWwgQUFCQgogICAgICBjb25zdCBmcmFtZSA9IGNhbGN1bGF0ZVdvcmxkQUFCQl9mcmFtZTsKICAgICAgY29uc3QgcmVzdWx0ID0gY2FsY3VsYXRlV29ybGRBQUJCX2FhYmI7CiAgICAgIGZyYW1lLnBvc2l0aW9uID0gcG9zOwogICAgICBmcmFtZS5xdWF0ZXJuaW9uID0gcXVhdDsKICAgICAgdGhpcy5hYWJiLnRvV29ybGRGcmFtZShmcmFtZSwgcmVzdWx0KTsKICAgICAgbWluLmNvcHkocmVzdWx0Lmxvd2VyQm91bmQpOwogICAgICBtYXguY29weShyZXN1bHQudXBwZXJCb3VuZCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSB2b2x1bWUKICAgICAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyAvIDMuMDsKICAgIH0KICAgIC8qKgogICAgICogQ3JlYXRlIGEgVHJpbWVzaCBpbnN0YW5jZSwgc2hhcGVkIGFzIGEgdG9ydXMuCiAgICAgKi8KCgogICAgc3RhdGljIGNyZWF0ZVRvcnVzKHJhZGl1cyA9IDEsIHR1YmUgPSAwLjUsIHJhZGlhbFNlZ21lbnRzID0gOCwgdHVidWxhclNlZ21lbnRzID0gNiwgYXJjID0gTWF0aC5QSSAqIDIpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSBbXTsKICAgICAgY29uc3QgaW5kaWNlcyA9IFtdOwoKICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gcmFkaWFsU2VnbWVudHM7IGorKykgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHR1YnVsYXJTZWdtZW50czsgaSsrKSB7CiAgICAgICAgICBjb25zdCB1ID0gaSAvIHR1YnVsYXJTZWdtZW50cyAqIGFyYzsKICAgICAgICAgIGNvbnN0IHYgPSBqIC8gcmFkaWFsU2VnbWVudHMgKiBNYXRoLlBJICogMjsKICAgICAgICAgIGNvbnN0IHggPSAocmFkaXVzICsgdHViZSAqIE1hdGguY29zKHYpKSAqIE1hdGguY29zKHUpOwogICAgICAgICAgY29uc3QgeSA9IChyYWRpdXMgKyB0dWJlICogTWF0aC5jb3ModikpICogTWF0aC5zaW4odSk7CiAgICAgICAgICBjb25zdCB6ID0gdHViZSAqIE1hdGguc2luKHYpOwogICAgICAgICAgdmVydGljZXMucHVzaCh4LCB5LCB6KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGogPSAxOyBqIDw9IHJhZGlhbFNlZ21lbnRzOyBqKyspIHsKICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0dWJ1bGFyU2VnbWVudHM7IGkrKykgewogICAgICAgICAgY29uc3QgYSA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIGogKyBpIC0gMTsKICAgICAgICAgIGNvbnN0IGIgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiAoaiAtIDEpICsgaSAtIDE7CiAgICAgICAgICBjb25zdCBjID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogKGogLSAxKSArIGk7CiAgICAgICAgICBjb25zdCBkID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogaiArIGk7CiAgICAgICAgICBpbmRpY2VzLnB1c2goYSwgYiwgZCk7CiAgICAgICAgICBpbmRpY2VzLnB1c2goYiwgYywgZCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbmV3IFRyaW1lc2godmVydGljZXMsIGluZGljZXMpOwogICAgfQoKICB9CgogIGNvbnN0IGNvbXB1dGVOb3JtYWxzX24gPSBuZXcgVmVjMygpOwogIGNvbnN0IHVuc2NhbGVkQUFCQiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgZ2V0RWRnZVZlY3Rvcl92YSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0RWRnZVZlY3Rvcl92YiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFiID0gbmV3IFZlYzMoKTsKICBjb25zdCB2YSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHZjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjbGlfYWFiYiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGN1bGF0ZVdvcmxkQUFCQl9mcmFtZSA9IG5ldyBUcmFuc2Zvcm0oKTsKICBjb25zdCBjYWxjdWxhdGVXb3JsZEFBQkJfYWFiYiA9IG5ldyBBQUJCKCk7CiAgLyoqCiAgICogQ29uc3RyYWludCBlcXVhdGlvbiBzb2x2ZXIgYmFzZSBjbGFzcy4KICAgKi8KCiAgY2xhc3MgU29sdmVyIHsKICAgIC8qKgogICAgICogQWxsIGVxdWF0aW9ucyB0byBiZSBzb2x2ZWQKICAgICAqLwoKICAgIC8qKgogICAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gdm9pZCAwOwogICAgICB0aGlzLmVxdWF0aW9ucyA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gc3ViY2xhc3NlcyEKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdAogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgcmV0dXJuICgvLyBTaG91bGQgcmV0dXJuIHRoZSBudW1iZXIgb2YgaXRlcmF0aW9ucyBkb25lIQogICAgICAgIDAKICAgICAgKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgYWRkRXF1YXRpb24oZXEpIHsKICAgICAgaWYgKGVxLmVuYWJsZWQgJiYgIWVxLmJpLmlzVHJpZ2dlciAmJiAhZXEuYmouaXNUcmlnZ2VyKSB7CiAgICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChlcSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgcmVtb3ZlRXF1YXRpb24oZXEpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IGkgPSBlcXMuaW5kZXhPZihlcSk7CgogICAgICBpZiAoaSAhPT0gLTEpIHsKICAgICAgICBlcXMuc3BsaWNlKGksIDEpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhbGwgZXF1YXRpb25zCiAgICAgKi8KCgogICAgcmVtb3ZlQWxsRXF1YXRpb25zKCkgewogICAgICB0aGlzLmVxdWF0aW9ucy5sZW5ndGggPSAwOwogICAgfQoKICB9CiAgLyoqCiAgICogQ29uc3RyYWludCBlcXVhdGlvbiBHYXVzcy1TZWlkZWwgc29sdmVyLgogICAqIEB0b2RvIFRoZSBzcG9vayBwYXJhbWV0ZXJzIHNob3VsZCBiZSBzcGVjaWZpZWQgZm9yIGVhY2ggY29uc3RyYWludCwgbm90IGdsb2JhbGx5LgogICAqIEBzZWUgaHR0cHM6Ly93d3c4LmNzLnVtdS5zZS9rdXJzZXIvNURWMDU4L1ZUMDkvbGVjdHVyZXMvc3Bvb2tub3Rlcy5wZGYKICAgKi8KCgogIGNsYXNzIEdTU29sdmVyIGV4dGVuZHMgU29sdmVyIHsKICAgIC8qKgogICAgICogVGhlIG51bWJlciBvZiBzb2x2ZXIgaXRlcmF0aW9ucyBkZXRlcm1pbmVzIHF1YWxpdHkgb2YgdGhlIGNvbnN0cmFpbnRzIGluIHRoZSB3b3JsZC4KICAgICAqIFRoZSBtb3JlIGl0ZXJhdGlvbnMsIHRoZSBtb3JlIGNvcnJlY3Qgc2ltdWxhdGlvbi4gTW9yZSBpdGVyYXRpb25zIG5lZWQgbW9yZSBjb21wdXRhdGlvbnMgdGhvdWdoLiBJZiB5b3UgaGF2ZSBhIGxhcmdlIGdyYXZpdHkgZm9yY2UgaW4geW91ciB3b3JsZCwgeW91IHdpbGwgbmVlZCBtb3JlIGl0ZXJhdGlvbnMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZW4gdG9sZXJhbmNlIGlzIHJlYWNoZWQsIHRoZSBzeXN0ZW0gaXMgYXNzdW1lZCB0byBiZSBjb252ZXJnZWQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEB0b2RvIHJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLml0ZXJhdGlvbnMgPSB2b2lkIDA7CiAgICAgIHRoaXMudG9sZXJhbmNlID0gdm9pZCAwOwogICAgICB0aGlzLml0ZXJhdGlvbnMgPSAxMDsKICAgICAgdGhpcy50b2xlcmFuY2UgPSAxZS03OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZQogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgbGV0IGl0ZXIgPSAwOwogICAgICBjb25zdCBtYXhJdGVyID0gdGhpcy5pdGVyYXRpb25zOwogICAgICBjb25zdCB0b2xTcXVhcmVkID0gdGhpcy50b2xlcmFuY2UgKiB0aGlzLnRvbGVyYW5jZTsKICAgICAgY29uc3QgZXF1YXRpb25zID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IE5lcSA9IGVxdWF0aW9ucy5sZW5ndGg7CiAgICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllczsKICAgICAgY29uc3QgTmJvZGllcyA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGNvbnN0IGggPSBkdDsKICAgICAgbGV0IEI7CiAgICAgIGxldCBpbnZDOwogICAgICBsZXQgZGVsdGFsYW1iZGE7CiAgICAgIGxldCBkZWx0YWxhbWJkYVRvdDsKICAgICAgbGV0IEdXbGFtYmRhOwogICAgICBsZXQgbGFtYmRhajsgLy8gVXBkYXRlIHNvbHZlIG1hc3MKCiAgICAgIGlmIChOZXEgIT09IDApIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7CiAgICAgICAgICBib2RpZXNbaV0udXBkYXRlU29sdmVNYXNzUHJvcGVydGllcygpOwogICAgICAgIH0KICAgICAgfSAvLyBUaGluZ3MgdGhhdCBkbyBub3QgY2hhbmdlIGR1cmluZyBpdGVyYXRpb24gY2FuIGJlIGNvbXB1dGVkIG9uY2UKCgogICAgICBjb25zdCBpbnZDcyA9IEdTU29sdmVyX3NvbHZlX2ludkNzOwogICAgICBjb25zdCBCcyA9IEdTU29sdmVyX3NvbHZlX0JzOwogICAgICBjb25zdCBsYW1iZGEgPSBHU1NvbHZlcl9zb2x2ZV9sYW1iZGE7CiAgICAgIGludkNzLmxlbmd0aCA9IE5lcTsKICAgICAgQnMubGVuZ3RoID0gTmVxOwogICAgICBsYW1iZGEubGVuZ3RoID0gTmVxOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcTsgaSsrKSB7CiAgICAgICAgY29uc3QgYyA9IGVxdWF0aW9uc1tpXTsKICAgICAgICBsYW1iZGFbaV0gPSAwLjA7CiAgICAgICAgQnNbaV0gPSBjLmNvbXB1dGVCKGgpOwogICAgICAgIGludkNzW2ldID0gMS4wIC8gYy5jb21wdXRlQygpOwogICAgICB9CgogICAgICBpZiAoTmVxICE9PSAwKSB7CiAgICAgICAgLy8gUmVzZXQgdmxhbWJkYQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgICBjb25zdCB2bGFtYmRhID0gYi52bGFtYmRhOwogICAgICAgICAgY29uc3Qgd2xhbWJkYSA9IGIud2xhbWJkYTsKICAgICAgICAgIHZsYW1iZGEuc2V0KDAsIDAsIDApOwogICAgICAgICAgd2xhbWJkYS5zZXQoMCwgMCwgMCk7CiAgICAgICAgfSAvLyBJdGVyYXRlIG92ZXIgZXF1YXRpb25zCgoKICAgICAgICBmb3IgKGl0ZXIgPSAwOyBpdGVyICE9PSBtYXhJdGVyOyBpdGVyKyspIHsKICAgICAgICAgIC8vIEFjY3VtdWxhdGUgdGhlIHRvdGFsIGVycm9yIGZvciBlYWNoIGl0ZXJhdGlvbi4KICAgICAgICAgIGRlbHRhbGFtYmRhVG90ID0gMC4wOwoKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBOZXE7IGorKykgewogICAgICAgICAgICBjb25zdCBjID0gZXF1YXRpb25zW2pdOyAvLyBDb21wdXRlIGl0ZXJhdGlvbgoKICAgICAgICAgICAgQiA9IEJzW2pdOwogICAgICAgICAgICBpbnZDID0gaW52Q3Nbal07CiAgICAgICAgICAgIGxhbWJkYWogPSBsYW1iZGFbal07CiAgICAgICAgICAgIEdXbGFtYmRhID0gYy5jb21wdXRlR1dsYW1iZGEoKTsKICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBpbnZDICogKEIgLSBHV2xhbWJkYSAtIGMuZXBzICogbGFtYmRhaik7IC8vIENsYW1wIGlmIHdlIGFyZSBub3Qgd2l0aGluIHRoZSBtaW4vbWF4IGludGVydmFsCgogICAgICAgICAgICBpZiAobGFtYmRhaiArIGRlbHRhbGFtYmRhIDwgYy5taW5Gb3JjZSkgewogICAgICAgICAgICAgIGRlbHRhbGFtYmRhID0gYy5taW5Gb3JjZSAtIGxhbWJkYWo7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobGFtYmRhaiArIGRlbHRhbGFtYmRhID4gYy5tYXhGb3JjZSkgewogICAgICAgICAgICAgIGRlbHRhbGFtYmRhID0gYy5tYXhGb3JjZSAtIGxhbWJkYWo7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxhbWJkYVtqXSArPSBkZWx0YWxhbWJkYTsKICAgICAgICAgICAgZGVsdGFsYW1iZGFUb3QgKz0gZGVsdGFsYW1iZGEgPiAwLjAgPyBkZWx0YWxhbWJkYSA6IC1kZWx0YWxhbWJkYTsgLy8gYWJzKGRlbHRhbGFtYmRhKQoKICAgICAgICAgICAgYy5hZGRUb1dsYW1iZGEoZGVsdGFsYW1iZGEpOwogICAgICAgICAgfSAvLyBJZiB0aGUgdG90YWwgZXJyb3IgaXMgc21hbGwgZW5vdWdoIC0gc3RvcCBpdGVyYXRlCgoKICAgICAgICAgIGlmIChkZWx0YWxhbWJkYVRvdCAqIGRlbHRhbGFtYmRhVG90IDwgdG9sU3F1YXJlZCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9IC8vIEFkZCByZXN1bHQgdG8gdmVsb2NpdHkKCgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgICBjb25zdCB2ID0gYi52ZWxvY2l0eTsKICAgICAgICAgIGNvbnN0IHcgPSBiLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgICAgIGIudmxhbWJkYS52bXVsKGIubGluZWFyRmFjdG9yLCBiLnZsYW1iZGEpOwogICAgICAgICAgdi52YWRkKGIudmxhbWJkYSwgdik7CiAgICAgICAgICBiLndsYW1iZGEudm11bChiLmFuZ3VsYXJGYWN0b3IsIGIud2xhbWJkYSk7CiAgICAgICAgICB3LnZhZGQoYi53bGFtYmRhLCB3KTsKICAgICAgICB9IC8vIFNldCB0aGUgYC5tdWx0aXBsaWVyYCBwcm9wZXJ0eSBvZiBlYWNoIGVxdWF0aW9uCgoKICAgICAgICBsZXQgbCA9IGVxdWF0aW9ucy5sZW5ndGg7CiAgICAgICAgY29uc3QgaW52RHQgPSAxIC8gaDsKCiAgICAgICAgd2hpbGUgKGwtLSkgewogICAgICAgICAgZXF1YXRpb25zW2xdLm11bHRpcGxpZXIgPSBsYW1iZGFbbF0gKiBpbnZEdDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBpdGVyOwogICAgfQoKICB9IC8vIEp1c3QgdGVtcG9yYXJ5IG51bWJlciBob2xkZXJzIHRoYXQgd2Ugd2FudCB0byByZXVzZSBlYWNoIGl0ZXJhdGlvbi4KCgogIGNvbnN0IEdTU29sdmVyX3NvbHZlX2xhbWJkYSA9IFtdOwogIGNvbnN0IEdTU29sdmVyX3NvbHZlX2ludkNzID0gW107CiAgY29uc3QgR1NTb2x2ZXJfc29sdmVfQnMgPSBbXTsKICAvKioKICAgKiBTcGxpdHMgdGhlIGVxdWF0aW9ucyBpbnRvIGlzbGFuZHMgYW5kIHNvbHZlcyB0aGVtIGluZGVwZW5kZW50bHkuIENhbiBpbXByb3ZlIHBlcmZvcm1hbmNlLgogICAqLwoKICBjbGFzcyBTcGxpdFNvbHZlciBleHRlbmRzIFNvbHZlciB7CiAgICAvKioKICAgICAqIFRoZSBudW1iZXIgb2Ygc29sdmVyIGl0ZXJhdGlvbnMgZGV0ZXJtaW5lcyBxdWFsaXR5IG9mIHRoZSBjb25zdHJhaW50cyBpbiB0aGUgd29ybGQuIFRoZSBtb3JlIGl0ZXJhdGlvbnMsIHRoZSBtb3JlIGNvcnJlY3Qgc2ltdWxhdGlvbi4gTW9yZSBpdGVyYXRpb25zIG5lZWQgbW9yZSBjb21wdXRhdGlvbnMgdGhvdWdoLiBJZiB5b3UgaGF2ZSBhIGxhcmdlIGdyYXZpdHkgZm9yY2UgaW4geW91ciB3b3JsZCwgeW91IHdpbGwgbmVlZCBtb3JlIGl0ZXJhdGlvbnMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZW4gdG9sZXJhbmNlIGlzIHJlYWNoZWQsIHRoZSBzeXN0ZW0gaXMgYXNzdW1lZCB0byBiZSBjb252ZXJnZWQuCiAgICAgKi8KCiAgICAvKiogc3Vic29sdmVyICovCiAgICBjb25zdHJ1Y3RvcihzdWJzb2x2ZXIpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5pdGVyYXRpb25zID0gdm9pZCAwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IHZvaWQgMDsKICAgICAgdGhpcy5zdWJzb2x2ZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMubm9kZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMubm9kZVBvb2wgPSB2b2lkIDA7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7CiAgICAgIHRoaXMuc3Vic29sdmVyID0gc3Vic29sdmVyOwogICAgICB0aGlzLm5vZGVzID0gW107CiAgICAgIHRoaXMubm9kZVBvb2wgPSBbXTsgLy8gQ3JlYXRlIG5lZWRlZCBub2RlcywgcmV1c2UgaWYgcG9zc2libGUKCiAgICAgIHdoaWxlICh0aGlzLm5vZGVQb29sLmxlbmd0aCA8IDEyOCkgewogICAgICAgIHRoaXMubm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogY3JlYXRlTm9kZQogICAgICovCgoKICAgIGNyZWF0ZU5vZGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYm9keTogbnVsbCwKICAgICAgICBjaGlsZHJlbjogW10sCiAgICAgICAgZXFzOiBbXSwKICAgICAgICB2aXNpdGVkOiBmYWxzZQogICAgICB9OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSB0aGUgc3Vic3lzdGVtcwogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgY29uc3Qgbm9kZXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlczsKICAgICAgY29uc3Qgbm9kZVBvb2wgPSB0aGlzLm5vZGVQb29sOwogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IGVxdWF0aW9ucyA9IHRoaXMuZXF1YXRpb25zOwogICAgICBjb25zdCBOZXEgPSBlcXVhdGlvbnMubGVuZ3RoOwogICAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3Qgc3Vic29sdmVyID0gdGhpcy5zdWJzb2x2ZXI7IC8vIENyZWF0ZSBuZWVkZWQgbm9kZXMsIHJldXNlIGlmIHBvc3NpYmxlCgogICAgICB3aGlsZSAobm9kZVBvb2wubGVuZ3RoIDwgTmJvZGllcykgewogICAgICAgIG5vZGVQb29sLnB1c2godGhpcy5jcmVhdGVOb2RlKCkpOwogICAgICB9CgogICAgICBub2Rlcy5sZW5ndGggPSBOYm9kaWVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOYm9kaWVzOyBpKyspIHsKICAgICAgICBub2Rlc1tpXSA9IG5vZGVQb29sW2ldOwogICAgICB9IC8vIFJlc2V0IG5vZGUgdmFsdWVzCgoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTsKICAgICAgICBub2RlLmJvZHkgPSBib2RpZXNbaV07CiAgICAgICAgbm9kZS5jaGlsZHJlbi5sZW5ndGggPSAwOwogICAgICAgIG5vZGUuZXFzLmxlbmd0aCA9IDA7CiAgICAgICAgbm9kZS52aXNpdGVkID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBOZXE7IGsrKykgewogICAgICAgIGNvbnN0IGVxID0gZXF1YXRpb25zW2tdOwogICAgICAgIGNvbnN0IGkgPSBib2RpZXMuaW5kZXhPZihlcS5iaSk7CiAgICAgICAgY29uc3QgaiA9IGJvZGllcy5pbmRleE9mKGVxLmJqKTsKICAgICAgICBjb25zdCBuaSA9IG5vZGVzW2ldOwogICAgICAgIGNvbnN0IG5qID0gbm9kZXNbal07CiAgICAgICAgbmkuY2hpbGRyZW4ucHVzaChuaik7CiAgICAgICAgbmkuZXFzLnB1c2goZXEpOwogICAgICAgIG5qLmNoaWxkcmVuLnB1c2gobmkpOwogICAgICAgIG5qLmVxcy5wdXNoKGVxKTsKICAgICAgfQoKICAgICAgbGV0IGNoaWxkOwogICAgICBsZXQgbiA9IDA7CiAgICAgIGxldCBlcXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9lcXM7CiAgICAgIHN1YnNvbHZlci50b2xlcmFuY2UgPSB0aGlzLnRvbGVyYW5jZTsKICAgICAgc3Vic29sdmVyLml0ZXJhdGlvbnMgPSB0aGlzLml0ZXJhdGlvbnM7CiAgICAgIGNvbnN0IGR1bW15V29ybGQgPSBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkOwoKICAgICAgd2hpbGUgKGNoaWxkID0gZ2V0VW52aXNpdGVkTm9kZShub2RlcykpIHsKICAgICAgICBlcXMubGVuZ3RoID0gMDsKICAgICAgICBkdW1teVdvcmxkLmJvZGllcy5sZW5ndGggPSAwOwogICAgICAgIGJmcyhjaGlsZCwgdmlzaXRGdW5jLCBkdW1teVdvcmxkLmJvZGllcywgZXFzKTsKICAgICAgICBjb25zdCBOZXFzID0gZXFzLmxlbmd0aDsKICAgICAgICBlcXMgPSBlcXMuc29ydChzb3J0QnlJZCk7CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOZXFzOyBpKyspIHsKICAgICAgICAgIHN1YnNvbHZlci5hZGRFcXVhdGlvbihlcXNbaV0pOwogICAgICAgIH0KCiAgICAgICAgc3Vic29sdmVyLnNvbHZlKGR0LCBkdW1teVdvcmxkKTsKICAgICAgICBzdWJzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7CiAgICAgICAgbisrOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KCiAgfSAvLyBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc3Vic3lzdGVtcwoKCiAgY29uc3QgU3BsaXRTb2x2ZXJfc29sdmVfbm9kZXMgPSBbXTsgLy8gQWxsIGFsbG9jYXRlZCBub2RlIG9iamVjdHMKCiAgY29uc3QgU3BsaXRTb2x2ZXJfc29sdmVfZXFzID0gW107IC8vIFRlbXAgYXJyYXkKCiAgY29uc3QgU3BsaXRTb2x2ZXJfc29sdmVfZHVtbXlXb3JsZCA9IHsKICAgIGJvZGllczogW10KICB9OyAvLyBUZW1wIG9iamVjdAoKICBjb25zdCBTVEFUSUMgPSBCb2R5LlNUQVRJQzsKCiAgZnVuY3Rpb24gZ2V0VW52aXNpdGVkTm9kZShub2RlcykgewogICAgY29uc3QgTm5vZGVzID0gbm9kZXMubGVuZ3RoOwoKICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBObm9kZXM7IGkrKykgewogICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07CgogICAgICBpZiAoIW5vZGUudmlzaXRlZCAmJiAhKG5vZGUuYm9keS50eXBlICYgU1RBVElDKSkgewogICAgICAgIHJldHVybiBub2RlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgY29uc3QgcXVldWUgPSBbXTsKCiAgZnVuY3Rpb24gYmZzKHJvb3QsIHZpc2l0RnVuYywgYmRzLCBlcXMpIHsKICAgIHF1ZXVlLnB1c2gocm9vdCk7CiAgICByb290LnZpc2l0ZWQgPSB0cnVlOwogICAgdmlzaXRGdW5jKHJvb3QsIGJkcywgZXFzKTsKCiAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7CiAgICAgIGNvbnN0IG5vZGUgPSBxdWV1ZS5wb3AoKTsgLy8gTG9vcCBvdmVyIHVudmlzaXRlZCBjaGlsZCBub2RlcwoKICAgICAgbGV0IGNoaWxkOwoKICAgICAgd2hpbGUgKGNoaWxkID0gZ2V0VW52aXNpdGVkTm9kZShub2RlLmNoaWxkcmVuKSkgewogICAgICAgIGNoaWxkLnZpc2l0ZWQgPSB0cnVlOwogICAgICAgIHZpc2l0RnVuYyhjaGlsZCwgYmRzLCBlcXMpOwogICAgICAgIHF1ZXVlLnB1c2goY2hpbGQpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiB2aXNpdEZ1bmMobm9kZSwgYmRzLCBlcXMpIHsKICAgIGJkcy5wdXNoKG5vZGUuYm9keSk7CiAgICBjb25zdCBOZXFzID0gbm9kZS5lcXMubGVuZ3RoOwoKICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOZXFzOyBpKyspIHsKICAgICAgY29uc3QgZXEgPSBub2RlLmVxc1tpXTsKCiAgICAgIGlmICghZXFzLmluY2x1ZGVzKGVxKSkgewogICAgICAgIGVxcy5wdXNoKGVxKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gc29ydEJ5SWQoYSwgYikgewogICAgcmV0dXJuIGIuaWQgLSBhLmlkOwogIH0KICAvKioKICAgKiBGb3IgcG9vbGluZyBvYmplY3RzIHRoYXQgY2FuIGJlIHJldXNlZC4KICAgKi8KCgogIGNsYXNzIFBvb2wgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMub2JqZWN0cyA9IFtdOwogICAgICB0aGlzLnR5cGUgPSBPYmplY3Q7CiAgICB9CiAgICAvKioKICAgICAqIFJlbGVhc2UgYW4gb2JqZWN0IGFmdGVyIHVzZQogICAgICovCgoKICAgIHJlbGVhc2UoLi4uYXJncykgewogICAgICBjb25zdCBOYXJncyA9IGFyZ3MubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5hcmdzOyBpKyspIHsKICAgICAgICB0aGlzLm9iamVjdHMucHVzaChhcmdzW2ldKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBvYmplY3QKICAgICAqLwoKCiAgICBnZXQoKSB7CiAgICAgIGlmICh0aGlzLm9iamVjdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0T2JqZWN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0cy5wb3AoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYW4gb2JqZWN0LiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gZWFjaCBzdWJjbGFzcy4KICAgICAqLwoKCiAgICBjb25zdHJ1Y3RPYmplY3QoKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY29uc3RydWN0T2JqZWN0KCkgbm90IGltcGxlbWVudGVkIGluIHRoaXMgUG9vbCBzdWJjbGFzcyB5ZXQhJyk7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm4gU2VsZiwgZm9yIGNoYWluaW5nCiAgICAgKi8KCgogICAgcmVzaXplKHNpemUpIHsKICAgICAgY29uc3Qgb2JqZWN0cyA9IHRoaXMub2JqZWN0czsKCiAgICAgIHdoaWxlIChvYmplY3RzLmxlbmd0aCA+IHNpemUpIHsKICAgICAgICBvYmplY3RzLnBvcCgpOwogICAgICB9CgogICAgICB3aGlsZSAob2JqZWN0cy5sZW5ndGggPCBzaXplKSB7CiAgICAgICAgb2JqZWN0cy5wdXNoKHRoaXMuY29uc3RydWN0T2JqZWN0KCkpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgfQogIC8qKgogICAqIFZlYzNQb29sCiAgICovCgoKICBjbGFzcyBWZWMzUG9vbCBleHRlbmRzIFBvb2wgewogICAgY29uc3RydWN0b3IoLi4uYXJncykgewogICAgICBzdXBlciguLi5hcmdzKTsKICAgICAgdGhpcy50eXBlID0gVmVjMzsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3RydWN0IGEgdmVjdG9yCiAgICAgKi8KCgogICAgY29uc3RydWN0T2JqZWN0KCkgewogICAgICByZXR1cm4gbmV3IFZlYzMoKTsKICAgIH0KCiAgfQoKICBsZXQgX0NPTExJU0lPTl9UWVBFUyRzcGhlLCBfQ09MTElTSU9OX1RZUEVTJHNwaGUyLCBfQ09MTElTSU9OX1RZUEVTJGJveEIsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTMsIF9DT0xMSVNJT05fVFlQRVMkcGxhbiwgX0NPTExJU0lPTl9UWVBFUyRjb252LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU0LCBfQ09MTElTSU9OX1RZUEVTJHBsYW4yLCBfQ09MTElTSU9OX1RZUEVTJGJveEMsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTUsIF9DT0xMSVNJT05fVFlQRVMkYm94SCwgX0NPTExJU0lPTl9UWVBFUyRjb252MiwgX0NPTExJU0lPTl9UWVBFUyRzcGhlNiwgX0NPTExJU0lPTl9UWVBFUyRwbGFuMywgX0NPTExJU0lPTl9UWVBFUyRib3hQLCBfQ09MTElTSU9OX1RZUEVTJGNvbnYzLCBfQ09MTElTSU9OX1RZUEVTJGN5bGksIF9DT0xMSVNJT05fVFlQRVMkc3BoZTcsIF9DT0xMSVNJT05fVFlQRVMkcGxhbjQsIF9DT0xMSVNJT05fVFlQRVMkYm94QzIsIF9DT0xMSVNJT05fVFlQRVMkY29udjQsIF9DT0xMSVNJT05fVFlQRVMkaGVpZywgX0NPTExJU0lPTl9UWVBFUyRwYXJ0LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU4LCBfQ09MTElTSU9OX1RZUEVTJHBsYW41OyAvLyBOYW1pbmcgcnVsZTogYmFzZWQgb2YgdGhlIG9yZGVyIGluIFNIQVBFX1RZUEVTLAogIC8vIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBtZXRob2QgaXMgZm9ybWVkIGJ5IHRoZQogIC8vIHNoYXBlIHR5cGUgdGhhdCBjb21lcyBiZWZvcmUsIGluIHRoZSBzZWNvbmQgcGFydAogIC8vIHRoZXJlIGlzIHRoZSBzaGFwZSB0eXBlIHRoYXQgY29tZXMgYWZ0ZXIgaW4gdGhlIFNIQVBFX1RZUEVTIGxpc3QKCgogIGNvbnN0IENPTExJU0lPTl9UWVBFUyA9IHsKICAgIHNwaGVyZVNwaGVyZTogU2hhcGUudHlwZXMuU1BIRVJFLAogICAgc3BoZXJlUGxhbmU6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLlBMQU5FLAogICAgYm94Qm94OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5CT1gsCiAgICBzcGhlcmVCb3g6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIHBsYW5lQm94OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIGNvbnZleENvbnZleDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHNwaGVyZUNvbnZleDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHBsYW5lQ29udmV4OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBib3hDb252ZXg6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBzcGhlcmVIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBib3hIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBjb252ZXhIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgc3BoZXJlUGFydGljbGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuU1BIRVJFLAogICAgcGxhbmVQYXJ0aWNsZTogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGJveFBhcnRpY2xlOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGNvbnZleFBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBjeWxpbmRlckN5bGluZGVyOiBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHNwaGVyZUN5bGluZGVyOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBsYW5lQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBib3hDeWxpbmRlcjogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBjb252ZXhDeWxpbmRlcjogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcjogU2hhcGUudHlwZXMuSEVJR0hURklFTEQgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBhcnRpY2xlQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBzcGhlcmVUcmltZXNoOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5UUklNRVNILAogICAgcGxhbmVUcmltZXNoOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLlRSSU1FU0gKICB9OwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZSA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVTcGhlcmU7CiAgX0NPTExJU0lPTl9UWVBFUyRzcGhlMiA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVQbGFuZTsKICBfQ09MTElTSU9OX1RZUEVTJGJveEIgPSBDT0xMSVNJT05fVFlQRVMuYm94Qm94OwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTMgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQm94OwogIF9DT0xMSVNJT05fVFlQRVMkcGxhbiA9IENPTExJU0lPTl9UWVBFUy5wbGFuZUJveDsKICBfQ09MTElTSU9OX1RZUEVTJGNvbnYgPSBDT0xMSVNJT05fVFlQRVMuY29udmV4Q29udmV4OwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTQgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ29udmV4OwogIF9DT0xMSVNJT05fVFlQRVMkcGxhbjIgPSBDT0xMSVNJT05fVFlQRVMucGxhbmVDb252ZXg7CiAgX0NPTExJU0lPTl9UWVBFUyRib3hDID0gQ09MTElTSU9OX1RZUEVTLmJveENvbnZleDsKICBfQ09MTElTSU9OX1RZUEVTJHNwaGU1ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZUhlaWdodGZpZWxkOwogIF9DT0xMSVNJT05fVFlQRVMkYm94SCA9IENPTExJU0lPTl9UWVBFUy5ib3hIZWlnaHRmaWVsZDsKICBfQ09MTElTSU9OX1RZUEVTJGNvbnYyID0gQ09MTElTSU9OX1RZUEVTLmNvbnZleEhlaWdodGZpZWxkOwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTYgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlUGFydGljbGU7CiAgX0NPTExJU0lPTl9UWVBFUyRwbGFuMyA9IENPTExJU0lPTl9UWVBFUy5wbGFuZVBhcnRpY2xlOwogIF9DT0xMSVNJT05fVFlQRVMkYm94UCA9IENPTExJU0lPTl9UWVBFUy5ib3hQYXJ0aWNsZTsKICBfQ09MTElTSU9OX1RZUEVTJGNvbnYzID0gQ09MTElTSU9OX1RZUEVTLmNvbnZleFBhcnRpY2xlOwogIF9DT0xMSVNJT05fVFlQRVMkY3lsaSA9IENPTExJU0lPTl9UWVBFUy5jeWxpbmRlckN5bGluZGVyOwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTcgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ3lsaW5kZXI7CiAgX0NPTExJU0lPTl9UWVBFUyRwbGFuNCA9IENPTExJU0lPTl9UWVBFUy5wbGFuZUN5bGluZGVyOwogIF9DT0xMSVNJT05fVFlQRVMkYm94QzIgPSBDT0xMSVNJT05fVFlQRVMuYm94Q3lsaW5kZXI7CiAgX0NPTExJU0lPTl9UWVBFUyRjb252NCA9IENPTExJU0lPTl9UWVBFUy5jb252ZXhDeWxpbmRlcjsKICBfQ09MTElTSU9OX1RZUEVTJGhlaWcgPSBDT0xMSVNJT05fVFlQRVMuaGVpZ2h0ZmllbGRDeWxpbmRlcjsKICBfQ09MTElTSU9OX1RZUEVTJHBhcnQgPSBDT0xMSVNJT05fVFlQRVMucGFydGljbGVDeWxpbmRlcjsKICBfQ09MTElTSU9OX1RZUEVTJHNwaGU4ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZVRyaW1lc2g7CiAgX0NPTExJU0lPTl9UWVBFUyRwbGFuNSA9IENPTExJU0lPTl9UWVBFUy5wbGFuZVRyaW1lc2g7CiAgLyoqCiAgICogSGVscGVyIGNsYXNzIGZvciB0aGUgV29ybGQuIEdlbmVyYXRlcyBDb250YWN0RXF1YXRpb25zLgogICAqIEB0b2RvIFNwaGVyZS1Db252ZXhQb2x5aGVkcm9uIGNvbnRhY3RzCiAgICogQHRvZG8gQ29udGFjdCByZWR1Y3Rpb24KICAgKiBAdG9kbyBzaG91bGQgbW92ZSBtZXRob2RzIHRvIHByb3RvdHlwZQogICAqLwoKICBjbGFzcyBOYXJyb3dwaGFzZSB7CiAgICAvKioKICAgICAqIEludGVybmFsIHN0b3JhZ2Ugb2YgcG9vbGVkIGNvbnRhY3QgcG9pbnRzLgogICAgICovCgogICAgLyoqCiAgICAgKiBQb29sZWQgdmVjdG9ycy4KICAgICAqLwogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGUyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlUGxhbmU7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGJveEJdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hCb3g7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGUzXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQm94OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRwbGFuXSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVCb3g7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnZdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU0XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRwbGFuMl0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hDXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94Q29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlNV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hIXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnYyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU2XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlUGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW4zXSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVQYXJ0aWNsZTsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkYm94UF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveFBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRjb252M10oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRjeWxpXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlN10oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjRdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkYm94QzJdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnY0XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRoZWlnXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0ZmllbGRDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGFydF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBhcnRpY2xlQ3lsaW5kZXI7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlVHJpbWVzaDsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjVdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVRyaW1lc2g7CiAgICB9IC8vIGdldCBbQ09MTElTSU9OX1RZUEVTLmNvbnZleFRyaW1lc2hdKCkgewogICAgLy8gICByZXR1cm4gdGhpcy5jb252ZXhUcmltZXNoCiAgICAvLyB9CgoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUG9vbCA9IHZvaWQgMDsKICAgICAgdGhpcy5yZXN1bHQgPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSB2b2lkIDA7CiAgICAgIHRoaXMudjNwb29sID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107CiAgICAgIHRoaXMucmVzdWx0ID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBbXTsKICAgICAgdGhpcy52M3Bvb2wgPSBuZXcgVmVjM1Bvb2woKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICB0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgYSBjb250YWN0IG9iamVjdCwgYnkgdXNpbmcgdGhlIGludGVybmFsIHBvb2wgb3IgY3JlYXRpbmcgYSBuZXcgb25lLgogICAgICovCgoKICAgIGNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgb3ZlcnJpZGVTaGFwZUEsIG92ZXJyaWRlU2hhcGVCKSB7CiAgICAgIGxldCBjOwoKICAgICAgaWYgKHRoaXMuY29udGFjdFBvaW50UG9vbC5sZW5ndGgpIHsKICAgICAgICBjID0gdGhpcy5jb250YWN0UG9pbnRQb29sLnBvcCgpOwogICAgICAgIGMuYmkgPSBiaTsKICAgICAgICBjLmJqID0gYmo7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYyA9IG5ldyBDb250YWN0RXF1YXRpb24oYmksIGJqKTsKICAgICAgfQoKICAgICAgYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNvbnN0IGNtID0gdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsOwogICAgICBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247CiAgICAgIGMuc2V0U3Bvb2tQYXJhbXMoY20uY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzLCBjbS5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uLCB0aGlzLndvcmxkLmR0KTsKICAgICAgY29uc3QgbWF0QSA9IHNpLm1hdGVyaWFsIHx8IGJpLm1hdGVyaWFsOwogICAgICBjb25zdCBtYXRCID0gc2oubWF0ZXJpYWwgfHwgYmoubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEucmVzdGl0dXRpb24gPj0gMCAmJiBtYXRCLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICBjLnJlc3RpdHV0aW9uID0gbWF0QS5yZXN0aXR1dGlvbiAqIG1hdEIucmVzdGl0dXRpb247CiAgICAgIH0KCiAgICAgIGMuc2kgPSBvdmVycmlkZVNoYXBlQSB8fCBzaTsKICAgICAgYy5zaiA9IG92ZXJyaWRlU2hhcGVCIHx8IHNqOwogICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBjcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcXVhdGlvbiwgb3V0QXJyYXkpIHsKICAgICAgY29uc3QgYm9keUEgPSBjb250YWN0RXF1YXRpb24uYmk7CiAgICAgIGNvbnN0IGJvZHlCID0gY29udGFjdEVxdWF0aW9uLmJqOwogICAgICBjb25zdCBzaGFwZUEgPSBjb250YWN0RXF1YXRpb24uc2k7CiAgICAgIGNvbnN0IHNoYXBlQiA9IGNvbnRhY3RFcXVhdGlvbi5zajsKICAgICAgY29uc3Qgd29ybGQgPSB0aGlzLndvcmxkOwogICAgICBjb25zdCBjbSA9IHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbDsgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbQoKICAgICAgbGV0IGZyaWN0aW9uID0gY20uZnJpY3Rpb247CiAgICAgIGNvbnN0IG1hdEEgPSBzaGFwZUEubWF0ZXJpYWwgfHwgYm9keUEubWF0ZXJpYWw7CiAgICAgIGNvbnN0IG1hdEIgPSBzaGFwZUIubWF0ZXJpYWwgfHwgYm9keUIubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEuZnJpY3Rpb24gPj0gMCAmJiBtYXRCLmZyaWN0aW9uID49IDApIHsKICAgICAgICBmcmljdGlvbiA9IG1hdEEuZnJpY3Rpb24gKiBtYXRCLmZyaWN0aW9uOwogICAgICB9CgogICAgICBpZiAoZnJpY3Rpb24gPiAwKSB7CiAgICAgICAgLy8gQ3JlYXRlIDIgdGFuZ2VudCBlcXVhdGlvbnMKICAgICAgICBjb25zdCBtdWcgPSBmcmljdGlvbiAqIHdvcmxkLmdyYXZpdHkubGVuZ3RoKCk7CiAgICAgICAgbGV0IHJlZHVjZWRNYXNzID0gYm9keUEuaW52TWFzcyArIGJvZHlCLmludk1hc3M7CgogICAgICAgIGlmIChyZWR1Y2VkTWFzcyA+IDApIHsKICAgICAgICAgIHJlZHVjZWRNYXNzID0gMSAvIHJlZHVjZWRNYXNzOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcG9vbCA9IHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgICAgY29uc3QgYzEgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihib2R5QSwgYm9keUIsIG11ZyAqIHJlZHVjZWRNYXNzKTsKICAgICAgICBjb25zdCBjMiA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJvZHlBLCBib2R5QiwgbXVnICogcmVkdWNlZE1hc3MpOwogICAgICAgIGMxLmJpID0gYzIuYmkgPSBib2R5QTsKICAgICAgICBjMS5iaiA9IGMyLmJqID0gYm9keUI7CiAgICAgICAgYzEubWluRm9yY2UgPSBjMi5taW5Gb3JjZSA9IC1tdWcgKiByZWR1Y2VkTWFzczsKICAgICAgICBjMS5tYXhGb3JjZSA9IGMyLm1heEZvcmNlID0gbXVnICogcmVkdWNlZE1hc3M7IC8vIENvcHkgb3ZlciB0aGUgcmVsYXRpdmUgdmVjdG9ycwoKICAgICAgICBjMS5yaS5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaSk7CiAgICAgICAgYzEucmouY29weShjb250YWN0RXF1YXRpb24ucmopOwogICAgICAgIGMyLnJpLmNvcHkoY29udGFjdEVxdWF0aW9uLnJpKTsKICAgICAgICBjMi5yai5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaik7IC8vIENvbnN0cnVjdCB0YW5nZW50cwoKICAgICAgICBjb250YWN0RXF1YXRpb24ubmkudGFuZ2VudHMoYzEudCwgYzIudCk7IC8vIFNldCBzcG9vayBwYXJhbXMKCiAgICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIHdvcmxkLmR0KTsKICAgICAgICBjMi5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgd29ybGQuZHQpOwogICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gY29udGFjdEVxdWF0aW9uLmVuYWJsZWQ7CiAgICAgICAgb3V0QXJyYXkucHVzaChjMSwgYzIpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFRha2UgdGhlIGF2ZXJhZ2UgTiBsYXRlc3QgY29udGFjdCBwb2ludCBvbiB0aGUgcGxhbmUuCiAgICAgKi8KCgogICAgY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cykgewogICAgICAvLyBUaGUgbGFzdCBjb250YWN0RXF1YXRpb24KICAgICAgbGV0IGMgPSB0aGlzLnJlc3VsdFt0aGlzLnJlc3VsdC5sZW5ndGggLSAxXTsgLy8gQ3JlYXRlIHRoZSByZXN1bHQ6IHR3byAiYXZlcmFnZSIgZnJpY3Rpb24gZXF1YXRpb25zCgogICAgICBpZiAoIXRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChjLCB0aGlzLmZyaWN0aW9uUmVzdWx0KSB8fCBudW1Db250YWN0cyA9PT0gMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgZjEgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMl07CiAgICAgIGNvbnN0IGYyID0gdGhpcy5mcmljdGlvblJlc3VsdFt0aGlzLmZyaWN0aW9uUmVzdWx0Lmxlbmd0aCAtIDFdOwogICAgICBhdmVyYWdlTm9ybWFsLnNldFplcm8oKTsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEuc2V0WmVybygpOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi5zZXRaZXJvKCk7CiAgICAgIGNvbnN0IGJvZHlBID0gYy5iaTsKICAgICAgYy5iajsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBudW1Db250YWN0czsgaSsrKSB7CiAgICAgICAgYyA9IHRoaXMucmVzdWx0W3RoaXMucmVzdWx0Lmxlbmd0aCAtIDEgLSBpXTsKCiAgICAgICAgaWYgKGMuYmkgIT09IGJvZHlBKSB7CiAgICAgICAgICBhdmVyYWdlTm9ybWFsLnZhZGQoYy5uaSwgYXZlcmFnZU5vcm1hbCk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRBKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnZhZGQoYy5yaiwgYXZlcmFnZUNvbnRhY3RQb2ludEIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhdmVyYWdlTm9ybWFsLnZzdWIoYy5uaSwgYXZlcmFnZU5vcm1hbCk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS52YWRkKGMucmosIGF2ZXJhZ2VDb250YWN0UG9pbnRBKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnZhZGQoYy5yaSwgYXZlcmFnZUNvbnRhY3RQb2ludEIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgaW52TnVtQ29udGFjdHMgPSAxIC8gbnVtQ29udGFjdHM7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaSk7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaik7CiAgICAgIGYyLnJpLmNvcHkoZjEucmkpOyAvLyBTaG91bGQgYmUgdGhlIHNhbWUKCiAgICAgIGYyLnJqLmNvcHkoZjEucmopOwogICAgICBhdmVyYWdlTm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICBhdmVyYWdlTm9ybWFsLnRhbmdlbnRzKGYxLnQsIGYyLnQpOyAvLyByZXR1cm4gZXE7CiAgICB9CiAgICAvKioKICAgICAqIEdlbmVyYXRlIGFsbCBjb250YWN0cyBiZXR3ZWVuIGEgbGlzdCBvZiBib2R5IHBhaXJzCiAgICAgKiBAcGFyYW0gcDEgQXJyYXkgb2YgYm9keSBpbmRpY2VzCiAgICAgKiBAcGFyYW0gcDIgQXJyYXkgb2YgYm9keSBpbmRpY2VzCiAgICAgKiBAcGFyYW0gcmVzdWx0IEFycmF5IHRvIHN0b3JlIGdlbmVyYXRlZCBjb250YWN0cwogICAgICogQHBhcmFtIG9sZGNvbnRhY3RzIE9wdGlvbmFsLiBBcnJheSBvZiByZXVzYWJsZSBjb250YWN0IG9iamVjdHMKICAgICAqLwoKCiAgICBnZXRDb250YWN0cyhwMSwgcDIsIHdvcmxkLCByZXN1bHQsIG9sZGNvbnRhY3RzLCBmcmljdGlvblJlc3VsdCwgZnJpY3Rpb25Qb29sKSB7CiAgICAgIC8vIFNhdmUgb2xkIGNvbnRhY3Qgb2JqZWN0cwogICAgICB0aGlzLmNvbnRhY3RQb2ludFBvb2wgPSBvbGRjb250YWN0czsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUG9vbCA9IGZyaWN0aW9uUG9vbDsKICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBmcmljdGlvblJlc3VsdDsKICAgICAgY29uc3QgcWkgPSB0bXBRdWF0MTsKICAgICAgY29uc3QgcWogPSB0bXBRdWF0MjsKICAgICAgY29uc3QgeGkgPSB0bXBWZWMxOwogICAgICBjb25zdCB4aiA9IHRtcFZlYzI7CgogICAgICBmb3IgKGxldCBrID0gMCwgTiA9IHAxLmxlbmd0aDsgayAhPT0gTjsgaysrKSB7CiAgICAgICAgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGJvZGllcwogICAgICAgIGNvbnN0IGJpID0gcDFba107CiAgICAgICAgY29uc3QgYmogPSBwMltrXTsgLy8gR2V0IGNvbnRhY3QgbWF0ZXJpYWwKCiAgICAgICAgbGV0IGJvZHlDb250YWN0TWF0ZXJpYWwgPSBudWxsOwoKICAgICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHsKICAgICAgICAgIGJvZHlDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5nZXRDb250YWN0TWF0ZXJpYWwoYmkubWF0ZXJpYWwsIGJqLm1hdGVyaWFsKSB8fCBudWxsOwogICAgICAgIH0KCiAgICAgICAgY29uc3QganVzdFRlc3QgPSBiaS50eXBlICYgQm9keS5LSU5FTUFUSUMgJiYgYmoudHlwZSAmIEJvZHkuU1RBVElDIHx8IGJpLnR5cGUgJiBCb2R5LlNUQVRJQyAmJiBiai50eXBlICYgQm9keS5LSU5FTUFUSUMgfHwgYmkudHlwZSAmIEJvZHkuS0lORU1BVElDICYmIGJqLnR5cGUgJiBCb2R5LktJTkVNQVRJQzsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaS5zaGFwZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGJpLnF1YXRlcm5pb24ubXVsdChiaS5zaGFwZU9yaWVudGF0aW9uc1tpXSwgcWkpOwogICAgICAgICAgYmkucXVhdGVybmlvbi52bXVsdChiaS5zaGFwZU9mZnNldHNbaV0sIHhpKTsKICAgICAgICAgIHhpLnZhZGQoYmkucG9zaXRpb24sIHhpKTsKICAgICAgICAgIGNvbnN0IHNpID0gYmkuc2hhcGVzW2ldOwoKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYmouc2hhcGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIC8vIENvbXB1dGUgd29ybGQgdHJhbnNmb3JtIG9mIHNoYXBlcwogICAgICAgICAgICBiai5xdWF0ZXJuaW9uLm11bHQoYmouc2hhcGVPcmllbnRhdGlvbnNbal0sIHFqKTsKICAgICAgICAgICAgYmoucXVhdGVybmlvbi52bXVsdChiai5zaGFwZU9mZnNldHNbal0sIHhqKTsKICAgICAgICAgICAgeGoudmFkZChiai5wb3NpdGlvbiwgeGopOwogICAgICAgICAgICBjb25zdCBzaiA9IGJqLnNoYXBlc1tqXTsKCiAgICAgICAgICAgIGlmICghKHNpLmNvbGxpc2lvbkZpbHRlck1hc2sgJiBzai5jb2xsaXNpb25GaWx0ZXJHcm91cCAmJiBzai5jb2xsaXNpb25GaWx0ZXJNYXNrICYgc2kuY29sbGlzaW9uRmlsdGVyR3JvdXApKSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfSAvLyBHZXQgY29sbGlzaW9uIG1hdGVyaWFsCgoKICAgICAgICAgICAgbGV0IHNoYXBlQ29udGFjdE1hdGVyaWFsID0gbnVsbDsKCiAgICAgICAgICAgIGlmIChzaS5tYXRlcmlhbCAmJiBzai5tYXRlcmlhbCkgewogICAgICAgICAgICAgIHNoYXBlQ29udGFjdE1hdGVyaWFsID0gd29ybGQuZ2V0Q29udGFjdE1hdGVyaWFsKHNpLm1hdGVyaWFsLCBzai5tYXRlcmlhbCkgfHwgbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsID0gc2hhcGVDb250YWN0TWF0ZXJpYWwgfHwgYm9keUNvbnRhY3RNYXRlcmlhbCB8fCB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOyAvLyBHZXQgY29udGFjdHMKCiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVySW5kZXggPSBzaS50eXBlIHwgc2oudHlwZTsKICAgICAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzW3Jlc29sdmVySW5kZXhdOwoKICAgICAgICAgICAgaWYgKHJlc29sdmVyKSB7CiAgICAgICAgICAgICAgbGV0IHJldHZhbCA9IGZhbHNlOyAvLyBUTyBETzogaW52ZXN0aWdhdGUgd2h5IHNwaGVyZVBhcnRpY2xlIGFuZCBjb252ZXhQYXJ0aWNsZQogICAgICAgICAgICAgIC8vIHJlc29sdmVycyBleHBlY3Qgc2kgYW5kIHNqIHNoYXBlcyB0byBiZSBpbiByZXZlcnNlIG9yZGVyCiAgICAgICAgICAgICAgLy8gKGkuZS4gbGFyZ2VyIGludGVnZXIgdmFsdWUgdHlwZSBmaXJzdCBpbnN0ZWFkIG9mIHNtYWxsZXIgZmlyc3QpCgogICAgICAgICAgICAgIGlmIChzaS50eXBlIDwgc2oudHlwZSkgewogICAgICAgICAgICAgICAgcmV0dmFsID0gcmVzb2x2ZXIuY2FsbCh0aGlzLCBzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAocmV0dmFsICYmIGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICAvLyBSZWdpc3RlciBvdmVybGFwCiAgICAgICAgICAgICAgICB3b3JsZC5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7CiAgICAgICAgICAgICAgICB3b3JsZC5ib2R5T3ZlcmxhcEtlZXBlci5zZXQoYmkuaWQsIGJqLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVTcGhlcmUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgcmV0dXJuIHhpLmRpc3RhbmNlU3F1YXJlZCh4aikgPCAoc2kucmFkaXVzICsgc2oucmFkaXVzKSAqKiAyOwogICAgICB9IC8vIFdlIHdpbGwgaGF2ZSBvbmx5IG9uZSBjb250YWN0IGluIHRoaXMgY2FzZQoKCiAgICAgIGNvbnN0IGNvbnRhY3RFcSA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7IC8vIENvbnRhY3Qgbm9ybWFsCgogICAgICB4ai52c3ViKHhpLCBjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEubmkubm9ybWFsaXplKCk7IC8vIENvbnRhY3QgcG9pbnQgbG9jYXRpb25zCgogICAgICBjb250YWN0RXEucmkuY29weShjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEucmouY29weShjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEucmkuc2NhbGUoc2kucmFkaXVzLCBjb250YWN0RXEucmkpOwogICAgICBjb250YWN0RXEucmouc2NhbGUoLXNqLnJhZGl1cywgY29udGFjdEVxLnJqKTsKICAgICAgY29udGFjdEVxLnJpLnZhZGQoeGksIGNvbnRhY3RFcS5yaSk7CiAgICAgIGNvbnRhY3RFcS5yaS52c3ViKGJpLnBvc2l0aW9uLCBjb250YWN0RXEucmkpOwogICAgICBjb250YWN0RXEucmoudmFkZCh4aiwgY29udGFjdEVxLnJqKTsKICAgICAgY29udGFjdEVxLnJqLnZzdWIoYmoucG9zaXRpb24sIGNvbnRhY3RFcS5yaik7CiAgICAgIHRoaXMucmVzdWx0LnB1c2goY29udGFjdEVxKTsKICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcSwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICB9CgogICAgc3BoZXJlUGxhbmUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgLy8gV2Ugd2lsbCBoYXZlIG9uZSBjb250YWN0IGluIHRoaXMgY2FzZQogICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgIHIubmkuc2V0KDAsIDAsIDEpOwogICAgICBxai52bXVsdChyLm5pLCByLm5pKTsKICAgICAgci5uaS5uZWdhdGUoci5uaSk7IC8vIGJvZHkgaSBpcyB0aGUgc3BoZXJlLCBmbGlwIG5vcm1hbAoKICAgICAgci5uaS5ub3JtYWxpemUoKTsgLy8gTmVlZGVkPwogICAgICAvLyBWZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIGNvbnRhY3QgcG9pbnQKCiAgICAgIHIubmkuc2NhbGUoc2kucmFkaXVzLCByLnJpKTsgLy8gUHJvamVjdCBkb3duIHNwaGVyZSBvbiBwbGFuZQoKICAgICAgeGkudnN1Yih4aiwgcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlKTsKICAgICAgci5uaS5zY2FsZShyLm5pLmRvdChwb2ludF9vbl9wbGFuZV90b19zcGhlcmUpLCBwbGFuZV90b19zcGhlcmVfb3J0aG8pOwogICAgICBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUudnN1YihwbGFuZV90b19zcGhlcmVfb3J0aG8sIHIucmopOyAvLyBUaGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byBwbGFuZQoKICAgICAgaWYgKC1wb2ludF9vbl9wbGFuZV90b19zcGhlcmUuZG90KHIubmkpIDw9IHNpLnJhZGl1cykgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5CgoKICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgY29uc3QgcmogPSByLnJqOwogICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIGJveEJveChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2oubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4KHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBzcGhlcmVCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7IC8vIHdlIHJlZmVyIHRvIHRoZSBib3ggYXMgYm9keSBqCgogICAgICBjb25zdCBzaWRlcyA9IHNwaGVyZUJveF9zaWRlczsKICAgICAgeGkudnN1Yih4aiwgYm94X3RvX3NwaGVyZSk7CiAgICAgIHNqLmdldFNpZGVOb3JtYWxzKHNpZGVzLCBxaik7CiAgICAgIGNvbnN0IFIgPSBzaS5yYWRpdXM7CiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOyAvLyBTdG9yZSB0aGUgcmVzdWx0aW5nIHNpZGUgcGVuZXRyYXRpb24gaW5mbwoKICAgICAgY29uc3Qgc2lkZV9ucyA9IHNwaGVyZUJveF9zaWRlX25zOwogICAgICBjb25zdCBzaWRlX25zMSA9IHNwaGVyZUJveF9zaWRlX25zMTsKICAgICAgY29uc3Qgc2lkZV9uczIgPSBzcGhlcmVCb3hfc2lkZV9uczI7CiAgICAgIGxldCBzaWRlX2ggPSBudWxsOwogICAgICBsZXQgc2lkZV9wZW5ldHJhdGlvbnMgPSAwOwogICAgICBsZXQgc2lkZV9kb3QxID0gMDsKICAgICAgbGV0IHNpZGVfZG90MiA9IDA7CiAgICAgIGxldCBzaWRlX2Rpc3RhbmNlID0gbnVsbDsKCiAgICAgIGZvciAobGV0IGlkeCA9IDAsIG5zaWRlcyA9IHNpZGVzLmxlbmd0aDsgaWR4ICE9PSBuc2lkZXMgJiYgZm91bmQgPT09IGZhbHNlOyBpZHgrKykgewogICAgICAgIC8vIEdldCB0aGUgcGxhbmUgc2lkZSBub3JtYWwgKG5zKQogICAgICAgIGNvbnN0IG5zID0gc3BoZXJlQm94X25zOwogICAgICAgIG5zLmNvcHkoc2lkZXNbaWR4XSk7CiAgICAgICAgY29uc3QgaCA9IG5zLmxlbmd0aCgpOwogICAgICAgIG5zLm5vcm1hbGl6ZSgpOyAvLyBUaGUgbm9ybWFsL2Rpc3RhbmNlIGRvdCBwcm9kdWN0IHRlbGxzIHdoaWNoIHNpZGUgb2YgdGhlIHBsYW5lIHdlIGFyZQoKICAgICAgICBjb25zdCBkb3QgPSBib3hfdG9fc3BoZXJlLmRvdChucyk7CgogICAgICAgIGlmIChkb3QgPCBoICsgUiAmJiBkb3QgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgdGhlIG90aGVyIHR3byBkaW1lbnNpb25zCiAgICAgICAgICBjb25zdCBuczEgPSBzcGhlcmVCb3hfbnMxOwogICAgICAgICAgY29uc3QgbnMyID0gc3BoZXJlQm94X25zMjsKICAgICAgICAgIG5zMS5jb3B5KHNpZGVzWyhpZHggKyAxKSAlIDNdKTsKICAgICAgICAgIG5zMi5jb3B5KHNpZGVzWyhpZHggKyAyKSAlIDNdKTsKICAgICAgICAgIGNvbnN0IGgxID0gbnMxLmxlbmd0aCgpOwogICAgICAgICAgY29uc3QgaDIgPSBuczIubGVuZ3RoKCk7CiAgICAgICAgICBuczEubm9ybWFsaXplKCk7CiAgICAgICAgICBuczIubm9ybWFsaXplKCk7CiAgICAgICAgICBjb25zdCBkb3QxID0gYm94X3RvX3NwaGVyZS5kb3QobnMxKTsKICAgICAgICAgIGNvbnN0IGRvdDIgPSBib3hfdG9fc3BoZXJlLmRvdChuczIpOwoKICAgICAgICAgIGlmIChkb3QxIDwgaDEgJiYgZG90MSA+IC1oMSAmJiBkb3QyIDwgaDIgJiYgZG90MiA+IC1oMikgewogICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5hYnMoZG90IC0gaCAtIFIpOwoKICAgICAgICAgICAgaWYgKHNpZGVfZGlzdGFuY2UgPT09IG51bGwgfHwgZGlzdCA8IHNpZGVfZGlzdGFuY2UpIHsKICAgICAgICAgICAgICBzaWRlX2Rpc3RhbmNlID0gZGlzdDsKICAgICAgICAgICAgICBzaWRlX2RvdDEgPSBkb3QxOwogICAgICAgICAgICAgIHNpZGVfZG90MiA9IGRvdDI7CiAgICAgICAgICAgICAgc2lkZV9oID0gaDsKICAgICAgICAgICAgICBzaWRlX25zLmNvcHkobnMpOwogICAgICAgICAgICAgIHNpZGVfbnMxLmNvcHkobnMxKTsKICAgICAgICAgICAgICBzaWRlX25zMi5jb3B5KG5zMik7CiAgICAgICAgICAgICAgc2lkZV9wZW5ldHJhdGlvbnMrKzsKCiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChzaWRlX3BlbmV0cmF0aW9ucykgewogICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICBzaWRlX25zLnNjYWxlKC1SLCByLnJpKTsgLy8gU3BoZXJlIHIKCiAgICAgICAgci5uaS5jb3B5KHNpZGVfbnMpOwogICAgICAgIHIubmkubmVnYXRlKHIubmkpOyAvLyBOb3JtYWwgc2hvdWxkIGJlIG91dCBvZiBzcGhlcmUKCiAgICAgICAgc2lkZV9ucy5zY2FsZShzaWRlX2gsIHNpZGVfbnMpOwogICAgICAgIHNpZGVfbnMxLnNjYWxlKHNpZGVfZG90MSwgc2lkZV9uczEpOwogICAgICAgIHNpZGVfbnMudmFkZChzaWRlX25zMSwgc2lkZV9ucyk7CiAgICAgICAgc2lkZV9uczIuc2NhbGUoc2lkZV9kb3QyLCBzaWRlX25zMik7CiAgICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMyLCByLnJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfSAvLyBDaGVjayBjb3JuZXJzCgoKICAgICAgbGV0IHJqID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXI7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gMiAmJiAhZm91bmQ7IGorKykgewogICAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSAyICYmICFmb3VuZDsgaysrKSB7CiAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCAhPT0gMiAmJiAhZm91bmQ7IGwrKykgewogICAgICAgICAgICByai5zZXQoMCwgMCwgMCk7CgogICAgICAgICAgICBpZiAoaikgewogICAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMF0sIHJqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByai52c3ViKHNpZGVzWzBdLCByaik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChrKSB7CiAgICAgICAgICAgICAgcmoudmFkZChzaWRlc1sxXSwgcmopOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMV0sIHJqKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGwpIHsKICAgICAgICAgICAgICByai52YWRkKHNpZGVzWzJdLCByaik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmoudnN1YihzaWRlc1syXSwgcmopOwogICAgICAgICAgICB9IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lcgoKCiAgICAgICAgICAgIHhqLnZhZGQocmosIHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgICBzcGhlcmVfdG9fY29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICAgICAgaWYgKHNwaGVyZV90b19jb3JuZXIubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHsKICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgICAgIHIucmkuY29weShzcGhlcmVfdG9fY29ybmVyKTsKICAgICAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgICAgICByLnJpLnNjYWxlKFIsIHIucmkpOwogICAgICAgICAgICAgIHIucmouY29weShyaik7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHYzcG9vbC5yZWxlYXNlKHJqKTsKICAgICAgcmogPSBudWxsOyAvLyBDaGVjayBlZGdlcwoKICAgICAgY29uc3QgZWRnZVRhbmdlbnQgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IGVkZ2VDZW50ZXIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IHIgPSB2M3Bvb2wuZ2V0KCk7IC8vIHIgPSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyCgogICAgICBjb25zdCBvcnRob2dvbmFsID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBkaXN0ID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBOc2lkZXMgPSBzaWRlcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gTnNpZGVzICYmICFmb3VuZDsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5zaWRlcyAmJiAhZm91bmQ7IGsrKykgewogICAgICAgICAgaWYgKGogJSAzICE9PSBrICUgMykgewogICAgICAgICAgICAvLyBHZXQgZWRnZSB0YW5nZW50CiAgICAgICAgICAgIHNpZGVzW2tdLmNyb3NzKHNpZGVzW2pdLCBlZGdlVGFuZ2VudCk7CiAgICAgICAgICAgIGVkZ2VUYW5nZW50Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBzaWRlc1tqXS52YWRkKHNpZGVzW2tdLCBlZGdlQ2VudGVyKTsKICAgICAgICAgICAgci5jb3B5KHhpKTsKICAgICAgICAgICAgci52c3ViKGVkZ2VDZW50ZXIsIHIpOwogICAgICAgICAgICByLnZzdWIoeGosIHIpOwogICAgICAgICAgICBjb25zdCBvcnRob25vcm0gPSByLmRvdChlZGdlVGFuZ2VudCk7IC8vIGRpc3RhbmNlIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb24KCiAgICAgICAgICAgIGVkZ2VUYW5nZW50LnNjYWxlKG9ydGhvbm9ybSwgb3J0aG9nb25hbCk7IC8vIFZlY3RvciBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIgaW4gdGhlIHRhbmdlbnQgZGlyZWN0aW9uCiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRoaXJkIHNpZGUgb3J0aG9nb25hbCB0byB0aGlzIG9uZQoKICAgICAgICAgICAgbGV0IGwgPSAwOwoKICAgICAgICAgICAgd2hpbGUgKGwgPT09IGogJSAzIHx8IGwgPT09IGsgJSAzKSB7CiAgICAgICAgICAgICAgbCsrOwogICAgICAgICAgICB9IC8vIHZlYyBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBwcm9qZWN0ZWQgdG8gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gdGhlIGVkZ2UgdGFuZ2VudAoKCiAgICAgICAgICAgIGRpc3QuY29weSh4aSk7CiAgICAgICAgICAgIGRpc3QudnN1YihvcnRob2dvbmFsLCBkaXN0KTsKICAgICAgICAgICAgZGlzdC52c3ViKGVkZ2VDZW50ZXIsIGRpc3QpOwogICAgICAgICAgICBkaXN0LnZzdWIoeGosIGRpc3QpOyAvLyBEaXN0YW5jZXMgaW4gdGFuZ2VudCBkaXJlY3Rpb24gYW5kIGRpc3RhbmNlIGluIHRoZSBwbGFuZSBvcnRob2dvbmFsIHRvIGl0CgogICAgICAgICAgICBjb25zdCB0ZGlzdCA9IE1hdGguYWJzKG9ydGhvbm9ybSk7CiAgICAgICAgICAgIGNvbnN0IG5kaXN0ID0gZGlzdC5sZW5ndGgoKTsKCiAgICAgICAgICAgIGlmICh0ZGlzdCA8IHNpZGVzW2xdLmxlbmd0aCgpICYmIG5kaXN0IDwgUikgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgY29uc3QgcmVzID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgICBlZGdlQ2VudGVyLnZhZGQob3J0aG9nb25hbCwgcmVzLnJqKTsgLy8gYm94IHJqCgogICAgICAgICAgICAgIHJlcy5yai5jb3B5KHJlcy5yaik7CiAgICAgICAgICAgICAgZGlzdC5uZWdhdGUocmVzLm5pKTsKICAgICAgICAgICAgICByZXMubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLmNvcHkocmVzLnJqKTsKICAgICAgICAgICAgICByZXMucmkudmFkZCh4aiwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkudnN1Yih4aSwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLnNjYWxlKFIsIHJlcy5yaSk7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHJlcy5yaS52YWRkKHhpLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS52c3ViKGJpLnBvc2l0aW9uLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yai52YWRkKHhqLCByZXMucmopOwogICAgICAgICAgICAgIHJlcy5yai52c3ViKGJqLnBvc2l0aW9uLCByZXMucmopOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocmVzKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QocmVzLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdjNwb29sLnJlbGVhc2UoZWRnZVRhbmdlbnQsIGVkZ2VDZW50ZXIsIHIsIG9ydGhvZ29uYWwsIGRpc3QpOwogICAgfQoKICAgIHBsYW5lQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNqLm1hdGVyaWFsOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmlkID0gc2ouaWQ7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4KHNpLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIGNvbnZleENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCwgZmFjZUxpc3RBLCBmYWNlTGlzdEIpIHsKICAgICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwoKICAgICAgaWYgKHhpLmRpc3RhbmNlVG8oeGopID4gc2kuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzai5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHNpLmZpbmRTZXBhcmF0aW5nQXhpcyhzaiwgeGksIHFpLCB4aiwgcWosIHNlcEF4aXMsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSkgewogICAgICAgIGNvbnN0IHJlcyA9IFtdOwogICAgICAgIGNvbnN0IHEgPSBjb252ZXhDb252ZXhfcTsKICAgICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGksIHFpLCBzaiwgeGosIHFqLCBzZXBBeGlzLCAtMTAwLCAxMDAsIHJlcyk7CiAgICAgICAgbGV0IG51bUNvbnRhY3RzID0gMDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IHJlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgICAgY29uc3QgcmogPSByLnJqOwogICAgICAgICAgc2VwQXhpcy5uZWdhdGUoci5uaSk7CiAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgICAgICAgIHEuc2NhbGUocmVzW2pdLmRlcHRoLCBxKTsKICAgICAgICAgIHJlc1tqXS5wb2ludC52YWRkKHEsIHJpKTsKICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTsgLy8gQ29udGFjdCBwb2ludHMgYXJlIGluIHdvcmxkIGNvb3JkaW5hdGVzLiBUcmFuc2Zvcm0gYmFjayB0byByZWxhdGl2ZQoKICAgICAgICAgIHJpLnZzdWIoeGksIHJpKTsKICAgICAgICAgIHJqLnZzdWIoeGosIHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgbnVtQ29udGFjdHMrKzsKCiAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24pIHsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gJiYgbnVtQ29udGFjdHMpIHsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3BoZXJlQ29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IHYzcG9vbCA9IHRoaXMudjNwb29sOwogICAgICB4aS52c3ViKHhqLCBjb252ZXhfdG9fc3BoZXJlKTsKICAgICAgY29uc3Qgbm9ybWFscyA9IHNqLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBmYWNlcyA9IHNqLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0cyA9IHNqLnZlcnRpY2VzOwogICAgICBjb25zdCBSID0gc2kucmFkaXVzOyAvLyAgICAgcmV0dXJuOwogICAgICAvLyB9CgogICAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gQ2hlY2sgY29ybmVycwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHZlcnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBXb3JsZCBwb3NpdGlvbiBvZiBjb3JuZXIKCiAgICAgICAgY29uc3Qgd29ybGRDb3JuZXIgPSBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXI7CiAgICAgICAgcWoudm11bHQodiwgd29ybGRDb3JuZXIpOwogICAgICAgIHhqLnZhZGQod29ybGRDb3JuZXIsIHdvcmxkQ29ybmVyKTsKICAgICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyOwogICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICBpZiAoc3BoZXJlX3RvX2Nvcm5lci5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgci5yaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7CiAgICAgICAgICB3b3JsZENvcm5lci52c3ViKHhqLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSAvLyBDaGVjayBzaWRlIChwbGFuZSkgaW50ZXJzZWN0aW9ucwoKCiAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBmYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlcyAmJiBmb3VuZCA9PT0gZmFsc2U7IGkrKykgewogICAgICAgIGNvbnN0IG5vcm1hbCA9IG5vcm1hbHNbaV07CiAgICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ldOyAvLyBHZXQgd29ybGQtdHJhbnNmb3JtZWQgbm9ybWFsIG9mIHRoZSBmYWNlCgogICAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gc3BoZXJlQ29udmV4X3dvcmxkTm9ybWFsOwogICAgICAgIHFqLnZtdWx0KG5vcm1hbCwgd29ybGROb3JtYWwpOyAvLyBHZXQgYSB3b3JsZCB2ZXJ0ZXggZnJvbSB0aGUgZmFjZQoKICAgICAgICBjb25zdCB3b3JsZFBvaW50ID0gc3BoZXJlQ29udmV4X3dvcmxkUG9pbnQ7CiAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVswXV0sIHdvcmxkUG9pbnQpOwogICAgICAgIHdvcmxkUG9pbnQudmFkZCh4aiwgd29ybGRQb2ludCk7IC8vIEdldCBhIHBvaW50IG9uIHRoZSBzcGhlcmUsIGNsb3Nlc3QgdG8gdGhlIGZhY2Ugbm9ybWFsCgogICAgICAgIGNvbnN0IHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSA9IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmU7CiAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7CiAgICAgICAgeGkudmFkZCh3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7IC8vIFZlY3RvciBmcm9tIGEgZmFjZSBwb2ludCB0byB0aGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgc3BoZXJlCgogICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gc3BoZXJlQ29udmV4X3BlbmV0cmF0aW9uVmVjOwogICAgICAgIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZS52c3ViKHdvcmxkUG9pbnQsIHBlbmV0cmF0aW9uVmVjKTsgLy8gVGhlIHBlbmV0cmF0aW9uLiBOZWdhdGl2ZSB2YWx1ZSBtZWFucyBvdmVybGFwLgoKICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uVmVjLmRvdCh3b3JsZE5vcm1hbCk7CiAgICAgICAgY29uc3Qgd29ybGRQb2ludFRvU3BoZXJlID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvV29ybGRQb2ludDsKICAgICAgICB4aS52c3ViKHdvcmxkUG9pbnQsIHdvcmxkUG9pbnRUb1NwaGVyZSk7CgogICAgICAgIGlmIChwZW5ldHJhdGlvbiA8IDAgJiYgd29ybGRQb2ludFRvU3BoZXJlLmRvdCh3b3JsZE5vcm1hbCkgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgaWYgdGhlIHNwaGVyZSBpcyBpbnNpZGUgdGhlIGZhY2UgcG9seWdvbgogICAgICAgICAgY29uc3QgZmFjZVZlcnRzID0gW107IC8vIEZhY2UgdmVydGljZXMsIGluIHdvcmxkIGNvb3JkcwoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOdmVydHMgPSBmYWNlLmxlbmd0aDsgaiAhPT0gTnZlcnRzOyBqKyspIHsKICAgICAgICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2Vbal1dLCB3b3JsZFZlcnRleCk7CiAgICAgICAgICAgIHhqLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICAgICAgZmFjZVZlcnRzLnB1c2god29ybGRWZXJ0ZXgpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChwb2ludEluUG9seWdvbihmYWNlVmVydHMsIHdvcmxkTm9ybWFsLCB4aSkpIHsKICAgICAgICAgICAgLy8gSXMgdGhlIHNwaGVyZSBjZW50ZXIgaW4gdGhlIGZhY2UgcG9seWdvbj8KICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCByLnJpKTsgLy8gQ29udGFjdCBvZmZzZXQsIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0CgogICAgICAgICAgICB3b3JsZE5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBwb2ludGluZyBvdXQgb2Ygc3BoZXJlCgogICAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblZlYzIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1wZW5ldHJhdGlvbiwgcGVuZXRyYXRpb25WZWMyKTsKICAgICAgICAgICAgY29uc3QgcGVuZXRyYXRpb25TcGhlcmVQb2ludCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOyAvL3hpLnZzdWIoeGopLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCkudmFkZChwZW5ldHJhdGlvblZlYzIgLCByLnJqKTsKCiAgICAgICAgICAgIHhpLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCwgci5yaik7CiAgICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblZlYzIsIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblZlYzIpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblNwaGVyZVBvaW50KTsKICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOyAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgogICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybjsgLy8gV2Ugb25seSBleHBlY3QgKm9uZSogZmFjZSBjb250YWN0CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBFZGdlPwogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZmFjZS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIC8vIEdldCB0d28gd29ybGQgdHJhbnNmb3JtZWQgdmVydGljZXMKICAgICAgICAgICAgICBjb25zdCB2MSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MiA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWyhqICsgMSkgJSBmYWNlLmxlbmd0aF1dLCB2MSk7CiAgICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDIpICUgZmFjZS5sZW5ndGhdXSwgdjIpOwogICAgICAgICAgICAgIHhqLnZhZGQodjEsIHYxKTsKICAgICAgICAgICAgICB4ai52YWRkKHYyLCB2Mik7IC8vIENvbnN0cnVjdCBlZGdlIHZlY3RvcgoKICAgICAgICAgICAgICBjb25zdCBlZGdlID0gc3BoZXJlQ29udmV4X2VkZ2U7CiAgICAgICAgICAgICAgdjIudnN1Yih2MSwgZWRnZSk7IC8vIENvbnN0cnVjdCB0aGUgc2FtZSB2ZWN0b3IsIGJ1dCBub3JtYWxpemVkCgogICAgICAgICAgICAgIGNvbnN0IGVkZ2VVbml0ID0gc3BoZXJlQ29udmV4X2VkZ2VVbml0OwogICAgICAgICAgICAgIGVkZ2UudW5pdChlZGdlVW5pdCk7IC8vIHAgaXMgeGkgcHJvamVjdGVkIG9udG8gdGhlIGVkZ2UKCiAgICAgICAgICAgICAgY29uc3QgcCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MV90b194aSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICB4aS52c3ViKHYxLCB2MV90b194aSk7CiAgICAgICAgICAgICAgY29uc3QgZG90ID0gdjFfdG9feGkuZG90KGVkZ2VVbml0KTsKICAgICAgICAgICAgICBlZGdlVW5pdC5zY2FsZShkb3QsIHApOwogICAgICAgICAgICAgIHAudmFkZCh2MSwgcCk7IC8vIENvbXB1dGUgYSB2ZWN0b3IgZnJvbSBwIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZQoKICAgICAgICAgICAgICBjb25zdCB4aV90b19wID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHAudnN1Yih4aSwgeGlfdG9fcCk7IC8vIENvbGxpc2lvbiBpZiB0aGUgZWRnZS1zcGhlcmUgZGlzdGFuY2UgaXMgbGVzcyB0aGFuIHRoZSByYWRpdXMKICAgICAgICAgICAgICAvLyBBTkQgaWYgcCBpcyBpbiBiZXR3ZWVuIHYxIGFuZCB2MgoKICAgICAgICAgICAgICBpZiAoZG90ID4gMCAmJiBkb3QgKiBkb3QgPCBlZGdlLmxlbmd0aFNxdWFyZWQoKSAmJiB4aV90b19wLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7CiAgICAgICAgICAgICAgICAvLyBDb2xsaXNpb24gaWYgdGhlIGVkZ2Utc3BoZXJlIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgcmFkaXVzCiAgICAgICAgICAgICAgICAvLyBFZGdlIGNvbnRhY3QhCiAgICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgICAgICBwLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICAgICAgcC52c3ViKHhpLCByLm5pKTsKICAgICAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgICByLm5pLnNjYWxlKFIsIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShmYWNlVmVydHNbal0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYyKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoeGlfdG9fcCk7CiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MV90b194aSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MSk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHhpX3RvX3ApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcGxhbmVDb252ZXgocGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHBsYW5lUG9zaXRpb24sIGNvbnZleFBvc2l0aW9uLCBwbGFuZVF1YXQsIGNvbnZleFF1YXQsIHBsYW5lQm9keSwgY29udmV4Qm9keSwgc2ksIHNqLCBqdXN0VGVzdCkgewogICAgICAvLyBTaW1wbHkgcmV0dXJuIHRoZSBwb2ludHMgYmVoaW5kIHRoZSBwbGFuZS4KICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSBwbGFuZUNvbnZleF92OwogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IHBsYW5lQ29udmV4X25vcm1hbDsKICAgICAgd29ybGROb3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICBwbGFuZVF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lIG9yaWVudGF0aW9uCgogICAgICBsZXQgbnVtQ29udGFjdHMgPSAwOwogICAgICBjb25zdCByZWxwb3MgPSBwbGFuZUNvbnZleF9yZWxwb3M7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gY29udmV4U2hhcGUudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgY29udmV4IHZlcnRleAogICAgICAgIHdvcmxkVmVydGV4LmNvcHkoY29udmV4U2hhcGUudmVydGljZXNbaV0pOwogICAgICAgIGNvbnZleFF1YXQudm11bHQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICBjb252ZXhQb3NpdGlvbi52YWRkKHdvcmxkVmVydGV4LCB3b3JsZFZlcnRleCk7CiAgICAgICAgd29ybGRWZXJ0ZXgudnN1YihwbGFuZVBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpOwoKICAgICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihwbGFuZUJvZHksIGNvbnZleEJvZHksIHBsYW5lU2hhcGUsIGNvbnZleFNoYXBlLCBzaSwgc2opOyAvLyBHZXQgdmVydGV4IHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBsYW5lQ29udmV4X3Byb2plY3RlZDsKICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpLCBwcm9qZWN0ZWQpOwogICAgICAgICAgd29ybGRWZXJ0ZXgudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7CiAgICAgICAgICBwcm9qZWN0ZWQudnN1YihwbGFuZVBvc2l0aW9uLCByLnJpKTsgLy8gRnJvbSBwbGFuZSB0byB2ZXJ0ZXggcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgci5uaS5jb3B5KHdvcmxkTm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbCBvdXQgZnJvbSBwbGFuZQogICAgICAgICAgLy8gcmogaXMgbm93IGp1c3QgdGhlIHZlY3RvciBmcm9tIHRoZSBjb252ZXggY2VudGVyIHRvIHRoZSB2ZXJ0ZXgKCiAgICAgICAgICB3b3JsZFZlcnRleC52c3ViKGNvbnZleFBvc2l0aW9uLCByLnJqKTsgLy8gTWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgYm9keQoKICAgICAgICAgIHIucmkudmFkZChwbGFuZVBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai52YWRkKGNvbnZleFBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihjb252ZXhCb2R5LnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICBudW1Db250YWN0cysrOwoKICAgICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikgewogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiAmJiBudW1Db250YWN0cykgewogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgIH0KICAgIH0KCiAgICBib3hDb252ZXgoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlSGVpZ2h0ZmllbGQoc3BoZXJlU2hhcGUsIGhmU2hhcGUsIHNwaGVyZVBvcywgaGZQb3MsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgcmFkaXVzID0gc3BoZXJlU2hhcGUucmFkaXVzOwogICAgICBjb25zdCB3ID0gaGZTaGFwZS5lbGVtZW50U2l6ZTsKICAgICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAyOyAvLyBHZXQgc3BoZXJlIHBvc2l0aW9uIHRvIGhlaWdodGZpZWxkIGxvY2FsIQoKICAgICAgY29uc3QgbG9jYWxTcGhlcmVQb3MgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAxOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUoaGZQb3MsIGhmUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAoKICAgICAgbGV0IGlNaW5YID0gTWF0aC5mbG9vcigobG9jYWxTcGhlcmVQb3MueCAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WCA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueCArIHJhZGl1cykgLyB3KSArIDE7CiAgICAgIGxldCBpTWluWSA9IE1hdGguZmxvb3IoKGxvY2FsU3BoZXJlUG9zLnkgLSByYWRpdXMpIC8gdykgLSAxOwogICAgICBsZXQgaU1heFkgPSBNYXRoLmNlaWwoKGxvY2FsU3BoZXJlUG9zLnkgKyByYWRpdXMpIC8gdykgKyAxOyAvLyBCYWlsIG91dCBpZiB3ZSBhcmUgb3V0IG9mIHRoZSB0ZXJyYWluCgogICAgICBpZiAoaU1heFggPCAwIHx8IGlNYXhZIDwgMCB8fCBpTWluWCA+IGRhdGEubGVuZ3RoIHx8IGlNaW5ZID4gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gQ2xhbXAgaW5kZXggdG8gZWRnZXMKCgogICAgICBpZiAoaU1pblggPCAwKSB7CiAgICAgICAgaU1pblggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFggPCAwKSB7CiAgICAgICAgaU1heFggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPCAwKSB7CiAgICAgICAgaU1pblkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFkgPCAwKSB7CiAgICAgICAgaU1heFkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWluWCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhYID49IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaU1heFggPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNYXhZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPj0gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICBpTWluWSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgY29uc3QgbWluTWF4ID0gW107CiAgICAgIGhmU2hhcGUuZ2V0UmVjdE1pbk1heChpTWluWCwgaU1pblksIGlNYXhYLCBpTWF4WSwgbWluTWF4KTsKICAgICAgY29uc3QgbWluID0gbWluTWF4WzBdOwogICAgICBjb25zdCBtYXggPSBtaW5NYXhbMV07IC8vIEJhaWwgb3V0IGlmIHdlIGNhbid0IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94CgogICAgICBpZiAobG9jYWxTcGhlcmVQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbFNwaGVyZVBvcy56ICsgcmFkaXVzIDwgbWluKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsKCiAgICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7CiAgICAgICAgICBjb25zdCBudW1Db250YWN0c0JlZm9yZSA9IHJlc3VsdC5sZW5ndGg7CiAgICAgICAgICBsZXQgaW50ZXJzZWN0aW5nID0gZmFsc2U7IC8vIExvd2VyIHRyaWFuZ2xlCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgbnVtQ29udGFjdHMgPSByZXN1bHQubGVuZ3RoIC0gbnVtQ29udGFjdHNCZWZvcmU7CgogICAgICAgICAgaWYgKG51bUNvbnRhY3RzID4gMikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICAvKgogICAgICAgICAgICAvLyBTa2lwIGFsbCBidXQgMQogICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IG51bUNvbnRhY3RzIC0gMTsgaysrKSB7CiAgICAgICAgICAgICAgICByZXN1bHQucG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICovCgogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGJveEhlaWdodGZpZWxkKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4SGVpZ2h0ZmllbGQoY29udmV4U2hhcGUsIGhmU2hhcGUsIGNvbnZleFBvcywgaGZQb3MsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7CiAgICAgIGNvbnN0IHJhZGl1cyA9IGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzOwogICAgICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDI7CiAgICAgIGNvbnN0IGZhY2VMaXN0ID0gY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3Q7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhCgogICAgICBjb25zdCBsb2NhbENvbnZleFBvcyA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDE7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBjb252ZXhQb3MsIGxvY2FsQ29udmV4UG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbENvbnZleFBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhYID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy54ICsgcmFkaXVzKSAvIHcpICsgMTsKICAgICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxDb252ZXhQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxDb252ZXhQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCiAgICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwoKCiAgICAgIGlmIChpTWluWCA8IDApIHsKICAgICAgICBpTWluWCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA8IDApIHsKICAgICAgICBpTWF4WCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA8IDApIHsKICAgICAgICBpTWluWSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA8IDApIHsKICAgICAgICBpTWF4WSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNaW5YID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNaW5ZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBjb25zdCBtaW5NYXggPSBbXTsKICAgICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpOwogICAgICBjb25zdCBtaW4gPSBtaW5NYXhbMF07CiAgICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UncmUgY2FudCB0b3VjaCB0aGUgYm91bmRpbmcgaGVpZ2h0IGJveAoKICAgICAgaWYgKGxvY2FsQ29udmV4UG9zLnogLSByYWRpdXMgPiBtYXggfHwgbG9jYWxDb252ZXhQb3MueiArIHJhZGl1cyA8IG1pbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGxldCBpbnRlcnNlY3RpbmcgPSBmYWxzZTsgLy8gTG93ZXIgdHJpYW5nbGUKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICAvLyBUaGUgbm9ybWFsIGlzIHRoZSB1bml0IHZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gcGFydGljbGUgY2VudGVyCiAgICAgIGNvbnN0IG5vcm1hbCA9IHBhcnRpY2xlU3BoZXJlX25vcm1hbDsKICAgICAgbm9ybWFsLnNldCgwLCAwLCAxKTsKICAgICAgeGkudnN1Yih4aiwgbm9ybWFsKTsKICAgICAgY29uc3QgbGVuZ3RoU3F1YXJlZCA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7CgogICAgICBpZiAobGVuZ3RoU3F1YXJlZCA8PSBzai5yYWRpdXMgKiBzai5yYWRpdXMpIHsKICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgIHIucmouY29weShub3JtYWwpOwogICAgICAgIHIucmouc2NhbGUoc2oucmFkaXVzLCByLnJqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7CiAgICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZQoKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIHBsYW5lUGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVQbGFuZV9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIGJqLnF1YXRlcm5pb24udm11bHQobm9ybWFsLCBub3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUgb3JpZW50YXRpb24KCiAgICAgIGNvbnN0IHJlbHBvcyA9IHBhcnRpY2xlUGxhbmVfcmVscG9zOwogICAgICB4aS52c3ViKGJqLnBvc2l0aW9uLCByZWxwb3MpOwogICAgICBjb25zdCBkb3QgPSBub3JtYWwuZG90KHJlbHBvcyk7CgogICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAoKICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCiAgICAgICAgLy8gR2V0IHBhcnRpY2xlIHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZDsKICAgICAgICBub3JtYWwuc2NhbGUobm9ybWFsLmRvdCh4aSksIHByb2plY3RlZCk7CiAgICAgICAgeGkudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vcHJvamVjdGVkLnZhZGQoYmoucG9zaXRpb24scHJvamVjdGVkKTsKICAgICAgICAvLyByaiBpcyBub3cgdGhlIHByb2plY3RlZCB3b3JsZCBwb3NpdGlvbiBtaW51cyBwbGFuZSBwb3NpdGlvbgoKICAgICAgICByLnJqLmNvcHkocHJvamVjdGVkKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIGJveFBhcnRpY2xlKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGUoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgbGV0IHBlbmV0cmF0ZWRGYWNlSW5kZXggPSAtMTsKICAgICAgY29uc3QgcGVuZXRyYXRlZEZhY2VOb3JtYWwgPSBjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbDsKICAgICAgY29uc3Qgd29ybGRQZW5ldHJhdGlvblZlYyA9IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWM7CiAgICAgIGxldCBtaW5QZW5ldHJhdGlvbiA9IG51bGw7CiAgICAgIGNvbnN0IGxvY2FsID0gY29udmV4UGFydGljbGVfbG9jYWw7CiAgICAgIGxvY2FsLmNvcHkoeGkpOwogICAgICBsb2NhbC52c3ViKHhqLCBsb2NhbCk7IC8vIENvbnZlcnQgcG9zaXRpb24gdG8gcmVsYXRpdmUgdGhlIGNvbnZleCBvcmlnaW4KCiAgICAgIHFqLmNvbmp1Z2F0ZShjcWopOwogICAgICBjcWoudm11bHQobG9jYWwsIGxvY2FsKTsKCiAgICAgIGlmIChzai5wb2ludElzSW5zaWRlKGxvY2FsKSkgewogICAgICAgIGlmIChzai53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIHNqLmNvbXB1dGVXb3JsZFZlcnRpY2VzKHhqLCBxaik7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2oud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlKSB7CiAgICAgICAgICBzai5jb21wdXRlV29ybGRGYWNlTm9ybWFscyhxaik7CiAgICAgICAgfSAvLyBGb3IgZWFjaCB3b3JsZCBwb2x5Z29uIGluIHRoZSBwb2x5aGVkcmEKCgogICAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBzai5mYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlczsgaSsrKSB7CiAgICAgICAgICAvLyBDb25zdHJ1Y3Qgd29ybGQgZmFjZSB2ZXJ0aWNlcwogICAgICAgICAgY29uc3QgdmVydHMgPSBbc2oud29ybGRWZXJ0aWNlc1tzai5mYWNlc1tpXVswXV1dOwogICAgICAgICAgY29uc3Qgbm9ybWFsID0gc2oud29ybGRGYWNlTm9ybWFsc1tpXTsgLy8gQ2hlY2sgaG93IG11Y2ggdGhlIHBhcnRpY2xlIHBlbmV0cmF0ZXMgdGhlIHBvbHlnb24gcGxhbmUuCgogICAgICAgICAgeGkudnN1Yih2ZXJ0c1swXSwgY29udmV4UGFydGljbGVfdmVydGV4VG9QYXJ0aWNsZSk7CiAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IC1ub3JtYWwuZG90KGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUpOwoKICAgICAgICAgIGlmIChtaW5QZW5ldHJhdGlvbiA9PT0gbnVsbCB8fCBNYXRoLmFicyhwZW5ldHJhdGlvbikgPCBNYXRoLmFicyhtaW5QZW5ldHJhdGlvbikpIHsKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1pblBlbmV0cmF0aW9uID0gcGVuZXRyYXRpb247CiAgICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlSW5kZXggPSBpOwogICAgICAgICAgICBwZW5ldHJhdGVkRmFjZU5vcm1hbC5jb3B5KG5vcm1hbCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocGVuZXRyYXRlZEZhY2VJbmRleCAhPT0gLTEpIHsKICAgICAgICAgIC8vIFNldHVwIGNvbnRhY3QKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuc2NhbGUobWluUGVuZXRyYXRpb24sIHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvLyByaiBpcyB0aGUgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBmYWNlCgogICAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52YWRkKHhpLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIHdvcmxkUGVuZXRyYXRpb25WZWMudnN1Yih4aiwgd29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICByLnJqLmNvcHkod29ybGRQZW5ldHJhdGlvblZlYyk7IC8vY29uc3QgcHJvamVjdGVkVG9GYWNlID0geGkudnN1Yih4aikudmFkZCh3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIC8vcHJvamVjdGVkVG9GYWNlLmNvcHkoci5yaik7CiAgICAgICAgICAvL3FqLnZtdWx0KHIucmosci5yaik7CgogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwubmVnYXRlKHIubmkpOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGUKCiAgICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgICBjb25zdCByaiA9IHIucmo7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgcmkudmFkZCh4aSwgcmkpOwogICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS53YXJuKCdQb2ludCBmb3VuZCBpbnNpZGUgY29udmV4LCBidXQgZGlkIG5vdCBmaW5kIHBlbmV0cmF0aW5nIGZhY2UhJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcihoZlNoYXBlLCBjb252ZXhTaGFwZSwgaGZQb3MsIGNvbnZleFBvcywgaGZRdWF0LCBjb252ZXhRdWF0LCBoZkJvZHksIGNvbnZleEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZChjb252ZXhTaGFwZSwgaGZTaGFwZSwgY29udmV4UG9zLCBoZlBvcywgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgcGFydGljbGVDeWxpbmRlcihzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlVHJpbWVzaChzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCBzcGhlcmVQb3MsIHRyaW1lc2hQb3MsIHNwaGVyZVF1YXQsIHRyaW1lc2hRdWF0LCBzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IGVkZ2VWZXJ0ZXhBID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QTsKICAgICAgY29uc3QgZWRnZVZlcnRleEIgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCOwogICAgICBjb25zdCBlZGdlVmVjdG9yID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yOwogICAgICBjb25zdCBlZGdlVmVjdG9yVW5pdCA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvclVuaXQ7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlUG9zID0gc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvczsKICAgICAgY29uc3QgdG1wID0gc3BoZXJlVHJpbWVzaF90bXA7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlQUFCQiA9IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCOwogICAgICBjb25zdCB2MiA9IHNwaGVyZVRyaW1lc2hfdjI7CiAgICAgIGNvbnN0IHJlbHBvcyA9IHNwaGVyZVRyaW1lc2hfcmVscG9zOwogICAgICBjb25zdCB0cmlhbmdsZXMgPSBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlczsgLy8gQ29udmVydCBzcGhlcmUgcG9zaXRpb24gdG8gbG9jYWwgaW4gdGhlIHRyaW1lc2gKCiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgYWFiYiBvZiB0aGUgc3BoZXJlIGxvY2FsbHkgaW4gdGhlIHRyaW1lc2gKCiAgICAgIGNvbnN0IHNwaGVyZVJhZGl1cyA9IHNwaGVyZVNoYXBlLnJhZGl1czsKICAgICAgbG9jYWxTcGhlcmVBQUJCLmxvd2VyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogLSBzcGhlcmVSYWRpdXMpOwogICAgICBsb2NhbFNwaGVyZUFBQkIudXBwZXJCb3VuZC5zZXQobG9jYWxTcGhlcmVQb3MueCArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueSArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueiArIHNwaGVyZVJhZGl1cyk7CiAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZXNJbkFBQkIobG9jYWxTcGhlcmVBQUJCLCB0cmlhbmdsZXMpOyAvL2ZvciAobGV0IGkgPSAwOyBpIDwgdHJpbWVzaFNoYXBlLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB0cmlhbmdsZXMucHVzaChpKTsgLy8gQWxsCiAgICAgIC8vIFZlcnRpY2VzCgogICAgICBjb25zdCB2ID0gc3BoZXJlVHJpbWVzaF92OwogICAgICBjb25zdCByYWRpdXNTcXVhcmVkID0gc3BoZXJlU2hhcGUucmFkaXVzICogc3BoZXJlU2hhcGUucmFkaXVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgal0sIHYpOyAvLyBDaGVjayB2ZXJ0ZXggb3ZlcmxhcCBpbiBzcGhlcmUKCiAgICAgICAgICB2LnZzdWIobG9jYWxTcGhlcmVQb3MsIHJlbHBvcyk7CgogICAgICAgICAgaWYgKHJlbHBvcy5sZW5ndGhTcXVhcmVkKCkgPD0gcmFkaXVzU3F1YXJlZCkgewogICAgICAgICAgICAvLyBTYWZlIHVwCiAgICAgICAgICAgIHYyLmNvcHkodik7CiAgICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOwogICAgICAgICAgICB2LnZzdWIoc3BoZXJlUG9zLCByZWxwb3MpOwoKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgICAgci5uaS5jb3B5KHJlbHBvcyk7CiAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7IC8vIHJpIGlzIHRoZSB2ZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIHRoZSBzcGhlcmUgc3VyZmFjZQoKICAgICAgICAgICAgci5yaS5jb3B5KHIubmkpOwogICAgICAgICAgICByLnJpLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgIHIucmouY29weSh2KTsKICAgICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIENoZWNrIGFsbCBlZGdlcwoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCBlZGdlVmVydGV4QSk7CiAgICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KHRyaW1lc2hTaGFwZS5pbmRpY2VzW3RyaWFuZ2xlc1tpXSAqIDMgKyAoaiArIDEpICUgM10sIGVkZ2VWZXJ0ZXhCKTsKICAgICAgICAgIGVkZ2VWZXJ0ZXhCLnZzdWIoZWRnZVZlcnRleEEsIGVkZ2VWZWN0b3IpOyAvLyBQcm9qZWN0IHNwaGVyZSBwb3NpdGlvbiB0byB0aGUgZWRnZQoKICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEIsIHRtcCk7CiAgICAgICAgICBjb25zdCBwb3NpdGlvbkFsb25nRWRnZUIgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwogICAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1YihlZGdlVmVydGV4QSwgdG1wKTsKICAgICAgICAgIGxldCBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwoKICAgICAgICAgIGlmIChwb3NpdGlvbkFsb25nRWRnZUEgPiAwICYmIHBvc2l0aW9uQWxvbmdFZGdlQiA8IDApIHsKICAgICAgICAgICAgLy8gTm93IGNoZWNrIHRoZSBvcnRob2dvbmFsIGRpc3RhbmNlIGZyb20gZWRnZSB0byBzcGhlcmUgY2VudGVyCiAgICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEEsIHRtcCk7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LmNvcHkoZWRnZVZlY3Rvcik7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3JVbml0KTsKICAgICAgICAgICAgZWRnZVZlY3RvclVuaXQuc2NhbGUocG9zaXRpb25BbG9uZ0VkZ2VBLCB0bXApOwogICAgICAgICAgICB0bXAudmFkZChlZGdlVmVydGV4QSwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIGNlbnRlciBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIGVkZ2UsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgdHJpbWVzaCBmcmFtZQoKICAgICAgICAgICAgY29uc3QgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgICAgIGlmIChkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgICAgIHRtcC52c3ViKGxvY2FsU3BoZXJlUG9zLCByLm5pKTsKICAgICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICAgICAgdG1wLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIubmksIHIubmkpOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRyaWFuZ2xlIGZhY2VzCgoKICAgICAgY29uc3QgdmEgPSBzcGhlcmVUcmltZXNoX3ZhOwogICAgICBjb25zdCB2YiA9IHNwaGVyZVRyaW1lc2hfdmI7CiAgICAgIGNvbnN0IHZjID0gc3BoZXJlVHJpbWVzaF92YzsKICAgICAgY29uc3Qgbm9ybWFsID0gc3BoZXJlVHJpbWVzaF9ub3JtYWw7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IHRyaWFuZ2xlcy5sZW5ndGg7IGkgIT09IE47IGkrKykgewogICAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZVZlcnRpY2VzKHRyaWFuZ2xlc1tpXSwgdmEsIHZiLCB2Yyk7CiAgICAgICAgdHJpbWVzaFNoYXBlLmdldE5vcm1hbCh0cmlhbmdsZXNbaV0sIG5vcm1hbCk7CiAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih2YSwgdG1wKTsKICAgICAgICBsZXQgZGlzdCA9IHRtcC5kb3Qobm9ybWFsKTsKICAgICAgICBub3JtYWwuc2NhbGUoZGlzdCwgdG1wKTsKICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKHRtcCwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgdHJpYW5nbGUgcGxhbmUKCiAgICAgICAgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgaWYgKFJheS5wb2ludEluVHJpYW5nbGUodG1wLCB2YSwgdmIsIHZjKSAmJiBkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpOwogICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTsKICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRyaWFuZ2xlcy5sZW5ndGggPSAwOwogICAgfQoKICAgIHBsYW5lVHJpbWVzaChwbGFuZVNoYXBlLCB0cmltZXNoU2hhcGUsIHBsYW5lUG9zLCB0cmltZXNoUG9zLCBwbGFuZVF1YXQsIHRyaW1lc2hRdWF0LCBwbGFuZUJvZHksIHRyaW1lc2hCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgLy8gTWFrZSBjb250YWN0cyEKICAgICAgY29uc3QgdiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG5vcm1hbCA9IHBsYW5lVHJpbWVzaF9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIHBsYW5lUXVhdC52bXVsdChub3JtYWwsIG5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmltZXNoU2hhcGUudmVydGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgLy8gR2V0IHdvcmxkIHZlcnRleCBmcm9tIHRyaW1lc2gKICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KGksIHYpOyAvLyBTYWZlIHVwCgogICAgICAgIGNvbnN0IHYyID0gbmV3IFZlYzMoKTsKICAgICAgICB2Mi5jb3B5KHYpOwogICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOyAvLyBDaGVjayBwbGFuZSBzaWRlCgogICAgICAgIGNvbnN0IHJlbHBvcyA9IHBsYW5lVHJpbWVzaF9yZWxwb3M7CiAgICAgICAgdi52c3ViKHBsYW5lUG9zLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTsKCiAgICAgICAgaWYgKGRvdCA8PSAwLjApIHsKICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24ocGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7CiAgICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAogICAgICAgICAgLy8gR2V0IHZlcnRleCBwb3NpdGlvbiBwcm9qZWN0ZWQgb24gcGxhbmUKCiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwbGFuZVRyaW1lc2hfcHJvamVjdGVkOwogICAgICAgICAgbm9ybWFsLnNjYWxlKHJlbHBvcy5kb3Qobm9ybWFsKSwgcHJvamVjdGVkKTsKICAgICAgICAgIHYudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vIHJpIGlzIHRoZSBwcm9qZWN0ZWQgd29ybGQgcG9zaXRpb24gbWludXMgcGxhbmUgcG9zaXRpb24KCiAgICAgICAgICByLnJpLmNvcHkocHJvamVjdGVkKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai5jb3B5KHYpOwogICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gLy8gY29udmV4VHJpbWVzaCgKICAgIC8vICAgc2k6IENvbnZleFBvbHloZWRyb24sIHNqOiBUcmltZXNoLCB4aTogVmVjMywgeGo6IFZlYzMsIHFpOiBRdWF0ZXJuaW9uLCBxajogUXVhdGVybmlvbiwKICAgIC8vICAgYmk6IEJvZHksIGJqOiBCb2R5LCByc2k/OiBTaGFwZSB8IG51bGwsIHJzaj86IFNoYXBlIHwgbnVsbCwKICAgIC8vICAgZmFjZUxpc3RBPzogbnVtYmVyW10gfCBudWxsLCBmYWNlTGlzdEI/OiBudW1iZXJbXSB8IG51bGwsCiAgICAvLyApIHsKICAgIC8vICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwogICAgLy8gICBpZih4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpewogICAgLy8gICAgICAgcmV0dXJuOwogICAgLy8gICB9CiAgICAvLyAgIC8vIENvbnN0cnVjdCBhIHRlbXAgaHVsbCBmb3IgZWFjaCB0cmlhbmdsZQogICAgLy8gICBjb25zdCBodWxsQiA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7CiAgICAvLyAgIGh1bGxCLmZhY2VzID0gW1swLDEsMl1dOwogICAgLy8gICBjb25zdCB2YSA9IG5ldyBWZWMzKCk7CiAgICAvLyAgIGNvbnN0IHZiID0gbmV3IFZlYzMoKTsKICAgIC8vICAgY29uc3QgdmMgPSBuZXcgVmVjMygpOwogICAgLy8gICBodWxsQi52ZXJ0aWNlcyA9IFsKICAgIC8vICAgICAgIHZhLAogICAgLy8gICAgICAgdmIsCiAgICAvLyAgICAgICB2YwogICAgLy8gICBdOwogICAgLy8gICBmb3IgKGxldCBpID0gMDsgaSA8IHNqLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAvLyAgICAgICBjb25zdCB0cmlhbmdsZU5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAvLyAgICAgICBzai5nZXROb3JtYWwoaSwgdHJpYW5nbGVOb3JtYWwpOwogICAgLy8gICAgICAgaHVsbEIuZmFjZU5vcm1hbHMgPSBbdHJpYW5nbGVOb3JtYWxdOwogICAgLy8gICAgICAgc2ouZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCB2YSwgdmIsIHZjKTsKICAgIC8vICAgICAgIGxldCBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICBpZighZCl7CiAgICAvLyAgICAgICAgICAgdHJpYW5nbGVOb3JtYWwuc2NhbGUoLTEsIHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICAgICAgaWYoIWQpewogICAgLy8gICAgICAgICAgICAgICBjb250aW51ZTsKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgICBjb25zdCByZXM6IENvbnZleFBvbHloZWRyb25Db250YWN0UG9pbnRbXSA9IFtdOwogICAgLy8gICAgICAgY29uc3QgcSA9IGNvbnZleENvbnZleF9xOwogICAgLy8gICAgICAgc2kuY2xpcEFnYWluc3RIdWxsKHhpLHFpLGh1bGxCLHhqLHFqLHRyaWFuZ2xlTm9ybWFsLC0xMDAsMTAwLHJlcyk7CiAgICAvLyAgICAgICBmb3IobGV0IGogPSAwOyBqICE9PSByZXMubGVuZ3RoOyBqKyspewogICAgLy8gICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSxiaixzaSxzaixyc2kscnNqKSwKICAgIC8vICAgICAgICAgICAgICAgcmkgPSByLnJpLAogICAgLy8gICAgICAgICAgICAgICByaiA9IHIucmo7CiAgICAvLyAgICAgICAgICAgci5uaS5jb3B5KHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgIC8vICAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgIC8vICAgICAgICAgICBxLm11bHQocmVzW2pdLmRlcHRoLCBxKTsKICAgIC8vICAgICAgICAgICByZXNbal0ucG9pbnQudmFkZChxLCByaSk7CiAgICAvLyAgICAgICAgICAgcmouY29weShyZXNbal0ucG9pbnQpOwogICAgLy8gICAgICAgICAgIC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmUKICAgIC8vICAgICAgICAgICByaS52c3ViKHhpLHJpKTsKICAgIC8vICAgICAgICAgICByai52c3ViKHhqLHJqKTsKICAgIC8vICAgICAgICAgICAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwogICAgLy8gICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgIC8vICAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAvLyAgICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgLy8gICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgIC8vICAgICAgICAgICByZXN1bHQucHVzaChyKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgfQogICAgLy8gfQoKCiAgfQoKICBjb25zdCBhdmVyYWdlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBhdmVyYWdlQ29udGFjdFBvaW50QSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXZlcmFnZUNvbnRhY3RQb2ludEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFF1YXQxID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB0bXBRdWF0MiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdjIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF90bXAgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCID0gbmV3IEFBQkIoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlcyA9IFtdOwogIGNvbnN0IHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVfdG9fc3BoZXJlX29ydGhvID0gbmV3IFZlYzMoKTsgLy8gU2VlIGh0dHA6Ly9idWxsZXRwaHlzaWNzLmNvbS9CdWxsZXQvQnVsbGV0RnVsbC9TcGhlcmVUcmlhbmdsZURldGVjdG9yXzhjcHBfc291cmNlLmh0bWwKCiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fdnRwID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gcG9pbnRJblBvbHlnb24odmVydHMsIG5vcm1hbCwgcCkgewogICAgbGV0IHBvc2l0aXZlUmVzdWx0ID0gbnVsbDsKICAgIGNvbnN0IE4gPSB2ZXJ0cy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICBjb25zdCB2ID0gdmVydHNbaV07IC8vIEdldCBlZGdlIHRvIHRoZSBuZXh0IHZlcnRleAoKICAgICAgY29uc3QgZWRnZSA9IHBvaW50SW5Qb2x5Z29uX2VkZ2U7CiAgICAgIHZlcnRzWyhpICsgMSkgJSBOXS52c3ViKHYsIGVkZ2UpOyAvLyBHZXQgY3Jvc3MgcHJvZHVjdCBiZXR3ZWVuIHBvbHlnb24gbm9ybWFsIGFuZCB0aGUgZWRnZQoKICAgICAgY29uc3QgZWRnZV94X25vcm1hbCA9IHBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWw7IC8vY29uc3QgZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CgogICAgICBlZGdlLmNyb3NzKG5vcm1hbCwgZWRnZV94X25vcm1hbCk7IC8vIEdldCB2ZWN0b3IgYmV0d2VlbiBwb2ludCBhbmQgY3VycmVudCB2ZXJ0ZXgKCiAgICAgIGNvbnN0IHZlcnRleF90b19wID0gcG9pbnRJblBvbHlnb25fdnRwOwogICAgICBwLnZzdWIodiwgdmVydGV4X3RvX3ApOyAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgIGNvbnN0IHIgPSBlZGdlX3hfbm9ybWFsLmRvdCh2ZXJ0ZXhfdG9fcCk7IC8vIElmIGFsbCBzdWNoIGRvdCBwcm9kdWN0cyBoYXZlIHNhbWUgc2lnbiwgd2UgYXJlIGluc2lkZSB0aGUgcG9seWdvbi4KCiAgICAgIGlmIChwb3NpdGl2ZVJlc3VsdCA9PT0gbnVsbCB8fCByID4gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gdHJ1ZSB8fCByIDw9IDAgJiYgcG9zaXRpdmVSZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsKSB7CiAgICAgICAgICBwb3NpdGl2ZVJlc3VsdCA9IHIgPiAwOwogICAgICAgIH0KCiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmNvdW50ZXJlZCBzb21lIG90aGVyIHNpZ24uIEV4aXQuCiAgICAgIH0KICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGNvbnN0IGJveF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwogIGNvbnN0IHNwaGVyZUJveF9zcGhlcmVfdG9fY29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9uczIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9lZGdlID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfZWRnZVVuaXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb0Nvcm5lciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkQ29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZFBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfcGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb1dvcmxkUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVDb252ZXhfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleENvbnZleF9zZXBBeGlzID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhDb252ZXhfcSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVQbGFuZV9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlUGxhbmVfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTsgLy8gV0lQCgogIGNvbnN0IGNxaiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgY29udmV4UGFydGljbGVfbG9jYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV93b3JsZFBlbmV0cmF0aW9uVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdCA9IFswXTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKCiAgY2xhc3MgT3ZlcmxhcEtlZXBlciB7CiAgICAvKioKICAgICAqIEB0b2RvIFJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmN1cnJlbnQgPSB2b2lkIDA7CiAgICAgIHRoaXMucHJldmlvdXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuY3VycmVudCA9IFtdOwogICAgICB0aGlzLnByZXZpb3VzID0gW107CiAgICB9CiAgICAvKioKICAgICAqIGdldEtleQogICAgICovCgoKICAgIGdldEtleShpLCBqKSB7CiAgICAgIGlmIChqIDwgaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gaSA8PCAxNiB8IGo7CiAgICB9CiAgICAvKioKICAgICAqIHNldAogICAgICovCgoKICAgIHNldChpLCBqKSB7CiAgICAgIC8vIEluc2VydGlvbiBzb3J0LiBUaGlzIHdheSB0aGUgZGlmZiB3aWxsIGhhdmUgbGluZWFyIGNvbXBsZXhpdHkuCiAgICAgIGNvbnN0IGtleSA9IHRoaXMuZ2V0S2V5KGksIGopOwogICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50OwogICAgICBsZXQgaW5kZXggPSAwOwoKICAgICAgd2hpbGUgKGtleSA+IGN1cnJlbnRbaW5kZXhdKSB7CiAgICAgICAgaW5kZXgrKzsKICAgICAgfQoKICAgICAgaWYgKGtleSA9PT0gY3VycmVudFtpbmRleF0pIHsKICAgICAgICByZXR1cm47IC8vIFBhaXIgd2FzIGFscmVhZHkgYWRkZWQKICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IGN1cnJlbnQubGVuZ3RoIC0gMTsgaiA+PSBpbmRleDsgai0tKSB7CiAgICAgICAgY3VycmVudFtqICsgMV0gPSBjdXJyZW50W2pdOwogICAgICB9CgogICAgICBjdXJyZW50W2luZGV4XSA9IGtleTsKICAgIH0KICAgIC8qKgogICAgICogdGljawogICAgICovCgoKICAgIHRpY2soKSB7CiAgICAgIGNvbnN0IHRtcCA9IHRoaXMuY3VycmVudDsKICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5wcmV2aW91czsKICAgICAgdGhpcy5wcmV2aW91cyA9IHRtcDsKICAgICAgdGhpcy5jdXJyZW50Lmxlbmd0aCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIGdldERpZmYKICAgICAqLwoKCiAgICBnZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuY3VycmVudDsKICAgICAgY29uc3QgYiA9IHRoaXMucHJldmlvdXM7CiAgICAgIGNvbnN0IGFsID0gYS5sZW5ndGg7CiAgICAgIGNvbnN0IGJsID0gYi5sZW5ndGg7CiAgICAgIGxldCBqID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWw7IGkrKykgewogICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICAgIGNvbnN0IGtleUEgPSBhW2ldOwoKICAgICAgICB3aGlsZSAoa2V5QSA+IGJbal0pIHsKICAgICAgICAgIGorKzsKICAgICAgICB9CgogICAgICAgIGZvdW5kID0ga2V5QSA9PT0gYltqXTsKCiAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgdW5wYWNrQW5kUHVzaChhZGRpdGlvbnMsIGtleUEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaiA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsOyBpKyspIHsKICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgICBjb25zdCBrZXlCID0gYltpXTsKCiAgICAgICAgd2hpbGUgKGtleUIgPiBhW2pdKSB7CiAgICAgICAgICBqKys7CiAgICAgICAgfQoKICAgICAgICBmb3VuZCA9IGFbal0gPT09IGtleUI7CgogICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgIHVucGFja0FuZFB1c2gocmVtb3ZhbHMsIGtleUIpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICB9CgogIGZ1bmN0aW9uIHVucGFja0FuZFB1c2goYXJyYXksIGtleSkgewogICAgYXJyYXkucHVzaCgoa2V5ICYgMHhmZmZmMDAwMCkgPj4gMTYsIGtleSAmIDB4MDAwMGZmZmYpOwogIH0KICAvKioKICAgKiBUdXBsZURpY3Rpb25hcnkKICAgKi8KCgogIGNsYXNzIFR1cGxlRGljdGlvbmFyeSB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5kYXRhID0gewogICAgICAgIGtleXM6IFtdCiAgICAgIH07CiAgICB9CiAgICAvKiogZ2V0ICovCgoKICAgIGdldChpLCBqKSB7CiAgICAgIGlmIChpID4gaikgewogICAgICAgIC8vIHN3YXAKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuZGF0YVtpICsgIi0iICsgal07CiAgICB9CiAgICAvKiogc2V0ICovCgoKICAgIHNldChpLCBqLCB2YWx1ZSkgewogICAgICBpZiAoaSA+IGopIHsKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgY29uc3Qga2V5ID0gaSArICItIiArIGo7IC8vIENoZWNrIGlmIGtleSBhbHJlYWR5IGV4aXN0cwoKICAgICAgaWYgKCF0aGlzLmdldChpLCBqKSkgewogICAgICAgIHRoaXMuZGF0YS5rZXlzLnB1c2goa2V5KTsKICAgICAgfQoKICAgICAgdGhpcy5kYXRhW2tleV0gPSB2YWx1ZTsKICAgIH0KICAgIC8qKiByZXNldCAqLwoKCiAgICByZXNldCgpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3Qga2V5cyA9IGRhdGEua2V5czsKCiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCBrZXkgPSBrZXlzLnBvcCgpOwogICAgICAgIGRlbGV0ZSBkYXRhW2tleV07CiAgICAgIH0KICAgIH0KCiAgfQogIC8qKgogICAqIFRoZSBwaHlzaWNzIHdvcmxkCiAgICovCgoKICBjbGFzcyBXb3JsZCBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQ3VycmVudGx5IC8gbGFzdCB1c2VkIHRpbWVzdGVwLiBJcyBzZXQgdG8gLTEgaWYgbm90IGF2YWlsYWJsZS4gVGhpcyB2YWx1ZSBpcyB1cGRhdGVkIGJlZm9yZSBlYWNoIGludGVybmFsIHN0ZXAsIHdoaWNoIG1lYW5zIHRoYXQgaXQgaXMgImZyZXNoIiBpbnNpZGUgZXZlbnQgY2FsbGJhY2tzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYWtlcyBib2RpZXMgZ28gdG8gc2xlZXAgd2hlbiB0aGV5J3ZlIGJlZW4gaW5hY3RpdmUuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgdGhlIGN1cnJlbnQgY29udGFjdHMgKGluc3RhbmNlcyBvZiBDb250YWN0RXF1YXRpb24pIGluIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogSG93IG9mdGVuIHRvIG5vcm1hbGl6ZSBxdWF0ZXJuaW9ucy4gU2V0IHRvIDAgZm9yIGV2ZXJ5IHN0ZXAsIDEgZm9yIGV2ZXJ5IHNlY29uZCBldGMuLiBBIGxhcmdlciB2YWx1ZSBpbmNyZWFzZXMgcGVyZm9ybWFuY2UuIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBhIHNtYWxsZXIgdmFsdWUgKHplcm8gdG8gYmUgc3VyZSBub3RoaW5nIGNhbiBnbyB3cm9uZykuCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byB0cnVlIHRvIHVzZSBmYXN0IHF1YXRlcm5pb24gbm9ybWFsaXphdGlvbi4gSXQgaXMgb2Z0ZW4gZW5vdWdoIGFjY3VyYXRlIHRvIHVzZS4KICAgICAqIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBmYWxzZS4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB3YWxsLWNsb2NrIHRpbWUgc2luY2Ugc2ltdWxhdGlvbiBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogTnVtYmVyIG9mIHRpbWVzdGVwcyB0YWtlbiBzaW5jZSBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogRGVmYXVsdCBhbmQgbGFzdCB0aW1lc3RlcCBzaXplcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGdyYXZpdHkgb2YgdGhlIHdvcmxkLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYnJvYWRwaGFzZSBhbGdvcml0aG0gdG8gdXNlLgogICAgICogQGRlZmF1bHQgTmFpdmVCcm9hZHBoYXNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCBib2RpZXMgaW4gdGhpcyB3b3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBUcnVlIGlmIGFueSBib2RpZXMgYXJlIG5vdCBzbGVlcGluZywgZmFsc2UgaWYgZXZlcnkgYm9keSBpcyBzbGVlcGluZy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHNvbHZlciBhbGdvcml0aG0gdG8gdXNlLgogICAgICogQGRlZmF1bHQgR1NTb2x2ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uTWF0cml4CiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbGxpc2lvbk1hdHJpeCBmcm9tIHRoZSBwcmV2aW91cyBzdGVwLgogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgYWRkZWQgbWF0ZXJpYWxzLgogICAgICogQGRlcHJlY2F0ZWQKICAgICAqIEB0b2RvIFJlbW92ZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgYWRkZWQgY29udGFjdG1hdGVyaWFscy4KICAgICAqLwoKICAgIC8qKgogICAgICogVXNlZCB0byBsb29rIHVwIGEgQ29udGFjdE1hdGVyaWFsIGdpdmVuIHR3byBpbnN0YW5jZXMgb2YgTWF0ZXJpYWwuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBkZWZhdWx0IG1hdGVyaWFsIG9mIHRoZSBib2RpZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoaXMgY29udGFjdCBtYXRlcmlhbCBpcyB1c2VkIGlmIG5vIHN1aXRhYmxlIGNvbnRhY3RtYXRlcmlhbCBpcyBmb3VuZCBmb3IgYSBjb250YWN0LgogICAgICovCgogICAgLyoqCiAgICAgKiBUaW1lIGFjY3VtdWxhdG9yIGZvciBpbnRlcnBvbGF0aW9uLgogICAgICogQHNlZSBodHRwczovL2dhZmZlcm9uZ2FtZXMuY29tL2dhbWUtcGh5c2ljcy9maXgteW91ci10aW1lc3RlcC8KICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIGJvZHkgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIHdvcmxkLgogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgYmVlbiByZW1vdmVkIGZyb20gdGhlIHdvcmxkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5kdCA9IHZvaWQgMDsKICAgICAgdGhpcy5hbGxvd1NsZWVwID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnRhY3RzID0gdm9pZCAwOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gdm9pZCAwOwogICAgICB0aGlzLnF1YXROb3JtYWxpemVTa2lwID0gdm9pZCAwOwogICAgICB0aGlzLnF1YXROb3JtYWxpemVGYXN0ID0gdm9pZCAwOwogICAgICB0aGlzLnRpbWUgPSB2b2lkIDA7CiAgICAgIHRoaXMuc3RlcG51bWJlciA9IHZvaWQgMDsKICAgICAgdGhpcy5kZWZhdWx0X2R0ID0gdm9pZCAwOwogICAgICB0aGlzLm5leHRJZCA9IHZvaWQgMDsKICAgICAgdGhpcy5ncmF2aXR5ID0gdm9pZCAwOwogICAgICB0aGlzLmJyb2FkcGhhc2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm9kaWVzID0gdm9pZCAwOwogICAgICB0aGlzLmhhc0FjdGl2ZUJvZGllcyA9IHZvaWQgMDsKICAgICAgdGhpcy5zb2x2ZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29uc3RyYWludHMgPSB2b2lkIDA7CiAgICAgIHRoaXMubmFycm93cGhhc2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4ID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gdm9pZCAwOwogICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyID0gdm9pZCAwOwogICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlciA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXRlcmlhbHMgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscyA9IHZvaWQgMDsKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZSA9IHZvaWQgMDsKICAgICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbCA9IHZvaWQgMDsKICAgICAgdGhpcy5kb1Byb2ZpbGluZyA9IHZvaWQgMDsKICAgICAgdGhpcy5wcm9maWxlID0gdm9pZCAwOwogICAgICB0aGlzLmFjY3VtdWxhdG9yID0gdm9pZCAwOwogICAgICB0aGlzLnN1YnN5c3RlbXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuYWRkQm9keUV2ZW50ID0gdm9pZCAwOwogICAgICB0aGlzLnJlbW92ZUJvZHlFdmVudCA9IHZvaWQgMDsKICAgICAgdGhpcy5pZFRvQm9keU1hcCA9IHZvaWQgMDsKICAgICAgdGhpcy5kdCA9IC0xOwogICAgICB0aGlzLmFsbG93U2xlZXAgPSAhIW9wdGlvbnMuYWxsb3dTbGVlcDsKICAgICAgdGhpcy5jb250YWN0cyA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gW107CiAgICAgIHRoaXMucXVhdE5vcm1hbGl6ZVNraXAgPSBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwIDogMDsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplRmFzdCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgOiBmYWxzZTsKICAgICAgdGhpcy50aW1lID0gMC4wOwogICAgICB0aGlzLnN0ZXBudW1iZXIgPSAwOwogICAgICB0aGlzLmRlZmF1bHRfZHQgPSAxIC8gNjA7CiAgICAgIHRoaXMubmV4dElkID0gMDsKICAgICAgdGhpcy5ncmF2aXR5ID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmdyYXZpdHkpIHsKICAgICAgICB0aGlzLmdyYXZpdHkuY29weShvcHRpb25zLmdyYXZpdHkpOwogICAgICB9CgogICAgICB0aGlzLmJyb2FkcGhhc2UgPSBvcHRpb25zLmJyb2FkcGhhc2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYnJvYWRwaGFzZSA6IG5ldyBOYWl2ZUJyb2FkcGhhc2UoKTsKICAgICAgdGhpcy5ib2RpZXMgPSBbXTsKICAgICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSBmYWxzZTsKICAgICAgdGhpcy5zb2x2ZXIgPSBvcHRpb25zLnNvbHZlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zb2x2ZXIgOiBuZXcgR1NTb2x2ZXIoKTsKICAgICAgdGhpcy5jb25zdHJhaW50cyA9IFtdOwogICAgICB0aGlzLm5hcnJvd3BoYXNlID0gbmV3IE5hcnJvd3BoYXNlKHRoaXMpOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IG5ldyBBcnJheUNvbGxpc2lvbk1hdHJpeCgpOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gbmV3IEFycmF5Q29sbGlzaW9uTWF0cml4KCk7CiAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIgPSBuZXcgT3ZlcmxhcEtlZXBlcigpOwogICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlciA9IG5ldyBPdmVybGFwS2VlcGVyKCk7CiAgICAgIHRoaXMubWF0ZXJpYWxzID0gW107CiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscyA9IFtdOwogICAgICB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlID0gbmV3IFR1cGxlRGljdGlvbmFyeSgpOwogICAgICB0aGlzLmRlZmF1bHRNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCgnZGVmYXVsdCcpOwogICAgICB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwgPSBuZXcgQ29udGFjdE1hdGVyaWFsKHRoaXMuZGVmYXVsdE1hdGVyaWFsLCB0aGlzLmRlZmF1bHRNYXRlcmlhbCwgewogICAgICAgIGZyaWN0aW9uOiAwLjMsCiAgICAgICAgcmVzdGl0dXRpb246IDAuMAogICAgICB9KTsKICAgICAgdGhpcy5kb1Byb2ZpbGluZyA9IGZhbHNlOwogICAgICB0aGlzLnByb2ZpbGUgPSB7CiAgICAgICAgc29sdmU6IDAsCiAgICAgICAgbWFrZUNvbnRhY3RDb25zdHJhaW50czogMCwKICAgICAgICBicm9hZHBoYXNlOiAwLAogICAgICAgIGludGVncmF0ZTogMCwKICAgICAgICBuYXJyb3dwaGFzZTogMAogICAgICB9OwogICAgICB0aGlzLmFjY3VtdWxhdG9yID0gMDsKICAgICAgdGhpcy5zdWJzeXN0ZW1zID0gW107CiAgICAgIHRoaXMuYWRkQm9keUV2ZW50ID0gewogICAgICAgIHR5cGU6ICdhZGRCb2R5JywKICAgICAgICBib2R5OiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMucmVtb3ZlQm9keUV2ZW50ID0gewogICAgICAgIHR5cGU6ICdyZW1vdmVCb2R5JywKICAgICAgICBib2R5OiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMuaWRUb0JvZHlNYXAgPSB7fTsKICAgICAgdGhpcy5icm9hZHBoYXNlLnNldFdvcmxkKHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNvbnRhY3QgbWF0ZXJpYWwgYmV0d2VlbiBtYXRlcmlhbHMgbTEgYW5kIG0yCiAgICAgKiBAcmV0dXJuIFRoZSBjb250YWN0IG1hdGVyaWFsIGlmIGl0IHdhcyBmb3VuZC4KICAgICAqLwoKCiAgICBnZXRDb250YWN0TWF0ZXJpYWwobTEsIG0yKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlLmdldChtMS5pZCwgbTIuaWQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgbnVtYmVyIG9mIG9iamVjdHMgaW4gdGhlIHdvcmxkLgogICAgICogQGRlcHJlY2F0ZWQKICAgICAqLwoKCiAgICBudW1PYmplY3RzKCkgewogICAgICByZXR1cm4gdGhpcy5ib2RpZXMubGVuZ3RoOwogICAgfQogICAgLyoqCiAgICAgKiBTdG9yZSBvbGQgY29sbGlzaW9uIHN0YXRlIGluZm8KICAgICAqLwoKCiAgICBjb2xsaXNpb25NYXRyaXhUaWNrKCkgewogICAgICBjb25zdCB0ZW1wID0gdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91czsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cyA9IHRoaXMuY29sbGlzaW9uTWF0cml4OwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IHRlbXA7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnJlc2V0KCk7CiAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIudGljaygpOwogICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci50aWNrKCk7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhIGNvbnN0cmFpbnQgdG8gdGhlIHNpbXVsYXRpb24uCiAgICAgKi8KCgogICAgYWRkQ29uc3RyYWludChjKSB7CiAgICAgIHRoaXMuY29uc3RyYWludHMucHVzaChjKTsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlcyBhIGNvbnN0cmFpbnQKICAgICAqLwoKCiAgICByZW1vdmVDb25zdHJhaW50KGMpIHsKICAgICAgY29uc3QgaWR4ID0gdGhpcy5jb25zdHJhaW50cy5pbmRleE9mKGMpOwoKICAgICAgaWYgKGlkeCAhPT0gLTEpIHsKICAgICAgICB0aGlzLmNvbnN0cmFpbnRzLnNwbGljZShpZHgsIDEpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJheWNhc3QgdGVzdAogICAgICogQGRlcHJlY2F0ZWQgVXNlIC5yYXljYXN0QWxsLCAucmF5Y2FzdENsb3Nlc3Qgb3IgLnJheWNhc3RBbnkgaW5zdGVhZC4KICAgICAqLwoKCiAgICByYXlUZXN0KGZyb20sIHRvLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFJheWNhc3RSZXN1bHQpIHsKICAgICAgICAvLyBEbyByYXljYXN0Q2xvc2VzdAogICAgICAgIHRoaXMucmF5Y2FzdENsb3Nlc3QoZnJvbSwgdG8sIHsKICAgICAgICAgIHNraXBCYWNrZmFjZXM6IHRydWUKICAgICAgICB9LCByZXN1bHQpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIERvIHJheWNhc3RBbGwKICAgICAgICB0aGlzLnJheWNhc3RBbGwoZnJvbSwgdG8sIHsKICAgICAgICAgIHNraXBCYWNrZmFjZXM6IHRydWUKICAgICAgICB9LCByZXN1bHQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJheSBjYXN0IGFnYWluc3QgYWxsIGJvZGllcy4gVGhlIHByb3ZpZGVkIGNhbGxiYWNrIHdpbGwgYmUgZXhlY3V0ZWQgZm9yIGVhY2ggaGl0IHdpdGggYSBSYXljYXN0UmVzdWx0IGFzIHNpbmdsZSBhcmd1bWVudC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LgogICAgICovCgoKICAgIHJheWNhc3RBbGwoZnJvbSwgdG8sIG9wdGlvbnMgPSB7fSwgY2FsbGJhY2spIHsKICAgICAgb3B0aW9ucy5tb2RlID0gUmF5LkFMTDsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLmNhbGxiYWNrID0gY2FsbGJhY2s7CiAgICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7CiAgICB9CiAgICAvKioKICAgICAqIFJheSBjYXN0LCBhbmQgc3RvcCBhdCB0aGUgZmlyc3QgcmVzdWx0LiBOb3RlIHRoYXQgdGhlIG9yZGVyIGlzIHJhbmRvbSAtIGJ1dCB0aGUgbWV0aG9kIGlzIGZhc3QuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0QW55KGZyb20sIHRvLCBvcHRpb25zID0ge30sIHJlc3VsdCkgewogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQU5ZOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0OwogICAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpOwogICAgfQogICAgLyoqCiAgICAgKiBSYXkgY2FzdCwgYW5kIHJldHVybiBpbmZvcm1hdGlvbiBvZiB0aGUgY2xvc2VzdCBoaXQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0Q2xvc2VzdChmcm9tLCB0bywgb3B0aW9ucyA9IHt9LCByZXN1bHQpIHsKICAgICAgb3B0aW9ucy5tb2RlID0gUmF5LkNMT1NFU1Q7CiAgICAgIG9wdGlvbnMuZnJvbSA9IGZyb207CiAgICAgIG9wdGlvbnMudG8gPSB0bzsKICAgICAgb3B0aW9ucy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhIHJpZ2lkIGJvZHkgdG8gdGhlIHNpbXVsYXRpb24uCiAgICAgKiBAdG9kbyBJZiB0aGUgc2ltdWxhdGlvbiBoYXMgbm90IHlldCBzdGFydGVkLCB3aHkgcmVjcmV0ZSBhbmQgY29weSBhcnJheXMgZm9yIGVhY2ggYm9keT8gQWNjdW11bGF0ZSBpbiBkeW5hbWljIGFycmF5cyBpbiB0aGlzIGNhc2UuCiAgICAgKiBAdG9kbyBBZGRpbmcgYW4gYXJyYXkgb2YgYm9kaWVzIHNob3VsZCBiZSBwb3NzaWJsZS4gVGhpcyB3b3VsZCBzYXZlIHNvbWUgbG9vcHMgdG9vCiAgICAgKi8KCgogICAgYWRkQm9keShib2R5KSB7CiAgICAgIGlmICh0aGlzLmJvZGllcy5pbmNsdWRlcyhib2R5KSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgYm9keS5pbmRleCA9IHRoaXMuYm9kaWVzLmxlbmd0aDsKICAgICAgdGhpcy5ib2RpZXMucHVzaChib2R5KTsKICAgICAgYm9keS53b3JsZCA9IHRoaXM7CiAgICAgIGJvZHkuaW5pdFBvc2l0aW9uLmNvcHkoYm9keS5wb3NpdGlvbik7CiAgICAgIGJvZHkuaW5pdFZlbG9jaXR5LmNvcHkoYm9keS52ZWxvY2l0eSk7CiAgICAgIGJvZHkudGltZUxhc3RTbGVlcHkgPSB0aGlzLnRpbWU7CgogICAgICBpZiAoYm9keSBpbnN0YW5jZW9mIEJvZHkpIHsKICAgICAgICBib2R5LmluaXRBbmd1bGFyVmVsb2NpdHkuY29weShib2R5LmFuZ3VsYXJWZWxvY2l0eSk7CiAgICAgICAgYm9keS5pbml0UXVhdGVybmlvbi5jb3B5KGJvZHkucXVhdGVybmlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnNldE51bU9iamVjdHModGhpcy5ib2RpZXMubGVuZ3RoKTsKICAgICAgdGhpcy5hZGRCb2R5RXZlbnQuYm9keSA9IGJvZHk7CiAgICAgIHRoaXMuaWRUb0JvZHlNYXBbYm9keS5pZF0gPSBib2R5OwogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy5hZGRCb2R5RXZlbnQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYSByaWdpZCBib2R5IGZyb20gdGhlIHNpbXVsYXRpb24uCiAgICAgKi8KCgogICAgcmVtb3ZlQm9keShib2R5KSB7CiAgICAgIGJvZHkud29ybGQgPSBudWxsOwogICAgICBjb25zdCBuID0gdGhpcy5ib2RpZXMubGVuZ3RoIC0gMTsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IGlkeCA9IGJvZGllcy5pbmRleE9mKGJvZHkpOwoKICAgICAgaWYgKGlkeCAhPT0gLTEpIHsKICAgICAgICBib2RpZXMuc3BsaWNlKGlkeCwgMSk7IC8vIFRvZG86IHNob3VsZCB1c2UgYSBnYXJiYWdlIGZyZWUgbWV0aG9kCiAgICAgICAgLy8gUmVjb21wdXRlIGluZGV4CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGJvZGllc1tpXS5pbmRleCA9IGk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXROdW1PYmplY3RzKG4pOwogICAgICAgIHRoaXMucmVtb3ZlQm9keUV2ZW50LmJvZHkgPSBib2R5OwogICAgICAgIGRlbGV0ZSB0aGlzLmlkVG9Cb2R5TWFwW2JvZHkuaWRdOwogICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLnJlbW92ZUJvZHlFdmVudCk7CiAgICAgIH0KICAgIH0KCiAgICBnZXRCb2R5QnlJZChpZCkgewogICAgICByZXR1cm4gdGhpcy5pZFRvQm9keU1hcFtpZF07CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIE1ha2UgYSBmYXN0ZXIgbWFwCiAgICAgKi8KCgogICAgZ2V0U2hhcGVCeUlkKGlkKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZXMgPSBib2RpZXNbaV0uc2hhcGVzOwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNoYXBlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbal07CgogICAgICAgICAgaWYgKHNoYXBlLmlkID09PSBpZCkgewogICAgICAgICAgICByZXR1cm4gc2hhcGU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogQWRkcyBhIG1hdGVyaWFsIHRvIHRoZSBXb3JsZC4KICAgICAqIEBkZXByZWNhdGVkCiAgICAgKiBAdG9kbyBSZW1vdmUKICAgICAqLwoKCiAgICBhZGRNYXRlcmlhbChtKSB7CiAgICAgIHRoaXMubWF0ZXJpYWxzLnB1c2gobSk7CiAgICB9CiAgICAvKioKICAgICAqIEFkZHMgYSBjb250YWN0IG1hdGVyaWFsIHRvIHRoZSBXb3JsZAogICAgICovCgoKICAgIGFkZENvbnRhY3RNYXRlcmlhbChjbWF0KSB7CiAgICAgIC8vIEFkZCBjb250YWN0IG1hdGVyaWFsCiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscy5wdXNoKGNtYXQpOyAvLyBBZGQgY3VycmVudCBjb250YWN0IG1hdGVyaWFsIHRvIHRoZSBtYXRlcmlhbCB0YWJsZQoKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5zZXQoY21hdC5tYXRlcmlhbHNbMF0uaWQsIGNtYXQubWF0ZXJpYWxzWzFdLmlkLCBjbWF0KTsKICAgIH0KICAgIC8qKgogICAgICogU3RlcCB0aGUgcGh5c2ljcyB3b3JsZCBmb3J3YXJkIGluIHRpbWUuCiAgICAgKgogICAgICogVGhlcmUgYXJlIHR3byBtb2Rlcy4gVGhlIHNpbXBsZSBtb2RlIGlzIGZpeGVkIHRpbWVzdGVwcGluZyB3aXRob3V0IGludGVycG9sYXRpb24uIEluIHRoaXMgY2FzZSB5b3Ugb25seSB1c2UgdGhlIGZpcnN0IGFyZ3VtZW50LiBUaGUgc2Vjb25kIGNhc2UgdXNlcyBpbnRlcnBvbGF0aW9uLiBJbiB0aGF0IHlvdSBhbHNvIHByb3ZpZGUgdGhlIHRpbWUgc2luY2UgdGhlIGZ1bmN0aW9uIHdhcyBsYXN0IHVzZWQsIGFzIHdlbGwgYXMgdGhlIG1heGltdW0gZml4ZWQgdGltZXN0ZXBzIHRvIHRha2UuCiAgICAgKgogICAgICogQHBhcmFtIGR0IFRoZSBmaXhlZCB0aW1lIHN0ZXAgc2l6ZSB0byB1c2UuCiAgICAgKiBAcGFyYW0gdGltZVNpbmNlTGFzdENhbGxlZCBUaGUgdGltZSBlbGFwc2VkIHNpbmNlIHRoZSBmdW5jdGlvbiB3YXMgbGFzdCBjYWxsZWQuCiAgICAgKiBAcGFyYW0gbWF4U3ViU3RlcHMgTWF4aW11bSBudW1iZXIgb2YgZml4ZWQgc3RlcHMgdG8gdGFrZSBwZXIgZnVuY3Rpb24gY2FsbC4KICAgICAqIEBzZWUgaHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTgwNDI2MTU0NTMxL2h0dHA6Ly9idWxsZXRwaHlzaWNzLm9yZy9tZWRpYXdpa2ktMS41LjgvaW5kZXgucGhwL1N0ZXBwaW5nX1RoZV9Xb3JsZCNXaGF0X2RvX3RoZV9wYXJhbWV0ZXJzX3RvX2J0RHluYW1pY3NXb3JsZDo6c3RlcFNpbXVsYXRpb25fbWVhbi4zRgogICAgICogQGV4YW1wbGUKICAgICAqICAgICAvLyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uCiAgICAgKiAgICAgd29ybGQuc3RlcCgxIC8gNjApCiAgICAgKi8KCgogICAgc3RlcChkdCwgdGltZVNpbmNlTGFzdENhbGxlZCwgbWF4U3ViU3RlcHMgPSAxMCkgewogICAgICBpZiAodGltZVNpbmNlTGFzdENhbGxlZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy8gRml4ZWQsIHNpbXBsZSBzdGVwcGluZwogICAgICAgIHRoaXMuaW50ZXJuYWxTdGVwKGR0KTsgLy8gSW5jcmVtZW50IHRpbWUKCiAgICAgICAgdGhpcy50aW1lICs9IGR0OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWNjdW11bGF0b3IgKz0gdGltZVNpbmNlTGFzdENhbGxlZDsKICAgICAgICBjb25zdCB0MCA9IHBlcmZvcm1hbmNlJDEubm93KCk7CiAgICAgICAgbGV0IHN1YnN0ZXBzID0gMDsKCiAgICAgICAgd2hpbGUgKHRoaXMuYWNjdW11bGF0b3IgPj0gZHQgJiYgc3Vic3RlcHMgPCBtYXhTdWJTdGVwcykgewogICAgICAgICAgLy8gRG8gZml4ZWQgc3RlcHMgdG8gY2F0Y2ggdXAKICAgICAgICAgIHRoaXMuaW50ZXJuYWxTdGVwKGR0KTsKICAgICAgICAgIHRoaXMuYWNjdW11bGF0b3IgLT0gZHQ7CiAgICAgICAgICBzdWJzdGVwcysrOwoKICAgICAgICAgIGlmIChwZXJmb3JtYW5jZSQxLm5vdygpIC0gdDAgPiBkdCAqIDEwMDApIHsKICAgICAgICAgICAgLy8gVGhlIGZyYW1lcmF0ZSBpcyBub3QgaW50ZXJhY3RpdmUgYW55bW9yZS4KICAgICAgICAgICAgLy8gV2UgYXJlIGJlbG93IHRoZSB0YXJnZXQgZnJhbWVyYXRlLgogICAgICAgICAgICAvLyBCZXR0ZXIgYmFpbCBvdXQuCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gUmVtb3ZlIHRoZSBleGNlc3MgYWNjdW11bGF0b3IsIHNpbmNlIHdlIG1heSBub3QKICAgICAgICAvLyBoYXZlIGhhZCBlbm91Z2ggc3Vic3RlcHMgYXZhaWxhYmxlIHRvIGNhdGNoIHVwCgoKICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gdGhpcy5hY2N1bXVsYXRvciAlIGR0OwogICAgICAgIGNvbnN0IHQgPSB0aGlzLmFjY3VtdWxhdG9yIC8gZHQ7CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSB0aGlzLmJvZGllcy5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgYiA9IHRoaXMuYm9kaWVzW2pdOwogICAgICAgICAgYi5wcmV2aW91c1Bvc2l0aW9uLmxlcnAoYi5wb3NpdGlvbiwgdCwgYi5pbnRlcnBvbGF0ZWRQb3NpdGlvbik7CiAgICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5zbGVycChiLnF1YXRlcm5pb24sIHQsIGIuaW50ZXJwb2xhdGVkUXVhdGVybmlvbik7CiAgICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5ub3JtYWxpemUoKTsKICAgICAgICB9CgogICAgICAgIHRoaXMudGltZSArPSB0aW1lU2luY2VMYXN0Q2FsbGVkOwogICAgICB9CiAgICB9CgogICAgaW50ZXJuYWxTdGVwKGR0KSB7CiAgICAgIHRoaXMuZHQgPSBkdDsKICAgICAgY29uc3QgY29udGFjdHMgPSB0aGlzLmNvbnRhY3RzOwogICAgICBjb25zdCBwMSA9IFdvcmxkX3N0ZXBfcDE7CiAgICAgIGNvbnN0IHAyID0gV29ybGRfc3RlcF9wMjsKICAgICAgY29uc3QgTiA9IHRoaXMubnVtT2JqZWN0cygpOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKICAgICAgY29uc3Qgc29sdmVyID0gdGhpcy5zb2x2ZXI7CiAgICAgIGNvbnN0IGdyYXZpdHkgPSB0aGlzLmdyYXZpdHk7CiAgICAgIGNvbnN0IGRvUHJvZmlsaW5nID0gdGhpcy5kb1Byb2ZpbGluZzsKICAgICAgY29uc3QgcHJvZmlsZSA9IHRoaXMucHJvZmlsZTsKICAgICAgY29uc3QgRFlOQU1JQyA9IEJvZHkuRFlOQU1JQzsKICAgICAgbGV0IHByb2ZpbGluZ1N0YXJ0ID0gLUluZmluaXR5OwogICAgICBjb25zdCBjb25zdHJhaW50cyA9IHRoaXMuY29uc3RyYWludHM7CiAgICAgIGNvbnN0IGZyaWN0aW9uRXF1YXRpb25Qb29sID0gV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbDsKICAgICAgZ3Jhdml0eS5sZW5ndGgoKTsKICAgICAgY29uc3QgZ3ggPSBncmF2aXR5Lng7CiAgICAgIGNvbnN0IGd5ID0gZ3Jhdml0eS55OwogICAgICBjb25zdCBneiA9IGdyYXZpdHkuejsKICAgICAgbGV0IGkgPSAwOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZSQxLm5vdygpOwogICAgICB9IC8vIEFkZCBncmF2aXR5IHRvIGFsbCBvYmplY3RzCgoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGlmIChiaS50eXBlID09PSBEWU5BTUlDKSB7CiAgICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllcwogICAgICAgICAgY29uc3QgZiA9IGJpLmZvcmNlOwogICAgICAgICAgY29uc3QgbSA9IGJpLm1hc3M7CiAgICAgICAgICBmLnggKz0gbSAqIGd4OwogICAgICAgICAgZi55ICs9IG0gKiBneTsKICAgICAgICAgIGYueiArPSBtICogZ3o7CiAgICAgICAgfQogICAgICB9IC8vIFVwZGF0ZSBzdWJzeXN0ZW1zCgoKICAgICAgZm9yIChsZXQgaSA9IDAsIE5zdWJzeXN0ZW1zID0gdGhpcy5zdWJzeXN0ZW1zLmxlbmd0aDsgaSAhPT0gTnN1YnN5c3RlbXM7IGkrKykgewogICAgICAgIHRoaXMuc3Vic3lzdGVtc1tpXS51cGRhdGUoKTsKICAgICAgfSAvLyBDb2xsaXNpb24gZGV0ZWN0aW9uCgoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZSQxLm5vdygpOwogICAgICB9CgogICAgICBwMS5sZW5ndGggPSAwOyAvLyBDbGVhbiB1cCBwYWlyIGFycmF5cyBmcm9tIGxhc3Qgc3RlcAoKICAgICAgcDIubGVuZ3RoID0gMDsKICAgICAgdGhpcy5icm9hZHBoYXNlLmNvbGxpc2lvblBhaXJzKHRoaXMsIHAxLCBwMik7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLmJyb2FkcGhhc2UgPSBwZXJmb3JtYW5jZSQxLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gUmVtb3ZlIGNvbnN0cmFpbmVkIHBhaXJzIHdpdGggY29sbGlkZUNvbm5lY3RlZCA9PSBmYWxzZQoKCiAgICAgIGxldCBOY29uc3RyYWludHMgPSBjb25zdHJhaW50cy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOY29uc3RyYWludHM7IGkrKykgewogICAgICAgIGNvbnN0IGMgPSBjb25zdHJhaW50c1tpXTsKCiAgICAgICAgaWYgKCFjLmNvbGxpZGVDb25uZWN0ZWQpIHsKICAgICAgICAgIGZvciAobGV0IGogPSBwMS5sZW5ndGggLSAxOyBqID49IDA7IGogLT0gMSkgewogICAgICAgICAgICBpZiAoYy5ib2R5QSA9PT0gcDFbal0gJiYgYy5ib2R5QiA9PT0gcDJbal0gfHwgYy5ib2R5QiA9PT0gcDFbal0gJiYgYy5ib2R5QSA9PT0gcDJbal0pIHsKICAgICAgICAgICAgICBwMS5zcGxpY2UoaiwgMSk7CiAgICAgICAgICAgICAgcDIuc3BsaWNlKGosIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFRpY2soKTsgLy8gR2VuZXJhdGUgY29udGFjdHMKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2UkMS5ub3coKTsKICAgICAgfQoKICAgICAgY29uc3Qgb2xkY29udGFjdHMgPSBXb3JsZF9zdGVwX29sZENvbnRhY3RzOwogICAgICBjb25zdCBOb2xkQ29udGFjdHMgPSBjb250YWN0cy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOb2xkQ29udGFjdHM7IGkrKykgewogICAgICAgIG9sZGNvbnRhY3RzLnB1c2goY29udGFjdHNbaV0pOwogICAgICB9CgogICAgICBjb250YWN0cy5sZW5ndGggPSAwOyAvLyBUcmFuc2ZlciBGcmljdGlvbkVxdWF0aW9uIGZyb20gY3VycmVudCBsaXN0IHRvIHRoZSBwb29sIGZvciByZXVzZQoKICAgICAgY29uc3QgTm9sZEZyaWN0aW9uRXF1YXRpb25zID0gdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOb2xkRnJpY3Rpb25FcXVhdGlvbnM7IGkrKykgewogICAgICAgIGZyaWN0aW9uRXF1YXRpb25Qb29sLnB1c2godGhpcy5mcmljdGlvbkVxdWF0aW9uc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoID0gMDsKICAgICAgdGhpcy5uYXJyb3dwaGFzZS5nZXRDb250YWN0cyhwMSwgcDIsIHRoaXMsIGNvbnRhY3RzLCBvbGRjb250YWN0cywgLy8gVG8gYmUgcmV1c2VkCiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMsIGZyaWN0aW9uRXF1YXRpb25Qb29sKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUubmFycm93cGhhc2UgPSBwZXJmb3JtYW5jZSQxLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gTG9vcCBvdmVyIGFsbCBjb2xsaXNpb25zCgoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZSQxLm5vdygpOwogICAgICB9IC8vIEFkZCBhbGwgZnJpY3Rpb24gZXFzCgoKICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24odGhpcy5mcmljdGlvbkVxdWF0aW9uc1tpXSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG5jb250YWN0cyA9IGNvbnRhY3RzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBuY29udGFjdHM7IGsrKykgewogICAgICAgIC8vIEN1cnJlbnQgY29udGFjdAogICAgICAgIGNvbnN0IGMgPSBjb250YWN0c1trXTsgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGluZGVjZXMKCiAgICAgICAgY29uc3QgYmkgPSBjLmJpOwogICAgICAgIGNvbnN0IGJqID0gYy5iajsKICAgICAgICBjb25zdCBzaSA9IGMuc2k7CiAgICAgICAgY29uc3Qgc2ogPSBjLnNqOyAvLyBHZXQgY29sbGlzaW9uIHByb3BlcnRpZXMKCiAgICAgICAgbGV0IGNtOwoKICAgICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHsKICAgICAgICAgIGNtID0gdGhpcy5nZXRDb250YWN0TWF0ZXJpYWwoYmkubWF0ZXJpYWwsIGJqLm1hdGVyaWFsKSB8fCB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNtID0gdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICAgIH0gLy8gYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CgoKICAgICAgICBjbS5mcmljdGlvbjsgLy8gYy5yZXN0aXR1dGlvbiA9IGNtLnJlc3RpdHV0aW9uOwogICAgICAgIC8vIElmIGZyaWN0aW9uIG9yIHJlc3RpdHV0aW9uIHdlcmUgc3BlY2lmaWVkIGluIHRoZSBtYXRlcmlhbCwgdXNlIHRoZW0KCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBpZiAoYmkubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCAmJiBiai5tYXRlcmlhbC5mcmljdGlvbiA+PSAwKSB7CiAgICAgICAgICAgIGJpLm1hdGVyaWFsLmZyaWN0aW9uICogYmoubWF0ZXJpYWwuZnJpY3Rpb247CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwucmVzdGl0dXRpb24gPj0gMCkgewogICAgICAgICAgICBjLnJlc3RpdHV0aW9uID0gYmkubWF0ZXJpYWwucmVzdGl0dXRpb24gKiBiai5tYXRlcmlhbC5yZXN0aXR1dGlvbjsKICAgICAgICAgIH0KICAgICAgICB9IC8vIGMuc2V0U3Bvb2tQYXJhbXMoCiAgICAgICAgLy8gICAgICAgICAgIGNtLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzcywKICAgICAgICAvLyAgICAgICAgICAgY20uY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbiwKICAgICAgICAvLyAgICAgICAgICAgZHQKICAgICAgICAvLyAgICAgICApOwoKCiAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKGMpOyAvLyAvLyBBZGQgZnJpY3Rpb24gY29uc3RyYWludCBlcXVhdGlvbgogICAgICAgIC8vIGlmKG11ID4gMCl7CiAgICAgICAgLy8gCS8vIENyZWF0ZSAyIHRhbmdlbnQgZXF1YXRpb25zCiAgICAgICAgLy8gCWNvbnN0IG11ZyA9IG11ICogZ25vcm07CiAgICAgICAgLy8gCWNvbnN0IHJlZHVjZWRNYXNzID0gKGJpLmludk1hc3MgKyBiai5pbnZNYXNzKTsKICAgICAgICAvLyAJaWYocmVkdWNlZE1hc3MgPiAwKXsKICAgICAgICAvLyAJCXJlZHVjZWRNYXNzID0gMS9yZWR1Y2VkTWFzczsKICAgICAgICAvLyAJfQogICAgICAgIC8vIAljb25zdCBwb29sID0gZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgICAgLy8gCWNvbnN0IGMxID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYmksYmosbXVnKnJlZHVjZWRNYXNzKTsKICAgICAgICAvLyAJY29uc3QgYzIgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihiaSxiaixtdWcqcmVkdWNlZE1hc3MpOwogICAgICAgIC8vIAl0aGlzLmZyaWN0aW9uRXF1YXRpb25zLnB1c2goYzEsIGMyKTsKICAgICAgICAvLyAJYzEuYmkgPSBjMi5iaSA9IGJpOwogICAgICAgIC8vIAljMS5iaiA9IGMyLmJqID0gYmo7CiAgICAgICAgLy8gCWMxLm1pbkZvcmNlID0gYzIubWluRm9yY2UgPSAtbXVnKnJlZHVjZWRNYXNzOwogICAgICAgIC8vIAljMS5tYXhGb3JjZSA9IGMyLm1heEZvcmNlID0gbXVnKnJlZHVjZWRNYXNzOwogICAgICAgIC8vIAkvLyBDb3B5IG92ZXIgdGhlIHJlbGF0aXZlIHZlY3RvcnMKICAgICAgICAvLyAJYzEucmkuY29weShjLnJpKTsKICAgICAgICAvLyAJYzEucmouY29weShjLnJqKTsKICAgICAgICAvLyAJYzIucmkuY29weShjLnJpKTsKICAgICAgICAvLyAJYzIucmouY29weShjLnJqKTsKICAgICAgICAvLyAJLy8gQ29uc3RydWN0IHRhbmdlbnRzCiAgICAgICAgLy8gCWMubmkudGFuZ2VudHMoYzEudCwgYzIudCk7CiAgICAgICAgLy8gICAgICAgICAgIC8vIFNldCBzcG9vayBwYXJhbXMKICAgICAgICAvLyAgICAgICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIGR0KTsKICAgICAgICAvLyAgICAgICAgICAgYzIuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIGR0KTsKICAgICAgICAvLyAgICAgICAgICAgYzEuZW5hYmxlZCA9IGMyLmVuYWJsZWQgPSBjLmVuYWJsZWQ7CiAgICAgICAgLy8gCS8vIEFkZCBlcXVhdGlvbnMgdG8gc29sdmVyCiAgICAgICAgLy8gCXNvbHZlci5hZGRFcXVhdGlvbihjMSk7CiAgICAgICAgLy8gCXNvbHZlci5hZGRFcXVhdGlvbihjMik7CiAgICAgICAgLy8gfQoKICAgICAgICBpZiAoYmkuYWxsb3dTbGVlcCAmJiBiaS50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiai5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJqLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7CiAgICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWRCID0gYmoudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgYmouYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTsKICAgICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkQiA9IGJqLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICAgIGlmIChzcGVlZFNxdWFyZWRCID49IHNwZWVkTGltaXRTcXVhcmVkQiAqIDIpIHsKICAgICAgICAgICAgYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoYmouYWxsb3dTbGVlcCAmJiBiai50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmouc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiaS5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJpLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7CiAgICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWRBID0gYmkudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgYmkuYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTsKICAgICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkQSA9IGJpLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICAgIGlmIChzcGVlZFNxdWFyZWRBID49IHNwZWVkTGltaXRTcXVhcmVkQSAqIDIpIHsKICAgICAgICAgICAgYmoud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBOb3cgd2Uga25vdyB0aGF0IGkgYW5kIGogYXJlIGluIGNvbnRhY3QuIFNldCBjb2xsaXNpb24gbWF0cml4IHN0YXRlCgoKICAgICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXQoYmksIGJqLCB0cnVlKTsKCiAgICAgICAgaWYgKCF0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzLmdldChiaSwgYmopKSB7CiAgICAgICAgICAvLyBGaXJzdCBjb250YWN0IQogICAgICAgICAgLy8gV2UgcmV1c2UgdGhlIGNvbGxpZGVFdmVudCBvYmplY3QsIG90aGVyd2lzZSB3ZSB3aWxsIGVuZCB1cCBjcmVhdGluZyBuZXcgb2JqZWN0cyBmb3IgZWFjaCBuZXcgY29udGFjdCwgZXZlbiBpZiB0aGVyZSdzIG5vIGV2ZW50IGxpc3RlbmVyIGF0dGFjaGVkLgogICAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuYm9keSA9IGJqOwogICAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuY29udGFjdCA9IGM7CiAgICAgICAgICBiaS5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50KTsKICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiaTsKICAgICAgICAgIGJqLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5zZXQoYmkuaWQsIGJqLmlkKTsKICAgICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci5zZXQoc2kuaWQsIHNqLmlkKTsKICAgICAgfQoKICAgICAgdGhpcy5lbWl0Q29udGFjdEV2ZW50cygpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5tYWtlQ29udGFjdENvbnN0cmFpbnRzID0gcGVyZm9ybWFuY2UkMS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2UkMS5ub3coKTsKICAgICAgfSAvLyBXYWtlIHVwIGJvZGllcwoKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSkgewogICAgICAgICAgYmkud2FrZVVwKCk7CiAgICAgICAgICBiaS53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IC8vIEFkZCB1c2VyLWFkZGVkIGNvbnN0cmFpbnRzCgoKICAgICAgTmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTmNvbnN0cmFpbnRzOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07CiAgICAgICAgYy51cGRhdGUoKTsKCiAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5lcSA9IGMuZXF1YXRpb25zLmxlbmd0aDsgaiAhPT0gTmVxOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGVxID0gYy5lcXVhdGlvbnNbal07CiAgICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24oZXEpOwogICAgICAgIH0KICAgICAgfSAvLyBTb2x2ZSB0aGUgY29uc3RyYWluZWQgc3lzdGVtCgoKICAgICAgc29sdmVyLnNvbHZlKGR0LCB0aGlzKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUuc29sdmUgPSBwZXJmb3JtYW5jZSQxLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gUmVtb3ZlIGFsbCBjb250YWN0cyBmcm9tIHNvbHZlcgoKCiAgICAgIHNvbHZlci5yZW1vdmVBbGxFcXVhdGlvbnMoKTsgLy8gQXBwbHkgZGFtcGluZywgc2VlIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9idWxsZXQvaXNzdWVzL2RldGFpbD9pZD03NCBmb3IgZGV0YWlscwoKICAgICAgY29uc3QgcG93ID0gTWF0aC5wb3c7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLnR5cGUgJiBEWU5BTUlDKSB7CiAgICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllcwogICAgICAgICAgY29uc3QgbGQgPSBwb3coMS4wIC0gYmkubGluZWFyRGFtcGluZywgZHQpOwogICAgICAgICAgY29uc3QgdiA9IGJpLnZlbG9jaXR5OwogICAgICAgICAgdi5zY2FsZShsZCwgdik7CiAgICAgICAgICBjb25zdCBhdiA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKCiAgICAgICAgICBpZiAoYXYpIHsKICAgICAgICAgICAgY29uc3QgYWQgPSBwb3coMS4wIC0gYmkuYW5ndWxhckRhbXBpbmcsIGR0KTsKICAgICAgICAgICAgYXYuc2NhbGUoYWQsIGF2KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCk7IC8vIEludm9rZSBwcmUtc3RlcCBjYWxsYmFja3MKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkucHJlU3RlcCkgewogICAgICAgICAgYmkucHJlU3RlcC5jYWxsKGJpKTsKICAgICAgICB9CiAgICAgIH0gLy8gTGVhcCBmcm9nCiAgICAgIC8vIHZuZXcgPSB2ICsgaCpmL20KICAgICAgLy8geG5ldyA9IHggKyBoKnZuZXcKCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlJDEubm93KCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHN0ZXBudW1iZXIgPSB0aGlzLnN0ZXBudW1iZXI7CiAgICAgIGNvbnN0IHF1YXROb3JtYWxpemUgPSBzdGVwbnVtYmVyICUgKHRoaXMucXVhdE5vcm1hbGl6ZVNraXAgKyAxKSA9PT0gMDsKICAgICAgY29uc3QgcXVhdE5vcm1hbGl6ZUZhc3QgPSB0aGlzLnF1YXROb3JtYWxpemVGYXN0OwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgYm9kaWVzW2ldLmludGVncmF0ZShkdCwgcXVhdE5vcm1hbGl6ZSwgcXVhdE5vcm1hbGl6ZUZhc3QpOwogICAgICB9CgogICAgICB0aGlzLmNsZWFyRm9yY2VzKCk7CiAgICAgIHRoaXMuYnJvYWRwaGFzZS5kaXJ0eSA9IHRydWU7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLmludGVncmF0ZSA9IHBlcmZvcm1hbmNlJDEubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgfSAvLyBVcGRhdGUgc3RlcCBudW1iZXIKCgogICAgICB0aGlzLnN0ZXBudW1iZXIgKz0gMTsKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCk7IC8vIEludm9rZSBwb3N0LXN0ZXAgY2FsbGJhY2tzCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKICAgICAgICBjb25zdCBwb3N0U3RlcCA9IGJpLnBvc3RTdGVwOwoKICAgICAgICBpZiAocG9zdFN0ZXApIHsKICAgICAgICAgIHBvc3RTdGVwLmNhbGwoYmkpOwogICAgICAgIH0KICAgICAgfSAvLyBTbGVlcGluZyB1cGRhdGUKCgogICAgICBsZXQgaGFzQWN0aXZlQm9kaWVzID0gdHJ1ZTsKCiAgICAgIGlmICh0aGlzLmFsbG93U2xlZXApIHsKICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSBmYWxzZTsKCiAgICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKICAgICAgICAgIGJpLnNsZWVwVGljayh0aGlzLnRpbWUpOwoKICAgICAgICAgIGlmIChiaS5zbGVlcFN0YXRlICE9PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgICAgIGhhc0FjdGl2ZUJvZGllcyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmhhc0FjdGl2ZUJvZGllcyA9IGhhc0FjdGl2ZUJvZGllczsKICAgIH0KCiAgICBlbWl0Q29udGFjdEV2ZW50cygpIHsKICAgICAgY29uc3QgaGFzQmVnaW5Db250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnKTsKICAgICAgY29uc3QgaGFzRW5kQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignZW5kQ29udGFjdCcpOwoKICAgICAgaWYgKGhhc0JlZ2luQ29udGFjdCB8fCBoYXNFbmRDb250YWN0KSB7CiAgICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5nZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpOwogICAgICB9CgogICAgICBpZiAoaGFzQmVnaW5Db250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhZGRpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2ldKTsKICAgICAgICAgIGJlZ2luQ29udGFjdEV2ZW50LmJvZHlCID0gdGhpcy5nZXRCb2R5QnlJZChhZGRpdGlvbnNbaSArIDFdKTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChiZWdpbkNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luQ29udGFjdEV2ZW50LmJvZHlCID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKGhhc0VuZENvbnRhY3QpIHsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHJlbW92YWxzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlBID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpXSk7CiAgICAgICAgICBlbmRDb250YWN0RXZlbnQuYm9keUIgPSB0aGlzLmdldEJvZHlCeUlkKHJlbW92YWxzW2kgKyAxXSk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kQ29udGFjdEV2ZW50KTsKICAgICAgICB9CgogICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IGVuZENvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGFkZGl0aW9ucy5sZW5ndGggPSByZW1vdmFscy5sZW5ndGggPSAwOwogICAgICBjb25zdCBoYXNCZWdpblNoYXBlQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignYmVnaW5TaGFwZUNvbnRhY3QnKTsKICAgICAgY29uc3QgaGFzRW5kU2hhcGVDb250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdlbmRTaGFwZUNvbnRhY3QnKTsKCiAgICAgIGlmIChoYXNCZWdpblNoYXBlQ29udGFjdCB8fCBoYXNFbmRTaGFwZUNvbnRhY3QpIHsKICAgICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci5nZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpOwogICAgICB9CgogICAgICBpZiAoaGFzQmVnaW5TaGFwZUNvbnRhY3QpIHsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFkZGl0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGNvbnN0IHNoYXBlQSA9IHRoaXMuZ2V0U2hhcGVCeUlkKGFkZGl0aW9uc1tpXSk7CiAgICAgICAgICBjb25zdCBzaGFwZUIgPSB0aGlzLmdldFNoYXBlQnlJZChhZGRpdGlvbnNbaSArIDFdKTsKICAgICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBOwogICAgICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBzaGFwZUI7CiAgICAgICAgICBpZiAoc2hhcGVBKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gc2hhcGVBLmJvZHk7CiAgICAgICAgICBpZiAoc2hhcGVCKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5TaGFwZUNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBudWxsOwogICAgICB9CgogICAgICBpZiAoaGFzRW5kU2hhcGVDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGNvbnN0IHNoYXBlQSA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2ldKTsKICAgICAgICAgIGNvbnN0IHNoYXBlQiA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2kgKyAxXSk7CiAgICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUEgPSBzaGFwZUE7CiAgICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBzaGFwZUI7CiAgICAgICAgICBpZiAoc2hhcGVBKSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5OwogICAgICAgICAgaWYgKHNoYXBlQikgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBzaGFwZUIuYm9keTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlbmRTaGFwZUNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBib2R5IGZvcmNlcyBpbiB0aGUgd29ybGQgdG8gemVyby4KICAgICAqLwoKCiAgICBjbGVhckZvcmNlcygpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgYi5mb3JjZTsKICAgICAgICBiLnRvcnF1ZTsKICAgICAgICBiLmZvcmNlLnNldCgwLCAwLCAwKTsKICAgICAgICBiLnRvcnF1ZS5zZXQoMCwgMCwgMCk7CiAgICAgIH0KICAgIH0KCiAgfSAvLyBUZW1wIHN0dWZmCgoKICBuZXcgQUFCQigpOwogIGNvbnN0IHRtcFJheSA9IG5ldyBSYXkoKTsgLy8gcGVyZm9ybWFuY2Uubm93KCkgZmFsbGJhY2sgb24gRGF0ZS5ub3coKQoKICBjb25zdCBwZXJmb3JtYW5jZSQxID0gZ2xvYmFsVGhpcy5wZXJmb3JtYW5jZSB8fCB7fTsKCiAgaWYgKCFwZXJmb3JtYW5jZSQxLm5vdykgewogICAgbGV0IG5vd09mZnNldCA9IERhdGUubm93KCk7CgogICAgaWYgKHBlcmZvcm1hbmNlJDEudGltaW5nICYmIHBlcmZvcm1hbmNlJDEudGltaW5nLm5hdmlnYXRpb25TdGFydCkgewogICAgICBub3dPZmZzZXQgPSBwZXJmb3JtYW5jZSQxLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQ7CiAgICB9CgogICAgcGVyZm9ybWFuY2UkMS5ub3cgPSAoKSA9PiBEYXRlLm5vdygpIC0gbm93T2Zmc2V0OwogIH0gLy8gUmV1c2FibGUgZXZlbnQgb2JqZWN0cyB0byBzYXZlIG1lbW9yeS4KCgogIGNvbnN0IFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCA9IHsKICAgIHR5cGU6ICdwb3N0U3RlcCcKICB9OyAvLyBEaXNwYXRjaGVkIGJlZm9yZSB0aGUgd29ybGQgc3RlcHMgZm9yd2FyZCBpbiB0aW1lLgoKICBjb25zdCBXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCA9IHsKICAgIHR5cGU6ICdwcmVTdGVwJwogIH07CiAgY29uc3QgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQgPSB7CiAgICB0eXBlOiBCb2R5LkNPTExJREVfRVZFTlRfTkFNRSwKICAgIGJvZHk6IG51bGwsCiAgICBjb250YWN0OiBudWxsCiAgfTsgLy8gUG9vbHMgZm9yIHVudXNlZCBvYmplY3RzCgogIGNvbnN0IFdvcmxkX3N0ZXBfb2xkQ29udGFjdHMgPSBbXTsKICBjb25zdCBXb3JsZF9zdGVwX2ZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107IC8vIFJldXNhYmxlIGFycmF5cyBmb3IgY29sbGlzaW9uIHBhaXJzCgogIGNvbnN0IFdvcmxkX3N0ZXBfcDEgPSBbXTsKICBjb25zdCBXb3JsZF9zdGVwX3AyID0gW107IC8vIFN0dWZmIGZvciBlbWl0Q29udGFjdEV2ZW50cwoKICBjb25zdCBhZGRpdGlvbnMgPSBbXTsKICBjb25zdCByZW1vdmFscyA9IFtdOwogIGNvbnN0IGJlZ2luQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2JlZ2luQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsCiAgfTsKICBjb25zdCBlbmRDb250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnZW5kQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsCiAgfTsKICBjb25zdCBiZWdpblNoYXBlQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2JlZ2luU2hhcGVDb250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwsCiAgICBzaGFwZUE6IG51bGwsCiAgICBzaGFwZUI6IG51bGwKICB9OwogIGNvbnN0IGVuZFNoYXBlQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2VuZFNoYXBlQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsLAogICAgc2hhcGVBOiBudWxsLAogICAgc2hhcGVCOiBudWxsCiAgfTsKCiAgY29uc3QgbWFrZVZlYzMgPSAoW3gsIHksIHpdKSA9PiBuZXcgVmVjMyh4LCB5LCB6KTsKCiAgY29uc3QgcHJlcGFyZVNwaGVyZSA9IGFyZ3MgPT4gQXJyYXkuaXNBcnJheShhcmdzKSA/IGFyZ3MgOiBbYXJnc107CgogIGNvbnN0IHByZXBhcmVDb252ZXhQb2x5aGVkcm9uID0gKFt2LCBmYWNlcywgbiwgYSwgYm91bmRpbmdTcGhlcmVSYWRpdXNdKSA9PiBbewogICAgdmVydGljZXM6IHYgPyB2Lm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsCiAgICBmYWNlcywKICAgIG5vcm1hbHM6IG4gPyBuLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsCiAgICBheGVzOiBhID8gYS5tYXAobWFrZVZlYzMpIDogdW5kZWZpbmVkLAogICAgYm91bmRpbmdTcGhlcmVSYWRpdXMKICB9XTsKCiAgZnVuY3Rpb24gY3JlYXRlU2hhcGUodHlwZSwgYXJncykgewogICAgc3dpdGNoICh0eXBlKSB7CiAgICAgIGNhc2UgJ0JveCc6CiAgICAgICAgcmV0dXJuIG5ldyBCb3gobmV3IFZlYzMoLi4uYXJncy5tYXAodiA9PiB2IC8gMikpKTsKICAgICAgLy8gZXh0ZW50cyA9PiBoYWxmRXh0ZW50cwoKICAgICAgY2FzZSAnQ29udmV4UG9seWhlZHJvbic6CiAgICAgICAgcmV0dXJuIG5ldyBDb252ZXhQb2x5aGVkcm9uKC4uLnByZXBhcmVDb252ZXhQb2x5aGVkcm9uKGFyZ3MpKTsKCiAgICAgIGNhc2UgJ0N5bGluZGVyJzoKICAgICAgICByZXR1cm4gbmV3IEN5bGluZGVyKC4uLmFyZ3MpOwogICAgICAvLyBbIHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzIF0gPSBhcmdzCgogICAgICBjYXNlICdIZWlnaHRmaWVsZCc6CiAgICAgICAgcmV0dXJuIG5ldyBIZWlnaHRmaWVsZCguLi5hcmdzKTsKICAgICAgLy8gWyBBcnJheSBkYXRhLCBvcHRpb25zOiB7bWluVmFsdWUsIG1heFZhbHVlLCBlbGVtZW50U2l6ZX0gIF0gPSBhcmdzCgogICAgICBjYXNlICdQYXJ0aWNsZSc6CiAgICAgICAgcmV0dXJuIG5ldyBQYXJ0aWNsZSgpOwogICAgICAvLyBubyBhcmdzCgogICAgICBjYXNlICdQbGFuZSc6CiAgICAgICAgcmV0dXJuIG5ldyBQbGFuZSgpOwogICAgICAvLyBubyBhcmdzLCBpbmZpbml0ZSB4IGFuZCB5CgogICAgICBjYXNlICdTcGhlcmUnOgogICAgICAgIHJldHVybiBuZXcgU3BoZXJlKC4uLnByZXBhcmVTcGhlcmUoYXJncykpOwogICAgICAvLyByYWRpdXMgPSBhcmdzCgogICAgICBjYXNlICdUcmltZXNoJzoKICAgICAgICByZXR1cm4gbmV3IFRyaW1lc2goLi4uYXJncyk7CiAgICAgIC8vIFt2ZXJ0aWNlcywgaW5kaWNlc10gPSBhcmdzCiAgICB9CiAgfQogIC8qKgogICAqCiAgICogQHBhcmFtIHV1aWQge3N0cmluZ30KICAgKiBAcGFyYW0gcHJvcHMge0JvZHlQcm9wc30KICAgKiBAcGFyYW0gdHlwZSB7Qm9keVNoYXBlVHlwZX0KICAgKiBAcmV0dXJuIHttb2R1bGU6b2JqZWN0cy9Cb2R5LkJvZHl9CiAgICovCgoKICBjb25zdCBwcm9wc1RvQm9keSA9ICh1dWlkLCBwcm9wcywgdHlwZSkgPT4gewogICAgY29uc3QgewogICAgICBhcmdzID0gW10sCiAgICAgIHBvc2l0aW9uID0gWzAsIDAsIDBdLAogICAgICByb3RhdGlvbiA9IFswLCAwLCAwXSwKICAgICAgdmVsb2NpdHkgPSBbMCwgMCwgMF0sCiAgICAgIGFuZ3VsYXJWZWxvY2l0eSA9IFswLCAwLCAwXSwKICAgICAgbGluZWFyRmFjdG9yID0gWzEsIDEsIDFdLAogICAgICBhbmd1bGFyRmFjdG9yID0gWzEsIDEsIDFdLAogICAgICB0eXBlOiBib2R5VHlwZSwKICAgICAgbWFzcywKICAgICAgbWF0ZXJpYWwsCiAgICAgIHNoYXBlcywKICAgICAgb25Db2xsaWRlLAogICAgICBjb2xsaXNpb25SZXNwb25zZSwKICAgICAgLi4uZXh0cmEKICAgIH0gPSBwcm9wczsKICAgIGNvbnN0IGJvZHkgPSBuZXcgQm9keSh7IC4uLmV4dHJhLAogICAgICBtYXNzOiBib2R5VHlwZSA9PT0gJ1N0YXRpYycgPyAwIDogbWFzcywKICAgICAgdHlwZTogYm9keVR5cGUgPyBCb2R5W2JvZHlUeXBlLnRvVXBwZXJDYXNlKCldIDogdW5kZWZpbmVkLAogICAgICBtYXRlcmlhbDogbWF0ZXJpYWwgPyBuZXcgTWF0ZXJpYWwobWF0ZXJpYWwpIDogdW5kZWZpbmVkCiAgICB9KTsKICAgIGJvZHkudXVpZCA9IHV1aWQ7CgogICAgaWYgKGNvbGxpc2lvblJlc3BvbnNlICE9PSB1bmRlZmluZWQpIHsKICAgICAgYm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGNvbGxpc2lvblJlc3BvbnNlOwogICAgfQoKICAgIGlmICh0eXBlID09PSAnQ29tcG91bmQnKSB7CiAgICAgIHNoYXBlcy5mb3JFYWNoKCh7CiAgICAgICAgdHlwZSwKICAgICAgICBhcmdzLAogICAgICAgIHBvc2l0aW9uLAogICAgICAgIHJvdGF0aW9uLAogICAgICAgIG1hdGVyaWFsLAogICAgICAgIC4uLmV4dHJhCiAgICAgIH0pID0+IHsKICAgICAgICBjb25zdCBzaGFwZUJvZHkgPSBib2R5LmFkZFNoYXBlKGNyZWF0ZVNoYXBlKHR5cGUsIGFyZ3MpLCBwb3NpdGlvbiA/IG5ldyBWZWMzKC4uLnBvc2l0aW9uKSA6IHVuZGVmaW5lZCwgcm90YXRpb24gPyBuZXcgUXVhdGVybmlvbigpLnNldEZyb21FdWxlciguLi5yb3RhdGlvbikgOiB1bmRlZmluZWQpOwogICAgICAgIGlmIChtYXRlcmlhbCkgc2hhcGVCb2R5Lm1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKG1hdGVyaWFsKTsKICAgICAgICBPYmplY3QuYXNzaWduKHNoYXBlQm9keSwgZXh0cmEpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncykpOwogICAgfQoKICAgIGJvZHkucG9zaXRpb24uc2V0KHBvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSwgcG9zaXRpb25bMl0pOwogICAgYm9keS5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihyb3RhdGlvblswXSwgcm90YXRpb25bMV0sIHJvdGF0aW9uWzJdKTsKICAgIGJvZHkudmVsb2NpdHkuc2V0KHZlbG9jaXR5WzBdLCB2ZWxvY2l0eVsxXSwgdmVsb2NpdHlbMl0pOwogICAgYm9keS5hbmd1bGFyVmVsb2NpdHkuc2V0KGFuZ3VsYXJWZWxvY2l0eVswXSwgYW5ndWxhclZlbG9jaXR5WzFdLCBhbmd1bGFyVmVsb2NpdHlbMl0pOwogICAgYm9keS5saW5lYXJGYWN0b3Iuc2V0KGxpbmVhckZhY3RvclswXSwgbGluZWFyRmFjdG9yWzFdLCBsaW5lYXJGYWN0b3JbMl0pOwogICAgYm9keS5hbmd1bGFyRmFjdG9yLnNldChhbmd1bGFyRmFjdG9yWzBdLCBhbmd1bGFyRmFjdG9yWzFdLCBhbmd1bGFyRmFjdG9yWzJdKTsKICAgIHJldHVybiBib2R5OwogIH07CgogIGNvbnN0IHN0YXRlID0gewogICAgYm9kaWVzOiB7fSwKICAgIHZlaGljbGVzOiB7fSwKICAgIHNwcmluZ3M6IHt9LAogICAgc3ByaW5nSW5zdGFuY2VzOiB7fSwKICAgIHJheXM6IHt9LAogICAgd29ybGQ6IG5ldyBXb3JsZCgpLAogICAgY29uZmlnOiB7CiAgICAgIHN0ZXA6IDEgLyA2MAogICAgfSwKICAgIHN1YnNjcmlwdGlvbnM6IHt9LAogICAgdGVtcFZlY3RvcjogbmV3IFZlYzMoKSwKICAgIGJvZGllc05lZWRTeW5jaW5nOiBmYWxzZSwKICAgIGxhc3RDYWxsVGltZTogdW5kZWZpbmVkCiAgfTsKCiAgZnVuY3Rpb24gc3luY0JvZGllcygpIHsKICAgIHN0YXRlLmJvZGllc05lZWRTeW5jaW5nID0gdHJ1ZTsKICAgIHN0YXRlLmJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5yZWR1Y2UoKGFjYywgYm9keSkgPT4gKHsgLi4uYWNjLAogICAgICBbYm9keS51dWlkXTogYm9keQogICAgfSksIHt9KTsKICB9CgogIGZ1bmN0aW9uIGVtaXRCZWdpbkNvbnRhY3QoewogICAgYm9keUEsCiAgICBib2R5QgogIH0pIHsKICAgIGlmICghYm9keUEgfHwgIWJvZHlCKSByZXR1cm47CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgb3A6ICdldmVudCcsCiAgICAgIHR5cGU6ICdjb2xsaWRlQmVnaW4nLAogICAgICBib2R5QTogYm9keUEudXVpZCwKICAgICAgYm9keUI6IGJvZHlCLnV1aWQKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gZW1pdEVuZENvbnRhY3QoewogICAgYm9keUEsCiAgICBib2R5QgogIH0pIHsKICAgIGlmICghYm9keUEgfHwgIWJvZHlCKSByZXR1cm47CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgb3A6ICdldmVudCcsCiAgICAgIHR5cGU6ICdjb2xsaWRlRW5kJywKICAgICAgYm9keUE6IGJvZHlBLnV1aWQsCiAgICAgIGJvZHlCOiBib2R5Qi51dWlkCiAgICB9KTsKICB9CgogIHNlbGYub25tZXNzYWdlID0gZSA9PiB7CiAgICBjb25zdCB7CiAgICAgIG9wLAogICAgICB1dWlkLAogICAgICB0eXBlLAogICAgICBwb3NpdGlvbnMsCiAgICAgIHF1YXRlcm5pb25zLAogICAgICBwcm9wcwogICAgfSA9IGUuZGF0YTsKICAgIGNvbnN0IGJyb2FkcGhhc2VzID0gewogICAgICBOYWl2ZUJyb2FkcGhhc2UsCiAgICAgIFNBUEJyb2FkcGhhc2UKICAgIH07CgogICAgc3dpdGNoIChvcCkgewogICAgICBjYXNlICdpbml0JzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGdyYXZpdHksCiAgICAgICAgICAgIHRvbGVyYW5jZSwKICAgICAgICAgICAgc3RlcCwKICAgICAgICAgICAgaXRlcmF0aW9ucywKICAgICAgICAgICAgYWxsb3dTbGVlcCwKICAgICAgICAgICAgYnJvYWRwaGFzZSwKICAgICAgICAgICAgYXhpc0luZGV4LAogICAgICAgICAgICBkZWZhdWx0Q29udGFjdE1hdGVyaWFsLAogICAgICAgICAgICBxdWF0Tm9ybWFsaXplRmFzdCwKICAgICAgICAgICAgcXVhdE5vcm1hbGl6ZVNraXAsCiAgICAgICAgICAgIHNvbHZlcgogICAgICAgICAgfSA9IHByb3BzOwogICAgICAgICAgc3RhdGUud29ybGQuYWxsb3dTbGVlcCA9IGFsbG93U2xlZXA7CiAgICAgICAgICBzdGF0ZS53b3JsZC5ncmF2aXR5LnNldChncmF2aXR5WzBdLCBncmF2aXR5WzFdLCBncmF2aXR5WzJdKTsKICAgICAgICAgIHN0YXRlLndvcmxkLnF1YXROb3JtYWxpemVGYXN0ID0gcXVhdE5vcm1hbGl6ZUZhc3Q7CiAgICAgICAgICBzdGF0ZS53b3JsZC5xdWF0Tm9ybWFsaXplU2tpcCA9IHF1YXROb3JtYWxpemVTa2lwOwoKICAgICAgICAgIGlmIChzb2x2ZXIgPT09ICdTcGxpdCcpIHsKICAgICAgICAgICAgc3RhdGUud29ybGQuc29sdmVyID0gbmV3IFNwbGl0U29sdmVyKG5ldyBHU1NvbHZlcigpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gdG9sZXJhbmNlOwogICAgICAgICAgc3RhdGUud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBpdGVyYXRpb25zOwogICAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZSA9IG5ldyAoYnJvYWRwaGFzZXNbYnJvYWRwaGFzZSArICdCcm9hZHBoYXNlJ10gfHwgTmFpdmVCcm9hZHBoYXNlKShzdGF0ZS53b3JsZCk7CiAgICAgICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IGF4aXNJbmRleCA9PT0gdW5kZWZpbmVkIHx8IGF4aXNJbmRleCA9PT0gbnVsbCA/IDAgOiBheGlzSW5kZXg7CiAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnLCBlbWl0QmVnaW5Db250YWN0KTsKICAgICAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnLCBlbWl0RW5kQ29udGFjdCk7CiAgICAgICAgICBPYmplY3QuYXNzaWduKHN0YXRlLndvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwsIGRlZmF1bHRDb250YWN0TWF0ZXJpYWwpOwogICAgICAgICAgc3RhdGUuY29uZmlnLnN0ZXAgPSBzdGVwOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc3RlcCc6CiAgICAgICAgewogICAgICAgICAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwOwoKICAgICAgICAgIGlmICghc3RhdGUubGFzdENhbGxUaW1lKSB7CiAgICAgICAgICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RhdGUuY29uZmlnLnN0ZXApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENhbGwgPSBub3cgLSBzdGF0ZS5sYXN0Q2FsbFRpbWU7CiAgICAgICAgICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RhdGUuY29uZmlnLnN0ZXAsIHRpbWVTaW5jZUxhc3RDYWxsKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzdGF0ZS5sYXN0Q2FsbFRpbWUgPSBub3c7CiAgICAgICAgICBjb25zdCBudW1iZXJPZkJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5sZW5ndGg7CgogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkJvZGllczsgaSsrKSB7CiAgICAgICAgICAgIGxldCBiID0gc3RhdGUud29ybGQuYm9kaWVzW2ldLAogICAgICAgICAgICAgICAgcCA9IGIucG9zaXRpb24sCiAgICAgICAgICAgICAgICBxID0gYi5xdWF0ZXJuaW9uOwogICAgICAgICAgICBwb3NpdGlvbnNbMyAqIGkgKyAwXSA9IHAueDsKICAgICAgICAgICAgcG9zaXRpb25zWzMgKiBpICsgMV0gPSBwLnk7CiAgICAgICAgICAgIHBvc2l0aW9uc1szICogaSArIDJdID0gcC56OwogICAgICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDBdID0gcS54OwogICAgICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDFdID0gcS55OwogICAgICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDJdID0gcS56OwogICAgICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDNdID0gcS53OwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IG9ic2VydmF0aW9ucyA9IFtdOwoKICAgICAgICAgIGZvciAoY29uc3QgaWQgb2YgT2JqZWN0LmtleXMoc3RhdGUuc3Vic2NyaXB0aW9ucykpIHsKICAgICAgICAgICAgbGV0IFt1dWlkLCB0eXBlLCB0YXJnZXQgPSAnYm9kaWVzJ10gPSBzdGF0ZS5zdWJzY3JpcHRpb25zW2lkXTsKICAgICAgICAgICAgbGV0IG9iamVjdCA9IHN0YXRlW3RhcmdldF07CiAgICAgICAgICAgIGlmICghb2JqZWN0IHx8ICFvYmplY3RbdXVpZF0pIGNvbnRpbnVlOwogICAgICAgICAgICBsZXQgdmFsdWUgPSBvYmplY3RbdXVpZF1bdHlwZV07CiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFZlYzMpIHZhbHVlID0gdmFsdWUudG9BcnJheSgpO2Vsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgUXVhdGVybmlvbikgewogICAgICAgICAgICAgIHZhbHVlLnRvRXVsZXIoc3RhdGUudGVtcFZlY3Rvcik7CiAgICAgICAgICAgICAgdmFsdWUgPSBzdGF0ZS50ZW1wVmVjdG9yLnRvQXJyYXkoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBvYnNlcnZhdGlvbnMucHVzaChbaWQsIHZhbHVlXSk7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHsKICAgICAgICAgICAgb3A6ICdmcmFtZScsCiAgICAgICAgICAgIHBvc2l0aW9ucywKICAgICAgICAgICAgcXVhdGVybmlvbnMsCiAgICAgICAgICAgIG9ic2VydmF0aW9ucywKICAgICAgICAgICAgYWN0aXZlOiBzdGF0ZS53b3JsZC5oYXNBY3RpdmVCb2RpZXMKICAgICAgICAgIH07CgogICAgICAgICAgaWYgKHN0YXRlLmJvZGllc05lZWRTeW5jaW5nKSB7CiAgICAgICAgICAgIG1lc3NhZ2UuYm9kaWVzID0gc3RhdGUud29ybGQuYm9kaWVzLm1hcChib2R5ID0+IGJvZHkudXVpZCk7CiAgICAgICAgICAgIHN0YXRlLmJvZGllc05lZWRTeW5jaW5nID0gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShtZXNzYWdlLCBbcG9zaXRpb25zLmJ1ZmZlciwgcXVhdGVybmlvbnMuYnVmZmVyXSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhZGRCb2RpZXMnOgogICAgICAgIHsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXVpZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBjb25zdCBib2R5ID0gcHJvcHNUb0JvZHkodXVpZFtpXSwgcHJvcHNbaV0sIHR5cGUpOwogICAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRCb2R5KGJvZHkpOwogICAgICAgICAgICBpZiAocHJvcHNbaV0ub25Db2xsaWRlKSBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbGxpZGUnLCAoewogICAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgICAgYm9keSwKICAgICAgICAgICAgICB0YXJnZXQsCiAgICAgICAgICAgICAgY29udGFjdAogICAgICAgICAgICB9KSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgewogICAgICAgICAgICAgICAgbmksCiAgICAgICAgICAgICAgICByaSwKICAgICAgICAgICAgICAgIHJqLAogICAgICAgICAgICAgICAgYmksCiAgICAgICAgICAgICAgICBiaiwKICAgICAgICAgICAgICAgIGlkCiAgICAgICAgICAgICAgfSA9IGNvbnRhY3Q7CiAgICAgICAgICAgICAgY29uc3QgY29udGFjdFBvaW50ID0gYmkucG9zaXRpb24udmFkZChyaSk7CiAgICAgICAgICAgICAgY29uc3QgY29udGFjdE5vcm1hbCA9IGJpID09PSBib2R5ID8gbmkgOiBuaS5zY2FsZSgtMSk7CiAgICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICBvcDogJ2V2ZW50JywKICAgICAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgICAgICBib2R5OiBib2R5LnV1aWQsCiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldC51dWlkLAogICAgICAgICAgICAgICAgY29udGFjdDogewogICAgICAgICAgICAgICAgICBuaTogbmkudG9BcnJheSgpLAogICAgICAgICAgICAgICAgICByaTogcmkudG9BcnJheSgpLAogICAgICAgICAgICAgICAgICByajogcmoudG9BcnJheSgpLAogICAgICAgICAgICAgICAgICBiaTogYmkudXVpZCwKICAgICAgICAgICAgICAgICAgYmo6IGJqLnV1aWQsCiAgICAgICAgICAgICAgICAgIGltcGFjdFZlbG9jaXR5OiBjb250YWN0LmdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwoKSwKICAgICAgICAgICAgICAgICAgLy8gV29ybGQgcG9zaXRpb24gb2YgdGhlIGNvbnRhY3QKICAgICAgICAgICAgICAgICAgY29udGFjdFBvaW50OiBjb250YWN0UG9pbnQudG9BcnJheSgpLAogICAgICAgICAgICAgICAgICAvLyBOb3JtYWwgb2YgdGhlIGNvbnRhY3QsIHJlbGF0aXZlIHRvIHRoZSBjb2xsaWRpbmcgYm9keQogICAgICAgICAgICAgICAgICBjb250YWN0Tm9ybWFsOiBjb250YWN0Tm9ybWFsLnRvQXJyYXkoKSwKICAgICAgICAgICAgICAgICAgaWQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJzOiB7CiAgICAgICAgICAgICAgICAgIGJvZHlGaWx0ZXJHcm91cDogYm9keS5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgICAgICAgICAgYm9keUZpbHRlck1hc2s6IGJvZHkuY29sbGlzaW9uRmlsdGVyTWFzaywKICAgICAgICAgICAgICAgICAgdGFyZ2V0RmlsdGVyR3JvdXA6IHRhcmdldC5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgICAgICAgICAgdGFyZ2V0RmlsdGVyTWFzazogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlck1hc2sKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgc3luY0JvZGllcygpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlQm9kaWVzJzoKICAgICAgICB7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV1aWQubGVuZ3RoOyBpKyspIHN0YXRlLndvcmxkLnJlbW92ZUJvZHkoc3RhdGUuYm9kaWVzW3V1aWRbaV1dKTsKCiAgICAgICAgICBzeW5jQm9kaWVzKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzdWJzY3JpYmUnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgaWQsCiAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgIHRhcmdldAogICAgICAgICAgfSA9IHByb3BzOwogICAgICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF0gPSBbdXVpZCwgdHlwZSwgdGFyZ2V0XTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3Vuc3Vic2NyaWJlJzoKICAgICAgICB7CiAgICAgICAgICBkZWxldGUgc3RhdGUuc3Vic2NyaXB0aW9uc1twcm9wc107CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRQb3NpdGlvbic6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnBvc2l0aW9uLnNldChwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFF1YXRlcm5pb24nOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFZlbG9jaXR5JzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0udmVsb2NpdHkuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QW5ndWxhclZlbG9jaXR5JzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYW5ndWxhclZlbG9jaXR5LnNldChwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldExpbmVhckZhY3Rvcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmxpbmVhckZhY3Rvci5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBbmd1bGFyRmFjdG9yJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYW5ndWxhckZhY3Rvci5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRNYXNzJzoKICAgICAgICAvLyBhc3N1bWUgdGhhdCBhbiB1cGRhdGUgZnJvbSB6ZXJvLW1hc3MgaW1wbGllcyBhIG5lZWQgZm9yIGR5bmFtaWNzIG9uIHN0YXRpYyBvYmouCiAgICAgICAgaWYgKHByb3BzICE9PSAwICYmIHN0YXRlLmJvZGllc1t1dWlkXS50eXBlID09PSAwKSBzdGF0ZS5ib2RpZXNbdXVpZF0udHlwZSA9IDE7CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLm1hc3MgPSBwcm9wczsKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0udXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldExpbmVhckRhbXBpbmcnOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5saW5lYXJEYW1waW5nID0gcHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBbmd1bGFyRGFtcGluZyc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFuZ3VsYXJEYW1waW5nID0gcHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBbGxvd1NsZWVwJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYWxsb3dTbGVlcCA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0U2xlZXBTcGVlZExpbWl0JzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uc2xlZXBTcGVlZExpbWl0ID0gcHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRTbGVlcFRpbWVMaW1pdCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnNsZWVwVGltZUxpbWl0ID0gcHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb2xsaXNpb25GaWx0ZXJHcm91cCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gcHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb2xsaXNpb25GaWx0ZXJNYXNrJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uY29sbGlzaW9uRmlsdGVyTWFzayA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uUmVzcG9uc2UnOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5jb2xsaXNpb25SZXNwb25zZSA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Rml4ZWRSb3RhdGlvbic6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmZpeGVkUm90YXRpb24gPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldElzVHJpZ2dlcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmlzVHJpZ2dlciA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0R3Jhdml0eSc6CiAgICAgICAgc3RhdGUud29ybGQuZ3Jhdml0eS5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRUb2xlcmFuY2UnOgogICAgICAgIHN0YXRlLndvcmxkLnNvbHZlci50b2xlcmFuY2UgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFN0ZXAnOgogICAgICAgIHN0YXRlLmNvbmZpZy5zdGVwID0gcHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRJdGVyYXRpb25zJzoKICAgICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIuaXRlcmF0aW9ucyA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QnJvYWRwaGFzZSc6CiAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZSA9IG5ldyAoYnJvYWRwaGFzZXNbcHJvcHMgKyAnQnJvYWRwaGFzZSddIHx8IE5haXZlQnJvYWRwaGFzZSkoc3RhdGUud29ybGQpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QXhpc0luZGV4JzoKICAgICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IHByb3BzID09PSB1bmRlZmluZWQgfHwgcHJvcHMgPT09IG51bGwgPyAwIDogcHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUZvcmNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlGb3JjZShuZXcgVmVjMyguLi5wcm9wc1swXSksIG5ldyBWZWMzKC4uLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUltcHVsc2UnOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hcHBseUltcHVsc2UobmV3IFZlYzMoLi4ucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlMb2NhbEZvcmNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlMb2NhbEZvcmNlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4ucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FwcGx5TG9jYWxJbXB1bHNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlMb2NhbEltcHVsc2UobmV3IFZlYzMoLi4ucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlUb3JxdWUnOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hcHBseVRvcnF1ZShuZXcgVmVjMyguLi5wcm9wc1swXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYWRkQ29uc3RyYWludCc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW2JvZHlBLCBib2R5Qiwgb3B0bnNdID0gcHJvcHM7CiAgICAgICAgICBsZXQgewogICAgICAgICAgICBwaXZvdEEsCiAgICAgICAgICAgIHBpdm90QiwKICAgICAgICAgICAgYXhpc0EsCiAgICAgICAgICAgIGF4aXNCLAogICAgICAgICAgICAuLi5vcHRpb25zCiAgICAgICAgICB9ID0gb3B0bnM7IC8vIGlzIHRoZXJlIGEgYmV0dGVyIHdheSB0byBlbmZvcmNlIGRlZmF1bHRzPwoKICAgICAgICAgIHBpdm90QSA9IEFycmF5LmlzQXJyYXkocGl2b3RBKSA/IG5ldyBWZWMzKC4uLnBpdm90QSkgOiB1bmRlZmluZWQ7CiAgICAgICAgICBwaXZvdEIgPSBBcnJheS5pc0FycmF5KHBpdm90QikgPyBuZXcgVmVjMyguLi5waXZvdEIpIDogdW5kZWZpbmVkOwogICAgICAgICAgYXhpc0EgPSBBcnJheS5pc0FycmF5KGF4aXNBKSA/IG5ldyBWZWMzKC4uLmF4aXNBKSA6IHVuZGVmaW5lZDsKICAgICAgICAgIGF4aXNCID0gQXJyYXkuaXNBcnJheShheGlzQikgPyBuZXcgVmVjMyguLi5heGlzQikgOiB1bmRlZmluZWQ7CiAgICAgICAgICBsZXQgY29uc3RyYWludDsKCiAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgY2FzZSAnUG9pbnRUb1BvaW50JzoKICAgICAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IFBvaW50VG9Qb2ludENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgcGl2b3RBLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCBwaXZvdEIsIG9wdG5zLm1heEZvcmNlKTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgJ0NvbmVUd2lzdCc6CiAgICAgICAgICAgICAgY29uc3RyYWludCA9IG5ldyBDb25lVHdpc3RDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgICAgICAgIHBpdm90QSwKICAgICAgICAgICAgICAgIHBpdm90QiwKICAgICAgICAgICAgICAgIGF4aXNBLAogICAgICAgICAgICAgICAgYXhpc0IsCiAgICAgICAgICAgICAgICAuLi5vcHRpb25zCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICdIaW5nZSc6CiAgICAgICAgICAgICAgY29uc3RyYWludCA9IG5ldyBIaW5nZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgewogICAgICAgICAgICAgICAgcGl2b3RBLAogICAgICAgICAgICAgICAgcGl2b3RCLAogICAgICAgICAgICAgICAgYXhpc0EsCiAgICAgICAgICAgICAgICBheGlzQiwKICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgJ0Rpc3RhbmNlJzoKICAgICAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IERpc3RhbmNlQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCBvcHRucy5kaXN0YW5jZSwgb3B0bnMubWF4Rm9yY2UpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAnTG9jayc6CiAgICAgICAgICAgICAgY29uc3RyYWludCA9IG5ldyBMb2NrQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCBvcHRucyk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCBvcHRucyk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3RyYWludC51dWlkID0gdXVpZDsKICAgICAgICAgIHN0YXRlLndvcmxkLmFkZENvbnN0cmFpbnQoY29uc3RyYWludCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdyZW1vdmVDb25zdHJhaW50JzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoKHsKICAgICAgICAgIHV1aWQ6IHRoaXNJZAogICAgICAgIH0pID0+IHRoaXNJZCA9PT0gdXVpZCkubWFwKGMgPT4gc3RhdGUud29ybGQucmVtb3ZlQ29uc3RyYWludChjKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdlbmFibGVDb25zdHJhaW50JzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoKHsKICAgICAgICAgIHV1aWQ6IHRoaXNJZAogICAgICAgIH0pID0+IHRoaXNJZCA9PT0gdXVpZCkubWFwKGMgPT4gYy5lbmFibGUoKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdkaXNhYmxlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKCh7CiAgICAgICAgICB1dWlkOiB0aGlzSWQKICAgICAgICB9KSA9PiB0aGlzSWQgPT09IHV1aWQpLm1hcChjID0+IGMuZGlzYWJsZSgpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnRNb3Rvcic6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKCh7CiAgICAgICAgICB1dWlkOiB0aGlzSWQKICAgICAgICB9KSA9PiB0aGlzSWQgPT09IHV1aWQpLm1hcChjID0+IGMuZW5hYmxlTW90b3IoKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdkaXNhYmxlQ29uc3RyYWludE1vdG9yJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoKHsKICAgICAgICAgIHV1aWQ6IHRoaXNJZAogICAgICAgIH0pID0+IHRoaXNJZCA9PT0gdXVpZCkubWFwKGMgPT4gYy5kaXNhYmxlTW90b3IoKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb25zdHJhaW50TW90b3JTcGVlZCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKCh7CiAgICAgICAgICB1dWlkOiB0aGlzSWQKICAgICAgICB9KSA9PiB0aGlzSWQgPT09IHV1aWQpLm1hcChjID0+IGMuc2V0TW90b3JTcGVlZChwcm9wcykpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29uc3RyYWludE1vdG9yTWF4Rm9yY2UnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcigoewogICAgICAgICAgdXVpZDogdGhpc0lkCiAgICAgICAgfSkgPT4gdGhpc0lkID09PSB1dWlkKS5tYXAoYyA9PiBjLnNldE1vdG9yTWF4Rm9yY2UocHJvcHMpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FkZFNwcmluZyc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW2JvZHlBLCBib2R5Qiwgb3B0bnNdID0gcHJvcHM7CiAgICAgICAgICBsZXQgewogICAgICAgICAgICB3b3JsZEFuY2hvckEsCiAgICAgICAgICAgIHdvcmxkQW5jaG9yQiwKICAgICAgICAgICAgbG9jYWxBbmNob3JBLAogICAgICAgICAgICBsb2NhbEFuY2hvckIsCiAgICAgICAgICAgIHJlc3RMZW5ndGgsCiAgICAgICAgICAgIHN0aWZmbmVzcywKICAgICAgICAgICAgZGFtcGluZwogICAgICAgICAgfSA9IG9wdG5zOwogICAgICAgICAgd29ybGRBbmNob3JBID0gQXJyYXkuaXNBcnJheSh3b3JsZEFuY2hvckEpID8gbmV3IFZlYzMoLi4ud29ybGRBbmNob3JBKSA6IHVuZGVmaW5lZDsKICAgICAgICAgIHdvcmxkQW5jaG9yQiA9IEFycmF5LmlzQXJyYXkod29ybGRBbmNob3JCKSA/IG5ldyBWZWMzKC4uLndvcmxkQW5jaG9yQikgOiB1bmRlZmluZWQ7CiAgICAgICAgICBsb2NhbEFuY2hvckEgPSBBcnJheS5pc0FycmF5KGxvY2FsQW5jaG9yQSkgPyBuZXcgVmVjMyguLi5sb2NhbEFuY2hvckEpIDogdW5kZWZpbmVkOwogICAgICAgICAgbG9jYWxBbmNob3JCID0gQXJyYXkuaXNBcnJheShsb2NhbEFuY2hvckIpID8gbmV3IFZlYzMoLi4ubG9jYWxBbmNob3JCKSA6IHVuZGVmaW5lZDsKICAgICAgICAgIGxldCBzcHJpbmcgPSBuZXcgU3ByaW5nKHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgICAgd29ybGRBbmNob3JBLAogICAgICAgICAgICB3b3JsZEFuY2hvckIsCiAgICAgICAgICAgIGxvY2FsQW5jaG9yQSwKICAgICAgICAgICAgbG9jYWxBbmNob3JCLAogICAgICAgICAgICByZXN0TGVuZ3RoLAogICAgICAgICAgICBzdGlmZm5lc3MsCiAgICAgICAgICAgIGRhbXBpbmcKICAgICAgICAgIH0pOwogICAgICAgICAgc3ByaW5nLnV1aWQgPSB1dWlkOwoKICAgICAgICAgIGxldCBwb3N0U3RlcFNwcmluZyA9ICgpID0+IHNwcmluZy5hcHBseUZvcmNlKCk7CgogICAgICAgICAgc3RhdGUuc3ByaW5nc1t1dWlkXSA9IHBvc3RTdGVwU3ByaW5nOwogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW3V1aWRdID0gc3ByaW5nOyAvLyBDb21wdXRlIHRoZSBmb3JjZSBhZnRlciBlYWNoIHN0ZXAKCiAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnNwcmluZ3NbdXVpZF0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nU3RpZmZuZXNzJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0uc3RpZmZuZXNzID0gcHJvcHM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRTcHJpbmdSZXN0TGVuZ3RoJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0ucmVzdExlbmd0aCA9IHByb3BzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nRGFtcGluZyc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW3V1aWRdLmRhbXBpbmcgPSBwcm9wczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3JlbW92ZVNwcmluZyc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW3V1aWRdKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ2FkZFJheSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgewogICAgICAgICAgICBmcm9tLAogICAgICAgICAgICB0bywKICAgICAgICAgICAgLi4ub3B0aW9ucwogICAgICAgICAgfSA9IHByb3BzOwogICAgICAgICAgY29uc3QgcmF5ID0gbmV3IFJheShmcm9tID8gbmV3IFZlYzMoLi4uZnJvbSkgOiB1bmRlZmluZWQsIHRvID8gbmV3IFZlYzMoLi4udG8pIDogdW5kZWZpbmVkKTsKICAgICAgICAgIG9wdGlvbnMubW9kZSA9IFJheVtvcHRpb25zLm1vZGUudG9VcHBlckNhc2UoKV07CiAgICAgICAgICBvcHRpb25zLnJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7CgogICAgICAgICAgc3RhdGUucmF5c1t1dWlkXSA9ICgpID0+IHsKICAgICAgICAgICAgcmF5LmludGVyc2VjdFdvcmxkKHN0YXRlLndvcmxkLCBvcHRpb25zKTsKICAgICAgICAgICAgY29uc3QgewogICAgICAgICAgICAgIGJvZHksCiAgICAgICAgICAgICAgc2hhcGUsCiAgICAgICAgICAgICAgcmF5RnJvbVdvcmxkLAogICAgICAgICAgICAgIHJheVRvV29ybGQsCiAgICAgICAgICAgICAgaGl0Tm9ybWFsV29ybGQsCiAgICAgICAgICAgICAgaGl0UG9pbnRXb3JsZCwKICAgICAgICAgICAgICAuLi5yZXN0CiAgICAgICAgICAgIH0gPSBvcHRpb25zLnJlc3VsdDsKICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgb3A6ICdldmVudCcsCiAgICAgICAgICAgICAgdHlwZTogJ3JheWhpdCcsCiAgICAgICAgICAgICAgcmF5OiB7CiAgICAgICAgICAgICAgICBmcm9tLAogICAgICAgICAgICAgICAgdG8sCiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHJheS5kaXJlY3Rpb24udG9BcnJheSgpLAogICAgICAgICAgICAgICAgY29sbGlzaW9uRmlsdGVyR3JvdXA6IHJheS5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlck1hc2s6IHJheS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgICAgICAgdXVpZAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgYm9keTogYm9keSA/IGJvZHkudXVpZCA6IG51bGwsCiAgICAgICAgICAgICAgc2hhcGU6IHNoYXBlID8geyAuLi5zaGFwZSwKICAgICAgICAgICAgICAgIGJvZHk6IGJvZHkudXVpZAogICAgICAgICAgICAgIH0gOiBudWxsLAogICAgICAgICAgICAgIHJheUZyb21Xb3JsZDogcmF5RnJvbVdvcmxkLnRvQXJyYXkoKSwKICAgICAgICAgICAgICByYXlUb1dvcmxkOiByYXlUb1dvcmxkLnRvQXJyYXkoKSwKICAgICAgICAgICAgICBoaXROb3JtYWxXb3JsZDogaGl0Tm9ybWFsV29ybGQudG9BcnJheSgpLAogICAgICAgICAgICAgIGhpdFBvaW50V29ybGQ6IGhpdFBvaW50V29ybGQudG9BcnJheSgpLAogICAgICAgICAgICAgIC4uLnJlc3QKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS5yYXlzW3V1aWRdKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3JlbW92ZVJheSc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnJheXNbdXVpZF0pOwogICAgICAgICAgZGVsZXRlIHN0YXRlLnJheXNbdXVpZF07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhZGRSYXljYXN0VmVoaWNsZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW2NoYXNzaXNCb2R5LCB3aGVlbHMsIHdoZWVsSW5mb3MsIGluZGV4Rm9yd2FyZEF4aXMsIGluZGV4UmlnaHRBeGlzLCBpbmRleFVwQXhpc10gPSBwcm9wczsKICAgICAgICAgIGNvbnN0IHZlaGljbGUgPSBuZXcgUmF5Y2FzdFZlaGljbGUoewogICAgICAgICAgICBjaGFzc2lzQm9keTogc3RhdGUuYm9kaWVzW2NoYXNzaXNCb2R5XSwKICAgICAgICAgICAgaW5kZXhGb3J3YXJkQXhpczogaW5kZXhGb3J3YXJkQXhpcywKICAgICAgICAgICAgaW5kZXhSaWdodEF4aXM6IGluZGV4UmlnaHRBeGlzLAogICAgICAgICAgICBpbmRleFVwQXhpczogaW5kZXhVcEF4aXMKICAgICAgICAgIH0pOwogICAgICAgICAgdmVoaWNsZS53b3JsZCA9IHN0YXRlLndvcmxkOwoKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2hlZWxJbmZvcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBjb25zdCB3aGVlbEluZm8gPSB3aGVlbEluZm9zW2ldOwogICAgICAgICAgICB3aGVlbEluZm8uZGlyZWN0aW9uTG9jYWwgPSBuZXcgVmVjMyguLi53aGVlbEluZm8uZGlyZWN0aW9uTG9jYWwpOwogICAgICAgICAgICB3aGVlbEluZm8uY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsID0gbmV3IFZlYzMoLi4ud2hlZWxJbmZvLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCk7CiAgICAgICAgICAgIHdoZWVsSW5mby5heGxlTG9jYWwgPSBuZXcgVmVjMyguLi53aGVlbEluZm8uYXhsZUxvY2FsKTsKICAgICAgICAgICAgdmVoaWNsZS5hZGRXaGVlbCh3aGVlbEluZm8pOwogICAgICAgICAgfQoKICAgICAgICAgIHZlaGljbGUucHJlU3RlcCA9ICgpID0+IHsKICAgICAgICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0udXBkYXRlVmVoaWNsZShzdGF0ZS53b3JsZC5kdCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHZlaGljbGUucG9zdFN0ZXAgPSAoKSA9PiB7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGUudmVoaWNsZXNbdXVpZF0ud2hlZWxJbmZvcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLnVwZGF0ZVdoZWVsVHJhbnNmb3JtKGkpOwogICAgICAgICAgICAgIGNvbnN0IHQgPSBzdGF0ZS52ZWhpY2xlc1t1dWlkXS53aGVlbEluZm9zW2ldLndvcmxkVHJhbnNmb3JtOwogICAgICAgICAgICAgIGNvbnN0IHdoZWVsQm9keSA9IHN0YXRlLmJvZGllc1t3aGVlbHNbaV1dOwogICAgICAgICAgICAgIHdoZWVsQm9keS5wb3NpdGlvbi5jb3B5KHQucG9zaXRpb24pOwogICAgICAgICAgICAgIHdoZWVsQm9keS5xdWF0ZXJuaW9uLmNvcHkodC5xdWF0ZXJuaW9uKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgc3RhdGUudmVoaWNsZXNbdXVpZF0gPSB2ZWhpY2xlOwogICAgICAgICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnZlaGljbGVzW3V1aWRdLnByZVN0ZXApOwogICAgICAgICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5wb3N0U3RlcCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdyZW1vdmVSYXljYXN0VmVoaWNsZSc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnZlaGljbGVzW3V1aWRdLnByZVN0ZXApOwogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5wb3N0U3RlcCk7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS53b3JsZCA9IG51bGw7CiAgICAgICAgICBkZWxldGUgc3RhdGUudmVoaWNsZXNbdXVpZF07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRSYXljYXN0VmVoaWNsZVN0ZWVyaW5nVmFsdWUnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFt2YWx1ZSwgd2hlZWxJbmRleF0gPSBwcm9wczsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLnNldFN0ZWVyaW5nVmFsdWUodmFsdWUsIHdoZWVsSW5kZXgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYXBwbHlSYXljYXN0VmVoaWNsZUVuZ2luZUZvcmNlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbdmFsdWUsIHdoZWVsSW5kZXhdID0gcHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5hcHBseUVuZ2luZUZvcmNlKHZhbHVlLCB3aGVlbEluZGV4KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NldFJheWNhc3RWZWhpY2xlQnJha2UnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFticmFrZSwgd2hlZWxJbmRleF0gPSBwcm9wczsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLnNldEJyYWtlKGJyYWtlLCB3aGVlbEluZGV4KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3dha2VVcCc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLndha2VVcCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2xlZXAnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5zbGVlcCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQogIH07Cgp9KCkpOwoK', 'data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLmpzIiwic291cmNlcyI6WyJ3b3JrZXI6Ly93ZWItd29ya2VyL3NyYy9ub2RlX21vZHVsZXMvY2Fubm9uLWVzL2Rpc3QvY2Fubm9uLWVzLmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9zcmMvcHJvcHNUb0JvZHkuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL3NyYy93b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZWNvcmRzIHdoYXQgb2JqZWN0cyBhcmUgY29sbGlkaW5nIHdpdGggZWFjaCBvdGhlclxuICovXG5jbGFzcyBPYmplY3RDb2xsaXNpb25NYXRyaXgge1xuICAvKipcbiAgICogVGhlIG1hdHJpeCBzdG9yYWdlLlxuICAgKi9cblxuICAvKipcbiAgICogQHRvZG8gUmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubWF0cml4ID0gdm9pZCAwO1xuICAgIHRoaXMubWF0cml4ID0ge307XG4gIH1cbiAgLyoqXG4gICAqIGdldFxuICAgKi9cblxuXG4gIGdldChiaSwgYmopIHtcbiAgICBsZXQge1xuICAgICAgaWQ6IGlcbiAgICB9ID0gYmk7XG4gICAgbGV0IHtcbiAgICAgIGlkOiBqXG4gICAgfSA9IGJqO1xuXG4gICAgaWYgKGogPiBpKSB7XG4gICAgICBjb25zdCB0ZW1wID0gajtcbiAgICAgIGogPSBpO1xuICAgICAgaSA9IHRlbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGkgKyBcIi1cIiArIGogaW4gdGhpcy5tYXRyaXg7XG4gIH1cbiAgLyoqXG4gICAqIHNldFxuICAgKi9cblxuXG4gIHNldChiaSwgYmosIHZhbHVlKSB7XG4gICAgbGV0IHtcbiAgICAgIGlkOiBpXG4gICAgfSA9IGJpO1xuICAgIGxldCB7XG4gICAgICBpZDogalxuICAgIH0gPSBiajtcblxuICAgIGlmIChqID4gaSkge1xuICAgICAgY29uc3QgdGVtcCA9IGo7XG4gICAgICBqID0gaTtcbiAgICAgIGkgPSB0ZW1wO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5tYXRyaXhbaSArIFwiLVwiICsgal0gPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgdGhpcy5tYXRyaXhbaSArIFwiLVwiICsgal07XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBFbXB0eSB0aGUgbWF0cml4XG4gICAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5tYXRyaXggPSB7fTtcbiAgfVxuICAvKipcbiAgICogU2V0IG1heCBudW1iZXIgb2Ygb2JqZWN0c1xuICAgKi9cblxuXG4gIHNldE51bU9iamVjdHMobikge31cblxufVxuXG4vKipcbiAqIEEgM3gzIG1hdHJpeC5cbiAqIEF1dGhvcmVkIGJ5IHtAbGluayBodHRwOi8vZ2l0aHViLmNvbS9zY2h0ZXBwZS8gc2NodGVwcGV9XG4gKi9cbmNsYXNzIE1hdDMge1xuICAvKipcbiAgICogQSB2ZWN0b3Igb2YgbGVuZ3RoIDksIGNvbnRhaW5pbmcgYWxsIG1hdHJpeCBlbGVtZW50cy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBwYXJhbSBlbGVtZW50cyBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoZWxlbWVudHMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0pIHtcbiAgICB0aGlzLmVsZW1lbnRzID0gdm9pZCAwO1xuICAgIHRoaXMuZWxlbWVudHMgPSBlbGVtZW50cztcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgbWF0cml4IHRvIGlkZW50aXR5XG4gICAqIEB0b2RvIFNob3VsZCBwZXJoYXBzIGJlIHJlbmFtZWQgdG8gYHNldElkZW50aXR5KClgIHRvIGJlIG1vcmUgY2xlYXIuXG4gICAqIEB0b2RvIENyZWF0ZSBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgaW1tZWRpYXRlbHkgY3JlYXRlcyBhbiBpZGVudGl0eSBtYXRyaXggZWcuIGBleWUoKWBcbiAgICovXG5cblxuICBpZGVudGl0eSgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBlWzBdID0gMTtcbiAgICBlWzFdID0gMDtcbiAgICBlWzJdID0gMDtcbiAgICBlWzNdID0gMDtcbiAgICBlWzRdID0gMTtcbiAgICBlWzVdID0gMDtcbiAgICBlWzZdID0gMDtcbiAgICBlWzddID0gMDtcbiAgICBlWzhdID0gMTtcbiAgfVxuICAvKipcbiAgICogU2V0IGFsbCBlbGVtZW50cyB0byB6ZXJvXG4gICAqL1xuXG5cbiAgc2V0WmVybygpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBlWzBdID0gMDtcbiAgICBlWzFdID0gMDtcbiAgICBlWzJdID0gMDtcbiAgICBlWzNdID0gMDtcbiAgICBlWzRdID0gMDtcbiAgICBlWzVdID0gMDtcbiAgICBlWzZdID0gMDtcbiAgICBlWzddID0gMDtcbiAgICBlWzhdID0gMDtcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgbWF0cml4IGRpYWdvbmFsIGVsZW1lbnRzIGZyb20gYSBWZWMzXG4gICAqL1xuXG5cbiAgc2V0VHJhY2UodmVjdG9yKSB7XG4gICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7XG4gICAgZVswXSA9IHZlY3Rvci54O1xuICAgIGVbNF0gPSB2ZWN0b3IueTtcbiAgICBlWzhdID0gdmVjdG9yLno7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIG1hdHJpeCBkaWFnb25hbCBlbGVtZW50c1xuICAgKi9cblxuXG4gIGdldFRyYWNlKHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICB0YXJnZXQueCA9IGVbMF07XG4gICAgdGFyZ2V0LnkgPSBlWzRdO1xuICAgIHRhcmdldC56ID0gZVs4XTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBNYXRyaXgtVmVjdG9yIG11bHRpcGxpY2F0aW9uXG4gICAqIEBwYXJhbSB2IFRoZSB2ZWN0b3IgdG8gbXVsdGlwbHkgd2l0aFxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLCB0YXJnZXQgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLlxuICAgKi9cblxuXG4gIHZtdWx0KHYsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBjb25zdCB4ID0gdi54O1xuICAgIGNvbnN0IHkgPSB2Lnk7XG4gICAgY29uc3QgeiA9IHYuejtcbiAgICB0YXJnZXQueCA9IGVbMF0gKiB4ICsgZVsxXSAqIHkgKyBlWzJdICogejtcbiAgICB0YXJnZXQueSA9IGVbM10gKiB4ICsgZVs0XSAqIHkgKyBlWzVdICogejtcbiAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBNYXRyaXgtc2NhbGFyIG11bHRpcGxpY2F0aW9uXG4gICAqL1xuXG5cbiAgc211bHQocykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogTWF0cml4IG11bHRpcGxpY2F0aW9uXG4gICAqIEBwYXJhbSBtYXRyaXggTWF0cml4IHRvIG11bHRpcGx5IHdpdGggZnJvbSBsZWZ0IHNpZGUuXG4gICAqL1xuXG5cbiAgbW11bHQobWF0cml4LCB0YXJnZXQgPSBuZXcgTWF0MygpKSB7XG4gICAgY29uc3QgQSA9IHRoaXMuZWxlbWVudHM7XG4gICAgY29uc3QgQiA9IG1hdHJpeC5lbGVtZW50cztcbiAgICBjb25zdCBUID0gdGFyZ2V0LmVsZW1lbnRzO1xuICAgIGNvbnN0IGExMSA9IEFbMF0sXG4gICAgICAgICAgYTEyID0gQVsxXSxcbiAgICAgICAgICBhMTMgPSBBWzJdLFxuICAgICAgICAgIGEyMSA9IEFbM10sXG4gICAgICAgICAgYTIyID0gQVs0XSxcbiAgICAgICAgICBhMjMgPSBBWzVdLFxuICAgICAgICAgIGEzMSA9IEFbNl0sXG4gICAgICAgICAgYTMyID0gQVs3XSxcbiAgICAgICAgICBhMzMgPSBBWzhdO1xuICAgIGNvbnN0IGIxMSA9IEJbMF0sXG4gICAgICAgICAgYjEyID0gQlsxXSxcbiAgICAgICAgICBiMTMgPSBCWzJdLFxuICAgICAgICAgIGIyMSA9IEJbM10sXG4gICAgICAgICAgYjIyID0gQls0XSxcbiAgICAgICAgICBiMjMgPSBCWzVdLFxuICAgICAgICAgIGIzMSA9IEJbNl0sXG4gICAgICAgICAgYjMyID0gQls3XSxcbiAgICAgICAgICBiMzMgPSBCWzhdO1xuICAgIFRbMF0gPSBhMTEgKiBiMTEgKyBhMTIgKiBiMjEgKyBhMTMgKiBiMzE7XG4gICAgVFsxXSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMjtcbiAgICBUWzJdID0gYTExICogYjEzICsgYTEyICogYjIzICsgYTEzICogYjMzO1xuICAgIFRbM10gPSBhMjEgKiBiMTEgKyBhMjIgKiBiMjEgKyBhMjMgKiBiMzE7XG4gICAgVFs0XSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMjtcbiAgICBUWzVdID0gYTIxICogYjEzICsgYTIyICogYjIzICsgYTIzICogYjMzO1xuICAgIFRbNl0gPSBhMzEgKiBiMTEgKyBhMzIgKiBiMjEgKyBhMzMgKiBiMzE7XG4gICAgVFs3XSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMjtcbiAgICBUWzhdID0gYTMxICogYjEzICsgYTMyICogYjIzICsgYTMzICogYjMzO1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNjYWxlIGVhY2ggY29sdW1uIG9mIHRoZSBtYXRyaXhcbiAgICovXG5cblxuICBzY2FsZSh2ZWN0b3IsIHRhcmdldCA9IG5ldyBNYXQzKCkpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBjb25zdCB0ID0gdGFyZ2V0LmVsZW1lbnRzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDM7IGkrKykge1xuICAgICAgdFszICogaSArIDBdID0gdmVjdG9yLnggKiBlWzMgKiBpICsgMF07XG4gICAgICB0WzMgKiBpICsgMV0gPSB2ZWN0b3IueSAqIGVbMyAqIGkgKyAxXTtcbiAgICAgIHRbMyAqIGkgKyAyXSA9IHZlY3Rvci56ICogZVszICogaSArIDJdO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNvbHZlIEF4PWJcbiAgICogQHBhcmFtIGIgVGhlIHJpZ2h0IGhhbmQgc2lkZVxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBUYXJnZXQgdmVjdG9yIHRvIHNhdmUgaW4uXG4gICAqIEByZXR1cm4gVGhlIHNvbHV0aW9uIHhcbiAgICogQHRvZG8gc2hvdWxkIHJldXNlIGFycmF5c1xuICAgKi9cblxuXG4gIHNvbHZlKGIsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICAvLyBDb25zdHJ1Y3QgZXF1YXRpb25zXG4gICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93c1xuXG4gICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29sc1xuXG4gICAgY29uc3QgZXFucyA9IFtdO1xuICAgIGxldCBpO1xuICAgIGxldCBqO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IG5yICogbmM7IGkrKykge1xuICAgICAgZXFucy5wdXNoKDApO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBlcW5zWzMgKyA0ICogMF0gPSBiLng7XG4gICAgZXFuc1szICsgNCAqIDFdID0gYi55O1xuICAgIGVxbnNbMyArIDQgKiAyXSA9IGIuejsgLy8gQ29tcHV0ZSByaWdodCB1cHBlciB0cmlhbmd1bGFyIHZlcnNpb24gb2YgdGhlIG1hdHJpeCAtIEdhdXNzIGVsaW1pbmF0aW9uXG5cbiAgICBsZXQgbiA9IDM7XG4gICAgY29uc3QgayA9IG47XG4gICAgbGV0IG5wO1xuICAgIGNvbnN0IGtwID0gNDsgLy8gbnVtIHJvd3NcblxuICAgIGxldCBwO1xuXG4gICAgZG8ge1xuICAgICAgaSA9IGsgLSBuO1xuXG4gICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSA9PT0gMCkge1xuICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lc1xuICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykge1xuICAgICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGpdICE9PSAwKSB7XG4gICAgICAgICAgICBucCA9IGtwO1xuXG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgIC8vIGRvIGxpZ25lKCBpICkgPSBsaWduZSggaSApICsgbGlnbmUoIGsgKVxuICAgICAgICAgICAgICBwID0ga3AgLSBucDtcbiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdO1xuICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSAhPT0gMCkge1xuICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykge1xuICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTtcbiAgICAgICAgICBucCA9IGtwO1xuXG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgLy8gZG8gbGlnbmUoIGsgKSA9IGxpZ25lKCBrICkgLSBtdWx0aXBsaWVyICogbGlnbmUoIGkgKVxuICAgICAgICAgICAgcCA9IGtwIC0gbnA7XG4gICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gcCA8PSBpID8gMCA6IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjtcbiAgICAgICAgICB9IHdoaWxlICgtLW5wKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gd2hpbGUgKC0tbik7IC8vIEdldCB0aGUgc29sdXRpb25cblxuXG4gICAgdGFyZ2V0LnogPSBlcW5zWzIgKiBuYyArIDNdIC8gZXFuc1syICogbmMgKyAyXTtcbiAgICB0YXJnZXQueSA9IChlcW5zWzEgKiBuYyArIDNdIC0gZXFuc1sxICogbmMgKyAyXSAqIHRhcmdldC56KSAvIGVxbnNbMSAqIG5jICsgMV07XG4gICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdO1xuXG4gICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7XG4gICAgICB0aHJvdyBcIkNvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9W1wiICsgdGFyZ2V0LnRvU3RyaW5nKCkgKyBcIl0sIGI9W1wiICsgYi50b1N0cmluZygpICsgXCJdLCBBPVtcIiArIHRoaXMudG9TdHJpbmcoKSArIFwiXVwiO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIVxuICAgKiBAcGFyYW0gdmFsdWUgSWYgcHJvdmlkZWQsIHRoZSBtYXRyaXggZWxlbWVudCB3aWxsIGJlIHNldCB0byB0aGlzIHZhbHVlLlxuICAgKi9cblxuXG4gIGUocm93LCBjb2x1bW4sIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTZXQgdmFsdWVcbiAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvcHkgYW5vdGhlciBtYXRyaXggaW50byB0aGlzIG1hdHJpeCBvYmplY3QuXG4gICAqL1xuXG5cbiAgY29weShtYXRyaXgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdHJpeC5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgbWF0cml4LlxuICAgKi9cblxuXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCByID0gJyc7XG4gICAgY29uc3Qgc2VwID0gJywnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHtcbiAgICAgIHIgKz0gdGhpcy5lbGVtZW50c1tpXSArIHNlcDtcbiAgICB9XG5cbiAgICByZXR1cm4gcjtcbiAgfVxuICAvKipcbiAgICogcmV2ZXJzZSB0aGUgbWF0cml4XG4gICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLlxuICAgKiBAcmV0dXJuIFRoZSBzb2x1dGlvbiB4XG4gICAqL1xuXG5cbiAgcmV2ZXJzZSh0YXJnZXQgPSBuZXcgTWF0MygpKSB7XG4gICAgLy8gQ29uc3RydWN0IGVxdWF0aW9uc1xuICAgIGNvbnN0IG5yID0gMzsgLy8gbnVtIHJvd3NcblxuICAgIGNvbnN0IG5jID0gNjsgLy8gbnVtIGNvbHNcblxuICAgIGNvbnN0IGVxbnMgPSByZXZlcnNlX2VxbnM7XG4gICAgbGV0IGk7XG4gICAgbGV0IGo7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICBmb3IgKGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZXFuc1szICsgNiAqIDBdID0gMTtcbiAgICBlcW5zWzMgKyA2ICogMV0gPSAwO1xuICAgIGVxbnNbMyArIDYgKiAyXSA9IDA7XG4gICAgZXFuc1s0ICsgNiAqIDBdID0gMDtcbiAgICBlcW5zWzQgKyA2ICogMV0gPSAxO1xuICAgIGVxbnNbNCArIDYgKiAyXSA9IDA7XG4gICAgZXFuc1s1ICsgNiAqIDBdID0gMDtcbiAgICBlcW5zWzUgKyA2ICogMV0gPSAwO1xuICAgIGVxbnNbNSArIDYgKiAyXSA9IDE7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvblxuXG4gICAgbGV0IG4gPSAzO1xuICAgIGNvbnN0IGsgPSBuO1xuICAgIGxldCBucDtcbiAgICBjb25zdCBrcCA9IG5jOyAvLyBudW0gcm93c1xuXG4gICAgbGV0IHA7XG5cbiAgICBkbyB7XG4gICAgICBpID0gayAtIG47XG5cbiAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7XG4gICAgICAgIC8vIHRoZSBwaXZvdCBpcyBudWxsLCBzd2FwIGxpbmVzXG4gICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHtcbiAgICAgICAgICAgIG5wID0ga3A7XG5cbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgLy8gZG8gbGluZSggaSApID0gbGluZSggaSApICsgbGluZSggayApXG4gICAgICAgICAgICAgIHAgPSBrcCAtIG5wO1xuICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldICs9IGVxbnNbcCArIG5jICogal07XG4gICAgICAgICAgICB9IHdoaWxlICgtLW5wKTtcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldICE9PSAwKSB7XG4gICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldO1xuICAgICAgICAgIG5wID0ga3A7XG5cbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAvLyBkbyBsaW5lKCBrICkgPSBsaW5lKCBrICkgLSBtdWx0aXBsaWVyICogbGluZSggaSApXG4gICAgICAgICAgICBwID0ga3AgLSBucDtcbiAgICAgICAgICAgIGVxbnNbcCArIG5jICogal0gPSBwIDw9IGkgPyAwIDogZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyO1xuICAgICAgICAgIH0gd2hpbGUgKC0tbnApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSB3aGlsZSAoLS1uKTsgLy8gZWxpbWluYXRlIHRoZSB1cHBlciBsZWZ0IHRyaWFuZ2xlIG9mIHRoZSBtYXRyaXhcblxuXG4gICAgaSA9IDI7XG5cbiAgICBkbyB7XG4gICAgICBqID0gaSAtIDE7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldO1xuICAgICAgICBucCA9IG5jO1xuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBwID0gbmMgLSBucDtcbiAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyO1xuICAgICAgICB9IHdoaWxlICgtLW5wKTtcbiAgICAgIH0gd2hpbGUgKGotLSk7XG4gICAgfSB3aGlsZSAoLS1pKTsgLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGlhZ29uYWxcblxuXG4gICAgaSA9IDI7XG5cbiAgICBkbyB7XG4gICAgICBjb25zdCBtdWx0aXBsaWVyID0gMSAvIGVxbnNbaSArIG5jICogaV07XG4gICAgICBucCA9IG5jO1xuXG4gICAgICBkbyB7XG4gICAgICAgIHAgPSBuYyAtIG5wO1xuICAgICAgICBlcW5zW3AgKyBuYyAqIGldID0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7XG4gICAgICB9IHdoaWxlICgtLW5wKTtcbiAgICB9IHdoaWxlIChpLS0pO1xuXG4gICAgaSA9IDI7XG5cbiAgICBkbyB7XG4gICAgICBqID0gMjtcblxuICAgICAgZG8ge1xuICAgICAgICBwID0gZXFuc1tuciArIGogKyBuYyAqIGldO1xuXG4gICAgICAgIGlmIChpc05hTihwKSB8fCBwID09PSBJbmZpbml0eSkge1xuICAgICAgICAgIHRocm93IFwiQ291bGQgbm90IHJldmVyc2UhIEE9W1wiICsgdGhpcy50b1N0cmluZygpICsgXCJdXCI7XG4gICAgICAgIH1cblxuICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTtcbiAgICAgIH0gd2hpbGUgKGotLSk7XG4gICAgfSB3aGlsZSAoaS0tKTtcblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgbWF0cml4IGZyb20gYSBxdWF0ZXJpb25cbiAgICovXG5cblxuICBzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHEpIHtcbiAgICBjb25zdCB4ID0gcS54O1xuICAgIGNvbnN0IHkgPSBxLnk7XG4gICAgY29uc3QgeiA9IHEuejtcbiAgICBjb25zdCB3ID0gcS53O1xuICAgIGNvbnN0IHgyID0geCArIHg7XG4gICAgY29uc3QgeTIgPSB5ICsgeTtcbiAgICBjb25zdCB6MiA9IHogKyB6O1xuICAgIGNvbnN0IHh4ID0geCAqIHgyO1xuICAgIGNvbnN0IHh5ID0geCAqIHkyO1xuICAgIGNvbnN0IHh6ID0geCAqIHoyO1xuICAgIGNvbnN0IHl5ID0geSAqIHkyO1xuICAgIGNvbnN0IHl6ID0geSAqIHoyO1xuICAgIGNvbnN0IHp6ID0geiAqIHoyO1xuICAgIGNvbnN0IHd4ID0gdyAqIHgyO1xuICAgIGNvbnN0IHd5ID0gdyAqIHkyO1xuICAgIGNvbnN0IHd6ID0gdyAqIHoyO1xuICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzO1xuICAgIGVbMyAqIDAgKyAwXSA9IDEgLSAoeXkgKyB6eik7XG4gICAgZVszICogMCArIDFdID0geHkgLSB3ejtcbiAgICBlWzMgKiAwICsgMl0gPSB4eiArIHd5O1xuICAgIGVbMyAqIDEgKyAwXSA9IHh5ICsgd3o7XG4gICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTtcbiAgICBlWzMgKiAxICsgMl0gPSB5eiAtIHd4O1xuICAgIGVbMyAqIDIgKyAwXSA9IHh6IC0gd3k7XG4gICAgZVszICogMiArIDFdID0geXogKyB3eDtcbiAgICBlWzMgKiAyICsgMl0gPSAxIC0gKHh4ICsgeXkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBUcmFuc3Bvc2UgdGhlIG1hdHJpeFxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LlxuICAgKiBAcmV0dXJuIFRoZSB0YXJnZXQgTWF0Mywgb3IgYSBuZXcgTWF0MyBpZiB0YXJnZXQgd2FzIG9taXR0ZWQuXG4gICAqL1xuXG5cbiAgdHJhbnNwb3NlKHRhcmdldCA9IG5ldyBNYXQzKCkpIHtcbiAgICBjb25zdCBNID0gdGhpcy5lbGVtZW50cztcbiAgICBjb25zdCBUID0gdGFyZ2V0LmVsZW1lbnRzO1xuICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFsc1xuXG4gICAgVFswXSA9IE1bMF07XG4gICAgVFs0XSA9IE1bNF07XG4gICAgVFs4XSA9IE1bOF07XG4gICAgdG1wID0gTVsxXTtcbiAgICBUWzFdID0gTVszXTtcbiAgICBUWzNdID0gdG1wO1xuICAgIHRtcCA9IE1bMl07XG4gICAgVFsyXSA9IE1bNl07XG4gICAgVFs2XSA9IHRtcDtcbiAgICB0bXAgPSBNWzVdO1xuICAgIFRbNV0gPSBNWzddO1xuICAgIFRbN10gPSB0bXA7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG59XG5jb25zdCByZXZlcnNlX2VxbnMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07XG5cbi8qKlxuICogMy1kaW1lbnNpb25hbCB2ZWN0b3JcbiAqIEBleGFtcGxlXG4gKiAgICAgY29uc3QgdiA9IG5ldyBWZWMzKDEsIDIsIDMpXG4gKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xXG4gKi9cblxuY2xhc3MgVmVjMyB7XG4gIGNvbnN0cnVjdG9yKHggPSAwLjAsIHkgPSAwLjAsIHogPSAwLjApIHtcbiAgICB0aGlzLnggPSB2b2lkIDA7XG4gICAgdGhpcy55ID0gdm9pZCAwO1xuICAgIHRoaXMueiA9IHZvaWQgMDtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgfVxuICAvKipcbiAgICogVmVjdG9yIGNyb3NzIHByb2R1Y3RcbiAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi5cbiAgICovXG5cblxuICBjcm9zcyh2ZWN0b3IsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB2eCA9IHZlY3Rvci54O1xuICAgIGNvbnN0IHZ5ID0gdmVjdG9yLnk7XG4gICAgY29uc3QgdnogPSB2ZWN0b3IuejtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTtcbiAgICB0YXJnZXQueSA9IHogKiB2eCAtIHggKiB2ejtcbiAgICB0YXJnZXQueiA9IHggKiB2eSAtIHkgKiB2eDtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHNcbiAgICovXG5cblxuICBzZXQoeCwgeSwgeikge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgYWxsIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB0byB6ZXJvLlxuICAgKi9cblxuXG4gIHNldFplcm8oKSB7XG4gICAgdGhpcy54ID0gdGhpcy55ID0gdGhpcy56ID0gMDtcbiAgfVxuICAvKipcbiAgICogVmVjdG9yIGFkZGl0aW9uXG4gICAqL1xuXG5cbiAgdmFkZCh2ZWN0b3IsIHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRhcmdldC54ID0gdmVjdG9yLnggKyB0aGlzLng7XG4gICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICsgdGhpcy55O1xuICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCArIHZlY3Rvci54LCB0aGlzLnkgKyB2ZWN0b3IueSwgdGhpcy56ICsgdmVjdG9yLnopO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVmVjdG9yIHN1YnRyYWN0aW9uXG4gICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW4uXG4gICAqL1xuXG5cbiAgdnN1Yih2ZWN0b3IsIHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7XG4gICAgICB0YXJnZXQueSA9IHRoaXMueSAtIHZlY3Rvci55O1xuICAgICAgdGFyZ2V0LnogPSB0aGlzLnogLSB2ZWN0b3IuejtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCAtIHZlY3Rvci54LCB0aGlzLnkgLSB2ZWN0b3IueSwgdGhpcy56IC0gdmVjdG9yLnopO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBjcm9zcyBwcm9kdWN0IG1hdHJpeCBhX2Nyb3NzIGZyb20gYSB2ZWN0b3IsIHN1Y2ggdGhhdCBhIHggYiA9IGFfY3Jvc3MgKiBiID0gY1xuICAgKlxuICAgKiBTZWUge0BsaW5rIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyL1REQkQyNC9WVDA2L2xlY3R1cmVzL0xlY3R1cmU2LnBkZiBVbWXDpSBVbml2ZXJzaXR5IExlY3R1cmV9XG4gICAqL1xuXG5cbiAgY3Jvc3NtYXQoKSB7XG4gICAgcmV0dXJuIG5ldyBNYXQzKFswLCAtdGhpcy56LCB0aGlzLnksIHRoaXMueiwgMCwgLXRoaXMueCwgLXRoaXMueSwgdGhpcy54LCAwXSk7XG4gIH1cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSB0aGUgdmVjdG9yLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgaW4gdGhlIHZlY3Rvci5cbiAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yXG4gICAqL1xuXG5cbiAgbm9ybWFsaXplKCkge1xuICAgIGNvbnN0IHggPSB0aGlzLng7XG4gICAgY29uc3QgeSA9IHRoaXMueTtcbiAgICBjb25zdCB6ID0gdGhpcy56O1xuICAgIGNvbnN0IG4gPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTtcblxuICAgIGlmIChuID4gMC4wKSB7XG4gICAgICBjb25zdCBpbnZOID0gMSAvIG47XG4gICAgICB0aGlzLnggKj0gaW52TjtcbiAgICAgIHRoaXMueSAqPSBpbnZOO1xuICAgICAgdGhpcy56ICo9IGludk47XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE1ha2Ugc29tZXRoaW5nIHVwXG4gICAgICB0aGlzLnggPSAwO1xuICAgICAgdGhpcy55ID0gMDtcbiAgICAgIHRoaXMueiA9IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIG47XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgdmVyc2lvbiBvZiB0aGlzIHZlY3RvciB0aGF0IGlzIG9mIGxlbmd0aCAxLlxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluXG4gICAqIEByZXR1cm4gUmV0dXJucyB0aGUgdW5pdCB2ZWN0b3JcbiAgICovXG5cblxuICB1bml0KHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICBsZXQgbmludiA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuXG4gICAgaWYgKG5pbnYgPiAwLjApIHtcbiAgICAgIG5pbnYgPSAxLjAgLyBuaW52O1xuICAgICAgdGFyZ2V0LnggPSB4ICogbmludjtcbiAgICAgIHRhcmdldC55ID0geSAqIG5pbnY7XG4gICAgICB0YXJnZXQueiA9IHogKiBuaW52O1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXQueCA9IDE7XG4gICAgICB0YXJnZXQueSA9IDA7XG4gICAgICB0YXJnZXQueiA9IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBsZW5ndGggb2YgdGhlIHZlY3RvclxuICAgKi9cblxuXG4gIGxlbmd0aCgpIHtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgc3F1YXJlZCBsZW5ndGggb2YgdGhlIHZlY3Rvci5cbiAgICovXG5cblxuICBsZW5ndGhTcXVhcmVkKCkge1xuICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50XG4gICAqL1xuXG5cbiAgZGlzdGFuY2VUbyhwKSB7XG4gICAgY29uc3QgeCA9IHRoaXMueDtcbiAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgIGNvbnN0IHogPSB0aGlzLno7XG4gICAgY29uc3QgcHggPSBwLng7XG4gICAgY29uc3QgcHkgPSBwLnk7XG4gICAgY29uc3QgcHogPSBwLno7XG4gICAgcmV0dXJuIE1hdGguc3FydCgocHggLSB4KSAqIChweCAtIHgpICsgKHB5IC0geSkgKiAocHkgLSB5KSArIChweiAtIHopICogKHB6IC0geikpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgc3F1YXJlZCBkaXN0YW5jZSBmcm9tIHRoaXMgcG9pbnQgdG8gYW5vdGhlciBwb2ludFxuICAgKi9cblxuXG4gIGRpc3RhbmNlU3F1YXJlZChwKSB7XG4gICAgY29uc3QgeCA9IHRoaXMueDtcbiAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgIGNvbnN0IHogPSB0aGlzLno7XG4gICAgY29uc3QgcHggPSBwLng7XG4gICAgY29uc3QgcHkgPSBwLnk7XG4gICAgY29uc3QgcHogPSBwLno7XG4gICAgcmV0dXJuIChweCAtIHgpICogKHB4IC0geCkgKyAocHkgLSB5KSAqIChweSAtIHkpICsgKHB6IC0geikgKiAocHogLSB6KTtcbiAgfVxuICAvKipcbiAgICogTXVsdGlwbHkgYWxsIHRoZSBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3Igd2l0aCBhIHNjYWxhci5cbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICBzY2FsZShzY2FsYXIsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7XG4gICAgdGFyZ2V0LnkgPSBzY2FsYXIgKiB5O1xuICAgIHRhcmdldC56ID0gc2NhbGFyICogejtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS5cbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICB2bXVsKHZlY3RvciwgdGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRhcmdldC54ID0gdmVjdG9yLnggKiB0aGlzLng7XG4gICAgdGFyZ2V0LnkgPSB2ZWN0b3IueSAqIHRoaXMueTtcbiAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56O1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNjYWxlIGEgdmVjdG9yIGFuZCBhZGQgaXQgdG8gdGhpcyB2ZWN0b3IuIFNhdmUgdGhlIHJlc3VsdCBpbiBcInRhcmdldFwiLiAodGFyZ2V0ID0gdGhpcyArIHZlY3RvciAqIHNjYWxhcilcbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54O1xuICAgIHRhcmdldC55ID0gdGhpcy55ICsgc2NhbGFyICogdmVjdG9yLnk7XG4gICAgdGFyZ2V0LnogPSB0aGlzLnogKyBzY2FsYXIgKiB2ZWN0b3IuejtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3RcbiAgICogQHBhcmFtIHZlY3RvclxuICAgKi9cblxuXG4gIGRvdCh2ZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy54ICogdmVjdG9yLnggKyB0aGlzLnkgKiB2ZWN0b3IueSArIHRoaXMueiAqIHZlY3Rvci56O1xuICB9XG5cbiAgaXNaZXJvKCkge1xuICAgIHJldHVybiB0aGlzLnggPT09IDAgJiYgdGhpcy55ID09PSAwICYmIHRoaXMueiA9PT0gMDtcbiAgfVxuICAvKipcbiAgICogTWFrZSB0aGUgdmVjdG9yIHBvaW50IGluIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb24uXG4gICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW5cbiAgICovXG5cblxuICBuZWdhdGUodGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRhcmdldC54ID0gLXRoaXMueDtcbiAgICB0YXJnZXQueSA9IC10aGlzLnk7XG4gICAgdGFyZ2V0LnogPSAtdGhpcy56O1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGUgdHdvIGFydGlmaWNpYWwgdGFuZ2VudHMgdG8gdGhlIHZlY3RvclxuICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluXG4gICAqIEBwYXJhbSB0MiBWZWN0b3Igb2JqZWN0IHRvIHNhdmUgdGhlIHNlY29uZCB0YW5nZW50IGluXG4gICAqL1xuXG5cbiAgdGFuZ2VudHModDEsIHQyKSB7XG4gICAgY29uc3Qgbm9ybSA9IHRoaXMubGVuZ3RoKCk7XG5cbiAgICBpZiAobm9ybSA+IDAuMCkge1xuICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjtcbiAgICAgIGNvbnN0IGlub3JtID0gMSAvIG5vcm07XG4gICAgICBuLnNldCh0aGlzLnggKiBpbm9ybSwgdGhpcy55ICogaW5vcm0sIHRoaXMueiAqIGlub3JtKTtcbiAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7XG5cbiAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7XG4gICAgICAgIHJhbmRWZWMuc2V0KDEsIDAsIDApO1xuICAgICAgICBuLmNyb3NzKHJhbmRWZWMsIHQxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJhbmRWZWMuc2V0KDAsIDEsIDApO1xuICAgICAgICBuLmNyb3NzKHJhbmRWZWMsIHQxKTtcbiAgICAgIH1cblxuICAgICAgbi5jcm9zcyh0MSwgdDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgbm9ybWFsIGxlbmd0aCBpcyB6ZXJvLCBtYWtlIHNvbWV0aGluZyB1cFxuICAgICAgdDEuc2V0KDEsIDAsIDApO1xuICAgICAgdDIuc2V0KDAsIDEsIDApO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ29udmVydHMgdG8gYSBtb3JlIHJlYWRhYmxlIGZvcm1hdFxuICAgKi9cblxuXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnggKyBcIixcIiArIHRoaXMueSArIFwiLFwiICsgdGhpcy56O1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheVxuICAgKi9cblxuXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueSwgdGhpcy56XTtcbiAgfVxuICAvKipcbiAgICogQ29waWVzIHZhbHVlIG9mIHNvdXJjZSB0byB0aGlzIHZlY3Rvci5cbiAgICovXG5cblxuICBjb3B5KHZlY3Rvcikge1xuICAgIHRoaXMueCA9IHZlY3Rvci54O1xuICAgIHRoaXMueSA9IHZlY3Rvci55O1xuICAgIHRoaXMueiA9IHZlY3Rvci56O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEbyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlY3RvcnNcbiAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS5cbiAgICovXG5cblxuICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7XG4gICAgY29uc3QgeCA9IHRoaXMueDtcbiAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgIGNvbnN0IHogPSB0aGlzLno7XG4gICAgdGFyZ2V0LnggPSB4ICsgKHZlY3Rvci54IC0geCkgKiB0O1xuICAgIHRhcmdldC55ID0geSArICh2ZWN0b3IueSAtIHkpICogdDtcbiAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuXG4gICAqL1xuXG5cbiAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uID0gMWUtNikge1xuICAgIGlmIChNYXRoLmFicyh0aGlzLnggLSB2ZWN0b3IueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55IC0gdmVjdG9yLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueiAtIHZlY3Rvci56KSA+IHByZWNpc2lvbikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZlY3RvciBpcyBhbG1vc3QgemVyb1xuICAgKi9cblxuXG4gIGFsbW9zdFplcm8ocHJlY2lzaW9uID0gMWUtNikge1xuICAgIGlmIChNYXRoLmFicyh0aGlzLngpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueSkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy56KSA+IHByZWNpc2lvbikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdmVjdG9yIGlzIGFudGktcGFyYWxsZWwgdG8gYW5vdGhlciB2ZWN0b3IuXG4gICAqIEBwYXJhbSBwcmVjaXNpb24gU2V0IHRvIHplcm8gZm9yIGV4YWN0IGNvbXBhcmlzb25zXG4gICAqL1xuXG5cbiAgaXNBbnRpcGFyYWxsZWxUbyh2ZWN0b3IsIHByZWNpc2lvbikge1xuICAgIHRoaXMubmVnYXRlKGFudGlwX25lZyk7XG4gICAgcmV0dXJuIGFudGlwX25lZy5hbG1vc3RFcXVhbHModmVjdG9yLCBwcmVjaXNpb24pO1xuICB9XG4gIC8qKlxuICAgKiBDbG9uZSB0aGUgdmVjdG9yXG4gICAqL1xuXG5cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCwgdGhpcy55LCB0aGlzLnopO1xuICB9XG5cbn1cblZlYzMuWkVSTyA9IHZvaWQgMDtcblZlYzMuVU5JVF9YID0gdm9pZCAwO1xuVmVjMy5VTklUX1kgPSB2b2lkIDA7XG5WZWMzLlVOSVRfWiA9IHZvaWQgMDtcblZlYzMuWkVSTyA9IG5ldyBWZWMzKDAsIDAsIDApO1xuVmVjMy5VTklUX1ggPSBuZXcgVmVjMygxLCAwLCAwKTtcblZlYzMuVU5JVF9ZID0gbmV3IFZlYzMoMCwgMSwgMCk7XG5WZWMzLlVOSVRfWiA9IG5ldyBWZWMzKDAsIDAsIDEpO1xuY29uc3QgVmVjM190YW5nZW50c19uID0gbmV3IFZlYzMoKTtcbmNvbnN0IFZlYzNfdGFuZ2VudHNfcmFuZFZlYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBhbnRpcF9uZWcgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIEF4aXMgYWxpZ25lZCBib3VuZGluZyBib3ggY2xhc3MuXG4gKi9cbmNsYXNzIEFBQkIge1xuICAvKipcbiAgICogVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3hcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSB1cHBlciBib3VuZCBvZiB0aGUgYm91bmRpbmcgYm94XG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmxvd2VyQm91bmQgPSB2b2lkIDA7XG4gICAgdGhpcy51cHBlckJvdW5kID0gdm9pZCAwO1xuICAgIHRoaXMubG93ZXJCb3VuZCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy51cHBlckJvdW5kID0gbmV3IFZlYzMoKTtcblxuICAgIGlmIChvcHRpb25zLmxvd2VyQm91bmQpIHtcbiAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KG9wdGlvbnMubG93ZXJCb3VuZCk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMudXBwZXJCb3VuZCkge1xuICAgICAgdGhpcy51cHBlckJvdW5kLmNvcHkob3B0aW9ucy51cHBlckJvdW5kKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgQUFCQiBib3VuZHMgZnJvbSBhIHNldCBvZiBwb2ludHMuXG4gICAqIEBwYXJhbSBwb2ludHMgQW4gYXJyYXkgb2YgVmVjMydzLlxuICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdFxuICAgKi9cblxuXG4gIHNldEZyb21Qb2ludHMocG9pbnRzLCBwb3NpdGlvbiwgcXVhdGVybmlvbiwgc2tpblNpemUpIHtcbiAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7XG4gICAgY29uc3QgcSA9IHF1YXRlcm5pb247IC8vIFNldCB0byB0aGUgZmlyc3QgcG9pbnRcblxuICAgIGwuY29weShwb2ludHNbMF0pO1xuXG4gICAgaWYgKHEpIHtcbiAgICAgIHEudm11bHQobCwgbCk7XG4gICAgfVxuXG4gICAgdS5jb3B5KGwpO1xuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBwID0gcG9pbnRzW2ldO1xuXG4gICAgICBpZiAocSkge1xuICAgICAgICBxLnZtdWx0KHAsIHRtcCQxKTtcbiAgICAgICAgcCA9IHRtcCQxO1xuICAgICAgfVxuXG4gICAgICBpZiAocC54ID4gdS54KSB7XG4gICAgICAgIHUueCA9IHAueDtcbiAgICAgIH1cblxuICAgICAgaWYgKHAueCA8IGwueCkge1xuICAgICAgICBsLnggPSBwLng7XG4gICAgICB9XG5cbiAgICAgIGlmIChwLnkgPiB1LnkpIHtcbiAgICAgICAgdS55ID0gcC55O1xuICAgICAgfVxuXG4gICAgICBpZiAocC55IDwgbC55KSB7XG4gICAgICAgIGwueSA9IHAueTtcbiAgICAgIH1cblxuICAgICAgaWYgKHAueiA+IHUueikge1xuICAgICAgICB1LnogPSBwLno7XG4gICAgICB9XG5cbiAgICAgIGlmIChwLnogPCBsLnopIHtcbiAgICAgICAgbC56ID0gcC56O1xuICAgICAgfVxuICAgIH0gLy8gQWRkIG9mZnNldFxuXG5cbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIHBvc2l0aW9uLnZhZGQobCwgbCk7XG4gICAgICBwb3NpdGlvbi52YWRkKHUsIHUpO1xuICAgIH1cblxuICAgIGlmIChza2luU2l6ZSkge1xuICAgICAgbC54IC09IHNraW5TaXplO1xuICAgICAgbC55IC09IHNraW5TaXplO1xuICAgICAgbC56IC09IHNraW5TaXplO1xuICAgICAgdS54ICs9IHNraW5TaXplO1xuICAgICAgdS55ICs9IHNraW5TaXplO1xuICAgICAgdS56ICs9IHNraW5TaXplO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDb3B5IGJvdW5kcyBmcm9tIGFuIEFBQkIgdG8gdGhpcyBBQUJCXG4gICAqIEBwYXJhbSBhYWJiIFNvdXJjZSB0byBjb3B5IGZyb21cbiAgICogQHJldHVybiBUaGUgdGhpcyBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHlcbiAgICovXG5cblxuICBjb3B5KGFhYmIpIHtcbiAgICB0aGlzLmxvd2VyQm91bmQuY29weShhYWJiLmxvd2VyQm91bmQpO1xuICAgIHRoaXMudXBwZXJCb3VuZC5jb3B5KGFhYmIudXBwZXJCb3VuZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIENsb25lIGFuIEFBQkJcbiAgICovXG5cblxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IEFBQkIoKS5jb3B5KHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBFeHRlbmQgdGhpcyBBQUJCIHNvIHRoYXQgaXQgY292ZXJzIHRoZSBnaXZlbiBBQUJCIHRvby5cbiAgICovXG5cblxuICBleHRlbmQoYWFiYikge1xuICAgIHRoaXMubG93ZXJCb3VuZC54ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC54KTtcbiAgICB0aGlzLnVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueCk7XG4gICAgdGhpcy5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueSwgYWFiYi5sb3dlckJvdW5kLnkpO1xuICAgIHRoaXMudXBwZXJCb3VuZC55ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLnksIGFhYmIudXBwZXJCb3VuZC55KTtcbiAgICB0aGlzLmxvd2VyQm91bmQueiA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC56LCBhYWJiLmxvd2VyQm91bmQueik7XG4gICAgdGhpcy51cHBlckJvdW5kLnogPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueiwgYWFiYi51cHBlckJvdW5kLnopO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgb3ZlcmxhcHMgdGhpcyBBQUJCLlxuICAgKi9cblxuXG4gIG92ZXJsYXBzKGFhYmIpIHtcbiAgICBjb25zdCBsMSA9IHRoaXMubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1MSA9IHRoaXMudXBwZXJCb3VuZDtcbiAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1MiA9IGFhYmIudXBwZXJCb3VuZDsgLy8gICAgICBsMiAgICAgICAgdTJcbiAgICAvLyAgICAgIHwtLS0tLS0tLS18XG4gICAgLy8gfC0tLS0tLS0tfFxuICAgIC8vIGwxICAgICAgIHUxXG5cbiAgICBjb25zdCBvdmVybGFwc1ggPSBsMi54IDw9IHUxLnggJiYgdTEueCA8PSB1Mi54IHx8IGwxLnggPD0gdTIueCAmJiB1Mi54IDw9IHUxLng7XG4gICAgY29uc3Qgb3ZlcmxhcHNZID0gbDIueSA8PSB1MS55ICYmIHUxLnkgPD0gdTIueSB8fCBsMS55IDw9IHUyLnkgJiYgdTIueSA8PSB1MS55O1xuICAgIGNvbnN0IG92ZXJsYXBzWiA9IGwyLnogPD0gdTEueiAmJiB1MS56IDw9IHUyLnogfHwgbDEueiA8PSB1Mi56ICYmIHUyLnogPD0gdTEuejtcbiAgICByZXR1cm4gb3ZlcmxhcHNYICYmIG92ZXJsYXBzWSAmJiBvdmVybGFwc1o7XG4gIH0gLy8gTW9zdGx5IGZvciBkZWJ1Z2dpbmdcblxuXG4gIHZvbHVtZSgpIHtcbiAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7XG4gICAgcmV0dXJuICh1LnggLSBsLngpICogKHUueSAtIGwueSkgKiAodS56IC0gbC56KTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBBQUJCIGlzIGZ1bGx5IGNvbnRhaW5lZCBpbiB0aGlzIEFBQkIuXG4gICAqL1xuXG5cbiAgY29udGFpbnMoYWFiYikge1xuICAgIGNvbnN0IGwxID0gdGhpcy5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kO1xuICAgIGNvbnN0IGwyID0gYWFiYi5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUyID0gYWFiYi51cHBlckJvdW5kOyAvLyAgICAgIGwyICAgICAgICB1MlxuICAgIC8vICAgICAgfC0tLS0tLS0tLXxcbiAgICAvLyB8LS0tLS0tLS0tLS0tLS0tfFxuICAgIC8vIGwxICAgICAgICAgICAgICB1MVxuXG4gICAgcmV0dXJuIGwxLnggPD0gbDIueCAmJiB1MS54ID49IHUyLnggJiYgbDEueSA8PSBsMi55ICYmIHUxLnkgPj0gdTIueSAmJiBsMS56IDw9IGwyLnogJiYgdTEueiA+PSB1Mi56O1xuICB9XG5cbiAgZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7XG4gICAgY29uc3QgbCA9IHRoaXMubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kO1xuICAgIGEuY29weShsKTtcbiAgICBiLnNldCh1LngsIGwueSwgbC56KTtcbiAgICBjLnNldCh1LngsIHUueSwgbC56KTtcbiAgICBkLnNldChsLngsIHUueSwgdS56KTtcbiAgICBlLnNldCh1LngsIGwueSwgdS56KTtcbiAgICBmLnNldChsLngsIHUueSwgbC56KTtcbiAgICBnLnNldChsLngsIGwueSwgdS56KTtcbiAgICBoLmNvcHkodSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVwcmVzZW50YXRpb24gb2YgYW4gQUFCQiBpbiBhbm90aGVyIGZyYW1lLlxuICAgKiBAcmV0dXJuIFRoZSBcInRhcmdldFwiIEFBQkIgb2JqZWN0LlxuICAgKi9cblxuXG4gIHRvTG9jYWxGcmFtZShmcmFtZSwgdGFyZ2V0KSB7XG4gICAgY29uc3QgY29ybmVycyA9IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzO1xuICAgIGNvbnN0IGEgPSBjb3JuZXJzWzBdO1xuICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdO1xuICAgIGNvbnN0IGMgPSBjb3JuZXJzWzJdO1xuICAgIGNvbnN0IGQgPSBjb3JuZXJzWzNdO1xuICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdO1xuICAgIGNvbnN0IGYgPSBjb3JuZXJzWzVdO1xuICAgIGNvbnN0IGcgPSBjb3JuZXJzWzZdO1xuICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lXG5cbiAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykge1xuICAgICAgY29uc3QgY29ybmVyID0gY29ybmVyc1tpXTtcbiAgICAgIGZyYW1lLnBvaW50VG9Mb2NhbChjb3JuZXIsIGNvcm5lcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gdGhlIGdsb2JhbCBmcmFtZS5cbiAgICogQHJldHVybiBUaGUgXCJ0YXJnZXRcIiBBQUJCIG9iamVjdC5cbiAgICovXG5cblxuICB0b1dvcmxkRnJhbWUoZnJhbWUsIHRhcmdldCkge1xuICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVycztcbiAgICBjb25zdCBhID0gY29ybmVyc1swXTtcbiAgICBjb25zdCBiID0gY29ybmVyc1sxXTtcbiAgICBjb25zdCBjID0gY29ybmVyc1syXTtcbiAgICBjb25zdCBkID0gY29ybmVyc1szXTtcbiAgICBjb25zdCBlID0gY29ybmVyc1s0XTtcbiAgICBjb25zdCBmID0gY29ybmVyc1s1XTtcbiAgICBjb25zdCBnID0gY29ybmVyc1s2XTtcbiAgICBjb25zdCBoID0gY29ybmVyc1s3XTsgLy8gR2V0IGNvcm5lcnMgaW4gY3VycmVudCBmcmFtZVxuXG4gICAgdGhpcy5nZXRDb3JuZXJzKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgpOyAvLyBUcmFuc2Zvcm0gdGhlbSB0byBuZXcgbG9jYWwgZnJhbWVcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHtcbiAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07XG4gICAgICBmcmFtZS5wb2ludFRvV29ybGQoY29ybmVyLCBjb3JuZXIpO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQuc2V0RnJvbVBvaW50cyhjb3JuZXJzKTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIEFBQkIgaXMgaGl0IGJ5IGEgcmF5LlxuICAgKi9cblxuXG4gIG92ZXJsYXBzUmF5KHJheSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIGZyb21cbiAgICB9ID0gcmF5OyAvLyBjb25zdCB0ID0gMFxuICAgIC8vIHJheS5kaXJlY3Rpb24gaXMgdW5pdCBkaXJlY3Rpb24gdmVjdG9yIG9mIHJheVxuXG4gICAgY29uc3QgZGlyRnJhY1ggPSAxIC8gZGlyZWN0aW9uLng7XG4gICAgY29uc3QgZGlyRnJhY1kgPSAxIC8gZGlyZWN0aW9uLnk7XG4gICAgY29uc3QgZGlyRnJhY1ogPSAxIC8gZGlyZWN0aW9uLno7IC8vIHRoaXMubG93ZXJCb3VuZCBpcyB0aGUgY29ybmVyIG9mIEFBQkIgd2l0aCBtaW5pbWFsIGNvb3JkaW5hdGVzIC0gbGVmdCBib3R0b20sIHJ0IGlzIG1heGltYWwgY29ybmVyXG5cbiAgICBjb25zdCB0MSA9ICh0aGlzLmxvd2VyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDtcbiAgICBjb25zdCB0MiA9ICh0aGlzLnVwcGVyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDtcbiAgICBjb25zdCB0MyA9ICh0aGlzLmxvd2VyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTtcbiAgICBjb25zdCB0NCA9ICh0aGlzLnVwcGVyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTtcbiAgICBjb25zdCB0NSA9ICh0aGlzLmxvd2VyQm91bmQueiAtIGZyb20ueikgKiBkaXJGcmFjWjtcbiAgICBjb25zdCB0NiA9ICh0aGlzLnVwcGVyQm91bmQueiAtIGZyb20ueikgKiBkaXJGcmFjWjsgLy8gY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpKTtcbiAgICAvLyBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSkpO1xuXG4gICAgY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpLCBNYXRoLm1pbih0NSwgdDYpKTtcbiAgICBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSksIE1hdGgubWF4KHQ1LCB0NikpOyAvLyBpZiB0bWF4IDwgMCwgcmF5IChsaW5lKSBpcyBpbnRlcnNlY3RpbmcgQUFCQiwgYnV0IHdob2xlIEFBQkIgaXMgYmVoaW5nIHVzXG5cbiAgICBpZiAodG1heCA8IDApIHtcbiAgICAgIC8vdCA9IHRtYXg7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSAvLyBpZiB0bWluID4gdG1heCwgcmF5IGRvZXNuJ3QgaW50ZXJzZWN0IEFBQkJcblxuXG4gICAgaWYgKHRtaW4gPiB0bWF4KSB7XG4gICAgICAvL3QgPSB0bWF4O1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbn1cbmNvbnN0IHRtcCQxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldO1xuXG4vKipcbiAqIENvbGxpc2lvbiBcIm1hdHJpeFwiLlxuICogSXQncyBhY3R1YWxseSBhIHRyaWFuZ3VsYXItc2hhcGVkIGFycmF5IG9mIHdoZXRoZXIgdHdvIGJvZGllcyBhcmUgdG91Y2hpbmcgdGhpcyBzdGVwLCBmb3IgcmVmZXJlbmNlIG5leHQgc3RlcFxuICovXG5jbGFzcyBBcnJheUNvbGxpc2lvbk1hdHJpeCB7XG4gIC8qKlxuICAgKiBUaGUgbWF0cml4IHN0b3JhZ2UuXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm1hdHJpeCA9IHZvaWQgMDtcbiAgICB0aGlzLm1hdHJpeCA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gZWxlbWVudFxuICAgKi9cblxuXG4gIGdldChiaSwgYmopIHtcbiAgICBsZXQge1xuICAgICAgaW5kZXg6IGlcbiAgICB9ID0gYmk7XG4gICAgbGV0IHtcbiAgICAgIGluZGV4OiBqXG4gICAgfSA9IGJqO1xuXG4gICAgaWYgKGogPiBpKSB7XG4gICAgICBjb25zdCB0ZW1wID0gajtcbiAgICAgIGogPSBpO1xuICAgICAgaSA9IHRlbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubWF0cml4WyhpICogKGkgKyAxKSA+PiAxKSArIGogLSAxXTtcbiAgfVxuICAvKipcbiAgICogU2V0IGFuIGVsZW1lbnRcbiAgICovXG5cblxuICBzZXQoYmksIGJqLCB2YWx1ZSkge1xuICAgIGxldCB7XG4gICAgICBpbmRleDogaVxuICAgIH0gPSBiaTtcbiAgICBsZXQge1xuICAgICAgaW5kZXg6IGpcbiAgICB9ID0gYmo7XG5cbiAgICBpZiAoaiA+IGkpIHtcbiAgICAgIGNvbnN0IHRlbXAgPSBqO1xuICAgICAgaiA9IGk7XG4gICAgICBpID0gdGVtcDtcbiAgICB9XG5cbiAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvXG4gICAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSB0aGlzLm1hdHJpeC5sZW5ndGg7IGkgIT09IGw7IGkrKykge1xuICAgICAgdGhpcy5tYXRyaXhbaV0gPSAwO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzXG4gICAqL1xuXG5cbiAgc2V0TnVtT2JqZWN0cyhuKSB7XG4gICAgdGhpcy5tYXRyaXgubGVuZ3RoID0gbiAqIChuIC0gMSkgPj4gMTtcbiAgfVxuXG59XG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLlxuICovXG5jbGFzcyBFdmVudFRhcmdldCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHZvaWQgMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cbiAgICBpZiAobGlzdGVuZXJzW3R5cGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxpc3RlbmVyc1t0eXBlXSA9IFtdO1xuICAgIH1cblxuICAgIGlmICghbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkge1xuICAgICAgbGlzdGVuZXJzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBldmVudCBsaXN0ZW5lciBpcyBhZGRlZFxuICAgKi9cblxuXG4gIGhhc0V2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cbiAgICBpZiAobGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQgJiYgbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbnkgZXZlbnQgbGlzdGVuZXIgb2YgdGhlIGdpdmVuIHR5cGUgaXMgYWRkZWRcbiAgICovXG5cblxuICBoYXNBbnlFdmVudExpc3RlbmVyKHR5cGUpIHtcbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgcmV0dXJuIGxpc3RlbmVyc1t0eXBlXSAhPT0gdW5kZWZpbmVkO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuXG4gICAqL1xuXG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuXG4gICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVyc1t0eXBlXS5pbmRleE9mKGxpc3RlbmVyKTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIGxpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBFbWl0IGFuIGV2ZW50LlxuICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS5cbiAgICovXG5cblxuICBkaXNwYXRjaEV2ZW50KGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IGxpc3RlbmVyc1tldmVudC50eXBlXTtcblxuICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGV2ZW50LnRhcmdldCA9IHRoaXM7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gbGlzdGVuZXJBcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbGlzdGVuZXJBcnJheVtpXS5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG59XG5cbi8qKlxuICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uXG4gKiBAcGFyYW0geCBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGkuXG4gKiBAcGFyYW0geSBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGouXG4gKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuXG4gKiBAcGFyYW0gdyBNdWx0aXBsaWVyIG9mIHRoZSByZWFsIHBhcnQuXG4gKiBAc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUXVhdGVybmlvblxuICovXG5cbmNsYXNzIFF1YXRlcm5pb24ge1xuICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDAsIHogPSAwLCB3ID0gMSkge1xuICAgIHRoaXMueCA9IHZvaWQgMDtcbiAgICB0aGlzLnkgPSB2b2lkIDA7XG4gICAgdGhpcy56ID0gdm9pZCAwO1xuICAgIHRoaXMudyA9IHZvaWQgMDtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgICB0aGlzLncgPSB3O1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIG9mIHRoZSBxdWF0ZXJuaW9uLlxuICAgKi9cblxuXG4gIHNldCh4LCB5LCB6LCB3KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMueiA9IHo7XG4gICAgdGhpcy53ID0gdztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0byBhIHJlYWRhYmxlIGZvcm1hdFxuICAgKiBAcmV0dXJuIFwieCx5LHosd1wiXG4gICAqL1xuXG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMueCArIFwiLFwiICsgdGhpcy55ICsgXCIsXCIgKyB0aGlzLnogKyBcIixcIiArIHRoaXMudztcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0byBhbiBBcnJheVxuICAgKiBAcmV0dXJuIFt4LCB5LCB6LCB3XVxuICAgKi9cblxuXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLnddO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gY29tcG9uZW50cyBnaXZlbiBhbiBheGlzIGFuZCBhbiBhbmdsZSBpbiByYWRpYW5zLlxuICAgKi9cblxuXG4gIHNldEZyb21BeGlzQW5nbGUodmVjdG9yLCBhbmdsZSkge1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7XG4gICAgdGhpcy54ID0gdmVjdG9yLnggKiBzO1xuICAgIHRoaXMueSA9IHZlY3Rvci55ICogcztcbiAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7XG4gICAgdGhpcy53ID0gTWF0aC5jb3MoYW5nbGUgKiAwLjUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgcXVhdGVybmlvbiB0byBbIGF4aXMsIGFuZ2xlIF0gcmVwcmVzZW50YXRpb24uXG4gICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy5cbiAgICogQHJldHVybiBBbiBhcnJheSwgZmlyc3QgZWxlbWVudCBpcyB0aGUgYXhpcyBhbmQgdGhlIHNlY29uZCBpcyB0aGUgYW5nbGUgaW4gcmFkaWFucy5cbiAgICovXG5cblxuICB0b0F4aXNBbmdsZSh0YXJnZXRBeGlzID0gbmV3IFZlYzMoKSkge1xuICAgIHRoaXMubm9ybWFsaXplKCk7IC8vIGlmIHc+MSBhY29zIGFuZCBzcXJ0IHdpbGwgcHJvZHVjZSBlcnJvcnMsIHRoaXMgY2FudCBoYXBwZW4gaWYgcXVhdGVybmlvbiBpcyBub3JtYWxpc2VkXG5cbiAgICBjb25zdCBhbmdsZSA9IDIgKiBNYXRoLmFjb3ModGhpcy53KTtcbiAgICBjb25zdCBzID0gTWF0aC5zcXJ0KDEgLSB0aGlzLncgKiB0aGlzLncpOyAvLyBhc3N1bWluZyBxdWF0ZXJuaW9uIG5vcm1hbGlzZWQgdGhlbiB3IGlzIGxlc3MgdGhhbiAxLCBzbyB0ZXJtIGFsd2F5cyBwb3NpdGl2ZS5cblxuICAgIGlmIChzIDwgMC4wMDEpIHtcbiAgICAgIC8vIHRlc3QgdG8gYXZvaWQgZGl2aWRlIGJ5IHplcm8sIHMgaXMgYWx3YXlzIHBvc2l0aXZlIGR1ZSB0byBzcXJ0XG4gICAgICAvLyBpZiBzIGNsb3NlIHRvIHplcm8gdGhlbiBkaXJlY3Rpb24gb2YgYXhpcyBub3QgaW1wb3J0YW50XG4gICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLng7IC8vIGlmIGl0IGlzIGltcG9ydGFudCB0aGF0IGF4aXMgaXMgbm9ybWFsaXNlZCB0aGVuIHJlcGxhY2Ugd2l0aCB4PTE7IHk9ej0wO1xuXG4gICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnk7XG4gICAgICB0YXJnZXRBeGlzLnogPSB0aGlzLno7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldEF4aXMueCA9IHRoaXMueCAvIHM7IC8vIG5vcm1hbGlzZSBheGlzXG5cbiAgICAgIHRhcmdldEF4aXMueSA9IHRoaXMueSAvIHM7XG4gICAgICB0YXJnZXRBeGlzLnogPSB0aGlzLnogLyBzO1xuICAgIH1cblxuICAgIHJldHVybiBbdGFyZ2V0QXhpcywgYW5nbGVdO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gdmFsdWUgZ2l2ZW4gdHdvIHZlY3RvcnMuIFRoZSByZXN1bHRpbmcgcm90YXRpb24gd2lsbCBiZSB0aGUgbmVlZGVkIHJvdGF0aW9uIHRvIHJvdGF0ZSB1IHRvIHYuXG4gICAqL1xuXG5cbiAgc2V0RnJvbVZlY3RvcnModSwgdikge1xuICAgIGlmICh1LmlzQW50aXBhcmFsbGVsVG8odikpIHtcbiAgICAgIGNvbnN0IHQxID0gc2Z2X3QxO1xuICAgICAgY29uc3QgdDIgPSBzZnZfdDI7XG4gICAgICB1LnRhbmdlbnRzKHQxLCB0Mik7XG4gICAgICB0aGlzLnNldEZyb21BeGlzQW5nbGUodDEsIE1hdGguUEkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhID0gdS5jcm9zcyh2KTtcbiAgICAgIHRoaXMueCA9IGEueDtcbiAgICAgIHRoaXMueSA9IGEueTtcbiAgICAgIHRoaXMueiA9IGEuejtcbiAgICAgIHRoaXMudyA9IE1hdGguc3FydCh1Lmxlbmd0aCgpICoqIDIgKiB2Lmxlbmd0aCgpICoqIDIpICsgdS5kb3Qodik7XG4gICAgICB0aGlzLm5vcm1hbGl6ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiB3aXRoIGFuIG90aGVyIHF1YXRlcm5pb24uXG4gICAqL1xuXG5cbiAgbXVsdChxdWF0LCB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpKSB7XG4gICAgY29uc3QgYXggPSB0aGlzLng7XG4gICAgY29uc3QgYXkgPSB0aGlzLnk7XG4gICAgY29uc3QgYXogPSB0aGlzLno7XG4gICAgY29uc3QgYXcgPSB0aGlzLnc7XG4gICAgY29uc3QgYnggPSBxdWF0Lng7XG4gICAgY29uc3QgYnkgPSBxdWF0Lnk7XG4gICAgY29uc3QgYnogPSBxdWF0Lno7XG4gICAgY29uc3QgYncgPSBxdWF0Lnc7XG4gICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5O1xuICAgIHRhcmdldC55ID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBiejtcbiAgICB0YXJnZXQueiA9IGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYng7XG4gICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgaW52ZXJzZSBxdWF0ZXJuaW9uIHJvdGF0aW9uLlxuICAgKi9cblxuXG4gIGludmVyc2UodGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKSkge1xuICAgIGNvbnN0IHggPSB0aGlzLng7XG4gICAgY29uc3QgeSA9IHRoaXMueTtcbiAgICBjb25zdCB6ID0gdGhpcy56O1xuICAgIGNvbnN0IHcgPSB0aGlzLnc7XG4gICAgdGhpcy5jb25qdWdhdGUodGFyZ2V0KTtcbiAgICBjb25zdCBpbm9ybTIgPSAxIC8gKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTtcbiAgICB0YXJnZXQueCAqPSBpbm9ybTI7XG4gICAgdGFyZ2V0LnkgKj0gaW5vcm0yO1xuICAgIHRhcmdldC56ICo9IGlub3JtMjtcbiAgICB0YXJnZXQudyAqPSBpbm9ybTI7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBxdWF0ZXJuaW9uIGNvbmp1Z2F0ZVxuICAgKi9cblxuXG4gIGNvbmp1Z2F0ZSh0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpKSB7XG4gICAgdGFyZ2V0LnggPSAtdGhpcy54O1xuICAgIHRhcmdldC55ID0gLXRoaXMueTtcbiAgICB0YXJnZXQueiA9IC10aGlzLno7XG4gICAgdGFyZ2V0LncgPSB0aGlzLnc7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogTm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgb2YgdGhlIHF1YXRlcm5pb24uXG4gICAqL1xuXG5cbiAgbm9ybWFsaXplKCkge1xuICAgIGxldCBsID0gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiArIHRoaXMudyAqIHRoaXMudyk7XG5cbiAgICBpZiAobCA9PT0gMCkge1xuICAgICAgdGhpcy54ID0gMDtcbiAgICAgIHRoaXMueSA9IDA7XG4gICAgICB0aGlzLnogPSAwO1xuICAgICAgdGhpcy53ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgbCA9IDEgLyBsO1xuICAgICAgdGhpcy54ICo9IGw7XG4gICAgICB0aGlzLnkgKj0gbDtcbiAgICAgIHRoaXMueiAqPSBsO1xuICAgICAgdGhpcy53ICo9IGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEFwcHJveGltYXRpb24gb2YgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBXb3JrcyBiZXN0IHdoZW4gcXVhdCBpcyBhbHJlYWR5IGFsbW9zdC1ub3JtYWxpemVkLlxuICAgKiBAYXV0aG9yIHVucGhhc2VkLCBodHRwczovL2dpdGh1Yi5jb20vdW5waGFzZWRcbiAgICovXG5cblxuICBub3JtYWxpemVGYXN0KCkge1xuICAgIGNvbnN0IGYgPSAoMy4wIC0gKHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiArIHRoaXMudyAqIHRoaXMudykpIC8gMi4wO1xuXG4gICAgaWYgKGYgPT09IDApIHtcbiAgICAgIHRoaXMueCA9IDA7XG4gICAgICB0aGlzLnkgPSAwO1xuICAgICAgdGhpcy56ID0gMDtcbiAgICAgIHRoaXMudyA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMueCAqPSBmO1xuICAgICAgdGhpcy55ICo9IGY7XG4gICAgICB0aGlzLnogKj0gZjtcbiAgICAgIHRoaXMudyAqPSBmO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiBieSBhIHZlY3RvclxuICAgKi9cblxuXG4gIHZtdWx0KHYsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB4ID0gdi54O1xuICAgIGNvbnN0IHkgPSB2Lnk7XG4gICAgY29uc3QgeiA9IHYuejtcbiAgICBjb25zdCBxeCA9IHRoaXMueDtcbiAgICBjb25zdCBxeSA9IHRoaXMueTtcbiAgICBjb25zdCBxeiA9IHRoaXMuejtcbiAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2XG5cbiAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTtcbiAgICBjb25zdCBpeSA9IHF3ICogeSArIHF6ICogeCAtIHF4ICogejtcbiAgICBjb25zdCBpeiA9IHF3ICogeiArIHF4ICogeSAtIHF5ICogeDtcbiAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7XG4gICAgdGFyZ2V0LnggPSBpeCAqIHF3ICsgaXcgKiAtcXggKyBpeSAqIC1xeiAtIGl6ICogLXF5O1xuICAgIHRhcmdldC55ID0gaXkgKiBxdyArIGl3ICogLXF5ICsgaXogKiAtcXggLSBpeCAqIC1xejtcbiAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogQ29waWVzIHZhbHVlIG9mIHNvdXJjZSB0byB0aGlzIHF1YXRlcm5pb24uXG4gICAqIEByZXR1cm4gdGhpc1xuICAgKi9cblxuXG4gIGNvcHkocXVhdCkge1xuICAgIHRoaXMueCA9IHF1YXQueDtcbiAgICB0aGlzLnkgPSBxdWF0Lnk7XG4gICAgdGhpcy56ID0gcXVhdC56O1xuICAgIHRoaXMudyA9IHF1YXQudztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0aGUgcXVhdGVybmlvbiB0byBldWxlciBhbmdsZSByZXByZXNlbnRhdGlvbi4gT3JkZXI6IFlaWCwgYXMgdGhpcyBwYWdlIGRlc2NyaWJlczogaHR0cHM6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL3N0YW5kYXJkcy9pbmRleC5odG1cbiAgICogQHBhcmFtIG9yZGVyIFRocmVlLWNoYXJhY3RlciBzdHJpbmcsIGRlZmF1bHRzIHRvIFwiWVpYXCJcbiAgICovXG5cblxuICB0b0V1bGVyKHRhcmdldCwgb3JkZXIgPSAnWVpYJykge1xuICAgIGxldCBoZWFkaW5nO1xuICAgIGxldCBhdHRpdHVkZTtcbiAgICBsZXQgYmFuaztcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICBjb25zdCB3ID0gdGhpcy53O1xuXG4gICAgc3dpdGNoIChvcmRlcikge1xuICAgICAgY2FzZSAnWVpYJzpcbiAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7XG5cbiAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkge1xuICAgICAgICAgIC8vIHNpbmd1bGFyaXR5IGF0IG5vcnRoIHBvbGVcbiAgICAgICAgICBoZWFkaW5nID0gMiAqIE1hdGguYXRhbjIoeCwgdyk7XG4gICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjtcbiAgICAgICAgICBiYW5rID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZXN0IDwgLTAuNDk5KSB7XG4gICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZVxuICAgICAgICAgIGhlYWRpbmcgPSAtMiAqIE1hdGguYXRhbjIoeCwgdyk7XG4gICAgICAgICAgYXR0aXR1ZGUgPSAtTWF0aC5QSSAvIDI7XG4gICAgICAgICAgYmFuayA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVhZGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc3Qgc3F4ID0geCAqIHg7XG4gICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7XG4gICAgICAgICAgY29uc3Qgc3F6ID0geiAqIHo7XG4gICAgICAgICAgaGVhZGluZyA9IE1hdGguYXRhbjIoMiAqIHkgKiB3IC0gMiAqIHggKiB6LCAxIC0gMiAqIHNxeSAtIDIgKiBzcXopOyAvLyBIZWFkaW5nXG5cbiAgICAgICAgICBhdHRpdHVkZSA9IE1hdGguYXNpbigyICogdGVzdCk7IC8vIGF0dGl0dWRlXG5cbiAgICAgICAgICBiYW5rID0gTWF0aC5hdGFuMigyICogeCAqIHcgLSAyICogeSAqIHosIDEgLSAyICogc3F4IC0gMiAqIHNxeik7IC8vIGJhbmtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFdWxlciBvcmRlciBcIiArIG9yZGVyICsgXCIgbm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC55ID0gaGVhZGluZztcbiAgICB0YXJnZXQueiA9IGF0dGl0dWRlO1xuICAgIHRhcmdldC54ID0gYmFuaztcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIG9yZGVyIFRoZSBvcmRlciB0byBhcHBseSBhbmdsZXM6ICdYWVonIG9yICdZWFonIG9yIGFueSBvdGhlciBjb21iaW5hdGlvbi5cbiAgICpcbiAgICogU2VlIHtAbGluayBodHRwczovL3d3dy5tYXRod29ya3MuY29tL21hdGxhYmNlbnRyYWwvZmlsZWV4Y2hhbmdlLzIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzIE1hdGhXb3Jrc30gcmVmZXJlbmNlXG4gICAqL1xuXG5cbiAgc2V0RnJvbUV1bGVyKHgsIHksIHosIG9yZGVyID0gJ1hZWicpIHtcbiAgICBjb25zdCBjMSA9IE1hdGguY29zKHggLyAyKTtcbiAgICBjb25zdCBjMiA9IE1hdGguY29zKHkgLyAyKTtcbiAgICBjb25zdCBjMyA9IE1hdGguY29zKHogLyAyKTtcbiAgICBjb25zdCBzMSA9IE1hdGguc2luKHggLyAyKTtcbiAgICBjb25zdCBzMiA9IE1hdGguc2luKHkgLyAyKTtcbiAgICBjb25zdCBzMyA9IE1hdGguc2luKHogLyAyKTtcblxuICAgIGlmIChvcmRlciA9PT0gJ1hZWicpIHtcbiAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMztcbiAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMztcbiAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMztcbiAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMztcbiAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWVhaJykge1xuICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzO1xuICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzO1xuICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzO1xuICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzO1xuICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdaWFknKSB7XG4gICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7XG4gICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7XG4gICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7XG4gICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7XG4gICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pZWCcpIHtcbiAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMztcbiAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMztcbiAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMztcbiAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMztcbiAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWVpYJykge1xuICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzO1xuICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzO1xuICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzO1xuICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzO1xuICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdYWlknKSB7XG4gICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7XG4gICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7XG4gICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7XG4gICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IFF1YXRlcm5pb24odGhpcy54LCB0aGlzLnksIHRoaXMueiwgdGhpcy53KTtcbiAgfVxuICAvKipcbiAgICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gcXVhdFxuICAgKlxuICAgKiBAcGFyYW0gdG9RdWF0IHNlY29uZCBvcGVyYW5kXG4gICAqIEBwYXJhbSB0IGludGVycG9sYXRpb24gYW1vdW50IGJldHdlZW4gdGhlIHNlbGYgcXVhdGVybmlvbiBhbmQgdG9RdWF0XG4gICAqIEBwYXJhbSB0YXJnZXQgQSBxdWF0ZXJuaW9uIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgb25lIHdpbGwgYmUgY3JlYXRlZC5cbiAgICogQHJldHVybnMge1F1YXRlcm5pb259IFRoZSBcInRhcmdldFwiIG9iamVjdFxuICAgKi9cblxuXG4gIHNsZXJwKHRvUXVhdCwgdCwgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKSkge1xuICAgIGNvbnN0IGF4ID0gdGhpcy54O1xuICAgIGNvbnN0IGF5ID0gdGhpcy55O1xuICAgIGNvbnN0IGF6ID0gdGhpcy56O1xuICAgIGNvbnN0IGF3ID0gdGhpcy53O1xuICAgIGxldCBieCA9IHRvUXVhdC54O1xuICAgIGxldCBieSA9IHRvUXVhdC55O1xuICAgIGxldCBieiA9IHRvUXVhdC56O1xuICAgIGxldCBidyA9IHRvUXVhdC53O1xuICAgIGxldCBvbWVnYTtcbiAgICBsZXQgY29zb207XG4gICAgbGV0IHNpbm9tO1xuICAgIGxldCBzY2FsZTA7XG4gICAgbGV0IHNjYWxlMTsgLy8gY2FsYyBjb3NpbmVcblxuICAgIGNvc29tID0gYXggKiBieCArIGF5ICogYnkgKyBheiAqIGJ6ICsgYXcgKiBidzsgLy8gYWRqdXN0IHNpZ25zIChpZiBuZWNlc3NhcnkpXG5cbiAgICBpZiAoY29zb20gPCAwLjApIHtcbiAgICAgIGNvc29tID0gLWNvc29tO1xuICAgICAgYnggPSAtYng7XG4gICAgICBieSA9IC1ieTtcbiAgICAgIGJ6ID0gLWJ6O1xuICAgICAgYncgPSAtYnc7XG4gICAgfSAvLyBjYWxjdWxhdGUgY29lZmZpY2llbnRzXG5cblxuICAgIGlmICgxLjAgLSBjb3NvbSA+IDAuMDAwMDAxKSB7XG4gICAgICAvLyBzdGFuZGFyZCBjYXNlIChzbGVycClcbiAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTtcbiAgICAgIHNpbm9tID0gTWF0aC5zaW4ob21lZ2EpO1xuICAgICAgc2NhbGUwID0gTWF0aC5zaW4oKDEuMCAtIHQpICogb21lZ2EpIC8gc2lub207XG4gICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFwiZnJvbVwiIGFuZCBcInRvXCIgcXVhdGVybmlvbnMgYXJlIHZlcnkgY2xvc2VcbiAgICAgIC8vICAuLi4gc28gd2UgY2FuIGRvIGEgbGluZWFyIGludGVycG9sYXRpb25cbiAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7XG4gICAgICBzY2FsZTEgPSB0O1xuICAgIH0gLy8gY2FsY3VsYXRlIGZpbmFsIHZhbHVlc1xuXG5cbiAgICB0YXJnZXQueCA9IHNjYWxlMCAqIGF4ICsgc2NhbGUxICogYng7XG4gICAgdGFyZ2V0LnkgPSBzY2FsZTAgKiBheSArIHNjYWxlMSAqIGJ5O1xuICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejtcbiAgICB0YXJnZXQudyA9IHNjYWxlMCAqIGF3ICsgc2NhbGUxICogYnc7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogUm90YXRlIGFuIGFic29sdXRlIG9yaWVudGF0aW9uIHF1YXRlcm5pb24gZ2l2ZW4gYW4gYW5ndWxhciB2ZWxvY2l0eSBhbmQgYSB0aW1lIHN0ZXAuXG4gICAqL1xuXG5cbiAgaW50ZWdyYXRlKGFuZ3VsYXJWZWxvY2l0eSwgZHQsIGFuZ3VsYXJGYWN0b3IsIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCkpIHtcbiAgICBjb25zdCBheCA9IGFuZ3VsYXJWZWxvY2l0eS54ICogYW5ndWxhckZhY3Rvci54LFxuICAgICAgICAgIGF5ID0gYW5ndWxhclZlbG9jaXR5LnkgKiBhbmd1bGFyRmFjdG9yLnksXG4gICAgICAgICAgYXogPSBhbmd1bGFyVmVsb2NpdHkueiAqIGFuZ3VsYXJGYWN0b3IueixcbiAgICAgICAgICBieCA9IHRoaXMueCxcbiAgICAgICAgICBieSA9IHRoaXMueSxcbiAgICAgICAgICBieiA9IHRoaXMueixcbiAgICAgICAgICBidyA9IHRoaXMudztcbiAgICBjb25zdCBoYWxmX2R0ID0gZHQgKiAwLjU7XG4gICAgdGFyZ2V0LnggKz0gaGFsZl9kdCAqIChheCAqIGJ3ICsgYXkgKiBieiAtIGF6ICogYnkpO1xuICAgIHRhcmdldC55ICs9IGhhbGZfZHQgKiAoYXkgKiBidyArIGF6ICogYnggLSBheCAqIGJ6KTtcbiAgICB0YXJnZXQueiArPSBoYWxmX2R0ICogKGF6ICogYncgKyBheCAqIGJ5IC0gYXkgKiBieCk7XG4gICAgdGFyZ2V0LncgKz0gaGFsZl9kdCAqICgtYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbn1cbmNvbnN0IHNmdl90MSA9IG5ldyBWZWMzKCk7XG5jb25zdCBzZnZfdDIgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIFRoZSBhdmFpbGFibGUgc2hhcGUgdHlwZXMuXG4gKi9cbmNvbnN0IFNIQVBFX1RZUEVTID0ge1xuICAvKiogU1BIRVJFICovXG4gIFNQSEVSRTogMSxcblxuICAvKiogUExBTkUgKi9cbiAgUExBTkU6IDIsXG5cbiAgLyoqIEJPWCAqL1xuICBCT1g6IDQsXG5cbiAgLyoqIENPTVBPVU5EICovXG4gIENPTVBPVU5EOiA4LFxuXG4gIC8qKiBDT05WRVhQT0xZSEVEUk9OICovXG4gIENPTlZFWFBPTFlIRURST046IDE2LFxuXG4gIC8qKiBIRUlHSFRGSUVMRCAqL1xuICBIRUlHSFRGSUVMRDogMzIsXG5cbiAgLyoqIFBBUlRJQ0xFICovXG4gIFBBUlRJQ0xFOiA2NCxcblxuICAvKiogQ1lMSU5ERVIgKi9cbiAgQ1lMSU5ERVI6IDEyOCxcblxuICAvKiogVFJJTUVTSCAqL1xuICBUUklNRVNIOiAyNTZcbn07XG4vKipcbiAqIFNoYXBlVHlwZVxuICovXG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3Igc2hhcGVzXG4gKi9cbmNsYXNzIFNoYXBlIHtcbiAgLyoqXG4gICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHR5cGUgb2YgdGhpcyBzaGFwZS4gTXVzdCBiZSBzZXQgdG8gYW4gaW50ID4gMCBieSBzdWJjbGFzc2VzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGxvY2FsIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMgb2YgdGhpcyBzaGFwZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC5cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cblxuICAvKipcbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogQGRlZmF1bHQgLTFcbiAgICovXG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsIG1hdGVyaWFsIG9mIHRoZSBzaGFwZSB0aGF0IHJlZ3VsYXRlcyBjb250YWN0IHByb3BlcnRpZXMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbGwgdGhlIFNoYXBlIHR5cGVzLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLnR5cGUgPSB2b2lkIDA7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB2b2lkIDA7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdm9pZCAwO1xuICAgIHRoaXMubWF0ZXJpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2R5ID0gdm9pZCAwO1xuICAgIHRoaXMuaWQgPSBTaGFwZS5pZENvdW50ZXIrKztcbiAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDtcbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDtcbiAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA/IG9wdGlvbnMuY29sbGlzaW9uUmVzcG9uc2UgOiB0cnVlO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTtcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xO1xuICAgIHRoaXMubWF0ZXJpYWwgPSBvcHRpb25zLm1hdGVyaWFsID8gb3B0aW9ucy5tYXRlcmlhbCA6IG51bGw7XG4gICAgdGhpcy5ib2R5ID0gbnVsbDtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuXG4gICAqIFRoZSByZXN1bHQgaXMgc3RvcmVkIGluIHRoZSBwcm9wZXJ0eSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYFxuICAgKi9cblxuXG4gIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkge1xuICAgIHRocm93IFwiY29tcHV0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlIFwiICsgdGhpcy50eXBlO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHRocm93IFwidm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlIFwiICsgdGhpcy50eXBlO1xuICB9XG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBpbmVydGlhIGluIHRoZSBsb2NhbCBmcmFtZSBmb3IgdGhpcyBzaGFwZS5cbiAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkge1xuICAgIHRocm93IFwiY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlIFwiICsgdGhpcy50eXBlO1xuICB9XG4gIC8qKlxuICAgKiBAdG9kbyB1c2UgYWJzdHJhY3QgZm9yIHRoZXNlIGtpbmQgb2YgbWV0aG9kc1xuICAgKi9cblxuXG4gIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7XG4gICAgdGhyb3cgXCJjYWxjdWxhdGVXb3JsZEFBQkIoKSBub3QgaW1wbGVtZW50ZWQgZm9yIHNoYXBlIHR5cGUgXCIgKyB0aGlzLnR5cGU7XG4gIH1cblxufVxuU2hhcGUuaWRDb3VudGVyID0gMDtcblNoYXBlLnR5cGVzID0gU0hBUEVfVFlQRVM7XG5cbi8qKlxuICogVHJhbnNmb3JtYXRpb24gdXRpbGl0aWVzLlxuICovXG5jbGFzcyBUcmFuc2Zvcm0ge1xuICAvKipcbiAgICogcG9zaXRpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIHF1YXRlcm5pb25cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMucG9zaXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5xdWF0ZXJuaW9uID0gdm9pZCAwO1xuICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbiAgICBpZiAob3B0aW9ucy5wb3NpdGlvbikge1xuICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHtcbiAgICAgIHRoaXMucXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBnbG9iYWwgcG9pbnQgaW4gbG9jYWwgdHJhbnNmb3JtIGNvb3JkaW5hdGVzLlxuICAgKi9cblxuXG4gIHBvaW50VG9Mb2NhbCh3b3JsZFBvaW50LCByZXN1bHQpIHtcbiAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy5cbiAgICovXG5cblxuICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7XG4gICAgcmV0dXJuIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0aGlzLnBvc2l0aW9uLCB0aGlzLnF1YXRlcm5pb24sIGxvY2FsUG9pbnQsIHJlc3VsdCk7XG4gIH1cbiAgLyoqXG4gICAqIHZlY3RvclRvV29ybGRGcmFtZVxuICAgKi9cblxuXG4gIHZlY3RvclRvV29ybGRGcmFtZShsb2NhbFZlY3RvciwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFZlY3RvciwgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIC8qKlxuICAgKiBwb2ludFRvTG9jYWxGcmFtZVxuICAgKi9cblxuXG4gIHN0YXRpYyBwb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHdvcmxkUG9pbnQudnN1Yihwb3NpdGlvbiwgcmVzdWx0KTtcbiAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpO1xuICAgIHRtcFF1YXQkMS52bXVsdChyZXN1bHQsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogcG9pbnRUb1dvcmxkRnJhbWVcbiAgICovXG5cblxuICBzdGF0aWMgcG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXRlcm5pb24sIGxvY2FsUG9pbnQsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsUG9pbnQsIHJlc3VsdCk7XG4gICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogdmVjdG9yVG9Xb3JsZEZyYW1lXG4gICAqL1xuXG5cbiAgc3RhdGljIHZlY3RvclRvV29ybGRGcmFtZShxdWF0ZXJuaW9uLCBsb2NhbFZlY3RvciwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogdmVjdG9yVG9Mb2NhbEZyYW1lXG4gICAqL1xuXG5cbiAgc3RhdGljIHZlY3RvclRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgd29ybGRWZWN0b3IsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICBxdWF0ZXJuaW9uLncgKj0gLTE7XG4gICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTtcbiAgICBxdWF0ZXJuaW9uLncgKj0gLTE7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG59XG5jb25zdCB0bXBRdWF0JDEgPSBuZXcgUXVhdGVybmlvbigpO1xuXG4vKipcbiAqIEEgc2V0IG9mIHBvbHlnb25zIGRlc2NyaWJpbmcgYSBjb252ZXggc2hhcGUuXG4gKlxuICogVGhlIHNoYXBlIE1VU1QgYmUgY29udmV4IGZvciB0aGUgY29kZSB0byB3b3JrIHByb3Blcmx5LiBObyBwb2x5Z29ucyBtYXkgYmUgY29wbGFuYXIgKGNvbnRhaW5lZFxuICogaW4gdGhlIHNhbWUgM0QgcGxhbmUpLCBpbnN0ZWFkIHRoZXNlIHNob3VsZCBiZSBtZXJnZWQgaW50byBvbmUgcG9seWdvbi5cbiAqXG4gKiBAYXV0aG9yIHFpYW8gLyBodHRwczovL2dpdGh1Yi5jb20vcWlhbyAob3JpZ2luYWwgYXV0aG9yLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3FpYW8vdGhyZWUuanMvY29tbWl0Lzg1MDI2ZjBjNzY5ZTQwMDAxNDhhNjdkNDVhOWU5YjljNTEwODgzNmYpXG4gKiBAYXV0aG9yIHNjaHRlcHBlIC8gaHR0cHM6Ly9naXRodWIuY29tL3NjaHRlcHBlXG4gKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvXG4gKlxuICogQHRvZG8gTW92ZSB0aGUgY2xpcHBpbmcgZnVuY3Rpb25zIHRvIENvbnRhY3RHZW5lcmF0b3I/XG4gKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBjb252ZXhTaGFwZSA9IG5ldyBDQU5OT04uQ29udmV4UG9seWhlZHJvbih7IHZlcnRpY2VzLCBmYWNlcyB9KVxuICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGNvbnZleEJvZHkpXG4gKi9cbmNsYXNzIENvbnZleFBvbHloZWRyb24gZXh0ZW5kcyBTaGFwZSB7XG4gIC8qKiB2ZXJ0aWNlcyAqL1xuXG4gIC8qKlxuICAgKiBBcnJheSBvZiBpbnRlZ2VyIGFycmF5cywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIGZhY2UgY29uc2lzdHMgb2ZcbiAgICovXG5cbiAgLyoqIGZhY2VOb3JtYWxzICovXG5cbiAgLyoqIHdvcmxkVmVydGljZXMgKi9cblxuICAvKiogd29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlICovXG5cbiAgLyoqIHdvcmxkRmFjZU5vcm1hbHMgKi9cblxuICAvKiogd29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlICovXG5cbiAgLyoqXG4gICAqIElmIGdpdmVuLCB0aGVzZSBsb2NhbGx5IGRlZmluZWQsIG5vcm1hbGl6ZWQgYXhlcyBhcmUgdGhlIG9ubHkgb25lcyBiZWluZyBjaGVja2VkIHdoZW4gZG9pbmcgc2VwYXJhdGluZyBheGlzIGNoZWNrLlxuICAgKi9cblxuICAvKiogdW5pcXVlRWRnZXMgKi9cblxuICAvKipcbiAgICogQHBhcmFtIHZlcnRpY2VzIEFuIGFycmF5IG9mIFZlYzMnc1xuICAgKiBAcGFyYW0gZmFjZXMgQXJyYXkgb2YgaW50ZWdlciBhcnJheXMsIGRlc2NyaWJpbmcgd2hpY2ggdmVydGljZXMgdGhhdCBpcyBpbmNsdWRlZCBpbiBlYWNoIGZhY2UuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcm9wcyA9IHt9KSB7XG4gICAgY29uc3Qge1xuICAgICAgdmVydGljZXMgPSBbXSxcbiAgICAgIGZhY2VzID0gW10sXG4gICAgICBub3JtYWxzID0gW10sXG4gICAgICBheGVzLFxuICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXNcbiAgICB9ID0gcHJvcHM7XG4gICAgc3VwZXIoe1xuICAgICAgdHlwZTogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTlxuICAgIH0pO1xuICAgIHRoaXMudmVydGljZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5mYWNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLmZhY2VOb3JtYWxzID0gdm9pZCAwO1xuICAgIHRoaXMud29ybGRWZXJ0aWNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB2b2lkIDA7XG4gICAgdGhpcy51bmlxdWVBeGVzID0gdm9pZCAwO1xuICAgIHRoaXMudW5pcXVlRWRnZXMgPSB2b2lkIDA7XG4gICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xuICAgIHRoaXMuZmFjZXMgPSBmYWNlcztcbiAgICB0aGlzLmZhY2VOb3JtYWxzID0gbm9ybWFscztcblxuICAgIGlmICh0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpO1xuICAgIH1cblxuICAgIGlmICghYm91bmRpbmdTcGhlcmVSYWRpdXMpIHtcbiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IGJvdW5kaW5nU3BoZXJlUmFkaXVzO1xuICAgIH1cblxuICAgIHRoaXMud29ybGRWZXJ0aWNlcyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC52ZXJ0aWNlc1xuXG4gICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFsc1xuXG4gICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHRoaXMudW5pcXVlQXhlcyA9IGF4ZXMgPyBheGVzLnNsaWNlKCkgOiBudWxsO1xuICAgIHRoaXMudW5pcXVlRWRnZXMgPSBbXTtcbiAgICB0aGlzLmNvbXB1dGVFZGdlcygpO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlc1xuICAgKi9cblxuXG4gIGNvbXB1dGVFZGdlcygpIHtcbiAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlcztcbiAgICBlZGdlcy5sZW5ndGggPSAwO1xuICAgIGNvbnN0IGVkZ2UgPSBuZXcgVmVjMygpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGZhY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07XG4gICAgICBjb25zdCBudW1WZXJ0aWNlcyA9IGZhY2UubGVuZ3RoO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gbnVtVmVydGljZXM7IGorKykge1xuICAgICAgICBjb25zdCBrID0gKGogKyAxKSAlIG51bVZlcnRpY2VzO1xuICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTtcbiAgICAgICAgZWRnZS5ub3JtYWxpemUoKTtcbiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgIT09IGVkZ2VzLmxlbmd0aDsgcCsrKSB7XG4gICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHtcbiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICBlZGdlcy5wdXNoKGVkZ2UuY2xvbmUoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGUgdGhlIG5vcm1hbHMgb2YgdGhlIGZhY2VzLlxuICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LlxuICAgKi9cblxuXG4gIGNvbXB1dGVOb3JtYWxzKCkge1xuICAgIHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID0gdGhpcy5mYWNlcy5sZW5ndGg7IC8vIEdlbmVyYXRlIG5vcm1hbHNcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mYWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gQ2hlY2sgc28gYWxsIHZlcnRpY2VzIGV4aXN0cyBmb3IgdGhpcyBmYWNlXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKCF0aGlzLnZlcnRpY2VzW3RoaXMuZmFjZXNbaV1bal1dKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmVydGV4IFwiICsgdGhpcy5mYWNlc1tpXVtqXSArIFwiIG5vdCBmb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgbiA9IHRoaXMuZmFjZU5vcm1hbHNbaV0gfHwgbmV3IFZlYzMoKTtcbiAgICAgIHRoaXMuZ2V0RmFjZU5vcm1hbChpLCBuKTtcbiAgICAgIG4ubmVnYXRlKG4pO1xuICAgICAgdGhpcy5mYWNlTm9ybWFsc1tpXSA9IG47XG4gICAgICBjb25zdCB2ZXJ0ZXggPSB0aGlzLnZlcnRpY2VzW3RoaXMuZmFjZXNbaV1bMF1dO1xuXG4gICAgICBpZiAobi5kb3QodmVydGV4KSA8IDApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIi5mYWNlTm9ybWFsc1tcIiArIGkgKyBcIl0gPSBWZWMzKFwiICsgbi50b1N0cmluZygpICsgXCIpIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuXCIpO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5mYWNlc1tpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIi52ZXJ0aWNlc1tcIiArIHRoaXMuZmFjZXNbaV1bal0gKyBcIl0gPSBWZWMzKFwiICsgdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXS50b1N0cmluZygpICsgXCIpXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBub3JtYWwgb2YgYSBmYWNlIGZyb20gaXRzIHZlcnRpY2VzXG4gICAqL1xuXG5cbiAgZ2V0RmFjZU5vcm1hbChpLCB0YXJnZXQpIHtcbiAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tpXTtcbiAgICBjb25zdCB2YSA9IHRoaXMudmVydGljZXNbZlswXV07XG4gICAgY29uc3QgdmIgPSB0aGlzLnZlcnRpY2VzW2ZbMV1dO1xuICAgIGNvbnN0IHZjID0gdGhpcy52ZXJ0aWNlc1tmWzJdXTtcbiAgICBDb252ZXhQb2x5aGVkcm9uLmNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IGZhY2Ugbm9ybWFsIGdpdmVuIDMgdmVydGljZXNcbiAgICovXG5cblxuICBzdGF0aWMgY29tcHV0ZU5vcm1hbCh2YSwgdmIsIHZjLCB0YXJnZXQpIHtcbiAgICBjb25zdCBjYiA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgYWIgPSBuZXcgVmVjMygpO1xuICAgIHZiLnZzdWIodmEsIGFiKTtcbiAgICB2Yy52c3ViKHZiLCBjYik7XG4gICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7XG5cbiAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkge1xuICAgICAgdGFyZ2V0Lm5vcm1hbGl6ZSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHBhcmFtIG1pbkRpc3QgQ2xhbXAgZGlzdGFuY2VcbiAgICogQHBhcmFtIHJlc3VsdCBUaGUgYW4gYXJyYXkgb2YgY29udGFjdCBwb2ludCBvYmplY3RzLCBzZWUgY2xpcEZhY2VBZ2FpbnN0SHVsbFxuICAgKi9cblxuXG4gIGNsaXBBZ2FpbnN0SHVsbChwb3NBLCBxdWF0QSwgaHVsbEIsIHBvc0IsIHF1YXRCLCBzZXBhcmF0aW5nTm9ybWFsLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHtcbiAgICBjb25zdCBXb3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7XG4gICAgbGV0IGNsb3Nlc3RGYWNlQiA9IC0xO1xuICAgIGxldCBkbWF4ID0gLU51bWJlci5NQVhfVkFMVUU7XG5cbiAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxCLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7XG4gICAgICBXb3JsZE5vcm1hbC5jb3B5KGh1bGxCLmZhY2VOb3JtYWxzW2ZhY2VdKTtcbiAgICAgIHF1YXRCLnZtdWx0KFdvcmxkTm9ybWFsLCBXb3JsZE5vcm1hbCk7XG4gICAgICBjb25zdCBkID0gV29ybGROb3JtYWwuZG90KHNlcGFyYXRpbmdOb3JtYWwpO1xuXG4gICAgICBpZiAoZCA+IGRtYXgpIHtcbiAgICAgICAgZG1heCA9IGQ7XG4gICAgICAgIGNsb3Nlc3RGYWNlQiA9IGZhY2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgd29ybGRWZXJ0c0IxID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxCLmZhY2VzW2Nsb3Nlc3RGYWNlQl0ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGIgPSBodWxsQi52ZXJ0aWNlc1todWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdW2ldXTtcbiAgICAgIGNvbnN0IHdvcmxkYiA9IG5ldyBWZWMzKCk7XG4gICAgICB3b3JsZGIuY29weShiKTtcbiAgICAgIHF1YXRCLnZtdWx0KHdvcmxkYiwgd29ybGRiKTtcbiAgICAgIHBvc0IudmFkZCh3b3JsZGIsIHdvcmxkYik7XG4gICAgICB3b3JsZFZlcnRzQjEucHVzaCh3b3JsZGIpO1xuICAgIH1cblxuICAgIGlmIChjbG9zZXN0RmFjZUIgPj0gMCkge1xuICAgICAgdGhpcy5jbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBGaW5kIHRoZSBzZXBhcmF0aW5nIGF4aXMgYmV0d2VlbiB0aGlzIGh1bGwgYW5kIGFub3RoZXJcbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IHZlY3RvciB0byBzYXZlIHRoZSBheGlzIGluXG4gICAqIEByZXR1cm4gUmV0dXJucyBmYWxzZSBpZiBhIHNlcGFyYXRpb24gaXMgZm91bmQsIGVsc2UgdHJ1ZVxuICAgKi9cblxuXG4gIGZpbmRTZXBhcmF0aW5nQXhpcyhodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCLCB0YXJnZXQsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSB7XG4gICAgY29uc3QgZmFjZUFOb3JtYWxXUzMgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IFdvcmxkbm9ybWFsMSA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgZGVsdGFDID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZEVkZ2UwID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZEVkZ2UxID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBDcm9zcyA9IG5ldyBWZWMzKCk7XG4gICAgbGV0IGRtaW4gPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgIGNvbnN0IGh1bGxBID0gdGhpcztcblxuICAgIGlmICghaHVsbEEudW5pcXVlQXhlcykge1xuICAgICAgY29uc3QgbnVtRmFjZXNBID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBLmxlbmd0aCA6IGh1bGxBLmZhY2VzLmxlbmd0aDsgLy8gVGVzdCBmYWNlIG5vcm1hbHMgZnJvbSBodWxsQVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZpID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBW2ldIDogaTsgLy8gR2V0IHdvcmxkIGZhY2Ugbm9ybWFsXG5cbiAgICAgICAgZmFjZUFOb3JtYWxXUzMuY29weShodWxsQS5mYWNlTm9ybWFsc1tmaV0pO1xuICAgICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTMywgZmFjZUFOb3JtYWxXUzMpO1xuICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpO1xuXG4gICAgICAgIGlmIChkID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkIDwgZG1pbikge1xuICAgICAgICAgIGRtaW4gPSBkO1xuICAgICAgICAgIHRhcmdldC5jb3B5KGZhY2VBTm9ybWFsV1MzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUZXN0IHVuaXF1ZSBheGVzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEEudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBHZXQgd29ybGQgYXhpc1xuICAgICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVBeGVzW2ldLCBmYWNlQU5vcm1hbFdTMyk7XG4gICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhmYWNlQU5vcm1hbFdTMywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7XG5cbiAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPCBkbWluKSB7XG4gICAgICAgICAgZG1pbiA9IGQ7XG4gICAgICAgICAgdGFyZ2V0LmNvcHkoZmFjZUFOb3JtYWxXUzMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFodWxsQi51bmlxdWVBeGVzKSB7XG4gICAgICAvLyBUZXN0IGZhY2Ugbm9ybWFscyBmcm9tIGh1bGxCXG4gICAgICBjb25zdCBudW1GYWNlc0IgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEIubGVuZ3RoIDogaHVsbEIuZmFjZXMubGVuZ3RoO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZpID0gZmFjZUxpc3RCID8gZmFjZUxpc3RCW2ldIDogaTtcbiAgICAgICAgV29ybGRub3JtYWwxLmNvcHkoaHVsbEIuZmFjZU5vcm1hbHNbZmldKTtcbiAgICAgICAgcXVhdEIudm11bHQoV29ybGRub3JtYWwxLCBXb3JsZG5vcm1hbDEpO1xuICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoV29ybGRub3JtYWwxLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKTtcblxuICAgICAgICBpZiAoZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZCA8IGRtaW4pIHtcbiAgICAgICAgICBkbWluID0gZDtcbiAgICAgICAgICB0YXJnZXQuY29weShXb3JsZG5vcm1hbDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMgaW4gQlxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGh1bGxCLnVuaXF1ZUF4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlQXhlc1tpXSwgV29ybGRub3JtYWwxKTtcbiAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7XG5cbiAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPCBkbWluKSB7XG4gICAgICAgICAgZG1pbiA9IGQ7XG4gICAgICAgICAgdGFyZ2V0LmNvcHkoV29ybGRub3JtYWwxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gVGVzdCBlZGdlc1xuXG5cbiAgICBmb3IgKGxldCBlMCA9IDA7IGUwICE9PSBodWxsQS51bmlxdWVFZGdlcy5sZW5ndGg7IGUwKyspIHtcbiAgICAgIC8vIEdldCB3b3JsZCBlZGdlXG4gICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVFZGdlc1tlMF0sIHdvcmxkRWRnZTApO1xuXG4gICAgICBmb3IgKGxldCBlMSA9IDA7IGUxICE9PSBodWxsQi51bmlxdWVFZGdlcy5sZW5ndGg7IGUxKyspIHtcbiAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UgMlxuICAgICAgICBxdWF0Qi52bXVsdChodWxsQi51bmlxdWVFZGdlc1tlMV0sIHdvcmxkRWRnZTEpO1xuICAgICAgICB3b3JsZEVkZ2UwLmNyb3NzKHdvcmxkRWRnZTEsIENyb3NzKTtcblxuICAgICAgICBpZiAoIUNyb3NzLmFsbW9zdFplcm8oKSkge1xuICAgICAgICAgIENyb3NzLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgIGNvbnN0IGRpc3QgPSBodWxsQS50ZXN0U2VwQXhpcyhDcm9zcywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7XG5cbiAgICAgICAgICBpZiAoZGlzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZGlzdCA8IGRtaW4pIHtcbiAgICAgICAgICAgIGRtaW4gPSBkaXN0O1xuICAgICAgICAgICAgdGFyZ2V0LmNvcHkoQ3Jvc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHBvc0IudnN1Yihwb3NBLCBkZWx0YUMpO1xuXG4gICAgaWYgKGRlbHRhQy5kb3QodGFyZ2V0KSA+IDAuMCkge1xuICAgICAgdGFyZ2V0Lm5lZ2F0ZSh0YXJnZXQpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBUZXN0IHNlcGFyYXRpbmcgYXhpcyBhZ2FpbnN0IHR3byBodWxscy4gQm90aCBodWxscyBhcmUgcHJvamVjdGVkIG9udG8gdGhlIGF4aXMgYW5kIHRoZSBvdmVybGFwIHNpemUgaXMgcmV0dXJuZWQgaWYgdGhlcmUgaXMgb25lLlxuICAgKiBAcmV0dXJuIFRoZSBvdmVybGFwIGRlcHRoLCBvciBGQUxTRSBpZiBubyBwZW5ldHJhdGlvbi5cbiAgICovXG5cblxuICB0ZXN0U2VwQXhpcyhheGlzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKSB7XG4gICAgY29uc3QgaHVsbEEgPSB0aGlzO1xuICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQSwgYXhpcywgcG9zQSwgcXVhdEEsIG1heG1pbkEpO1xuICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQiwgYXhpcywgcG9zQiwgcXVhdEIsIG1heG1pbkIpO1xuICAgIGNvbnN0IG1heEEgPSBtYXhtaW5BWzBdO1xuICAgIGNvbnN0IG1pbkEgPSBtYXhtaW5BWzFdO1xuICAgIGNvbnN0IG1heEIgPSBtYXhtaW5CWzBdO1xuICAgIGNvbnN0IG1pbkIgPSBtYXhtaW5CWzFdO1xuXG4gICAgaWYgKG1heEEgPCBtaW5CIHx8IG1heEIgPCBtaW5BKSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIFNlcGFyYXRlZFxuICAgIH1cblxuICAgIGNvbnN0IGQwID0gbWF4QSAtIG1pbkI7XG4gICAgY29uc3QgZDEgPSBtYXhCIC0gbWluQTtcbiAgICBjb25zdCBkZXB0aCA9IGQwIDwgZDEgPyBkMCA6IGQxO1xuICAgIHJldHVybiBkZXB0aDtcbiAgfVxuICAvKipcbiAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkge1xuICAgIC8vIEFwcHJveGltYXRlIHdpdGggYm94IGluZXJ0aWFcbiAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXRcbiAgICBjb25zdCBhYWJibWF4ID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBhYWJibWluID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoYWFiYm1pbiwgYWFiYm1heCk7XG4gICAgY29uc3QgeCA9IGFhYmJtYXgueCAtIGFhYmJtaW4ueDtcbiAgICBjb25zdCB5ID0gYWFiYm1heC55IC0gYWFiYm1pbi55O1xuICAgIGNvbnN0IHogPSBhYWJibWF4LnogLSBhYWJibWluLno7XG4gICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeik7XG4gICAgdGFyZ2V0LnkgPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeCAqIDIgKiB4ICsgMiAqIHogKiAyICogeik7XG4gICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHggKiAyICogeCk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSBmYWNlX2kgSW5kZXggb2YgdGhlIGZhY2VcbiAgICovXG5cblxuICBnZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGZhY2VfaSkge1xuICAgIGNvbnN0IGYgPSB0aGlzLmZhY2VzW2ZhY2VfaV07XG4gICAgY29uc3QgbiA9IHRoaXMuZmFjZU5vcm1hbHNbZmFjZV9pXTtcbiAgICBjb25zdCB2ID0gdGhpcy52ZXJ0aWNlc1tmWzBdXTtcbiAgICBjb25zdCBjID0gLW4uZG90KHYpO1xuICAgIHJldHVybiBjO1xuICB9XG4gIC8qKlxuICAgKiBDbGlwIGEgZmFjZSBhZ2FpbnN0IGEgaHVsbC5cbiAgICogQHBhcmFtIHdvcmxkVmVydHNCMSBBbiBhcnJheSBvZiBWZWMzIHdpdGggdmVydGljZXMgaW4gdGhlIHdvcmxkIGZyYW1lLlxuICAgKiBAcGFyYW0gbWluRGlzdCBEaXN0YW5jZSBjbGFtcGluZ1xuICAgKiBAcGFyYW0gQXJyYXkgcmVzdWx0IEFycmF5IHRvIHN0b3JlIHJlc3VsdGluZyBjb250YWN0IHBvaW50cyBpbi4gV2lsbCBiZSBvYmplY3RzIHdpdGggcHJvcGVydGllczogcG9pbnQsIGRlcHRoLCBub3JtYWwuIFRoZXNlIGFyZSByZXByZXNlbnRlZCBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAgICovXG5cblxuICBjbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCkge1xuICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGVkZ2UwID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBXb3JsZEVkZ2UwID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZFBsYW5lQW5vcm1hbDEgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IHBsYW5lTm9ybWFsV1MxID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZEExID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBsb2NhbFBsYW5lTm9ybWFsID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwbGFuZU5vcm1hbFdTID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBodWxsQSA9IHRoaXM7XG4gICAgY29uc3Qgd29ybGRWZXJ0c0IyID0gW107XG4gICAgY29uc3QgcFZ0eEluID0gd29ybGRWZXJ0c0IxO1xuICAgIGNvbnN0IHBWdHhPdXQgPSB3b3JsZFZlcnRzQjI7XG4gICAgbGV0IGNsb3Nlc3RGYWNlQSA9IC0xO1xuICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsgLy8gRmluZCB0aGUgZmFjZSB3aXRoIG5vcm1hbCBjbG9zZXN0IHRvIHRoZSBzZXBhcmF0aW5nIGF4aXNcblxuICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgaHVsbEEuZmFjZXMubGVuZ3RoOyBmYWNlKyspIHtcbiAgICAgIGZhY2VBTm9ybWFsV1MuY29weShodWxsQS5mYWNlTm9ybWFsc1tmYWNlXSk7XG4gICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTLCBmYWNlQU5vcm1hbFdTKTtcbiAgICAgIGNvbnN0IGQgPSBmYWNlQU5vcm1hbFdTLmRvdChzZXBhcmF0aW5nTm9ybWFsKTtcblxuICAgICAgaWYgKGQgPCBkbWluKSB7XG4gICAgICAgIGRtaW4gPSBkO1xuICAgICAgICBjbG9zZXN0RmFjZUEgPSBmYWNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjbG9zZXN0RmFjZUEgPCAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBHZXQgdGhlIGZhY2UgYW5kIGNvbnN0cnVjdCBjb25uZWN0ZWQgZmFjZXNcblxuXG4gICAgY29uc3QgcG9seUEgPSBodWxsQS5mYWNlc1tjbG9zZXN0RmFjZUFdO1xuICAgIHBvbHlBLmNvbm5lY3RlZEZhY2VzID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGh1bGxBLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLyogU2hhcmluZyBhIHZlcnRleCovXG4gICAgICAgIHBvbHlBLmluZGV4T2YoaHVsbEEuZmFjZXNbaV1bal0pICE9PSAtMSAmJlxuICAgICAgICAvKiBOb3QgdGhlIG9uZSB3ZSBhcmUgbG9va2luZyBmb3IgY29ubmVjdGlvbnMgZnJvbSAqL1xuICAgICAgICBpICE9PSBjbG9zZXN0RmFjZUEgJiZcbiAgICAgICAgLyogTm90IGFscmVhZHkgYWRkZWQgKi9cbiAgICAgICAgcG9seUEuY29ubmVjdGVkRmFjZXMuaW5kZXhPZihpKSA9PT0gLTEpIHtcbiAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBDbGlwIHRoZSBwb2x5Z29uIHRvIHRoZSBiYWNrIG9mIHRoZSBwbGFuZXMgb2YgYWxsIGZhY2VzIG9mIGh1bGwgQSxcbiAgICAvLyB0aGF0IGFyZSBhZGphY2VudCB0byB0aGUgd2l0bmVzcyBmYWNlXG5cblxuICAgIGNvbnN0IG51bVZlcnRpY2VzQSA9IHBvbHlBLmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXNBOyBpKyspIHtcbiAgICAgIGNvbnN0IGEgPSBodWxsQS52ZXJ0aWNlc1twb2x5QVtpXV07XG4gICAgICBjb25zdCBiID0gaHVsbEEudmVydGljZXNbcG9seUFbKGkgKyAxKSAlIG51bVZlcnRpY2VzQV1dO1xuICAgICAgYS52c3ViKGIsIGVkZ2UwKTtcbiAgICAgIFdvcmxkRWRnZTAuY29weShlZGdlMCk7XG4gICAgICBxdWF0QS52bXVsdChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTtcbiAgICAgIHBvc0EudmFkZChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTtcbiAgICAgIHdvcmxkUGxhbmVBbm9ybWFsMS5jb3B5KHRoaXMuZmFjZU5vcm1hbHNbY2xvc2VzdEZhY2VBXSk7XG4gICAgICBxdWF0QS52bXVsdCh3b3JsZFBsYW5lQW5vcm1hbDEsIHdvcmxkUGxhbmVBbm9ybWFsMSk7XG4gICAgICBwb3NBLnZhZGQod29ybGRQbGFuZUFub3JtYWwxLCB3b3JsZFBsYW5lQW5vcm1hbDEpO1xuICAgICAgV29ybGRFZGdlMC5jcm9zcyh3b3JsZFBsYW5lQW5vcm1hbDEsIHBsYW5lTm9ybWFsV1MxKTtcbiAgICAgIHBsYW5lTm9ybWFsV1MxLm5lZ2F0ZShwbGFuZU5vcm1hbFdTMSk7XG4gICAgICB3b3JsZEExLmNvcHkoYSk7XG4gICAgICBxdWF0QS52bXVsdCh3b3JsZEExLCB3b3JsZEExKTtcbiAgICAgIHBvc0EudmFkZCh3b3JsZEExLCB3b3JsZEExKTtcbiAgICAgIGNvbnN0IG90aGVyRmFjZSA9IHBvbHlBLmNvbm5lY3RlZEZhY2VzW2ldO1xuICAgICAgbG9jYWxQbGFuZU5vcm1hbC5jb3B5KHRoaXMuZmFjZU5vcm1hbHNbb3RoZXJGYWNlXSk7XG4gICAgICBjb25zdCBsb2NhbFBsYW5lRXEgPSB0aGlzLmdldFBsYW5lQ29uc3RhbnRPZkZhY2Uob3RoZXJGYWNlKTtcbiAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTtcbiAgICAgIHF1YXRBLnZtdWx0KHBsYW5lTm9ybWFsV1MsIHBsYW5lTm9ybWFsV1MpO1xuICAgICAgY29uc3QgcGxhbmVFcVdTID0gbG9jYWxQbGFuZUVxIC0gcGxhbmVOb3JtYWxXUy5kb3QocG9zQSk7IC8vIENsaXAgZmFjZSBhZ2FpbnN0IG91ciBjb25zdHJ1Y3RlZCBwbGFuZVxuXG4gICAgICB0aGlzLmNsaXBGYWNlQWdhaW5zdFBsYW5lKHBWdHhJbiwgcFZ0eE91dCwgcGxhbmVOb3JtYWxXUywgcGxhbmVFcVdTKTsgLy8gVGhyb3cgYXdheSBhbGwgY2xpcHBlZCBwb2ludHMsIGJ1dCBzYXZlIHRoZSByZW1haW5pbmcgdW50aWwgbmV4dCBjbGlwXG5cbiAgICAgIHdoaWxlIChwVnR4SW4ubGVuZ3RoKSB7XG4gICAgICAgIHBWdHhJbi5zaGlmdCgpO1xuICAgICAgfVxuXG4gICAgICB3aGlsZSAocFZ0eE91dC5sZW5ndGgpIHtcbiAgICAgICAgcFZ0eEluLnB1c2gocFZ0eE91dC5zaGlmdCgpKTtcbiAgICAgIH1cbiAgICB9IC8vIG9ubHkga2VlcCBjb250YWN0IHBvaW50cyB0aGF0IGFyZSBiZWhpbmQgdGhlIHdpdG5lc3MgZmFjZVxuXG5cbiAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTtcbiAgICBjb25zdCBsb2NhbFBsYW5lRXEgPSB0aGlzLmdldFBsYW5lQ29uc3RhbnRPZkZhY2UoY2xvc2VzdEZhY2VBKTtcbiAgICBwbGFuZU5vcm1hbFdTLmNvcHkobG9jYWxQbGFuZU5vcm1hbCk7XG4gICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7XG4gICAgY29uc3QgcGxhbmVFcVdTID0gbG9jYWxQbGFuZUVxIC0gcGxhbmVOb3JtYWxXUy5kb3QocG9zQSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBWdHhJbi5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGRlcHRoID0gcGxhbmVOb3JtYWxXUy5kb3QocFZ0eEluW2ldKSArIHBsYW5lRXFXUzsgLy8gPz8/XG5cbiAgICAgIGlmIChkZXB0aCA8PSBtaW5EaXN0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2xhbXBlZDogZGVwdGg9XCIgKyBkZXB0aCArIFwiIHRvIG1pbkRpc3Q9XCIgKyBtaW5EaXN0KTtcbiAgICAgICAgZGVwdGggPSBtaW5EaXN0O1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVwdGggPD0gbWF4RGlzdCkge1xuICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTtcblxuICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikge1xuICAgICAgICAgIGNvbnN0IHAgPSB7XG4gICAgICAgICAgICBwb2ludCxcbiAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUyxcbiAgICAgICAgICAgIGRlcHRoXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXN1bHQucHVzaChwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS5cbiAgICogQHBhcmFtIHBsYW5lQ29uc3RhbnQgVGhlIGNvbnN0YW50IGluIHRoZSBtYXRoZW1hdGljYWwgcGxhbmUgZXF1YXRpb25cbiAgICovXG5cblxuICBjbGlwRmFjZUFnYWluc3RQbGFuZShpblZlcnRpY2VzLCBvdXRWZXJ0aWNlcywgcGxhbmVOb3JtYWwsIHBsYW5lQ29uc3RhbnQpIHtcbiAgICBsZXQgbl9kb3RfZmlyc3Q7XG4gICAgbGV0IG5fZG90X2xhc3Q7XG4gICAgY29uc3QgbnVtVmVydHMgPSBpblZlcnRpY2VzLmxlbmd0aDtcblxuICAgIGlmIChudW1WZXJ0cyA8IDIpIHtcbiAgICAgIHJldHVybiBvdXRWZXJ0aWNlcztcbiAgICB9XG5cbiAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07XG4gICAgbGV0IGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzWzBdO1xuICAgIG5fZG90X2ZpcnN0ID0gcGxhbmVOb3JtYWwuZG90KGZpcnN0VmVydGV4KSArIHBsYW5lQ29uc3RhbnQ7XG5cbiAgICBmb3IgKGxldCB2aSA9IDA7IHZpIDwgbnVtVmVydHM7IHZpKyspIHtcbiAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTtcbiAgICAgIG5fZG90X2xhc3QgPSBwbGFuZU5vcm1hbC5kb3QobGFzdFZlcnRleCkgKyBwbGFuZUNvbnN0YW50O1xuXG4gICAgICBpZiAobl9kb3RfZmlyc3QgPCAwKSB7XG4gICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkge1xuICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXhcbiAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTtcbiAgICAgICAgICBuZXd2LmNvcHkobGFzdFZlcnRleCk7XG4gICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTdGFydCA8IDAsIGVuZCA+PSAwLCBzbyBvdXRwdXQgaW50ZXJzZWN0aW9uXG4gICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7XG4gICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTtcbiAgICAgICAgICBvdXRWZXJ0aWNlcy5wdXNoKG5ld3YpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobl9kb3RfbGFzdCA8IDApIHtcbiAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZFxuICAgICAgICAgIGNvbnN0IG5ld3YgPSBuZXcgVmVjMygpO1xuICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7XG4gICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTtcbiAgICAgICAgICBvdXRWZXJ0aWNlcy5wdXNoKGxhc3RWZXJ0ZXgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDtcbiAgICAgIG5fZG90X2ZpcnN0ID0gbl9kb3RfbGFzdDtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0VmVydGljZXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYC53b3JsZFZlcnRpY2VzYCBhbmQgc2V0cyBgLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuXG4gICAqL1xuXG5cbiAgY29tcHV0ZVdvcmxkVmVydGljZXMocG9zaXRpb24sIHF1YXQpIHtcbiAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLndvcmxkVmVydGljZXMucHVzaChuZXcgVmVjMygpKTtcbiAgICB9XG5cbiAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7XG4gICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBxdWF0LnZtdWx0KHZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTtcbiAgICAgIHBvc2l0aW9uLnZhZGQod29ybGRWZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7XG4gICAgfVxuXG4gICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTtcbiAgfVxuXG4gIGNvbXB1dGVMb2NhbEFBQkIoYWFiYm1pbiwgYWFiYm1heCkge1xuICAgIGNvbnN0IHZlcnRpY2VzID0gdGhpcy52ZXJ0aWNlcztcbiAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTtcbiAgICBhYWJibWF4LnNldCgtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgdiA9IHZlcnRpY2VzW2ldO1xuXG4gICAgICBpZiAodi54IDwgYWFiYm1pbi54KSB7XG4gICAgICAgIGFhYmJtaW4ueCA9IHYueDtcbiAgICAgIH0gZWxzZSBpZiAodi54ID4gYWFiYm1heC54KSB7XG4gICAgICAgIGFhYmJtYXgueCA9IHYueDtcbiAgICAgIH1cblxuICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkge1xuICAgICAgICBhYWJibWluLnkgPSB2Lnk7XG4gICAgICB9IGVsc2UgaWYgKHYueSA+IGFhYmJtYXgueSkge1xuICAgICAgICBhYWJibWF4LnkgPSB2Lnk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LnogPCBhYWJibWluLnopIHtcbiAgICAgICAgYWFiYm1pbi56ID0gdi56O1xuICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHtcbiAgICAgICAgYWFiYm1heC56ID0gdi56O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuXG4gICAqL1xuXG5cbiAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkge1xuICAgIGNvbnN0IE4gPSB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aDtcblxuICAgIHdoaWxlICh0aGlzLndvcmxkRmFjZU5vcm1hbHMubGVuZ3RoIDwgTikge1xuICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzLnB1c2gobmV3IFZlYzMoKSk7XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7XG4gICAgY29uc3Qgd29ybGROb3JtYWxzID0gdGhpcy53b3JsZEZhY2VOb3JtYWxzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgcXVhdC52bXVsdChub3JtYWxzW2ldLCB3b3JsZE5vcm1hbHNbaV0pO1xuICAgIH1cblxuICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzXG4gICAqL1xuXG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgLy8gQXNzdW1lIHBvaW50cyBhcmUgZGlzdHJpYnV0ZWQgd2l0aCBsb2NhbCAoMCwwLDApIGFzIGNlbnRlclxuICAgIGxldCBtYXgyID0gMDtcbiAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5vcm0yID0gdmVydHNbaV0ubGVuZ3RoU3F1YXJlZCgpO1xuXG4gICAgICBpZiAobm9ybTIgPiBtYXgyKSB7XG4gICAgICAgIG1heDIgPSBub3JtMjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTWF0aC5zcXJ0KG1heDIpO1xuICB9XG4gIC8qKlxuICAgKiBjYWxjdWxhdGVXb3JsZEFBQkJcbiAgICovXG5cblxuICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkge1xuICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlcztcbiAgICBsZXQgbWlueDtcbiAgICBsZXQgbWlueTtcbiAgICBsZXQgbWluejtcbiAgICBsZXQgbWF4eDtcbiAgICBsZXQgbWF4eTtcbiAgICBsZXQgbWF4ejtcbiAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRlbXBXb3JsZFZlcnRleC5jb3B5KHZlcnRzW2ldKTtcbiAgICAgIHF1YXQudm11bHQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpO1xuICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpO1xuICAgICAgY29uc3QgdiA9IHRlbXBXb3JsZFZlcnRleDtcblxuICAgICAgaWYgKG1pbnggPT09IHVuZGVmaW5lZCB8fCB2LnggPCBtaW54KSB7XG4gICAgICAgIG1pbnggPSB2Lng7XG4gICAgICB9XG5cbiAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkge1xuICAgICAgICBtYXh4ID0gdi54O1xuICAgICAgfVxuXG4gICAgICBpZiAobWlueSA9PT0gdW5kZWZpbmVkIHx8IHYueSA8IG1pbnkpIHtcbiAgICAgICAgbWlueSA9IHYueTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1heHkgPT09IHVuZGVmaW5lZCB8fCB2LnkgPiBtYXh5KSB7XG4gICAgICAgIG1heHkgPSB2Lnk7XG4gICAgICB9XG5cbiAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikge1xuICAgICAgICBtaW56ID0gdi56O1xuICAgICAgfVxuXG4gICAgICBpZiAobWF4eiA9PT0gdW5kZWZpbmVkIHx8IHYueiA+IG1heHopIHtcbiAgICAgICAgbWF4eiA9IHYuejtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBtaW4uc2V0KG1pbngsIG1pbnksIG1pbnopO1xuICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyAvIDMuMDtcbiAgfVxuICAvKipcbiAgICogR2V0IGFuIGF2ZXJhZ2Ugb2YgYWxsIHRoZSB2ZXJ0aWNlcyBwb3NpdGlvbnNcbiAgICovXG5cblxuICBnZXRBdmVyYWdlUG9pbnRMb2NhbCh0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGFyZ2V0LnZhZGQodmVydHNbaV0sIHRhcmdldCk7XG4gICAgfVxuXG4gICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogVHJhbnNmb3JtIGFsbCBsb2NhbCBwb2ludHMuIFdpbGwgY2hhbmdlIHRoZSAudmVydGljZXNcbiAgICovXG5cblxuICB0cmFuc2Zvcm1BbGxQb2ludHMob2Zmc2V0LCBxdWF0KSB7XG4gICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoO1xuICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb25cblxuICAgIGlmIChxdWF0KSB7XG4gICAgICAvLyBSb3RhdGUgdmVydGljZXNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTtcbiAgICAgICAgcXVhdC52bXVsdCh2LCB2KTtcbiAgICAgIH0gLy8gUm90YXRlIGZhY2Ugbm9ybWFsc1xuXG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB2ID0gdGhpcy5mYWNlTm9ybWFsc1tpXTtcbiAgICAgICAgcXVhdC52bXVsdCh2LCB2KTtcbiAgICAgIH1cbiAgICAgIC8qXG4gICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXNcbiAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMudW5pcXVlRWRnZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLnVuaXF1ZUVkZ2VzW2ldO1xuICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTtcbiAgICAgICAgICAgIH0qL1xuXG4gICAgfSAvLyBBcHBseSBvZmZzZXRcblxuXG4gICAgaWYgKG9mZnNldCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldO1xuICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHAgaXMgaW5zaWRlIHRoZSBwb2x5aGVkcmEuIE11c3QgYmUgaW4gbG9jYWwgY29vcmRzLlxuICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb25cbiAgICogb2YgYWxsIHRoZSB2ZWN0b3JzIGZyb20gaXQgdG8gdGhvc2Ugb3RoZXIgcG9pbnRzIGFyZSBvbiBsZXNzIHRoYW4gb25lIGhhbGYgb2YgYSBzcGhlcmUgYXJvdW5kIGl0LlxuICAgKiBAcGFyYW0gcCBBIHBvaW50IGdpdmVuIGluIGxvY2FsIGNvb3JkaW5hdGVzXG4gICAqL1xuXG5cbiAgcG9pbnRJc0luc2lkZShwKSB7XG4gICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIGNvbnN0IGZhY2VzID0gdGhpcy5mYWNlcztcbiAgICBjb25zdCBub3JtYWxzID0gdGhpcy5mYWNlTm9ybWFscztcbiAgICBjb25zdCBwb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5nZXRBdmVyYWdlUG9pbnRMb2NhbChwb2ludEluc2lkZSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBuID0gbm9ybWFsc1tpXTtcbiAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tmYWNlc1tpXVswXV07IC8vIFdlIG9ubHkgbmVlZCBvbmUgcG9pbnQgaW4gdGhlIGZhY2VcbiAgICAgIC8vIFRoaXMgZG90IHByb2R1Y3QgZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBlZGdlIHRoZSBwb2ludCBpc1xuXG4gICAgICBjb25zdCB2VG9QID0gbmV3IFZlYzMoKTtcbiAgICAgIHAudnN1Yih2LCB2VG9QKTtcbiAgICAgIGNvbnN0IHIxID0gbi5kb3QodlRvUCk7XG4gICAgICBjb25zdCB2VG9Qb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7XG4gICAgICBwb2ludEluc2lkZS52c3ViKHYsIHZUb1BvaW50SW5zaWRlKTtcbiAgICAgIGNvbnN0IHIyID0gbi5kb3QodlRvUG9pbnRJbnNpZGUpO1xuXG4gICAgICBpZiAocjEgPCAwICYmIHIyID4gMCB8fCByMSA+IDAgJiYgcjIgPCAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gRW5jb3VudGVyZWQgc29tZSBvdGhlciBzaWduLiBFeGl0LlxuICAgICAgfVxuICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLlxuXG5cbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBtYXggYW5kIG1pbiBkb3QgcHJvZHVjdCBvZiBhIGNvbnZleCBodWxsIGF0IHBvc2l0aW9uIChwb3MscXVhdCkgcHJvamVjdGVkIG9udG8gYW4gYXhpcy5cbiAgICogUmVzdWx0cyBhcmUgc2F2ZWQgaW4gdGhlIGFycmF5IG1heG1pbi5cbiAgICogQHBhcmFtIHJlc3VsdCByZXN1bHRbMF0gYW5kIHJlc3VsdFsxXSB3aWxsIGJlIHNldCB0byBtYXhpbXVtIGFuZCBtaW5pbXVtLCByZXNwZWN0aXZlbHkuXG4gICAqL1xuXG5cbiAgc3RhdGljIHByb2plY3Qoc2hhcGUsIGF4aXMsIHBvcywgcXVhdCwgcmVzdWx0KSB7XG4gICAgY29uc3QgbiA9IHNoYXBlLnZlcnRpY2VzLmxlbmd0aDtcbiAgICBjb25zdCBsb2NhbEF4aXMgPSBwcm9qZWN0X2xvY2FsQXhpcztcbiAgICBsZXQgbWF4ID0gMDtcbiAgICBsZXQgbWluID0gMDtcbiAgICBjb25zdCBsb2NhbE9yaWdpbiA9IHByb2plY3RfbG9jYWxPcmlnaW47XG4gICAgY29uc3QgdnMgPSBzaGFwZS52ZXJ0aWNlcztcbiAgICBsb2NhbE9yaWdpbi5zZXRaZXJvKCk7IC8vIFRyYW5zZm9ybSB0aGUgYXhpcyB0byBsb2NhbFxuXG4gICAgVHJhbnNmb3JtLnZlY3RvclRvTG9jYWxGcmFtZShwb3MsIHF1YXQsIGF4aXMsIGxvY2FsQXhpcyk7XG4gICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgbG9jYWxPcmlnaW4sIGxvY2FsT3JpZ2luKTtcbiAgICBjb25zdCBhZGQgPSBsb2NhbE9yaWdpbi5kb3QobG9jYWxBeGlzKTtcbiAgICBtaW4gPSBtYXggPSB2c1swXS5kb3QobG9jYWxBeGlzKTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbjsgaSsrKSB7XG4gICAgICBjb25zdCB2YWwgPSB2c1tpXS5kb3QobG9jYWxBeGlzKTtcblxuICAgICAgaWYgKHZhbCA+IG1heCkge1xuICAgICAgICBtYXggPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWwgPCBtaW4pIHtcbiAgICAgICAgbWluID0gdmFsO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1pbiAtPSBhZGQ7XG4gICAgbWF4IC09IGFkZDtcblxuICAgIGlmIChtaW4gPiBtYXgpIHtcbiAgICAgIC8vIEluY29uc2lzdGVudCAtIHN3YXBcbiAgICAgIGNvbnN0IHRlbXAgPSBtaW47XG4gICAgICBtaW4gPSBtYXg7XG4gICAgICBtYXggPSB0ZW1wO1xuICAgIH0gLy8gT3V0cHV0XG5cblxuICAgIHJlc3VsdFswXSA9IG1heDtcbiAgICByZXN1bHRbMV0gPSBtaW47XG4gIH1cblxufVxuY29uc3QgbWF4bWluQSA9IFtdO1xuY29uc3QgbWF4bWluQiA9IFtdO1xuY29uc3QgcHJvamVjdF9sb2NhbEF4aXMgPSBuZXcgVmVjMygpO1xuY29uc3QgcHJvamVjdF9sb2NhbE9yaWdpbiA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQSAzZCBib3ggc2hhcGUuXG4gKiBAZXhhbXBsZVxuICogICAgIGNvbnN0IHNpemUgPSAxXG4gKiAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBuZXcgQ0FOTk9OLlZlYzMoc2l6ZSwgc2l6ZSwgc2l6ZSlcbiAqICAgICBjb25zdCBib3hTaGFwZSA9IG5ldyBDQU5OT04uQm94KGhhbGZFeHRlbnRzKVxuICogICAgIGNvbnN0IGJveEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogYm94U2hhcGUgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGJveEJvZHkpXG4gKi9cbmNsYXNzIEJveCBleHRlbmRzIFNoYXBlIHtcbiAgLyoqXG4gICAqIFRoZSBoYWxmIGV4dGVudHMgb2YgdGhlIGJveC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgdGhlIGNvbnRhY3QgZ2VuZXJhdG9yIHRvIG1ha2UgY29udGFjdHMgd2l0aCBvdGhlciBjb252ZXggcG9seWhlZHJhIGZvciBleGFtcGxlLlxuICAgKi9cbiAgY29uc3RydWN0b3IoaGFsZkV4dGVudHMpIHtcbiAgICBzdXBlcih7XG4gICAgICB0eXBlOiBTaGFwZS50eXBlcy5CT1hcbiAgICB9KTtcbiAgICB0aGlzLmhhbGZFeHRlbnRzID0gdm9pZCAwO1xuICAgIHRoaXMuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuaGFsZkV4dGVudHMgPSBoYWxmRXh0ZW50cztcbiAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IG51bGw7XG4gICAgdGhpcy51cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKTtcbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGxvY2FsIGNvbnZleCBwb2x5aGVkcm9uIHJlcHJlc2VudGF0aW9uIHVzZWQgZm9yIHNvbWUgY29sbGlzaW9ucy5cbiAgICovXG5cblxuICB1cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKSB7XG4gICAgY29uc3Qgc3ggPSB0aGlzLmhhbGZFeHRlbnRzLng7XG4gICAgY29uc3Qgc3kgPSB0aGlzLmhhbGZFeHRlbnRzLnk7XG4gICAgY29uc3Qgc3ogPSB0aGlzLmhhbGZFeHRlbnRzLno7XG4gICAgY29uc3QgViA9IFZlYzM7XG4gICAgY29uc3QgdmVydGljZXMgPSBbbmV3IFYoLXN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIC1zeSwgc3opLCBuZXcgVihzeCwgc3ksIHN6KSwgbmV3IFYoLXN4LCBzeSwgc3opXTtcbiAgICBjb25zdCBmYWNlcyA9IFtbMywgMiwgMSwgMF0sIC8vIC16XG4gICAgWzQsIDUsIDYsIDddLCAvLyArelxuICAgIFs1LCA0LCAwLCAxXSwgLy8gLXlcbiAgICBbMiwgMywgNywgNl0sIC8vICt5XG4gICAgWzAsIDQsIDcsIDNdLCAvLyAteFxuICAgIFsxLCAyLCA2LCA1XSAvLyAreFxuICAgIF07XG4gICAgY29uc3QgYXhlcyA9IFtuZXcgVigwLCAwLCAxKSwgbmV3IFYoMCwgMSwgMCksIG5ldyBWKDEsIDAsIDApXTtcbiAgICBjb25zdCBoID0gbmV3IENvbnZleFBvbHloZWRyb24oe1xuICAgICAgdmVydGljZXMsXG4gICAgICBmYWNlcyxcbiAgICAgIGF4ZXNcbiAgICB9KTtcbiAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IGg7XG4gICAgaC5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XG4gIH1cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0aGUgaW5lcnRpYSBvZiB0aGUgYm94LlxuICAgKi9cblxuXG4gIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgQm94LmNhbGN1bGF0ZUluZXJ0aWEodGhpcy5oYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgc3RhdGljIGNhbGN1bGF0ZUluZXJ0aWEoaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCkge1xuICAgIGNvbnN0IGUgPSBoYWxmRXh0ZW50cztcbiAgICB0YXJnZXQueCA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiBlLnkgKiAyICogZS55ICsgMiAqIGUueiAqIDIgKiBlLnopO1xuICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueCAqIDIgKiBlLnggKyAyICogZS56ICogMiAqIGUueik7XG4gICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnggKiAyICogZS54KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBib3ggNiBzaWRlIG5vcm1hbHNcbiAgICogQHBhcmFtIHNpeFRhcmdldFZlY3RvcnMgQW4gYXJyYXkgb2YgNiB2ZWN0b3JzLCB0byBzdG9yZSB0aGUgcmVzdWx0aW5nIHNpZGUgbm9ybWFscyBpbi5cbiAgICogQHBhcmFtIHF1YXQgT3JpZW50YXRpb24gdG8gYXBwbHkgdG8gdGhlIG5vcm1hbCB2ZWN0b3JzLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2ZWN0b3JzIHdpbGwgYmUgaW4gcmVzcGVjdCB0byB0aGUgbG9jYWwgZnJhbWUuXG4gICAqL1xuXG5cbiAgZ2V0U2lkZU5vcm1hbHMoc2l4VGFyZ2V0VmVjdG9ycywgcXVhdCkge1xuICAgIGNvbnN0IHNpZGVzID0gc2l4VGFyZ2V0VmVjdG9ycztcbiAgICBjb25zdCBleCA9IHRoaXMuaGFsZkV4dGVudHM7XG4gICAgc2lkZXNbMF0uc2V0KGV4LngsIDAsIDApO1xuICAgIHNpZGVzWzFdLnNldCgwLCBleC55LCAwKTtcbiAgICBzaWRlc1syXS5zZXQoMCwgMCwgZXgueik7XG4gICAgc2lkZXNbM10uc2V0KC1leC54LCAwLCAwKTtcbiAgICBzaWRlc1s0XS5zZXQoMCwgLWV4LnksIDApO1xuICAgIHNpZGVzWzVdLnNldCgwLCAwLCAtZXgueik7XG5cbiAgICBpZiAocXVhdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gc2lkZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcXVhdC52bXVsdChzaWRlc1tpXSwgc2lkZXNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzaWRlcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdm9sdW1lIG9mIHRoZSBib3guXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiA4LjAgKiB0aGlzLmhhbGZFeHRlbnRzLnggKiB0aGlzLmhhbGZFeHRlbnRzLnkgKiB0aGlzLmhhbGZFeHRlbnRzLno7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzXG4gICAqL1xuXG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHRoaXMuaGFsZkV4dGVudHMubGVuZ3RoKCk7XG4gIH1cbiAgLyoqXG4gICAqIGZvckVhY2hXb3JsZENvcm5lclxuICAgKi9cblxuXG4gIGZvckVhY2hXb3JsZENvcm5lcihwb3MsIHF1YXQsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7XG4gICAgY29uc3QgY29ybmVycyA9IFtbZS54LCBlLnksIGUuel0sIFstZS54LCBlLnksIGUuel0sIFstZS54LCAtZS55LCBlLnpdLCBbLWUueCwgLWUueSwgLWUuel0sIFtlLngsIC1lLnksIC1lLnpdLCBbZS54LCBlLnksIC1lLnpdLCBbLWUueCwgZS55LCAtZS56XSwgW2UueCwgLWUueSwgZS56XV07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvcm5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHdvcmxkQ29ybmVyVGVtcFBvcy5zZXQoY29ybmVyc1tpXVswXSwgY29ybmVyc1tpXVsxXSwgY29ybmVyc1tpXVsyXSk7XG4gICAgICBxdWF0LnZtdWx0KHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTtcbiAgICAgIHBvcy52YWRkKHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTtcbiAgICAgIGNhbGxiYWNrKHdvcmxkQ29ybmVyVGVtcFBvcy54LCB3b3JsZENvcm5lclRlbXBQb3MueSwgd29ybGRDb3JuZXJUZW1wUG9zLnopO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogY2FsY3VsYXRlV29ybGRBQUJCXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50cztcbiAgICB3b3JsZENvcm5lcnNUZW1wWzBdLnNldChlLngsIGUueSwgZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzFdLnNldCgtZS54LCBlLnksIGUueik7XG4gICAgd29ybGRDb3JuZXJzVGVtcFsyXS5zZXQoLWUueCwgLWUueSwgZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzNdLnNldCgtZS54LCAtZS55LCAtZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzRdLnNldChlLngsIC1lLnksIC1lLnopO1xuICAgIHdvcmxkQ29ybmVyc1RlbXBbNV0uc2V0KGUueCwgZS55LCAtZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzZdLnNldCgtZS54LCBlLnksIC1lLnopO1xuICAgIHdvcmxkQ29ybmVyc1RlbXBbN10uc2V0KGUueCwgLWUueSwgZS56KTtcbiAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbMF07XG4gICAgcXVhdC52bXVsdCh3Yywgd2MpO1xuICAgIHBvcy52YWRkKHdjLCB3Yyk7XG4gICAgbWF4LmNvcHkod2MpO1xuICAgIG1pbi5jb3B5KHdjKTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgODsgaSsrKSB7XG4gICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbaV07XG4gICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7XG4gICAgICBwb3MudmFkZCh3Yywgd2MpO1xuICAgICAgY29uc3QgeCA9IHdjLng7XG4gICAgICBjb25zdCB5ID0gd2MueTtcbiAgICAgIGNvbnN0IHogPSB3Yy56O1xuXG4gICAgICBpZiAoeCA+IG1heC54KSB7XG4gICAgICAgIG1heC54ID0geDtcbiAgICAgIH1cblxuICAgICAgaWYgKHkgPiBtYXgueSkge1xuICAgICAgICBtYXgueSA9IHk7XG4gICAgICB9XG5cbiAgICAgIGlmICh6ID4gbWF4LnopIHtcbiAgICAgICAgbWF4LnogPSB6O1xuICAgICAgfVxuXG4gICAgICBpZiAoeCA8IG1pbi54KSB7XG4gICAgICAgIG1pbi54ID0geDtcbiAgICAgIH1cblxuICAgICAgaWYgKHkgPCBtaW4ueSkge1xuICAgICAgICBtaW4ueSA9IHk7XG4gICAgICB9XG5cbiAgICAgIGlmICh6IDwgbWluLnopIHtcbiAgICAgICAgbWluLnogPSB6O1xuICAgICAgfVxuICAgIH0gLy8gR2V0IGVhY2ggYXhpcyBtYXhcbiAgICAvLyBtaW4uc2V0KEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTtcbiAgICAvLyBtYXguc2V0KC1JbmZpbml0eSwtSW5maW5pdHksLUluZmluaXR5KTtcbiAgICAvLyB0aGlzLmZvckVhY2hXb3JsZENvcm5lcihwb3MscXVhdCxmdW5jdGlvbih4LHkseil7XG4gICAgLy8gICAgIGlmKHggPiBtYXgueCl7XG4gICAgLy8gICAgICAgICBtYXgueCA9IHg7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgaWYoeSA+IG1heC55KXtcbiAgICAvLyAgICAgICAgIG1heC55ID0geTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBpZih6ID4gbWF4Lnope1xuICAgIC8vICAgICAgICAgbWF4LnogPSB6O1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIGlmKHggPCBtaW4ueCl7XG4gICAgLy8gICAgICAgICBtaW4ueCA9IHg7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgaWYoeSA8IG1pbi55KXtcbiAgICAvLyAgICAgICAgIG1pbi55ID0geTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBpZih6IDwgbWluLnope1xuICAgIC8vICAgICAgICAgbWluLnogPSB6O1xuICAgIC8vICAgICB9XG4gICAgLy8gfSk7XG5cbiAgfVxuXG59XG5jb25zdCB3b3JsZENvcm5lclRlbXBQb3MgPSBuZXcgVmVjMygpO1xuY29uc3Qgd29ybGRDb3JuZXJzVGVtcCA9IFtuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpXTtcblxuLyoqXG4gKiBCT0RZX1RZUEVTXG4gKi9cbmNvbnN0IEJPRFlfVFlQRVMgPSB7XG4gIC8qKiBEWU5BTUlDICovXG4gIERZTkFNSUM6IDEsXG5cbiAgLyoqIFNUQVRJQyAqL1xuICBTVEFUSUM6IDIsXG5cbiAgLyoqIEtJTkVNQVRJQyAqL1xuICBLSU5FTUFUSUM6IDRcbn07XG4vKipcbiAqIEJvZHlUeXBlXG4gKi9cblxuLyoqXG4gKiBCT0RZX1NMRUVQX1NUQVRFU1xuICovXG5jb25zdCBCT0RZX1NMRUVQX1NUQVRFUyA9IHtcbiAgLyoqIEFXQUtFICovXG4gIEFXQUtFOiAwLFxuXG4gIC8qKiBTTEVFUFkgKi9cbiAgU0xFRVBZOiAxLFxuXG4gIC8qKiBTTEVFUElORyAqL1xuICBTTEVFUElORzogMlxufTtcbi8qKlxuICogQm9keVNsZWVwU3RhdGVcbiAqL1xuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBib2R5IHR5cGVzLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBzaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKDEpXG4gKiAgICAgY29uc3QgYm9keSA9IG5ldyBDQU5OT04uQm9keSh7XG4gKiAgICAgICBtYXNzOiAxLFxuICogICAgICAgc2hhcGUsXG4gKiAgICAgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHkpXG4gKi9cbmNsYXNzIEJvZHkgZXh0ZW5kcyBFdmVudFRhcmdldCB7XG4gIC8qKlxuICAgKiBEaXNwYXRjaGVkIGFmdGVyIHR3byBib2RpZXMgY29sbGlkZS4gVGhpcyBldmVudCBpcyBkaXNwYXRjaGVkIG9uIGVhY2hcbiAgICogb2YgdGhlIHR3byBib2RpZXMgaW52b2x2ZWQgaW4gdGhlIGNvbGxpc2lvbi5cbiAgICogQGV2ZW50IGNvbGxpZGVcbiAgICogQHBhcmFtIGJvZHkgVGhlIGJvZHkgdGhhdCB3YXMgaW52b2x2ZWQgaW4gdGhlIGNvbGxpc2lvbi5cbiAgICogQHBhcmFtIGNvbnRhY3QgVGhlIGRldGFpbHMgb2YgdGhlIGNvbGxpc2lvbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIEEgZHluYW1pYyBib2R5IGlzIGZ1bGx5IHNpbXVsYXRlZC4gQ2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHRoZSB1c2VyLCBidXQgbm9ybWFsbHkgdGhleSBtb3ZlIGFjY29yZGluZyB0byBmb3JjZXMuIEEgZHluYW1pYyBib2R5IGNhbiBjb2xsaWRlIHdpdGggYWxsIGJvZHkgdHlwZXMuIEEgZHluYW1pYyBib2R5IGFsd2F5cyBoYXMgZmluaXRlLCBub24temVybyBtYXNzLlxuICAgKi9cblxuICAvKipcbiAgICogQSBzdGF0aWMgYm9keSBkb2VzIG5vdCBtb3ZlIGR1cmluZyBzaW11bGF0aW9uIGFuZCBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBTdGF0aWMgYm9kaWVzIGNhbiBiZSBtb3ZlZCBtYW51YWxseSBieSBzZXR0aW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgYm9keS4gVGhlIHZlbG9jaXR5IG9mIGEgc3RhdGljIGJvZHkgaXMgYWx3YXlzIHplcm8uIFN0YXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEEga2luZW1hdGljIGJvZHkgbW92ZXMgdW5kZXIgc2ltdWxhdGlvbiBhY2NvcmRpbmcgdG8gaXRzIHZlbG9jaXR5LiBUaGV5IGRvIG5vdCByZXNwb25kIHRvIGZvcmNlcy4gVGhleSBjYW4gYmUgbW92ZWQgbWFudWFsbHksIGJ1dCBub3JtYWxseSBhIGtpbmVtYXRpYyBib2R5IGlzIG1vdmVkIGJ5IHNldHRpbmcgaXRzIHZlbG9jaXR5LiBBIGtpbmVtYXRpYyBib2R5IGJlaGF2ZXMgYXMgaWYgaXQgaGFzIGluZmluaXRlIG1hc3MuIEtpbmVtYXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEFXQUtFXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTTEVFUFlcbiAgICovXG5cbiAgLyoqXG4gICAqIFNMRUVQSU5HXG4gICAqL1xuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgc2xlZXBpbmcgYm9keSBoYXMgd29rZW4gdXAuXG4gICAqIEBldmVudCB3YWtldXBcbiAgICovXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBnb25lIGluIHRvIHRoZSBzbGVlcHkgc3RhdGUuXG4gICAqIEBldmVudCBzbGVlcHlcbiAgICovXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBmYWxsZW4gYXNsZWVwLlxuICAgKiBAZXZlbnQgc2xlZXBcbiAgICovXG5cbiAgLyoqXG4gICAqIElkZW50aWZpZXIgb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQb3NpdGlvbiBvZiBib2R5IGluIFdvcmxkLmJvZGllcy4gVXBkYXRlZCBieSBXb3JsZCBhbmQgdXNlZCBpbiBBcnJheUNvbGxpc2lvbk1hdHJpeC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFJlZmVyZW5jZSB0byB0aGUgd29ybGQgdGhlIGJvZHkgaXMgbGl2aW5nIGluLlxuICAgKi9cblxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIEJFRk9SRSBzdGVwcGluZyB0aGUgc3lzdGVtLiBVc2UgaXQgdG8gYXBwbHkgZm9yY2VzLCBmb3IgZXhhbXBsZS4gSW5zaWRlIHRoZSBmdW5jdGlvbiwgXCJ0aGlzXCIgd2lsbCByZWZlciB0byB0aGlzIEJvZHkgb2JqZWN0LiBEZXByZWNhdGVkIC0gdXNlIFdvcmxkIGV2ZW50cyBpbnN0ZWFkLlxuICAgKiBAZGVwcmVjYXRlZCBVc2UgV29ybGQgZXZlbnRzIGluc3RlYWRcbiAgICovXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCBBRlRFUiBzdGVwcGluZyB0aGUgc3lzdGVtLiBJbnNpZGUgdGhlIGZ1bmN0aW9uLCBcInRoaXNcIiB3aWxsIHJlZmVyIHRvIHRoaXMgQm9keSBvYmplY3QuIERlcHJlY2F0ZWQgLSB1c2UgV29ybGQgZXZlbnRzIGluc3RlYWQuXG4gICAqIEBkZXByZWNhdGVkIFVzZSBXb3JsZCBldmVudHMgaW5zdGVhZFxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGNvbGxpc2lvbiBncm91cCB0aGUgYm9keSBiZWxvbmdzIHRvLlxuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY29sbGlzaW9uIGdyb3VwIHRoZSBib2R5IGNhbiBjb2xsaWRlIHdpdGguXG4gICAqIEBkZWZhdWx0IC0xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHByb2R1Y2UgY29udGFjdCBmb3JjZXMgd2hlbiBpbiBjb250YWN0IHdpdGggb3RoZXIgYm9kaWVzLiBOb3RlIHRoYXQgY29udGFjdHMgd2lsbCBiZSBnZW5lcmF0ZWQsIGJ1dCB0aGV5IHdpbGwgYmUgZGlzYWJsZWQgLSBpLmUuIFwiY29sbGlkZVwiIGV2ZW50cyB3aWxsIGJlIHJhaXNlZCwgYnV0IGZvcmNlcyB3aWxsIG5vdCBiZSBhbHRlcmVkLlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2UgcG9zaXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZWQgcG9zaXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBib2R5LlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2UgdmVsb2NpdHkgb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsIHZlbG9jaXR5IG9mIHRoZSBib2R5LlxuICAgKi9cblxuICAvKipcbiAgICogTGluZWFyIGZvcmNlIG9uIHRoZSBib2R5IGluIHdvcmxkIHNwYWNlLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIG1hc3Mgb2YgdGhlIGJvZHkuXG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBwaHlzaWNzIG1hdGVyaWFsIG9mIHRoZSBib2R5LiBJdCBkZWZpbmVzIHRoZSBib2R5IGludGVyYWN0aW9uIHdpdGggb3RoZXIgYm9kaWVzLlxuICAgKi9cblxuICAvKipcbiAgICogSG93IG11Y2ggdG8gZGFtcCB0aGUgYm9keSB2ZWxvY2l0eSBlYWNoIHN0ZXAuIEl0IGNhbiBnbyBmcm9tIDAgdG8gMS5cbiAgICogQGRlZmF1bHQgMC4wMVxuICAgKi9cblxuICAvKipcbiAgICogT25lIG9mOiBgQm9keS5EWU5BTUlDYCwgYEJvZHkuU1RBVElDYCBhbmQgYEJvZHkuS0lORU1BVElDYC5cbiAgICovXG5cbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBib2R5IHdpbGwgYXV0b21hdGljYWxseSBmYWxsIHRvIHNsZWVwLlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBDdXJyZW50IHNsZWVwIHN0YXRlLlxuICAgKi9cblxuICAvKipcbiAgICogSWYgdGhlIHNwZWVkICh0aGUgbm9ybSBvZiB0aGUgdmVsb2NpdHkpIGlzIHNtYWxsZXIgdGhhbiB0aGlzIHZhbHVlLCB0aGUgYm9keSBpcyBjb25zaWRlcmVkIHNsZWVweS5cbiAgICogQGRlZmF1bHQgMC4xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgYm9keSBoYXMgYmVlbiBzbGVlcHkgZm9yIHRoaXMgc2xlZXBUaW1lTGltaXQgc2Vjb25kcywgaXQgaXMgY29uc2lkZXJlZCBzbGVlcGluZy5cbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2Ugcm90YXRpb25hbCBmb3JjZSBvbiB0aGUgYm9keSwgYXJvdW5kIGNlbnRlciBvZiBtYXNzLlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2Ugb3JpZW50YXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsIHF1YXRlcm5pb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZWQgb3JpZW50YXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbmd1bGFyIHZlbG9jaXR5IG9mIHRoZSBib2R5LCBpbiB3b3JsZCBzcGFjZS4gVGhpbmsgb2YgdGhlIGFuZ3VsYXIgdmVsb2NpdHkgYXMgYSB2ZWN0b3IsIHdoaWNoIHRoZSBib2R5IHJvdGF0ZXMgYXJvdW5kLiBUaGUgbGVuZ3RoIG9mIHRoaXMgdmVjdG9yIGRldGVybWluZXMgaG93IGZhc3QgKGluIHJhZGlhbnMgcGVyIHNlY29uZCkgdGhlIGJvZHkgcm90YXRlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEluaXRpYWwgYW5ndWxhciB2ZWxvY2l0eSBvZiB0aGUgYm9keS5cbiAgICovXG5cbiAgLyoqXG4gICAqIExpc3Qgb2YgU2hhcGVzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBib2R5LlxuICAgKi9cblxuICAvKipcbiAgICogUG9zaXRpb24gb2YgZWFjaCBTaGFwZSBpbiB0aGUgYm9keSwgZ2l2ZW4gaW4gbG9jYWwgQm9keSBzcGFjZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIE9yaWVudGF0aW9uIG9mIGVhY2ggU2hhcGUsIGdpdmVuIGluIGxvY2FsIEJvZHkgc3BhY2UuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgaW5lcnRpYSBvZiB0aGUgYm9keS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIGlmIHlvdSBkb24ndCB3YW50IHRoZSBib2R5IHRvIHJvdGF0ZS4gTWFrZSBzdXJlIHRvIHJ1biAudXBkYXRlTWFzc1Byb3BlcnRpZXMoKSBpZiB5b3UgY2hhbmdlIHRoaXMgYWZ0ZXIgdGhlIGJvZHkgY3JlYXRpb24uXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBIb3cgbXVjaCB0byBkYW1wIHRoZSBib2R5IGFuZ3VsYXIgdmVsb2NpdHkgZWFjaCBzdGVwLiBJdCBjYW4gZ28gZnJvbSAwIHRvIDEuXG4gICAqIEBkZWZhdWx0IDAuMDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFVzZSB0aGlzIHByb3BlcnR5IHRvIGxpbWl0IHRoZSBtb3Rpb24gYWxvbmcgYW55IHdvcmxkIGF4aXMuICgxLDEsMSkgd2lsbCBhbGxvdyBtb3Rpb24gYWxvbmcgYWxsIGF4ZXMgd2hpbGUgKDAsMCwwKSBhbGxvd3Mgbm9uZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFVzZSB0aGlzIHByb3BlcnR5IHRvIGxpbWl0IHRoZSByb3RhdGlvbmFsIG1vdGlvbiBhbG9uZyBhbnkgd29ybGQgYXhpcy4gKDEsMSwxKSB3aWxsIGFsbG93IHJvdGF0aW9uIGFsb25nIGFsbCBheGVzIHdoaWxlICgwLDAsMCkgYWxsb3dzIG5vbmUuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXb3JsZCBzcGFjZSBib3VuZGluZyBib3ggb2YgdGhlIGJvZHkgYW5kIGl0cyBzaGFwZXMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgaWYgdGhlIEFBQkIgbmVlZHMgdG8gYmUgdXBkYXRlZCBiZWZvcmUgdXNlLlxuICAgKi9cblxuICAvKipcbiAgICogVG90YWwgYm91bmRpbmcgcmFkaXVzIG9mIHRoZSBCb2R5IGluY2x1ZGluZyBpdHMgc2hhcGVzLCByZWxhdGl2ZSB0byBib2R5LnBvc2l0aW9uLlxuICAgKi9cblxuICAvKipcbiAgICogV2hlbiB0cnVlIHRoZSBib2R5IGJlaGF2ZXMgbGlrZSBhIHRyaWdnZXIuIEl0IGRvZXMgbm90IGNvbGxpZGVcbiAgICogd2l0aCBvdGhlciBib2RpZXMgYnV0IGNvbGxpc2lvbiBldmVudHMgYXJlIHN0aWxsIHRyaWdnZXJlZC5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLmluZGV4ID0gdm9pZCAwO1xuICAgIHRoaXMud29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5wcmVTdGVwID0gdm9pZCAwO1xuICAgIHRoaXMucG9zdFN0ZXAgPSB2b2lkIDA7XG4gICAgdGhpcy52bGFtYmRhID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB2b2lkIDA7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB2b2lkIDA7XG4gICAgdGhpcy5wb3NpdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5pbnRlcnBvbGF0ZWRQb3NpdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmluaXRQb3NpdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnZlbG9jaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuaW5pdFZlbG9jaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuZm9yY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5tYXNzID0gdm9pZCAwO1xuICAgIHRoaXMuaW52TWFzcyA9IHZvaWQgMDtcbiAgICB0aGlzLm1hdGVyaWFsID0gdm9pZCAwO1xuICAgIHRoaXMubGluZWFyRGFtcGluZyA9IHZvaWQgMDtcbiAgICB0aGlzLnR5cGUgPSB2b2lkIDA7XG4gICAgdGhpcy5hbGxvd1NsZWVwID0gdm9pZCAwO1xuICAgIHRoaXMuc2xlZXBTdGF0ZSA9IHZvaWQgMDtcbiAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHZvaWQgMDtcbiAgICB0aGlzLnNsZWVwVGltZUxpbWl0ID0gdm9pZCAwO1xuICAgIHRoaXMudGltZUxhc3RTbGVlcHkgPSB2b2lkIDA7XG4gICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gdm9pZCAwO1xuICAgIHRoaXMudG9ycXVlID0gdm9pZCAwO1xuICAgIHRoaXMucXVhdGVybmlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmluaXRRdWF0ZXJuaW9uID0gdm9pZCAwO1xuICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uID0gdm9pZCAwO1xuICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSA9IHZvaWQgMDtcbiAgICB0aGlzLmluaXRBbmd1bGFyVmVsb2NpdHkgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZU9mZnNldHMgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucyA9IHZvaWQgMDtcbiAgICB0aGlzLmluZXJ0aWEgPSB2b2lkIDA7XG4gICAgdGhpcy5pbnZJbmVydGlhID0gdm9pZCAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdm9pZCAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gdm9pZCAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkU29sdmUgPSB2b2lkIDA7XG4gICAgdGhpcy5maXhlZFJvdGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB2b2lkIDA7XG4gICAgdGhpcy5saW5lYXJGYWN0b3IgPSB2b2lkIDA7XG4gICAgdGhpcy5hbmd1bGFyRmFjdG9yID0gdm9pZCAwO1xuICAgIHRoaXMuYWFiYiA9IHZvaWQgMDtcbiAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHZvaWQgMDtcbiAgICB0aGlzLmJvdW5kaW5nUmFkaXVzID0gdm9pZCAwO1xuICAgIHRoaXMud2xhbWJkYSA9IHZvaWQgMDtcbiAgICB0aGlzLmlzVHJpZ2dlciA9IHZvaWQgMDtcbiAgICB0aGlzLmlkID0gQm9keS5pZENvdW50ZXIrKztcbiAgICB0aGlzLmluZGV4ID0gLTE7XG4gICAgdGhpcy53b3JsZCA9IG51bGw7XG4gICAgdGhpcy5wcmVTdGVwID0gbnVsbDtcbiAgICB0aGlzLnBvc3RTdGVwID0gbnVsbDtcbiAgICB0aGlzLnZsYW1iZGEgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTtcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrID09PSAnbnVtYmVyJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xO1xuICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7XG4gICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmluaXRQb3NpdGlvbiA9IG5ldyBWZWMzKCk7XG5cbiAgICBpZiAob3B0aW9ucy5wb3NpdGlvbikge1xuICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pO1xuICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7XG4gICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7XG4gICAgICB0aGlzLmluaXRQb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMudmVsb2NpdHkgPSBuZXcgVmVjMygpO1xuXG4gICAgaWYgKG9wdGlvbnMudmVsb2NpdHkpIHtcbiAgICAgIHRoaXMudmVsb2NpdHkuY29weShvcHRpb25zLnZlbG9jaXR5KTtcbiAgICB9XG5cbiAgICB0aGlzLmluaXRWZWxvY2l0eSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5mb3JjZSA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgbWFzcyA9IHR5cGVvZiBvcHRpb25zLm1hc3MgPT09ICdudW1iZXInID8gb3B0aW9ucy5tYXNzIDogMDtcbiAgICB0aGlzLm1hc3MgPSBtYXNzO1xuICAgIHRoaXMuaW52TWFzcyA9IG1hc3MgPiAwID8gMS4wIC8gbWFzcyA6IDA7XG4gICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgfHwgbnVsbDtcbiAgICB0aGlzLmxpbmVhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5saW5lYXJEYW1waW5nID09PSAnbnVtYmVyJyA/IG9wdGlvbnMubGluZWFyRGFtcGluZyA6IDAuMDE7XG4gICAgdGhpcy50eXBlID0gbWFzcyA8PSAwLjAgPyBCb2R5LlNUQVRJQyA6IEJvZHkuRFlOQU1JQztcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50eXBlID09PSB0eXBlb2YgQm9keS5TVEFUSUMpIHtcbiAgICAgIHRoaXMudHlwZSA9IG9wdGlvbnMudHlwZTtcbiAgICB9XG5cbiAgICB0aGlzLmFsbG93U2xlZXAgPSB0eXBlb2Ygb3B0aW9ucy5hbGxvd1NsZWVwICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYWxsb3dTbGVlcCA6IHRydWU7XG4gICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTtcbiAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCA6IDAuMTtcbiAgICB0aGlzLnNsZWVwVGltZUxpbWl0ID0gdHlwZW9mIG9wdGlvbnMuc2xlZXBUaW1lTGltaXQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5zbGVlcFRpbWVMaW1pdCA6IDE7XG4gICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IDA7XG4gICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7XG4gICAgdGhpcy50b3JxdWUgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgdGhpcy5pbml0UXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgdGhpcy5wcmV2aW91c1F1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpO1xuICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbiAgICBpZiAob3B0aW9ucy5xdWF0ZXJuaW9uKSB7XG4gICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pO1xuICAgICAgdGhpcy5pbml0UXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7XG4gICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7XG4gICAgICB0aGlzLmludGVycG9sYXRlZFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pO1xuICAgIH1cblxuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTtcblxuICAgIGlmIChvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSkge1xuICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY29weShvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSk7XG4gICAgfVxuXG4gICAgdGhpcy5pbml0QW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnNoYXBlcyA9IFtdO1xuICAgIHRoaXMuc2hhcGVPZmZzZXRzID0gW107XG4gICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucyA9IFtdO1xuICAgIHRoaXMuaW5lcnRpYSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5pbnZJbmVydGlhID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmludkluZXJ0aWFXb3JsZCA9IG5ldyBNYXQzKCk7XG4gICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlID0gbmV3IE1hdDMoKTtcbiAgICB0aGlzLmZpeGVkUm90YXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5maXhlZFJvdGF0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZml4ZWRSb3RhdGlvbiA6IGZhbHNlO1xuICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5hbmd1bGFyRGFtcGluZyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ3VsYXJEYW1waW5nIDogMC4wMTtcbiAgICB0aGlzLmxpbmVhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpO1xuXG4gICAgaWYgKG9wdGlvbnMubGluZWFyRmFjdG9yKSB7XG4gICAgICB0aGlzLmxpbmVhckZhY3Rvci5jb3B5KG9wdGlvbnMubGluZWFyRmFjdG9yKTtcbiAgICB9XG5cbiAgICB0aGlzLmFuZ3VsYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTtcblxuICAgIGlmIChvcHRpb25zLmFuZ3VsYXJGYWN0b3IpIHtcbiAgICAgIHRoaXMuYW5ndWxhckZhY3Rvci5jb3B5KG9wdGlvbnMuYW5ndWxhckZhY3Rvcik7XG4gICAgfVxuXG4gICAgdGhpcy5hYWJiID0gbmV3IEFBQkIoKTtcbiAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IDA7XG4gICAgdGhpcy53bGFtYmRhID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmlzVHJpZ2dlciA9IEJvb2xlYW4ob3B0aW9ucy5pc1RyaWdnZXIpO1xuXG4gICAgaWYgKG9wdGlvbnMuc2hhcGUpIHtcbiAgICAgIHRoaXMuYWRkU2hhcGUob3B0aW9ucy5zaGFwZSk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpO1xuICB9XG4gIC8qKlxuICAgKiBXYWtlIHRoZSBib2R5IHVwLlxuICAgKi9cblxuXG4gIHdha2VVcCgpIHtcbiAgICBjb25zdCBwcmV2U3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7XG4gICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTtcbiAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTtcblxuICAgIGlmIChwcmV2U3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5Lndha2V1cEV2ZW50KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEZvcmNlIGJvZHkgc2xlZXBcbiAgICovXG5cblxuICBzbGVlcCgpIHtcbiAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LlNMRUVQSU5HO1xuICAgIHRoaXMudmVsb2NpdHkuc2V0KDAsIDAsIDApO1xuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnNldCgwLCAwLCAwKTtcbiAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogQ2FsbGVkIGV2ZXJ5IHRpbWVzdGVwIHRvIHVwZGF0ZSBpbnRlcm5hbCBzbGVlcCB0aW1lciBhbmQgY2hhbmdlIHNsZWVwIHN0YXRlIGlmIG5lZWRlZC5cbiAgICogQHBhcmFtIHRpbWUgVGhlIHdvcmxkIHRpbWUgaW4gc2Vjb25kc1xuICAgKi9cblxuXG4gIHNsZWVwVGljayh0aW1lKSB7XG4gICAgaWYgKHRoaXMuYWxsb3dTbGVlcCkge1xuICAgICAgY29uc3Qgc2xlZXBTdGF0ZSA9IHRoaXMuc2xlZXBTdGF0ZTtcbiAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZCA9IHRoaXMudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgdGhpcy5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpO1xuICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWQgPSB0aGlzLnNsZWVwU3BlZWRMaW1pdCAqKiAyO1xuXG4gICAgICBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBzcGVlZFNxdWFyZWQgPCBzcGVlZExpbWl0U3F1YXJlZCkge1xuICAgICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LlNMRUVQWTsgLy8gU2xlZXB5XG5cbiAgICAgICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IHRpbWU7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVweUV2ZW50KTtcbiAgICAgIH0gZWxzZSBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUFkgJiYgc3BlZWRTcXVhcmVkID4gc3BlZWRMaW1pdFNxdWFyZWQpIHtcbiAgICAgICAgdGhpcy53YWtlVXAoKTsgLy8gV2FrZSB1cFxuICAgICAgfSBlbHNlIGlmIChzbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQWSAmJiB0aW1lIC0gdGhpcy50aW1lTGFzdFNsZWVweSA+IHRoaXMuc2xlZXBUaW1lTGltaXQpIHtcbiAgICAgICAgdGhpcy5zbGVlcCgpOyAvLyBTbGVlcGluZ1xuXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVwRXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogSWYgdGhlIGJvZHkgaXMgc2xlZXBpbmcsIGl0IHNob3VsZCBiZSBpbW1vdmFibGUgLyBoYXZlIGluZmluaXRlIG1hc3MgZHVyaW5nIHNvbHZlLiBXZSBzb2x2ZSBpdCBieSBoYXZpbmcgYSBzZXBhcmF0ZSBcInNvbHZlIG1hc3NcIi5cbiAgICovXG5cblxuICB1cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCkge1xuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgfHwgdGhpcy50eXBlID09PSBCb2R5LktJTkVNQVRJQykge1xuICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwO1xuICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuc2V0WmVybygpO1xuICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5zZXRaZXJvKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdGhpcy5pbnZNYXNzO1xuICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuY29weSh0aGlzLmludkluZXJ0aWEpO1xuICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYVdvcmxkKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgYSB3b3JsZCBwb2ludCB0byBsb2NhbCBib2R5IGZyYW1lLlxuICAgKi9cblxuXG4gIHBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkUG9pbnQsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcmVzdWx0KTtcbiAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQocmVzdWx0LCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgYSB3b3JsZCB2ZWN0b3IgdG8gbG9jYWwgYm9keSBmcmFtZS5cbiAgICovXG5cblxuICB2ZWN0b3JUb0xvY2FsRnJhbWUod29ybGRWZWN0b3IsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQod29ybGRWZWN0b3IsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuXG4gICAqL1xuXG5cbiAgcG9pbnRUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFBvaW50LCByZXN1bHQpO1xuICAgIHJlc3VsdC52YWRkKHRoaXMucG9zaXRpb24sIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuXG4gICAqL1xuXG5cbiAgdmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsVmVjdG9yLCByZXN1bHQgPSBuZXcgVmVjMygpKSB7XG4gICAgdGhpcy5xdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHNoYXBlIHRvIHRoZSBib2R5IHdpdGggYSBsb2NhbCBvZmZzZXQgYW5kIG9yaWVudGF0aW9uLlxuICAgKiBAcmV0dXJuIFRoZSBib2R5IG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS5cbiAgICovXG5cblxuICBhZGRTaGFwZShzaGFwZSwgX29mZnNldCwgX29yaWVudGF0aW9uKSB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBvcmllbnRhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbiAgICBpZiAoX29mZnNldCkge1xuICAgICAgb2Zmc2V0LmNvcHkoX29mZnNldCk7XG4gICAgfVxuXG4gICAgaWYgKF9vcmllbnRhdGlvbikge1xuICAgICAgb3JpZW50YXRpb24uY29weShfb3JpZW50YXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMuc2hhcGVzLnB1c2goc2hhcGUpO1xuICAgIHRoaXMuc2hhcGVPZmZzZXRzLnB1c2gob2Zmc2V0KTtcbiAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnB1c2gob3JpZW50YXRpb24pO1xuICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTtcbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7XG4gICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHNoYXBlLmJvZHkgPSB0aGlzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYSBzaGFwZSBmcm9tIHRoZSBib2R5LlxuICAgKiBAcmV0dXJuIFRoZSBib2R5IG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS5cbiAgICovXG5cblxuICByZW1vdmVTaGFwZShzaGFwZSkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zaGFwZXMuaW5kZXhPZihzaGFwZSk7XG5cbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1NoYXBlIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgYm9keScpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdGhpcy5zaGFwZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLnNoYXBlT2Zmc2V0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7XG4gICAgdGhpcy51cGRhdGVCb3VuZGluZ1JhZGl1cygpO1xuICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICBzaGFwZS5ib2R5ID0gbnVsbDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBib3VuZGluZyByYWRpdXMgb2YgdGhlIGJvZHkuIFNob3VsZCBiZSBkb25lIGlmIGFueSBvZiB0aGUgc2hhcGVzIGFyZSBjaGFuZ2VkLlxuICAgKi9cblxuXG4gIHVwZGF0ZUJvdW5kaW5nUmFkaXVzKCkge1xuICAgIGNvbnN0IHNoYXBlcyA9IHRoaXMuc2hhcGVzO1xuICAgIGNvbnN0IHNoYXBlT2Zmc2V0cyA9IHRoaXMuc2hhcGVPZmZzZXRzO1xuICAgIGNvbnN0IE4gPSBzaGFwZXMubGVuZ3RoO1xuICAgIGxldCByYWRpdXMgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07XG4gICAgICBzaGFwZS51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpO1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gc2hhcGVPZmZzZXRzW2ldLmxlbmd0aCgpO1xuICAgICAgY29uc3QgciA9IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzO1xuXG4gICAgICBpZiAob2Zmc2V0ICsgciA+IHJhZGl1cykge1xuICAgICAgICByYWRpdXMgPSBvZmZzZXQgKyByO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYm91bmRpbmdSYWRpdXMgPSByYWRpdXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIC5hYWJiXG4gICAqL1xuXG5cbiAgdXBkYXRlQUFCQigpIHtcbiAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlcztcbiAgICBjb25zdCBzaGFwZU9mZnNldHMgPSB0aGlzLnNoYXBlT2Zmc2V0cztcbiAgICBjb25zdCBzaGFwZU9yaWVudGF0aW9ucyA9IHRoaXMuc2hhcGVPcmllbnRhdGlvbnM7XG4gICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7XG4gICAgY29uc3Qgb2Zmc2V0ID0gdG1wVmVjO1xuICAgIGNvbnN0IG9yaWVudGF0aW9uID0gdG1wUXVhdDtcbiAgICBjb25zdCBib2R5UXVhdCA9IHRoaXMucXVhdGVybmlvbjtcbiAgICBjb25zdCBhYWJiID0gdGhpcy5hYWJiO1xuICAgIGNvbnN0IHNoYXBlQUFCQiA9IHVwZGF0ZUFBQkJfc2hhcGVBQUJCO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07IC8vIEdldCBzaGFwZSB3b3JsZCBwb3NpdGlvblxuXG4gICAgICBib2R5UXVhdC52bXVsdChzaGFwZU9mZnNldHNbaV0sIG9mZnNldCk7XG4gICAgICBvZmZzZXQudmFkZCh0aGlzLnBvc2l0aW9uLCBvZmZzZXQpOyAvLyBHZXQgc2hhcGUgd29ybGQgcXVhdGVybmlvblxuXG4gICAgICBib2R5UXVhdC5tdWx0KHNoYXBlT3JpZW50YXRpb25zW2ldLCBvcmllbnRhdGlvbik7IC8vIEdldCBzaGFwZSBBQUJCXG5cbiAgICAgIHNoYXBlLmNhbGN1bGF0ZVdvcmxkQUFCQihvZmZzZXQsIG9yaWVudGF0aW9uLCBzaGFwZUFBQkIubG93ZXJCb3VuZCwgc2hhcGVBQUJCLnVwcGVyQm91bmQpO1xuXG4gICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICBhYWJiLmNvcHkoc2hhcGVBQUJCKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFhYmIuZXh0ZW5kKHNoYXBlQUFCQik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIGAuaW5lcnRpYVdvcmxkYCBhbmQgYC5pbnZJbmVydGlhV29ybGRgXG4gICAqL1xuXG5cbiAgdXBkYXRlSW5lcnRpYVdvcmxkKGZvcmNlKSB7XG4gICAgY29uc3QgSSA9IHRoaXMuaW52SW5lcnRpYTtcblxuICAgIGlmIChJLnggPT09IEkueSAmJiBJLnkgPT09IEkueiAmJiAhZm9yY2UpIDsgZWxzZSB7XG4gICAgICBjb25zdCBtMSA9IHVpd19tMTtcbiAgICAgIGNvbnN0IG0yID0gdWl3X20yO1xuICAgICAgbTEuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pO1xuICAgICAgbTEudHJhbnNwb3NlKG0yKTtcbiAgICAgIG0xLnNjYWxlKEksIG0xKTtcbiAgICAgIG0xLm1tdWx0KG0yLCB0aGlzLmludkluZXJ0aWFXb3JsZCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBcHBseSBmb3JjZSB0byBhIHBvaW50IG9mIHRoZSBib2R5LiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGJlIGEgcG9pbnQgb24gdGhlIEJvZHkgc3VyZmFjZS5cbiAgICogQXBwbHlpbmcgZm9yY2UgdGhpcyB3YXkgd2lsbCBhZGQgdG8gQm9keS5mb3JjZSBhbmQgQm9keS50b3JxdWUuXG4gICAqIEBwYXJhbSBmb3JjZSBUaGUgYW1vdW50IG9mIGZvcmNlIHRvIGFkZC5cbiAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLlxuICAgKi9cblxuXG4gIGFwcGx5Rm9yY2UoZm9yY2UsIHJlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpKSB7XG4gICAgLy8gTmVlZGVkP1xuICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMud2FrZVVwKCk7XG4gICAgfSAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgZm9yY2VcblxuXG4gICAgY29uc3Qgcm90Rm9yY2UgPSBCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2U7XG4gICAgcmVsYXRpdmVQb2ludC5jcm9zcyhmb3JjZSwgcm90Rm9yY2UpOyAvLyBBZGQgbGluZWFyIGZvcmNlXG5cbiAgICB0aGlzLmZvcmNlLnZhZGQoZm9yY2UsIHRoaXMuZm9yY2UpOyAvLyBBZGQgcm90YXRpb25hbCBmb3JjZVxuXG4gICAgdGhpcy50b3JxdWUudmFkZChyb3RGb3JjZSwgdGhpcy50b3JxdWUpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSBmb3JjZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLlxuICAgKiBAcGFyYW0gbG9jYWxQb2ludCBBIGxvY2FsIHBvaW50IGluIHRoZSBib2R5IHRvIGFwcGx5IHRoZSBmb3JjZSBvbi5cbiAgICovXG5cblxuICBhcHBseUxvY2FsRm9yY2UobG9jYWxGb3JjZSwgbG9jYWxQb2ludCA9IG5ldyBWZWMzKCkpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB3b3JsZEZvcmNlID0gQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZTtcbiAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlXG5cbiAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEZvcmNlLCB3b3JsZEZvcmNlKTtcbiAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbFBvaW50LCByZWxhdGl2ZVBvaW50V29ybGQpO1xuICAgIHRoaXMuYXBwbHlGb3JjZSh3b3JsZEZvcmNlLCByZWxhdGl2ZVBvaW50V29ybGQpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSB0b3JxdWUgdG8gdGhlIGJvZHkuXG4gICAqIEBwYXJhbSB0b3JxdWUgVGhlIGFtb3VudCBvZiB0b3JxdWUgdG8gYWRkLlxuICAgKi9cblxuXG4gIGFwcGx5VG9ycXVlKHRvcnF1ZSkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMud2FrZVVwKCk7XG4gICAgfSAvLyBBZGQgcm90YXRpb25hbCBmb3JjZVxuXG5cbiAgICB0aGlzLnRvcnF1ZS52YWRkKHRvcnF1ZSwgdGhpcy50b3JxdWUpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSBpbXB1bHNlIHRvIGEgcG9pbnQgb2YgdGhlIGJvZHkuIFRoaXMgY291bGQgZm9yIGV4YW1wbGUgYmUgYSBwb2ludCBvbiB0aGUgQm9keSBzdXJmYWNlLlxuICAgKiBBbiBpbXB1bHNlIGlzIGEgZm9yY2UgYWRkZWQgdG8gYSBib2R5IGR1cmluZyBhIHNob3J0IHBlcmlvZCBvZiB0aW1lIChpbXB1bHNlID0gZm9yY2UgKiB0aW1lKS5cbiAgICogSW1wdWxzZXMgd2lsbCBiZSBhZGRlZCB0byBCb2R5LnZlbG9jaXR5IGFuZCBCb2R5LmFuZ3VsYXJWZWxvY2l0eS5cbiAgICogQHBhcmFtIGltcHVsc2UgVGhlIGFtb3VudCBvZiBpbXB1bHNlIHRvIGFkZC5cbiAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLlxuICAgKi9cblxuXG4gIGFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKSkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMud2FrZVVwKCk7XG4gICAgfSAvLyBDb21wdXRlIHBvaW50IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBib2R5IGNlbnRlclxuXG5cbiAgICBjb25zdCByID0gcmVsYXRpdmVQb2ludDsgLy8gQ29tcHV0ZSBwcm9kdWNlZCBjZW50cmFsIGltcHVsc2UgdmVsb2NpdHlcblxuICAgIGNvbnN0IHZlbG8gPSBCb2R5X2FwcGx5SW1wdWxzZV92ZWxvO1xuICAgIHZlbG8uY29weShpbXB1bHNlKTtcbiAgICB2ZWxvLnNjYWxlKHRoaXMuaW52TWFzcywgdmVsbyk7IC8vIEFkZCBsaW5lYXIgaW1wdWxzZVxuXG4gICAgdGhpcy52ZWxvY2l0eS52YWRkKHZlbG8sIHRoaXMudmVsb2NpdHkpOyAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgaW1wdWxzZSB2ZWxvY2l0eVxuXG4gICAgY29uc3Qgcm90VmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG87XG4gICAgci5jcm9zcyhpbXB1bHNlLCByb3RWZWxvKTtcbiAgICAvKlxuICAgICByb3RWZWxvLnggKj0gdGhpcy5pbnZJbmVydGlhLng7XG4gICAgIHJvdFZlbG8ueSAqPSB0aGlzLmludkluZXJ0aWEueTtcbiAgICAgcm90VmVsby56ICo9IHRoaXMuaW52SW5lcnRpYS56O1xuICAgICAqL1xuXG4gICAgdGhpcy5pbnZJbmVydGlhV29ybGQudm11bHQocm90VmVsbywgcm90VmVsbyk7IC8vIEFkZCByb3RhdGlvbmFsIEltcHVsc2VcblxuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnZhZGQocm90VmVsbywgdGhpcy5hbmd1bGFyVmVsb2NpdHkpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSBsb2NhbGx5LWRlZmluZWQgaW1wdWxzZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLlxuICAgKiBAcGFyYW0gbG9jYWxQb2ludCBBIGxvY2FsIHBvaW50IGluIHRoZSBib2R5IHRvIGFwcGx5IHRoZSBmb3JjZSBvbi5cbiAgICovXG5cblxuICBhcHBseUxvY2FsSW1wdWxzZShsb2NhbEltcHVsc2UsIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgd29ybGRJbXB1bHNlID0gQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2U7XG4gICAgY29uc3QgcmVsYXRpdmVQb2ludFdvcmxkID0gQm9keV9hcHBseUxvY2FsSW1wdWxzZV9yZWxhdGl2ZVBvaW50OyAvLyBUcmFuc2Zvcm0gdGhlIGZvcmNlIHZlY3RvciB0byB3b3JsZCBzcGFjZVxuXG4gICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxJbXB1bHNlLCB3b3JsZEltcHVsc2UpO1xuICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7XG4gICAgdGhpcy5hcHBseUltcHVsc2Uod29ybGRJbXB1bHNlLCByZWxhdGl2ZVBvaW50V29ybGQpO1xuICB9XG4gIC8qKlxuICAgKiBTaG91bGQgYmUgY2FsbGVkIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGJvZHkgc2hhcGUgb3IgbWFzcy5cbiAgICovXG5cblxuICB1cGRhdGVNYXNzUHJvcGVydGllcygpIHtcbiAgICBjb25zdCBoYWxmRXh0ZW50cyA9IEJvZHlfdXBkYXRlTWFzc1Byb3BlcnRpZXNfaGFsZkV4dGVudHM7XG4gICAgdGhpcy5pbnZNYXNzID0gdGhpcy5tYXNzID4gMCA/IDEuMCAvIHRoaXMubWFzcyA6IDA7XG4gICAgY29uc3QgSSA9IHRoaXMuaW5lcnRpYTtcbiAgICBjb25zdCBmaXhlZCA9IHRoaXMuZml4ZWRSb3RhdGlvbjsgLy8gQXBwcm94aW1hdGUgd2l0aCBBQUJCIGJveFxuXG4gICAgdGhpcy51cGRhdGVBQUJCKCk7XG4gICAgaGFsZkV4dGVudHMuc2V0KCh0aGlzLmFhYmIudXBwZXJCb3VuZC54IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueCkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueSAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnkpIC8gMiwgKHRoaXMuYWFiYi51cHBlckJvdW5kLnogLSB0aGlzLmFhYmIubG93ZXJCb3VuZC56KSAvIDIpO1xuICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKGhhbGZFeHRlbnRzLCB0aGlzLm1hc3MsIEkpO1xuICAgIHRoaXMuaW52SW5lcnRpYS5zZXQoSS54ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnggOiAwLCBJLnkgPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueSA6IDAsIEkueiA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS56IDogMCk7XG4gICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQodHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB3b3JsZCB2ZWxvY2l0eSBvZiBhIHBvaW50IGluIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gd29ybGRQb2ludFxuICAgKiBAcGFyYW0gcmVzdWx0XG4gICAqIEByZXR1cm4gVGhlIHJlc3VsdCB2ZWN0b3IuXG4gICAqL1xuXG5cbiAgZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod29ybGRQb2ludCwgcmVzdWx0KSB7XG4gICAgY29uc3QgciA9IG5ldyBWZWMzKCk7XG4gICAgd29ybGRQb2ludC52c3ViKHRoaXMucG9zaXRpb24sIHIpO1xuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHIsIHJlc3VsdCk7XG4gICAgdGhpcy52ZWxvY2l0eS52YWRkKHJlc3VsdCwgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBib2R5IGZvcndhcmQgaW4gdGltZS5cbiAgICogQHBhcmFtIGR0IFRpbWUgc3RlcFxuICAgKiBAcGFyYW0gcXVhdE5vcm1hbGl6ZSBTZXQgdG8gdHJ1ZSB0byBub3JtYWxpemUgdGhlIGJvZHkgcXVhdGVybmlvblxuICAgKiBAcGFyYW0gcXVhdE5vcm1hbGl6ZUZhc3QgSWYgdGhlIHF1YXRlcm5pb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWQgdXNpbmcgXCJmYXN0XCIgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uXG4gICAqL1xuXG5cbiAgaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCkge1xuICAgIC8vIFNhdmUgcHJldmlvdXMgcG9zaXRpb25cbiAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24uY29weSh0aGlzLnBvc2l0aW9uKTtcbiAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvbik7XG5cbiAgICBpZiAoISh0aGlzLnR5cGUgPT09IEJvZHkuRFlOQU1JQyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB8fCB0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWNcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB2ZWxvID0gdGhpcy52ZWxvY2l0eTtcbiAgICBjb25zdCBhbmd1bGFyVmVsbyA9IHRoaXMuYW5ndWxhclZlbG9jaXR5O1xuICAgIGNvbnN0IHBvcyA9IHRoaXMucG9zaXRpb247XG4gICAgY29uc3QgZm9yY2UgPSB0aGlzLmZvcmNlO1xuICAgIGNvbnN0IHRvcnF1ZSA9IHRoaXMudG9ycXVlO1xuICAgIGNvbnN0IHF1YXQgPSB0aGlzLnF1YXRlcm5pb247XG4gICAgY29uc3QgaW52TWFzcyA9IHRoaXMuaW52TWFzcztcbiAgICBjb25zdCBpbnZJbmVydGlhID0gdGhpcy5pbnZJbmVydGlhV29ybGQ7XG4gICAgY29uc3QgbGluZWFyRmFjdG9yID0gdGhpcy5saW5lYXJGYWN0b3I7XG4gICAgY29uc3QgaU1kdCA9IGludk1hc3MgKiBkdDtcbiAgICB2ZWxvLnggKz0gZm9yY2UueCAqIGlNZHQgKiBsaW5lYXJGYWN0b3IueDtcbiAgICB2ZWxvLnkgKz0gZm9yY2UueSAqIGlNZHQgKiBsaW5lYXJGYWN0b3IueTtcbiAgICB2ZWxvLnogKz0gZm9yY2UueiAqIGlNZHQgKiBsaW5lYXJGYWN0b3IuejtcbiAgICBjb25zdCBlID0gaW52SW5lcnRpYS5lbGVtZW50cztcbiAgICBjb25zdCBhbmd1bGFyRmFjdG9yID0gdGhpcy5hbmd1bGFyRmFjdG9yO1xuICAgIGNvbnN0IHR4ID0gdG9ycXVlLnggKiBhbmd1bGFyRmFjdG9yLng7XG4gICAgY29uc3QgdHkgPSB0b3JxdWUueSAqIGFuZ3VsYXJGYWN0b3IueTtcbiAgICBjb25zdCB0eiA9IHRvcnF1ZS56ICogYW5ndWxhckZhY3Rvci56O1xuICAgIGFuZ3VsYXJWZWxvLnggKz0gZHQgKiAoZVswXSAqIHR4ICsgZVsxXSAqIHR5ICsgZVsyXSAqIHR6KTtcbiAgICBhbmd1bGFyVmVsby55ICs9IGR0ICogKGVbM10gKiB0eCArIGVbNF0gKiB0eSArIGVbNV0gKiB0eik7XG4gICAgYW5ndWxhclZlbG8ueiArPSBkdCAqIChlWzZdICogdHggKyBlWzddICogdHkgKyBlWzhdICogdHopOyAvLyBVc2UgbmV3IHZlbG9jaXR5ICAtIGxlYXAgZnJvZ1xuXG4gICAgcG9zLnggKz0gdmVsby54ICogZHQ7XG4gICAgcG9zLnkgKz0gdmVsby55ICogZHQ7XG4gICAgcG9zLnogKz0gdmVsby56ICogZHQ7XG4gICAgcXVhdC5pbnRlZ3JhdGUodGhpcy5hbmd1bGFyVmVsb2NpdHksIGR0LCB0aGlzLmFuZ3VsYXJGYWN0b3IsIHF1YXQpO1xuXG4gICAgaWYgKHF1YXROb3JtYWxpemUpIHtcbiAgICAgIGlmIChxdWF0Tm9ybWFsaXplRmFzdCkge1xuICAgICAgICBxdWF0Lm5vcm1hbGl6ZUZhc3QoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHF1YXQubm9ybWFsaXplKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlOyAvLyBVcGRhdGUgd29ybGQgaW5lcnRpYVxuXG4gICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQoKTtcbiAgfVxuXG59XG5Cb2R5LmlkQ291bnRlciA9IDA7XG5Cb2R5LkNPTExJREVfRVZFTlRfTkFNRSA9ICdjb2xsaWRlJztcbkJvZHkuRFlOQU1JQyA9IEJPRFlfVFlQRVMuRFlOQU1JQztcbkJvZHkuU1RBVElDID0gQk9EWV9UWVBFUy5TVEFUSUM7XG5Cb2R5LktJTkVNQVRJQyA9IEJPRFlfVFlQRVMuS0lORU1BVElDO1xuQm9keS5BV0FLRSA9IEJPRFlfU0xFRVBfU1RBVEVTLkFXQUtFO1xuQm9keS5TTEVFUFkgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUFk7XG5Cb2R5LlNMRUVQSU5HID0gQk9EWV9TTEVFUF9TVEFURVMuU0xFRVBJTkc7XG5Cb2R5Lndha2V1cEV2ZW50ID0ge1xuICB0eXBlOiAnd2FrZXVwJ1xufTtcbkJvZHkuc2xlZXB5RXZlbnQgPSB7XG4gIHR5cGU6ICdzbGVlcHknXG59O1xuQm9keS5zbGVlcEV2ZW50ID0ge1xuICB0eXBlOiAnc2xlZXAnXG59O1xuY29uc3QgdG1wVmVjID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRtcFF1YXQgPSBuZXcgUXVhdGVybmlvbigpO1xuY29uc3QgdXBkYXRlQUFCQl9zaGFwZUFBQkIgPSBuZXcgQUFCQigpO1xuY29uc3QgdWl3X20xID0gbmV3IE1hdDMoKTtcbmNvbnN0IHVpd19tMiA9IG5ldyBNYXQzKCk7XG5jb25zdCBCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2UgPSBuZXcgVmVjMygpO1xuY29uc3QgQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZSA9IG5ldyBWZWMzKCk7XG5jb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQgPSBuZXcgVmVjMygpO1xuY29uc3QgQm9keV9hcHBseUltcHVsc2VfdmVsbyA9IG5ldyBWZWMzKCk7XG5jb25zdCBCb2R5X2FwcGx5SW1wdWxzZV9yb3RWZWxvID0gbmV3IFZlYzMoKTtcbmNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlID0gbmV3IFZlYzMoKTtcbmNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7XG5jb25zdCBCb2R5X3VwZGF0ZU1hc3NQcm9wZXJ0aWVzX2hhbGZFeHRlbnRzID0gbmV3IFZlYzMoKTtcblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBicm9hZHBoYXNlIGltcGxlbWVudGF0aW9uc1xuICogQGF1dGhvciBzY2h0ZXBwZVxuICovXG5jbGFzcyBCcm9hZHBoYXNlIHtcbiAgLyoqXG4gICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggZm9yIGNvbGxpc2lvbnMgaW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGJyb2FkcGhhc2UgdXNlcyBib3VuZGluZyBib3hlcyBmb3IgaW50ZXJzZWN0aW9uIHRlc3RzLCBlbHNlIGl0IHVzZXMgYm91bmRpbmcgc3BoZXJlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIGlmIHRoZSBvYmplY3RzIGluIHRoZSB3b3JsZCBtb3ZlZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMud29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy51c2VCb3VuZGluZ0JveGVzID0gdm9pZCAwO1xuICAgIHRoaXMuZGlydHkgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZCA9IG51bGw7XG4gICAgdGhpcy51c2VCb3VuZGluZ0JveGVzID0gZmFsc2U7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY29sbGlzaW9uIHBhaXJzIGZyb20gdGhlIHdvcmxkXG4gICAqIEBwYXJhbSB3b3JsZCBUaGUgd29ybGQgdG8gc2VhcmNoIGluXG4gICAqIEBwYXJhbSBwMSBFbXB0eSBhcnJheSB0byBiZSBmaWxsZWQgd2l0aCBib2R5IG9iamVjdHNcbiAgICogQHBhcmFtIHAyIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0c1xuICAgKi9cblxuXG4gIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbGxpc2lvblBhaXJzIG5vdCBpbXBsZW1lbnRlZCBmb3IgdGhpcyBCcm9hZFBoYXNlIGNsYXNzIScpO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGJvZHkgcGFpciBuZWVkcyB0byBiZSBpbnRlcnNlY3Rpb24gdGVzdGVkIGF0IGFsbC5cbiAgICovXG5cblxuICBuZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihib2R5QSwgYm9keUIpIHtcbiAgICAvLyBDaGVjayBjb2xsaXNpb24gZmlsdGVyIG1hc2tzXG4gICAgaWYgKChib2R5QS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlCLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5Qi5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlBLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSAvLyBDaGVjayB0eXBlc1xuXG5cbiAgICBpZiAoKChib2R5QS50eXBlICYgQm9keS5TVEFUSUMpICE9PSAwIHx8IGJvZHlBLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpICYmICgoYm9keUIudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5Qi5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSkge1xuICAgICAgLy8gQm90aCBib2RpZXMgYXJlIHN0YXRpYyBvciBzbGVlcGluZy4gU2tpcC5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHZvbHVtZXMgb2YgdHdvIGJvZGllcyBpbnRlcnNlY3QuXG4gICAqL1xuXG5cbiAgaW50ZXJzZWN0aW9uVGVzdChib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7XG4gICAgaWYgKHRoaXMudXNlQm91bmRpbmdCb3hlcykge1xuICAgICAgdGhpcy5kb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy5cbiAgICogQHBhcmFtIHBhaXJzMSBib2R5QSBpcyBhcHBlbmRlZCB0byB0aGlzIGFycmF5IGlmIGludGVyc2VjdGlvblxuICAgKiBAcGFyYW0gcGFpcnMyIGJvZHlCIGlzIGFwcGVuZGVkIHRvIHRoaXMgYXJyYXkgaWYgaW50ZXJzZWN0aW9uXG4gICAqL1xuXG5cbiAgZG9Cb3VuZGluZ1NwaGVyZUJyb2FkcGhhc2UoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikge1xuICAgIGNvbnN0IHIgPSBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3I7XG4gICAgYm9keUIucG9zaXRpb24udnN1Yihib2R5QS5wb3NpdGlvbiwgcik7XG4gICAgY29uc3QgYm91bmRpbmdSYWRpdXNTdW0yID0gKGJvZHlBLmJvdW5kaW5nUmFkaXVzICsgYm9keUIuYm91bmRpbmdSYWRpdXMpICoqIDI7XG4gICAgY29uc3Qgbm9ybTIgPSByLmxlbmd0aFNxdWFyZWQoKTtcblxuICAgIGlmIChub3JtMiA8IGJvdW5kaW5nUmFkaXVzU3VtMikge1xuICAgICAgcGFpcnMxLnB1c2goYm9keUEpO1xuICAgICAgcGFpcnMyLnB1c2goYm9keUIpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIGJveGVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy5cbiAgICovXG5cblxuICBkb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7XG4gICAgaWYgKGJvZHlBLmFhYmJOZWVkc1VwZGF0ZSkge1xuICAgICAgYm9keUEudXBkYXRlQUFCQigpO1xuICAgIH1cblxuICAgIGlmIChib2R5Qi5hYWJiTmVlZHNVcGRhdGUpIHtcbiAgICAgIGJvZHlCLnVwZGF0ZUFBQkIoKTtcbiAgICB9IC8vIENoZWNrIEFBQkIgLyBBQUJCXG5cblxuICAgIGlmIChib2R5QS5hYWJiLm92ZXJsYXBzKGJvZHlCLmFhYmIpKSB7XG4gICAgICBwYWlyczEucHVzaChib2R5QSk7XG4gICAgICBwYWlyczIucHVzaChib2R5Qik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIGR1cGxpY2F0ZSBwYWlycyBmcm9tIHRoZSBwYWlyIGFycmF5cy5cbiAgICovXG5cblxuICBtYWtlUGFpcnNVbmlxdWUocGFpcnMxLCBwYWlyczIpIHtcbiAgICBjb25zdCB0ID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcDtcbiAgICBjb25zdCBwMSA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxO1xuICAgIGNvbnN0IHAyID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDI7XG4gICAgY29uc3QgTiA9IHBhaXJzMS5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBwMVtpXSA9IHBhaXJzMVtpXTtcbiAgICAgIHAyW2ldID0gcGFpcnMyW2ldO1xuICAgIH1cblxuICAgIHBhaXJzMS5sZW5ndGggPSAwO1xuICAgIHBhaXJzMi5sZW5ndGggPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgaWQxID0gcDFbaV0uaWQ7XG4gICAgICBjb25zdCBpZDIgPSBwMltpXS5pZDtcbiAgICAgIGNvbnN0IGtleSA9IGlkMSA8IGlkMiA/IGlkMSArIFwiLFwiICsgaWQyIDogaWQyICsgXCIsXCIgKyBpZDE7XG4gICAgICB0W2tleV0gPSBpO1xuICAgICAgdC5rZXlzLnB1c2goa2V5KTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdC5rZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSB0LmtleXMucG9wKCk7XG4gICAgICBjb25zdCBwYWlySW5kZXggPSB0W2tleV07XG4gICAgICBwYWlyczEucHVzaChwMVtwYWlySW5kZXhdKTtcbiAgICAgIHBhaXJzMi5wdXNoKHAyW3BhaXJJbmRleF0pO1xuICAgICAgZGVsZXRlIHRba2V5XTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNhc3Nlc1xuICAgKi9cblxuXG4gIHNldFdvcmxkKHdvcmxkKSB7fVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHNwaGVyZXMgb2YgdHdvIGJvZGllcyBvdmVybGFwLlxuICAgKi9cblxuXG4gIHN0YXRpYyBib3VuZGluZ1NwaGVyZUNoZWNrKGJvZHlBLCBib2R5Qikge1xuICAgIGNvbnN0IGRpc3QgPSBuZXcgVmVjMygpOyAvLyBic2NfZGlzdDtcblxuICAgIGJvZHlBLnBvc2l0aW9uLnZzdWIoYm9keUIucG9zaXRpb24sIGRpc3QpO1xuICAgIGNvbnN0IHNhID0gYm9keUEuc2hhcGVzWzBdO1xuICAgIGNvbnN0IHNiID0gYm9keUIuc2hhcGVzWzBdO1xuICAgIHJldHVybiBNYXRoLnBvdyhzYS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNiLmJvdW5kaW5nU3BoZXJlUmFkaXVzLCAyKSA+IGRpc3QubGVuZ3RoU3F1YXJlZCgpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiB0aGUgQUFCQi5cbiAgICovXG5cblxuICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkge1xuICAgIGNvbnNvbGUud2FybignLmFhYmJRdWVyeSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBCcm9hZHBoYXNlIHN1YmNsYXNzLicpO1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG59IC8vIFRlbXAgb2JqZWN0c1xuXG5jb25zdCBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3IgPSBuZXcgVmVjMygpO1xuY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcCA9IHtcbiAga2V5czogW11cbn07XG5jb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMSA9IFtdO1xuY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDIgPSBbXTtcblxuLyoqXG4gKiBBeGlzIGFsaWduZWQgdW5pZm9ybSBncmlkIGJyb2FkcGhhc2UuXG4gKiBAdG9kbyBOZWVkcyBzdXBwb3J0IGZvciBtb3JlIHRoYW4ganVzdCBwbGFuZXMgYW5kIHNwaGVyZXMuXG4gKi9cbmNsYXNzIEdyaWRCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7XG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgYm94ZXMgYWxvbmcgeFxuICAgKi9cblxuICAvKipcbiAgICogTnVtYmVyIG9mIGJveGVzIGFsb25nIHlcbiAgICovXG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiBib3hlcyBhbG9uZyB6XG4gICAqL1xuXG4gIC8qKlxuICAgKiBhYWJiTWluXG4gICAqL1xuXG4gIC8qKlxuICAgKiBhYWJiTWF4XG4gICAqL1xuXG4gIC8qKlxuICAgKiBiaW5zXG4gICAqL1xuXG4gIC8qKlxuICAgKiBiaW5MZW5ndGhzXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gbnggTnVtYmVyIG9mIGJveGVzIGFsb25nIHguXG4gICAqIEBwYXJhbSBueSBOdW1iZXIgb2YgYm94ZXMgYWxvbmcgeS5cbiAgICogQHBhcmFtIG56IE51bWJlciBvZiBib3hlcyBhbG9uZyB6LlxuICAgKi9cbiAgY29uc3RydWN0b3IoYWFiYk1pbiA9IG5ldyBWZWMzKDEwMCwgMTAwLCAxMDApLCBhYWJiTWF4ID0gbmV3IFZlYzMoLTEwMCwgLTEwMCwgLTEwMCksIG54ID0gMTAsIG55ID0gMTAsIG56ID0gMTApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubnggPSB2b2lkIDA7XG4gICAgdGhpcy5ueSA9IHZvaWQgMDtcbiAgICB0aGlzLm56ID0gdm9pZCAwO1xuICAgIHRoaXMuYWFiYk1pbiA9IHZvaWQgMDtcbiAgICB0aGlzLmFhYmJNYXggPSB2b2lkIDA7XG4gICAgdGhpcy5iaW5zID0gdm9pZCAwO1xuICAgIHRoaXMuYmluTGVuZ3RocyA9IHZvaWQgMDtcbiAgICB0aGlzLm54ID0gbng7XG4gICAgdGhpcy5ueSA9IG55O1xuICAgIHRoaXMubnogPSBuejtcbiAgICB0aGlzLmFhYmJNaW4gPSBhYWJiTWluO1xuICAgIHRoaXMuYWFiYk1heCA9IGFhYmJNYXg7XG4gICAgY29uc3QgbmJpbnMgPSB0aGlzLm54ICogdGhpcy5ueSAqIHRoaXMubno7XG5cbiAgICBpZiAobmJpbnMgPD0gMCkge1xuICAgICAgdGhyb3cgXCJHcmlkQnJvYWRwaGFzZTogRWFjaCBkaW1lbnNpb24ncyBuIG11c3QgYmUgPjBcIjtcbiAgICB9XG5cbiAgICB0aGlzLmJpbnMgPSBbXTtcbiAgICB0aGlzLmJpbkxlbmd0aHMgPSBbXTsgLy8gUmF0aGVyIHRoYW4gY29udGludWFsbHkgcmVzaXppbmcgYXJyYXlzICh0aHJhc2hpbmcgdGhlIG1lbW9yeSksIGp1c3QgcmVjb3JkIGxlbmd0aCBhbmQgYWxsb3cgdGhlbSB0byBncm93XG5cbiAgICB0aGlzLmJpbnMubGVuZ3RoID0gbmJpbnM7XG4gICAgdGhpcy5iaW5MZW5ndGhzLmxlbmd0aCA9IG5iaW5zO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYmluczsgaSsrKSB7XG4gICAgICB0aGlzLmJpbnNbaV0gPSBbXTtcbiAgICAgIHRoaXMuYmluTGVuZ3Roc1tpXSA9IDA7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYWxsIHRoZSBjb2xsaXNpb24gcGFpcnMgaW4gdGhlIHBoeXNpY3Mgd29ybGRcbiAgICovXG5cblxuICBjb2xsaXNpb25QYWlycyh3b3JsZCwgcGFpcnMxLCBwYWlyczIpIHtcbiAgICBjb25zdCBOID0gd29ybGQubnVtT2JqZWN0cygpO1xuICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllcztcbiAgICBjb25zdCBtYXggPSB0aGlzLmFhYmJNYXg7XG4gICAgY29uc3QgbWluID0gdGhpcy5hYWJiTWluO1xuICAgIGNvbnN0IG54ID0gdGhpcy5ueDtcbiAgICBjb25zdCBueSA9IHRoaXMubnk7XG4gICAgY29uc3QgbnogPSB0aGlzLm56O1xuICAgIGNvbnN0IHhzdGVwID0gbnkgKiBuejtcbiAgICBjb25zdCB5c3RlcCA9IG56O1xuICAgIGNvbnN0IHpzdGVwID0gMTtcbiAgICBjb25zdCB4bWF4ID0gbWF4Lng7XG4gICAgY29uc3QgeW1heCA9IG1heC55O1xuICAgIGNvbnN0IHptYXggPSBtYXguejtcbiAgICBjb25zdCB4bWluID0gbWluLng7XG4gICAgY29uc3QgeW1pbiA9IG1pbi55O1xuICAgIGNvbnN0IHptaW4gPSBtaW4uejtcbiAgICBjb25zdCB4bXVsdCA9IG54IC8gKHhtYXggLSB4bWluKTtcbiAgICBjb25zdCB5bXVsdCA9IG55IC8gKHltYXggLSB5bWluKTtcbiAgICBjb25zdCB6bXVsdCA9IG56IC8gKHptYXggLSB6bWluKTtcbiAgICBjb25zdCBiaW5zaXplWCA9ICh4bWF4IC0geG1pbikgLyBueDtcbiAgICBjb25zdCBiaW5zaXplWSA9ICh5bWF4IC0geW1pbikgLyBueTtcbiAgICBjb25zdCBiaW5zaXplWiA9ICh6bWF4IC0gem1pbikgLyBuejtcbiAgICBjb25zdCBiaW5SYWRpdXMgPSBNYXRoLnNxcnQoYmluc2l6ZVggKiBiaW5zaXplWCArIGJpbnNpemVZICogYmluc2l6ZVkgKyBiaW5zaXplWiAqIGJpbnNpemVaKSAqIDAuNTtcbiAgICBjb25zdCB0eXBlcyA9IFNoYXBlLnR5cGVzO1xuICAgIGNvbnN0IFNQSEVSRSA9IHR5cGVzLlNQSEVSRTtcbiAgICBjb25zdCBQTEFORSA9IHR5cGVzLlBMQU5FO1xuICAgIHR5cGVzLkJPWDtcbiAgICB0eXBlcy5DT01QT1VORDtcbiAgICB0eXBlcy5DT05WRVhQT0xZSEVEUk9OO1xuICAgIGNvbnN0IGJpbnMgPSB0aGlzLmJpbnM7XG4gICAgY29uc3QgYmluTGVuZ3RocyA9IHRoaXMuYmluTGVuZ3RocztcbiAgICBjb25zdCBOYmlucyA9IHRoaXMuYmlucy5sZW5ndGg7IC8vIFJlc2V0IGJpbnNcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYmluczsgaSsrKSB7XG4gICAgICBiaW5MZW5ndGhzW2ldID0gMDtcbiAgICB9XG5cbiAgICBjb25zdCBjZWlsID0gTWF0aC5jZWlsO1xuXG4gICAgZnVuY3Rpb24gYWRkQm94VG9CaW5zKHgwLCB5MCwgejAsIHgxLCB5MSwgejEsIGJpKSB7XG4gICAgICBsZXQgeG9mZjAgPSAoeDAgLSB4bWluKSAqIHhtdWx0IHwgMDtcbiAgICAgIGxldCB5b2ZmMCA9ICh5MCAtIHltaW4pICogeW11bHQgfCAwO1xuICAgICAgbGV0IHpvZmYwID0gKHowIC0gem1pbikgKiB6bXVsdCB8IDA7XG4gICAgICBsZXQgeG9mZjEgPSBjZWlsKCh4MSAtIHhtaW4pICogeG11bHQpO1xuICAgICAgbGV0IHlvZmYxID0gY2VpbCgoeTEgLSB5bWluKSAqIHltdWx0KTtcbiAgICAgIGxldCB6b2ZmMSA9IGNlaWwoKHoxIC0gem1pbikgKiB6bXVsdCk7XG5cbiAgICAgIGlmICh4b2ZmMCA8IDApIHtcbiAgICAgICAgeG9mZjAgPSAwO1xuICAgICAgfSBlbHNlIGlmICh4b2ZmMCA+PSBueCkge1xuICAgICAgICB4b2ZmMCA9IG54IC0gMTtcbiAgICAgIH1cblxuICAgICAgaWYgKHlvZmYwIDwgMCkge1xuICAgICAgICB5b2ZmMCA9IDA7XG4gICAgICB9IGVsc2UgaWYgKHlvZmYwID49IG55KSB7XG4gICAgICAgIHlvZmYwID0gbnkgLSAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoem9mZjAgPCAwKSB7XG4gICAgICAgIHpvZmYwID0gMDtcbiAgICAgIH0gZWxzZSBpZiAoem9mZjAgPj0gbnopIHtcbiAgICAgICAgem9mZjAgPSBueiAtIDE7XG4gICAgICB9XG5cbiAgICAgIGlmICh4b2ZmMSA8IDApIHtcbiAgICAgICAgeG9mZjEgPSAwO1xuICAgICAgfSBlbHNlIGlmICh4b2ZmMSA+PSBueCkge1xuICAgICAgICB4b2ZmMSA9IG54IC0gMTtcbiAgICAgIH1cblxuICAgICAgaWYgKHlvZmYxIDwgMCkge1xuICAgICAgICB5b2ZmMSA9IDA7XG4gICAgICB9IGVsc2UgaWYgKHlvZmYxID49IG55KSB7XG4gICAgICAgIHlvZmYxID0gbnkgLSAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoem9mZjEgPCAwKSB7XG4gICAgICAgIHpvZmYxID0gMDtcbiAgICAgIH0gZWxzZSBpZiAoem9mZjEgPj0gbnopIHtcbiAgICAgICAgem9mZjEgPSBueiAtIDE7XG4gICAgICB9XG5cbiAgICAgIHhvZmYwICo9IHhzdGVwO1xuICAgICAgeW9mZjAgKj0geXN0ZXA7XG4gICAgICB6b2ZmMCAqPSB6c3RlcDtcbiAgICAgIHhvZmYxICo9IHhzdGVwO1xuICAgICAgeW9mZjEgKj0geXN0ZXA7XG4gICAgICB6b2ZmMSAqPSB6c3RlcDtcblxuICAgICAgZm9yIChsZXQgeG9mZiA9IHhvZmYwOyB4b2ZmIDw9IHhvZmYxOyB4b2ZmICs9IHhzdGVwKSB7XG4gICAgICAgIGZvciAobGV0IHlvZmYgPSB5b2ZmMDsgeW9mZiA8PSB5b2ZmMTsgeW9mZiArPSB5c3RlcCkge1xuICAgICAgICAgIGZvciAobGV0IHpvZmYgPSB6b2ZmMDsgem9mZiA8PSB6b2ZmMTsgem9mZiArPSB6c3RlcCkge1xuICAgICAgICAgICAgY29uc3QgaWR4ID0geG9mZiArIHlvZmYgKyB6b2ZmO1xuICAgICAgICAgICAgYmluc1tpZHhdW2Jpbkxlbmd0aHNbaWR4XSsrXSA9IGJpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gUHV0IGFsbCBib2RpZXMgaW50byB0aGUgYmluc1xuXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTtcbiAgICAgIGNvbnN0IHNpID0gYmkuc2hhcGVzWzBdO1xuXG4gICAgICBzd2l0Y2ggKHNpLnR5cGUpIHtcbiAgICAgICAgY2FzZSBTUEhFUkU6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSBzaTsgLy8gUHV0IGluIGJpblxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgb3ZlcmxhcCB3aXRoIG90aGVyIGJpbnNcblxuICAgICAgICAgICAgY29uc3QgeCA9IGJpLnBvc2l0aW9uLng7XG4gICAgICAgICAgICBjb25zdCB5ID0gYmkucG9zaXRpb24ueTtcbiAgICAgICAgICAgIGNvbnN0IHogPSBiaS5wb3NpdGlvbi56O1xuICAgICAgICAgICAgY29uc3QgciA9IHNoYXBlLnJhZGl1cztcbiAgICAgICAgICAgIGFkZEJveFRvQmlucyh4IC0gciwgeSAtIHIsIHogLSByLCB4ICsgciwgeSArIHIsIHogKyByLCBiaSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgY2FzZSBQTEFORTpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBzaGFwZSA9IHNpO1xuXG4gICAgICAgICAgICBpZiAoc2hhcGUud29ybGROb3JtYWxOZWVkc1VwZGF0ZSkge1xuICAgICAgICAgICAgICBzaGFwZS5jb21wdXRlV29ybGROb3JtYWwoYmkucXVhdGVybmlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBsYW5lTm9ybWFsID0gc2hhcGUud29ybGROb3JtYWw7IC8vUmVsYXRpdmUgcG9zaXRpb24gZnJvbSBvcmlnaW4gb2YgcGxhbmUgb2JqZWN0IHRvIHRoZSBmaXJzdCBiaW5cbiAgICAgICAgICAgIC8vSW5jcmVtZW50ZWQgYXMgd2UgaXRlcmF0ZSB0aHJvdWdoIHRoZSBiaW5zXG5cbiAgICAgICAgICAgIGNvbnN0IHhyZXNldCA9IHhtaW4gKyBiaW5zaXplWCAqIDAuNSAtIGJpLnBvc2l0aW9uLng7XG4gICAgICAgICAgICBjb25zdCB5cmVzZXQgPSB5bWluICsgYmluc2l6ZVkgKiAwLjUgLSBiaS5wb3NpdGlvbi55O1xuICAgICAgICAgICAgY29uc3QgenJlc2V0ID0gem1pbiArIGJpbnNpemVaICogMC41IC0gYmkucG9zaXRpb24uejtcbiAgICAgICAgICAgIGNvbnN0IGQgPSBHcmlkQnJvYWRwaGFzZV9jb2xsaXNpb25QYWlyc19kO1xuICAgICAgICAgICAgZC5zZXQoeHJlc2V0LCB5cmVzZXQsIHpyZXNldCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHhpID0gMCwgeG9mZiA9IDA7IHhpICE9PSBueDsgeGkrKywgeG9mZiArPSB4c3RlcCwgZC55ID0geXJlc2V0LCBkLnggKz0gYmluc2l6ZVgpIHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgeWkgPSAwLCB5b2ZmID0gMDsgeWkgIT09IG55OyB5aSsrLCB5b2ZmICs9IHlzdGVwLCBkLnogPSB6cmVzZXQsIGQueSArPSBiaW5zaXplWSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHppID0gMCwgem9mZiA9IDA7IHppICE9PSBuejsgemkrKywgem9mZiArPSB6c3RlcCwgZC56ICs9IGJpbnNpemVaKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoZC5kb3QocGxhbmVOb3JtYWwpIDwgYmluUmFkaXVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IHhvZmYgKyB5b2ZmICsgem9mZjtcbiAgICAgICAgICAgICAgICAgICAgYmluc1tpZHhdW2Jpbkxlbmd0aHNbaWR4XSsrXSA9IGJpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZiAoYmkuYWFiYk5lZWRzVXBkYXRlKSB7XG4gICAgICAgICAgICAgIGJpLnVwZGF0ZUFBQkIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYWRkQm94VG9CaW5zKGJpLmFhYmIubG93ZXJCb3VuZC54LCBiaS5hYWJiLmxvd2VyQm91bmQueSwgYmkuYWFiYi5sb3dlckJvdW5kLnosIGJpLmFhYmIudXBwZXJCb3VuZC54LCBiaS5hYWJiLnVwcGVyQm91bmQueSwgYmkuYWFiYi51cHBlckJvdW5kLnosIGJpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIENoZWNrIGVhY2ggYmluXG5cblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYmluczsgaSsrKSB7XG4gICAgICBjb25zdCBiaW5MZW5ndGggPSBiaW5MZW5ndGhzW2ldOyAvL1NraXAgYmlucyB3aXRoIG5vIHBvdGVudGlhbCBjb2xsaXNpb25zXG5cbiAgICAgIGlmIChiaW5MZW5ndGggPiAxKSB7XG4gICAgICAgIGNvbnN0IGJpbiA9IGJpbnNbaV07IC8vIERvIE5eMiBicm9hZHBoYXNlIGluc2lkZVxuXG4gICAgICAgIGZvciAobGV0IHhpID0gMDsgeGkgIT09IGJpbkxlbmd0aDsgeGkrKykge1xuICAgICAgICAgIGNvbnN0IGJpID0gYmluW3hpXTtcblxuICAgICAgICAgIGZvciAobGV0IHlpID0gMDsgeWkgIT09IHhpOyB5aSsrKSB7XG4gICAgICAgICAgICBjb25zdCBiaiA9IGJpblt5aV07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uKGJpLCBiaikpIHtcbiAgICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcGFpcnMxLCBwYWlyczIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy9cdGZvciAobGV0IHppID0gMCwgem9mZj0wOyB6aSA8IG56OyB6aSsrLCB6b2ZmKz0genN0ZXApIHtcbiAgICAvL1x0XHRjb25zb2xlLmxvZyhcImxheWVyIFwiK3ppKTtcbiAgICAvL1x0XHRmb3IgKGxldCB5aSA9IDAsIHlvZmY9MDsgeWkgPCBueTsgeWkrKywgeW9mZiArPSB5c3RlcCkge1xuICAgIC8vXHRcdFx0Y29uc3Qgcm93ID0gJyc7XG4gICAgLy9cdFx0XHRmb3IgKGxldCB4aSA9IDAsIHhvZmY9MDsgeGkgPCBueDsgeGkrKywgeG9mZiArPSB4c3RlcCkge1xuICAgIC8vXHRcdFx0XHRjb25zdCBpZHggPSB4b2ZmICsgeW9mZiArIHpvZmY7XG4gICAgLy9cdFx0XHRcdHJvdyArPSAnICcgKyBiaW5MZW5ndGhzW2lkeF07XG4gICAgLy9cdFx0XHR9XG4gICAgLy9cdFx0XHRjb25zb2xlLmxvZyhyb3cpO1xuICAgIC8vXHRcdH1cbiAgICAvL1x0fVxuXG5cbiAgICB0aGlzLm1ha2VQYWlyc1VuaXF1ZShwYWlyczEsIHBhaXJzMik7XG4gIH1cblxufVxuY29uc3QgR3JpZEJyb2FkcGhhc2VfY29sbGlzaW9uUGFpcnNfZCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogTmFpdmUgYnJvYWRwaGFzZSBpbXBsZW1lbnRhdGlvbiwgdXNlZCBpbiBsYWNrIG9mIGJldHRlciBvbmVzLlxuICpcbiAqIFRoZSBuYWl2ZSBicm9hZHBoYXNlIGxvb2tzIGF0IGFsbCBwb3NzaWJsZSBwYWlycyB3aXRob3V0IHJlc3RyaWN0aW9uLCB0aGVyZWZvcmUgaXQgaGFzIGNvbXBsZXhpdHkgTl4yIF8od2hpY2ggaXMgYmFkKV9cbiAqL1xuY2xhc3MgTmFpdmVCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7XG4gIC8qKlxuICAgKiBAdG9kbyBSZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFsbCB0aGUgY29sbGlzaW9uIHBhaXJzIGluIHRoZSBwaHlzaWNzIHdvcmxkXG4gICAqL1xuXG5cbiAgY29sbGlzaW9uUGFpcnMod29ybGQsIHBhaXJzMSwgcGFpcnMyKSB7XG4gICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzO1xuICAgIGNvbnN0IG4gPSBib2RpZXMubGVuZ3RoO1xuICAgIGxldCBiaTtcbiAgICBsZXQgYmo7IC8vIE5haXZlIE5eMiBmdHchXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gaTsgaisrKSB7XG4gICAgICAgIGJpID0gYm9kaWVzW2ldO1xuICAgICAgICBiaiA9IGJvZGllc1tqXTtcblxuICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcGFpcnMxLCBwYWlyczIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi5cbiAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLlxuICAgKi9cblxuXG4gIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0ID0gW10pIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYiA9IHdvcmxkLmJvZGllc1tpXTtcblxuICAgICAgaWYgKGIuYWFiYk5lZWRzVXBkYXRlKSB7XG4gICAgICAgIGIudXBkYXRlQUFCQigpO1xuICAgICAgfSAvLyBVZ2x5IGhhY2sgdW50aWwgQm9keSBnZXRzIGFhYmJcblxuXG4gICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxufVxuXG4vKipcbiAqIFN0b3JhZ2UgZm9yIFJheSBjYXN0aW5nIGRhdGFcbiAqL1xuY2xhc3MgUmF5Y2FzdFJlc3VsdCB7XG4gIC8qKlxuICAgKiByYXlGcm9tV29ybGRcbiAgICovXG5cbiAgLyoqXG4gICAqIHJheVRvV29ybGRcbiAgICovXG5cbiAgLyoqXG4gICAqIGhpdE5vcm1hbFdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBoaXRQb2ludFdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBoYXNIaXRcbiAgICovXG5cbiAgLyoqXG4gICAqIHNoYXBlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBib2R5XG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgaW5kZXggb2YgdGhlIGhpdCB0cmlhbmdsZSwgaWYgdGhlIGhpdCBzaGFwZSB3YXMgYSB0cmltZXNoXG4gICAqL1xuXG4gIC8qKlxuICAgKiBEaXN0YW5jZSB0byB0aGUgaGl0LiBXaWxsIGJlIHNldCB0byAtMSBpZiB0aGVyZSB3YXMgbm8gaGl0XG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgcmF5IHNob3VsZCBzdG9wIHRyYXZlcnNpbmcgdGhlIGJvZGllc1xuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yYXlGcm9tV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5yYXlUb1dvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5oaXRQb2ludFdvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaGFzSGl0ID0gdm9pZCAwO1xuICAgIHRoaXMuc2hhcGUgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2R5ID0gdm9pZCAwO1xuICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gdm9pZCAwO1xuICAgIHRoaXMuZGlzdGFuY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5zaG91bGRTdG9wID0gdm9pZCAwO1xuICAgIHRoaXMucmF5RnJvbVdvcmxkID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnJheVRvV29ybGQgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuaGl0UG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5oYXNIaXQgPSBmYWxzZTtcbiAgICB0aGlzLnNoYXBlID0gbnVsbDtcbiAgICB0aGlzLmJvZHkgPSBudWxsO1xuICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7XG4gICAgdGhpcy5kaXN0YW5jZSA9IC0xO1xuICAgIHRoaXMuc2hvdWxkU3RvcCA9IGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBSZXNldCBhbGwgcmVzdWx0IGRhdGEuXG4gICAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5yYXlGcm9tV29ybGQuc2V0WmVybygpO1xuICAgIHRoaXMucmF5VG9Xb3JsZC5zZXRaZXJvKCk7XG4gICAgdGhpcy5oaXROb3JtYWxXb3JsZC5zZXRaZXJvKCk7XG4gICAgdGhpcy5oaXRQb2ludFdvcmxkLnNldFplcm8oKTtcbiAgICB0aGlzLmhhc0hpdCA9IGZhbHNlO1xuICAgIHRoaXMuc2hhcGUgPSBudWxsO1xuICAgIHRoaXMuYm9keSA9IG51bGw7XG4gICAgdGhpcy5oaXRGYWNlSW5kZXggPSAtMTtcbiAgICB0aGlzLmRpc3RhbmNlID0gLTE7XG4gICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIGFib3J0XG4gICAqL1xuXG5cbiAgYWJvcnQoKSB7XG4gICAgdGhpcy5zaG91bGRTdG9wID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHJlc3VsdCBkYXRhLlxuICAgKi9cblxuXG4gIHNldChyYXlGcm9tV29ybGQsIHJheVRvV29ybGQsIGhpdE5vcm1hbFdvcmxkLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpIHtcbiAgICB0aGlzLnJheUZyb21Xb3JsZC5jb3B5KHJheUZyb21Xb3JsZCk7XG4gICAgdGhpcy5yYXlUb1dvcmxkLmNvcHkocmF5VG9Xb3JsZCk7XG4gICAgdGhpcy5oaXROb3JtYWxXb3JsZC5jb3B5KGhpdE5vcm1hbFdvcmxkKTtcbiAgICB0aGlzLmhpdFBvaW50V29ybGQuY29weShoaXRQb2ludFdvcmxkKTtcbiAgICB0aGlzLnNoYXBlID0gc2hhcGU7XG4gICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7XG4gIH1cblxufVxuXG5sZXQgX1NoYXBlJHR5cGVzJFNQSEVSRSwgX1NoYXBlJHR5cGVzJFBMQU5FLCBfU2hhcGUkdHlwZXMkQk9YLCBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIsIF9TaGFwZSR0eXBlcyRDT05WRVhQTywgX1NoYXBlJHR5cGVzJEhFSUdIVEZJLCBfU2hhcGUkdHlwZXMkVFJJTUVTSDtcblxuLyoqXG4gKiBSQVlfTU9ERVNcbiAqL1xuY29uc3QgUkFZX01PREVTID0ge1xuICAvKiogQ0xPU0VTVCAqL1xuICBDTE9TRVNUOiAxLFxuXG4gIC8qKiBBTlkgKi9cbiAgQU5ZOiAyLFxuXG4gIC8qKiBBTEwgKi9cbiAgQUxMOiA0XG59O1xuLyoqXG4gKiBSYXlNb2RlXG4gKi9cblxuX1NoYXBlJHR5cGVzJFNQSEVSRSA9IFNoYXBlLnR5cGVzLlNQSEVSRTtcbl9TaGFwZSR0eXBlcyRQTEFORSA9IFNoYXBlLnR5cGVzLlBMQU5FO1xuX1NoYXBlJHR5cGVzJEJPWCA9IFNoYXBlLnR5cGVzLkJPWDtcbl9TaGFwZSR0eXBlcyRDWUxJTkRFUiA9IFNoYXBlLnR5cGVzLkNZTElOREVSO1xuX1NoYXBlJHR5cGVzJENPTlZFWFBPID0gU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTjtcbl9TaGFwZSR0eXBlcyRIRUlHSFRGSSA9IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEO1xuX1NoYXBlJHR5cGVzJFRSSU1FU0ggPSBTaGFwZS50eXBlcy5UUklNRVNIO1xuXG4vKipcbiAqIEEgbGluZSBpbiAzRCBzcGFjZSB0aGF0IGludGVyc2VjdHMgYm9kaWVzIGFuZCByZXR1cm4gcG9pbnRzLlxuICovXG5jbGFzcyBSYXkge1xuICAvKipcbiAgICogZnJvbVxuICAgKi9cblxuICAvKipcbiAgICogdG9cbiAgICovXG5cbiAgLyoqXG4gICAqIGRpcmVjdGlvblxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHByZWNpc2lvbiBvZiB0aGUgcmF5LiBVc2VkIHdoZW4gY2hlY2tpbmcgcGFyYWxsZWxpdHkgZXRjLlxuICAgKiBAZGVmYXVsdCAwLjAwMDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFNldCB0byBgZmFsc2VgIGlmIHlvdSBkb24ndCB3YW50IHRoZSBSYXkgdG8gdGFrZSBgY29sbGlzaW9uUmVzcG9uc2VgIGZsYWdzIGludG8gYWNjb3VudCBvbiBib2RpZXMgYW5kIHNoYXBlcy5cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cblxuICAvKipcbiAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHJheSBza2lwcyBhbnkgaGl0cyB3aXRoIG5vcm1hbC5kb3QocmF5RGlyZWN0aW9uKSA8IDAuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBjb2xsaXNpb25GaWx0ZXJNYXNrXG4gICAqIEBkZWZhdWx0IC0xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBjb2xsaXNpb25GaWx0ZXJHcm91cFxuICAgKiBAZGVmYXVsdCAtMVxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGludGVyc2VjdGlvbiBtb2RlLiBTaG91bGQgYmUgUmF5LkFOWSwgUmF5LkFMTCBvciBSYXkuQ0xPU0VTVC5cbiAgICogQGRlZmF1bHQgUkFZLkFOWVxuICAgKi9cblxuICAvKipcbiAgICogQ3VycmVudCByZXN1bHQgb2JqZWN0LlxuICAgKi9cblxuICAvKipcbiAgICogV2lsbCBiZSBzZXQgdG8gYHRydWVgIGR1cmluZyBpbnRlcnNlY3RXb3JsZCgpIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLlxuICAgKi9cblxuICAvKipcbiAgICogVXNlci1wcm92aWRlZCByZXN1bHQgY2FsbGJhY2suIFdpbGwgYmUgdXNlZCBpZiBtb2RlIGlzIFJheS5BTEwuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBDTE9TRVNUXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBTllcbiAgICovXG5cbiAgLyoqXG4gICAqIEFMTFxuICAgKi9cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkU1BIRVJFXSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0U3BoZXJlO1xuICB9XG5cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkUExBTkVdKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RQbGFuZTtcbiAgfVxuXG4gIGdldCBbX1NoYXBlJHR5cGVzJEJPWF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEJveDtcbiAgfVxuXG4gIGdldCBbX1NoYXBlJHR5cGVzJENZTElOREVSXSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Q29udmV4O1xuICB9XG5cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkQ09OVkVYUE9dKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7XG4gIH1cblxuICBnZXQgW19TaGFwZSR0eXBlcyRIRUlHSFRGSV0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEhlaWdodGZpZWxkO1xuICB9XG5cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkVFJJTUVTSF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdFRyaW1lc2g7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihmcm9tID0gbmV3IFZlYzMoKSwgdG8gPSBuZXcgVmVjMygpKSB7XG4gICAgdGhpcy5mcm9tID0gdm9pZCAwO1xuICAgIHRoaXMudG8gPSB2b2lkIDA7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5wcmVjaXNpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwO1xuICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB2b2lkIDA7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHZvaWQgMDtcbiAgICB0aGlzLm1vZGUgPSB2b2lkIDA7XG4gICAgdGhpcy5yZXN1bHQgPSB2b2lkIDA7XG4gICAgdGhpcy5oYXNIaXQgPSB2b2lkIDA7XG4gICAgdGhpcy5jYWxsYmFjayA9IHZvaWQgMDtcbiAgICB0aGlzLmZyb20gPSBmcm9tLmNsb25lKCk7XG4gICAgdGhpcy50byA9IHRvLmNsb25lKCk7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucHJlY2lzaW9uID0gMC4wMDAxO1xuICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRydWU7XG4gICAgdGhpcy5za2lwQmFja2ZhY2VzID0gZmFsc2U7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gLTE7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IC0xO1xuICAgIHRoaXMubW9kZSA9IFJheS5BTlk7XG4gICAgdGhpcy5yZXN1bHQgPSBuZXcgUmF5Y2FzdFJlc3VsdCgpO1xuICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7XG5cbiAgICB0aGlzLmNhbGxiYWNrID0gcmVzdWx0ID0+IHt9O1xuICB9XG4gIC8qKlxuICAgKiBEbyBpdGVyc2VjdGlvbiBhZ2FpbnN0IGFsbCBib2RpZXMgaW4gdGhlIGdpdmVuIFdvcmxkLlxuICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIHJheSBoaXQgYW55dGhpbmcsIG90aGVyd2lzZSBmYWxzZS5cbiAgICovXG5cblxuICBpbnRlcnNlY3RXb3JsZCh3b3JsZCwgb3B0aW9ucykge1xuICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCBSYXkuQU5ZO1xuICAgIHRoaXMucmVzdWx0ID0gb3B0aW9ucy5yZXN1bHQgfHwgbmV3IFJheWNhc3RSZXN1bHQoKTtcbiAgICB0aGlzLnNraXBCYWNrZmFjZXMgPSAhIW9wdGlvbnMuc2tpcEJhY2tmYWNlcztcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogLTE7XG4gICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdHlwZW9mIG9wdGlvbnMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgOiB0cnVlO1xuXG4gICAgaWYgKG9wdGlvbnMuZnJvbSkge1xuICAgICAgdGhpcy5mcm9tLmNvcHkob3B0aW9ucy5mcm9tKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy50bykge1xuICAgICAgdGhpcy50by5jb3B5KG9wdGlvbnMudG8pO1xuICAgIH1cblxuICAgIHRoaXMuY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrIHx8ICgoKSA9PiB7fSk7XG5cbiAgICB0aGlzLmhhc0hpdCA9IGZhbHNlO1xuICAgIHRoaXMucmVzdWx0LnJlc2V0KCk7XG4gICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTtcbiAgICB0aGlzLmdldEFBQkIodG1wQUFCQiQxKTtcbiAgICB0bXBBcnJheS5sZW5ndGggPSAwO1xuICAgIHdvcmxkLmJyb2FkcGhhc2UuYWFiYlF1ZXJ5KHdvcmxkLCB0bXBBQUJCJDEsIHRtcEFycmF5KTtcbiAgICB0aGlzLmludGVyc2VjdEJvZGllcyh0bXBBcnJheSk7XG4gICAgcmV0dXJuIHRoaXMuaGFzSGl0O1xuICB9XG4gIC8qKlxuICAgKiBTaG9vdCBhIHJheSBhdCBhIGJvZHksIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuXG4gICAqIEBkZXByZWNhdGVkIEBwYXJhbSByZXN1bHQgc2V0IHRoZSByZXN1bHQgcHJvcGVydHkgb2YgdGhlIFJheSBpbnN0ZWFkLlxuICAgKi9cblxuXG4gIGludGVyc2VjdEJvZHkoYm9keSwgcmVzdWx0KSB7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpO1xuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2U7XG5cbiAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhYm9keS5jb2xsaXNpb25SZXNwb25zZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICgodGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHkuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDAgfHwgKGJvZHkuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeGkgPSBpbnRlcnNlY3RCb2R5X3hpO1xuICAgIGNvbnN0IHFpID0gaW50ZXJzZWN0Qm9keV9xaTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBOID0gYm9keS5zaGFwZXMubGVuZ3RoOyBpIDwgTjsgaSsrKSB7XG4gICAgICBjb25zdCBzaGFwZSA9IGJvZHkuc2hhcGVzW2ldO1xuXG4gICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhc2hhcGUuY29sbGlzaW9uUmVzcG9uc2UpIHtcbiAgICAgICAgY29udGludWU7IC8vIFNraXBcbiAgICAgIH1cblxuICAgICAgYm9keS5xdWF0ZXJuaW9uLm11bHQoYm9keS5zaGFwZU9yaWVudGF0aW9uc1tpXSwgcWkpO1xuICAgICAgYm9keS5xdWF0ZXJuaW9uLnZtdWx0KGJvZHkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7XG4gICAgICB4aS52YWRkKGJvZHkucG9zaXRpb24sIHhpKTtcbiAgICAgIHRoaXMuaW50ZXJzZWN0U2hhcGUoc2hhcGUsIHFpLCB4aSwgYm9keSk7XG5cbiAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2hvb3QgYSByYXkgYXQgYW4gYXJyYXkgYm9kaWVzLCBnZXQgYmFjayBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaGl0LlxuICAgKiBAcGFyYW0gYm9kaWVzIEFuIGFycmF5IG9mIEJvZHkgb2JqZWN0cy5cbiAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuXG4gICAqXG4gICAqL1xuXG5cbiAgaW50ZXJzZWN0Qm9kaWVzKGJvZGllcywgcmVzdWx0KSB7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwLCBsID0gYm9kaWVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSA8IGw7IGkrKykge1xuICAgICAgdGhpcy5pbnRlcnNlY3RCb2R5KGJvZGllc1tpXSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBkaXJlY3Rpb24gdmVjdG9yLlxuICAgKi9cblxuXG4gIHVwZGF0ZURpcmVjdGlvbigpIHtcbiAgICB0aGlzLnRvLnZzdWIodGhpcy5mcm9tLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgdGhpcy5kaXJlY3Rpb24ubm9ybWFsaXplKCk7XG4gIH1cblxuICBpbnRlcnNlY3RTaGFwZShzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHkpIHtcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOyAvLyBDaGVja2luZyBib3VuZGluZ1NwaGVyZVxuXG4gICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgdGhpcy5kaXJlY3Rpb24sIHBvc2l0aW9uKTtcblxuICAgIGlmIChkaXN0YW5jZSA+IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaW50ZXJzZWN0TWV0aG9kID0gdGhpc1tzaGFwZS50eXBlXTtcblxuICAgIGlmIChpbnRlcnNlY3RNZXRob2QpIHtcbiAgICAgIGludGVyc2VjdE1ldGhvZC5jYWxsKHRoaXMsIHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgc2hhcGUpO1xuICAgIH1cbiAgfVxuXG4gIF9pbnRlcnNlY3RCb3goYm94LCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXgoYm94LmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpO1xuICB9XG5cbiAgX2ludGVyc2VjdFBsYW5lKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkge1xuICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207XG4gICAgY29uc3QgdG8gPSB0aGlzLnRvO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOyAvLyBHZXQgcGxhbmUgbm9ybWFsXG5cbiAgICBjb25zdCB3b3JsZE5vcm1hbCA9IG5ldyBWZWMzKDAsIDAsIDEpO1xuICAgIHF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTtcbiAgICBjb25zdCBsZW4gPSBuZXcgVmVjMygpO1xuICAgIGZyb20udnN1Yihwb3NpdGlvbiwgbGVuKTtcbiAgICBjb25zdCBwbGFuZVRvRnJvbSA9IGxlbi5kb3Qod29ybGROb3JtYWwpO1xuICAgIHRvLnZzdWIocG9zaXRpb24sIGxlbik7XG4gICAgY29uc3QgcGxhbmVUb1RvID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7XG5cbiAgICBpZiAocGxhbmVUb0Zyb20gKiBwbGFuZVRvVG8gPiAwKSB7XG4gICAgICAvLyBcImZyb21cIiBhbmQgXCJ0b1wiIGFyZSBvbiB0aGUgc2FtZSBzaWRlIG9mIHRoZSBwbGFuZS4uLiBiYWlsIG91dFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChmcm9tLmRpc3RhbmNlVG8odG8pIDwgcGxhbmVUb0Zyb20pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBuX2RvdF9kaXIgPSB3b3JsZE5vcm1hbC5kb3QoZGlyZWN0aW9uKTtcblxuICAgIGlmIChNYXRoLmFicyhuX2RvdF9kaXIpIDwgdGhpcy5wcmVjaXNpb24pIHtcbiAgICAgIC8vIE5vIGludGVyc2VjdGlvblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBsYW5lUG9pbnRUb0Zyb20gPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGRpcl9zY2FsZWRfd2l0aF90ID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBoaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTtcbiAgICBmcm9tLnZzdWIocG9zaXRpb24sIHBsYW5lUG9pbnRUb0Zyb20pO1xuICAgIGNvbnN0IHQgPSAtd29ybGROb3JtYWwuZG90KHBsYW5lUG9pbnRUb0Zyb20pIC8gbl9kb3RfZGlyO1xuICAgIGRpcmVjdGlvbi5zY2FsZSh0LCBkaXJfc2NhbGVkX3dpdGhfdCk7XG4gICAgZnJvbS52YWRkKGRpcl9zY2FsZWRfd2l0aF90LCBoaXRQb2ludFdvcmxkKTtcbiAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHdvcmxkIEFBQkIgb2YgdGhlIHJheS5cbiAgICovXG5cblxuICBnZXRBQUJCKGFhYmIpIHtcbiAgICBjb25zdCB7XG4gICAgICBsb3dlckJvdW5kLFxuICAgICAgdXBwZXJCb3VuZFxuICAgIH0gPSBhYWJiO1xuICAgIGNvbnN0IHRvID0gdGhpcy50bztcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tO1xuICAgIGxvd2VyQm91bmQueCA9IE1hdGgubWluKHRvLngsIGZyb20ueCk7XG4gICAgbG93ZXJCb3VuZC55ID0gTWF0aC5taW4odG8ueSwgZnJvbS55KTtcbiAgICBsb3dlckJvdW5kLnogPSBNYXRoLm1pbih0by56LCBmcm9tLnopO1xuICAgIHVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRvLngsIGZyb20ueCk7XG4gICAgdXBwZXJCb3VuZC55ID0gTWF0aC5tYXgodG8ueSwgZnJvbS55KTtcbiAgICB1cHBlckJvdW5kLnogPSBNYXRoLm1heCh0by56LCBmcm9tLnopO1xuICB9XG5cbiAgX2ludGVyc2VjdEhlaWdodGZpZWxkKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkge1xuICAgIHNoYXBlLmRhdGE7XG4gICAgc2hhcGUuZWxlbWVudFNpemU7IC8vIENvbnZlcnQgdGhlIHJheSB0byBsb2NhbCBoZWlnaHRmaWVsZCBjb29yZGluYXRlc1xuXG4gICAgY29uc3QgbG9jYWxSYXkgPSBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheTsgLy9uZXcgUmF5KHRoaXMuZnJvbSwgdGhpcy50byk7XG5cbiAgICBsb2NhbFJheS5mcm9tLmNvcHkodGhpcy5mcm9tKTtcbiAgICBsb2NhbFJheS50by5jb3B5KHRoaXMudG8pO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgbG9jYWxSYXkuZnJvbSwgbG9jYWxSYXkuZnJvbSk7XG4gICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS50bywgbG9jYWxSYXkudG8pO1xuICAgIGxvY2FsUmF5LnVwZGF0ZURpcmVjdGlvbigpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3RcblxuICAgIGNvbnN0IGluZGV4ID0gaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXg7XG4gICAgbGV0IGlNaW5YO1xuICAgIGxldCBpTWluWTtcbiAgICBsZXQgaU1heFg7XG4gICAgbGV0IGlNYXhZOyAvLyBTZXQgdG8gbWF4XG5cbiAgICBpTWluWCA9IGlNaW5ZID0gMDtcbiAgICBpTWF4WCA9IGlNYXhZID0gc2hhcGUuZGF0YS5sZW5ndGggLSAxO1xuICAgIGNvbnN0IGFhYmIgPSBuZXcgQUFCQigpO1xuICAgIGxvY2FsUmF5LmdldEFBQkIoYWFiYik7XG4gICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueSwgaW5kZXgsIHRydWUpO1xuICAgIGlNaW5YID0gTWF0aC5tYXgoaU1pblgsIGluZGV4WzBdKTtcbiAgICBpTWluWSA9IE1hdGgubWF4KGlNaW5ZLCBpbmRleFsxXSk7XG4gICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueSwgaW5kZXgsIHRydWUpO1xuICAgIGlNYXhYID0gTWF0aC5taW4oaU1heFgsIGluZGV4WzBdICsgMSk7XG4gICAgaU1heFkgPSBNYXRoLm1pbihpTWF4WSwgaW5kZXhbMV0gKyAxKTtcblxuICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzaGFwZS5nZXRBYWJiQXRJbmRleChpLCBqLCBhYWJiKTtcblxuICAgICAgICBpZiAoIWFhYmIub3ZlcmxhcHNSYXkobG9jYWxSYXkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gLy8gTG93ZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTtcbiAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBzaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTtcblxuICAgICAgICB0aGlzLl9pbnRlcnNlY3RDb252ZXgoc2hhcGUucGlsbGFyQ29udmV4LCBxdWF0LCB3b3JsZFBpbGxhck9mZnNldCwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgaW50ZXJzZWN0Q29udmV4T3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIHRydWUpO1xuICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpO1xuXG4gICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfaW50ZXJzZWN0U3BoZXJlKHNwaGVyZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHtcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tO1xuICAgIGNvbnN0IHRvID0gdGhpcy50bztcbiAgICBjb25zdCByID0gc3BoZXJlLnJhZGl1cztcbiAgICBjb25zdCBhID0gKHRvLnggLSBmcm9tLngpICoqIDIgKyAodG8ueSAtIGZyb20ueSkgKiogMiArICh0by56IC0gZnJvbS56KSAqKiAyO1xuICAgIGNvbnN0IGIgPSAyICogKCh0by54IC0gZnJvbS54KSAqIChmcm9tLnggLSBwb3NpdGlvbi54KSArICh0by55IC0gZnJvbS55KSAqIChmcm9tLnkgLSBwb3NpdGlvbi55KSArICh0by56IC0gZnJvbS56KSAqIChmcm9tLnogLSBwb3NpdGlvbi56KSk7XG4gICAgY29uc3QgYyA9IChmcm9tLnggLSBwb3NpdGlvbi54KSAqKiAyICsgKGZyb20ueSAtIHBvc2l0aW9uLnkpICoqIDIgKyAoZnJvbS56IC0gcG9zaXRpb24ueikgKiogMiAtIHIgKiogMjtcbiAgICBjb25zdCBkZWx0YSA9IGIgKiogMiAtIDQgKiBhICogYztcbiAgICBjb25zdCBpbnRlcnNlY3Rpb25Qb2ludCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfaW50ZXJzZWN0aW9uUG9pbnQ7XG4gICAgY29uc3Qgbm9ybWFsID0gUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWw7XG5cbiAgICBpZiAoZGVsdGEgPCAwKSB7XG4gICAgICAvLyBObyBpbnRlcnNlY3Rpb25cbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgICAvLyBzaW5nbGUgaW50ZXJzZWN0aW9uIHBvaW50XG4gICAgICBmcm9tLmxlcnAodG8sIGRlbHRhLCBpbnRlcnNlY3Rpb25Qb2ludCk7XG4gICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpO1xuICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpO1xuICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkMSA9ICgtYiAtIE1hdGguc3FydChkZWx0YSkpIC8gKDIgKiBhKTtcbiAgICAgIGNvbnN0IGQyID0gKC1iICsgTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpO1xuXG4gICAgICBpZiAoZDEgPj0gMCAmJiBkMSA8PSAxKSB7XG4gICAgICAgIGZyb20ubGVycCh0bywgZDEsIGludGVyc2VjdGlvblBvaW50KTtcbiAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTtcbiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpO1xuICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGQyID49IDAgJiYgZDIgPD0gMSkge1xuICAgICAgICBmcm9tLmxlcnAodG8sIGQyLCBpbnRlcnNlY3Rpb25Qb2ludCk7XG4gICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7XG4gICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTtcbiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9pbnRlcnNlY3RDb252ZXgoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0Q29udmV4X25vcm1hbDtcbiAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yO1xuICAgIGNvbnN0IGZhY2VMaXN0ID0gb3B0aW9ucyAmJiBvcHRpb25zLmZhY2VMaXN0IHx8IG51bGw7IC8vIENoZWNraW5nIGZhY2VzXG5cbiAgICBjb25zdCBmYWNlcyA9IHNoYXBlLmZhY2VzO1xuICAgIGNvbnN0IHZlcnRpY2VzID0gc2hhcGUudmVydGljZXM7XG4gICAgY29uc3Qgbm9ybWFscyA9IHNoYXBlLmZhY2VOb3JtYWxzO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uO1xuICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207XG4gICAgY29uc3QgdG8gPSB0aGlzLnRvO1xuICAgIGNvbnN0IGZyb21Ub0Rpc3RhbmNlID0gZnJvbS5kaXN0YW5jZVRvKHRvKTtcbiAgICBjb25zdCBOZmFjZXMgPSBmYWNlTGlzdCA/IGZhY2VMaXN0Lmxlbmd0aCA6IGZhY2VzLmxlbmd0aDtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDtcblxuICAgIGZvciAobGV0IGogPSAwOyAhcmVzdWx0LnNob3VsZFN0b3AgJiYgaiA8IE5mYWNlczsgaisrKSB7XG4gICAgICBjb25zdCBmaSA9IGZhY2VMaXN0ID8gZmFjZUxpc3Rbal0gOiBqO1xuICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ZpXTtcbiAgICAgIGNvbnN0IGZhY2VOb3JtYWwgPSBub3JtYWxzW2ZpXTtcbiAgICAgIGNvbnN0IHEgPSBxdWF0O1xuICAgICAgY29uc3QgeCA9IHBvc2l0aW9uOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlXG4gICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWxcbiAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLlxuXG4gICAgICB2ZWN0b3IuY29weSh2ZXJ0aWNlc1tmYWNlWzBdXSk7XG4gICAgICBxLnZtdWx0KHZlY3RvciwgdmVjdG9yKTtcbiAgICAgIHZlY3Rvci52YWRkKHgsIHZlY3Rvcik7IC8vIC4uLmJ1dCBtYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSByYXkgZnJvbS4gV2UnbGwgZml4IHRoaXMgbGF0ZXIuXG5cbiAgICAgIHZlY3Rvci52c3ViKGZyb20sIHZlY3Rvcik7IC8vIEdldCBwbGFuZSBub3JtYWxcblxuICAgICAgcS52bXVsdChmYWNlTm9ybWFsLCBub3JtYWwpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZ1xuXG4gICAgICBjb25zdCBkb3QgPSBkaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsXG5cbiAgICAgIGlmIChNYXRoLmFicyhkb3QpIDwgdGhpcy5wcmVjaXNpb24pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmVcblxuXG4gICAgICBjb25zdCBzY2FsYXIgPSBub3JtYWwuZG90KHZlY3RvcikgLyBkb3Q7IC8vIGlmIG5lZ2F0aXZlIGRpc3RhbmNlLCB0aGVuIHBsYW5lIGlzIGJlaGluZCByYXlcblxuICAgICAgaWYgKHNjYWxhciA8IDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIGlmIChkb3QgPCAwKSB7XG4gICAgICAvLyBJbnRlcnNlY3Rpb24gcG9pbnQgaXMgZnJvbSArIGRpcmVjdGlvbiAqIHNjYWxhclxuXG5cbiAgICAgIGRpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTtcbiAgICAgIGludGVyc2VjdFBvaW50LnZhZGQoZnJvbSwgaW50ZXJzZWN0UG9pbnQpOyAvLyBhIGlzIHRoZSBwb2ludCB3ZSBjb21wYXJlIHBvaW50cyBiIGFuZCBjIHdpdGguXG5cbiAgICAgIGEuY29weSh2ZXJ0aWNlc1tmYWNlWzBdXSk7XG4gICAgICBxLnZtdWx0KGEsIGEpO1xuICAgICAgeC52YWRkKGEsIGEpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMTsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGkgPCBmYWNlLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAvLyBUcmFuc2Zvcm0gMyB2ZXJ0aWNlcyB0byB3b3JsZCBjb29yZHNcbiAgICAgICAgYi5jb3B5KHZlcnRpY2VzW2ZhY2VbaV1dKTtcbiAgICAgICAgYy5jb3B5KHZlcnRpY2VzW2ZhY2VbaSArIDFdXSk7XG4gICAgICAgIHEudm11bHQoYiwgYik7XG4gICAgICAgIHEudm11bHQoYywgYyk7XG4gICAgICAgIHgudmFkZChiLCBiKTtcbiAgICAgICAgeC52YWRkKGMsIGMpO1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGludGVyc2VjdFBvaW50LmRpc3RhbmNlVG8oZnJvbSk7XG5cbiAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykpIHx8IGRpc3RhbmNlID4gZnJvbVRvRGlzdGFuY2UpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIGZpKTtcbiAgICAgIH0gLy8gfVxuXG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAdG9kbyBPcHRpbWl6ZSBieSB0cmFuc2Zvcm1pbmcgdGhlIHdvcmxkIHRvIGxvY2FsIHNwYWNlIGZpcnN0LlxuICAgKiBAdG9kbyBVc2UgT2N0cmVlIGxvb2t1cFxuICAgKi9cblxuXG4gIF9pbnRlcnNlY3RUcmltZXNoKG1lc2gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0VHJpbWVzaF9ub3JtYWw7XG4gICAgY29uc3QgdHJpYW5nbGVzID0gaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXM7XG4gICAgY29uc3QgdHJlZVRyYW5zZm9ybSA9IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybTtcbiAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yO1xuICAgIGNvbnN0IGxvY2FsRGlyZWN0aW9uID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbjtcbiAgICBjb25zdCBsb2NhbEZyb20gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRnJvbTtcbiAgICBjb25zdCBsb2NhbFRvID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbFRvO1xuICAgIGNvbnN0IHdvcmxkSW50ZXJzZWN0UG9pbnQgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQ7XG4gICAgY29uc3Qgd29ybGROb3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsOyAvLyBDaGVja2luZyBmYWNlc1xuXG4gICAgY29uc3QgaW5kaWNlcyA9IG1lc2guaW5kaWNlcztcbiAgICBtZXNoLnZlcnRpY2VzOyAvLyBjb25zdCBub3JtYWxzID0gbWVzaC5mYWNlTm9ybWFsc1xuXG4gICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTtcbiAgICBjb25zdCB0byA9IHRoaXMudG87XG4gICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247XG4gICAgdHJlZVRyYW5zZm9ybS5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcbiAgICB0cmVlVHJhbnNmb3JtLnF1YXRlcm5pb24uY29weShxdWF0KTsgLy8gVHJhbnNmb3JtIHJheSB0byBsb2NhbCBzcGFjZSFcblxuICAgIFRyYW5zZm9ybS52ZWN0b3JUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGRpcmVjdGlvbiwgbG9jYWxEaXJlY3Rpb24pO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZnJvbSwgbG9jYWxGcm9tKTtcbiAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIHRvLCBsb2NhbFRvKTtcbiAgICBsb2NhbFRvLnggKj0gbWVzaC5zY2FsZS54O1xuICAgIGxvY2FsVG8ueSAqPSBtZXNoLnNjYWxlLnk7XG4gICAgbG9jYWxUby56ICo9IG1lc2guc2NhbGUuejtcbiAgICBsb2NhbEZyb20ueCAqPSBtZXNoLnNjYWxlLng7XG4gICAgbG9jYWxGcm9tLnkgKj0gbWVzaC5zY2FsZS55O1xuICAgIGxvY2FsRnJvbS56ICo9IG1lc2guc2NhbGUuejtcbiAgICBsb2NhbFRvLnZzdWIobG9jYWxGcm9tLCBsb2NhbERpcmVjdGlvbik7XG4gICAgbG9jYWxEaXJlY3Rpb24ubm9ybWFsaXplKCk7XG4gICAgY29uc3QgZnJvbVRvRGlzdGFuY2VTcXVhcmVkID0gbG9jYWxGcm9tLmRpc3RhbmNlU3F1YXJlZChsb2NhbFRvKTtcbiAgICBtZXNoLnRyZWUucmF5UXVlcnkodGhpcywgdHJlZVRyYW5zZm9ybSwgdHJpYW5nbGVzKTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBOID0gdHJpYW5nbGVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCB0cmlhbmdsZXNJbmRleCA9IHRyaWFuZ2xlc1tpXTtcbiAgICAgIG1lc2guZ2V0Tm9ybWFsKHRyaWFuZ2xlc0luZGV4LCBub3JtYWwpOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlXG4gICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWxcbiAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLlxuXG4gICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogM10sIGEpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLlxuXG4gICAgICBhLnZzdWIobG9jYWxGcm9tLCB2ZWN0b3IpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZ1xuXG4gICAgICBjb25zdCBkb3QgPSBsb2NhbERpcmVjdGlvbi5kb3Qobm9ybWFsKTsgLy8gQmFpbCBvdXQgaWYgcmF5IGFuZCBwbGFuZSBhcmUgcGFyYWxsZWxcbiAgICAgIC8vIGlmIChNYXRoLmFicyggZG90ICkgPCB0aGlzLnByZWNpc2lvbil7XG4gICAgICAvLyAgICAgY29udGludWU7XG4gICAgICAvLyB9XG4gICAgICAvLyBjYWxjIGRpc3RhbmNlIHRvIHBsYW5lXG5cbiAgICAgIGNvbnN0IHNjYWxhciA9IG5vcm1hbC5kb3QodmVjdG9yKSAvIGRvdDsgLy8gaWYgbmVnYXRpdmUgZGlzdGFuY2UsIHRoZW4gcGxhbmUgaXMgYmVoaW5kIHJheVxuXG4gICAgICBpZiAoc2NhbGFyIDwgMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXJcblxuXG4gICAgICBsb2NhbERpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTtcbiAgICAgIGludGVyc2VjdFBvaW50LnZhZGQobG9jYWxGcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIEdldCB0cmlhbmdsZSB2ZXJ0aWNlc1xuXG4gICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDFdLCBiKTtcbiAgICAgIG1lc2guZ2V0VmVydGV4KGluZGljZXNbdHJpYW5nbGVzSW5kZXggKiAzICsgMl0sIGMpO1xuICAgICAgY29uc3Qgc3F1YXJlZERpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VTcXVhcmVkKGxvY2FsRnJvbSk7XG5cbiAgICAgIGlmICghKFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGIsIGEsIGMpIHx8IFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGEsIGIsIGMpKSB8fCBzcXVhcmVkRGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZVNxdWFyZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIHRyYW5zZm9ybSBpbnRlcnNlY3Rwb2ludCBhbmQgbm9ybWFsIHRvIHdvcmxkXG5cblxuICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZShxdWF0LCBub3JtYWwsIHdvcmxkTm9ybWFsKTtcbiAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdCwgaW50ZXJzZWN0UG9pbnQsIHdvcmxkSW50ZXJzZWN0UG9pbnQpO1xuICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24od29ybGROb3JtYWwsIHdvcmxkSW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIHRyaWFuZ2xlc0luZGV4KTtcbiAgICB9XG5cbiAgICB0cmlhbmdsZXMubGVuZ3RoID0gMDtcbiAgfVxuICAvKipcbiAgICogQHJldHVybiBUcnVlIGlmIHRoZSBpbnRlcnNlY3Rpb25zIHNob3VsZCBjb250aW51ZVxuICAgKi9cblxuXG4gIHJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBoaXRGYWNlSW5kZXgpIHtcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tO1xuICAgIGNvbnN0IHRvID0gdGhpcy50bztcbiAgICBjb25zdCBkaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyhoaXRQb2ludFdvcmxkKTtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsgLy8gU2tpcCBiYWNrIGZhY2VzP1xuXG4gICAgaWYgKHRoaXMuc2tpcEJhY2tmYWNlcyAmJiBub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKSA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXN1bHQuaGl0RmFjZUluZGV4ID0gdHlwZW9mIGhpdEZhY2VJbmRleCAhPT0gJ3VuZGVmaW5lZCcgPyBoaXRGYWNlSW5kZXggOiAtMTtcblxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFJheS5BTEw6XG4gICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpO1xuICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBSYXkuQ0xPU0VTVDpcbiAgICAgICAgLy8gU3RvcmUgaWYgY2xvc2VyIHRoYW4gY3VycmVudCBjbG9zZXN0XG4gICAgICAgIGlmIChkaXN0YW5jZSA8IHJlc3VsdC5kaXN0YW5jZSB8fCAhcmVzdWx0Lmhhc0hpdCkge1xuICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBSYXkuQU5ZOlxuICAgICAgICAvLyBSZXBvcnQgYW5kIHN0b3AuXG4gICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7XG4gICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTtcbiAgICAgICAgcmVzdWx0LnNob3VsZFN0b3AgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEFzIHBlciBcIkJhcnljZW50cmljIFRlY2huaXF1ZVwiIGFzIG5hbWVkXG4gICAqIHtAbGluayBodHRwczovL3d3dy5ibGFja3Bhd24uY29tL3RleHRzL3BvaW50aW5wb2x5L2RlZmF1bHQuaHRtbCBoZXJlfSBidXQgd2l0aG91dCB0aGUgZGl2aXNpb25cbiAgICovXG5cblxuICBzdGF0aWMgcG9pbnRJblRyaWFuZ2xlKHAsIGEsIGIsIGMpIHtcbiAgICBjLnZzdWIoYSwgdjApO1xuICAgIGIudnN1YihhLCB2MSk7XG4gICAgcC52c3ViKGEsIHYyKTtcbiAgICBjb25zdCBkb3QwMCA9IHYwLmRvdCh2MCk7XG4gICAgY29uc3QgZG90MDEgPSB2MC5kb3QodjEpO1xuICAgIGNvbnN0IGRvdDAyID0gdjAuZG90KHYyKTtcbiAgICBjb25zdCBkb3QxMSA9IHYxLmRvdCh2MSk7XG4gICAgY29uc3QgZG90MTIgPSB2MS5kb3QodjIpO1xuICAgIGxldCB1O1xuICAgIGxldCB2O1xuICAgIHJldHVybiAodSA9IGRvdDExICogZG90MDIgLSBkb3QwMSAqIGRvdDEyKSA+PSAwICYmICh2ID0gZG90MDAgKiBkb3QxMiAtIGRvdDAxICogZG90MDIpID49IDAgJiYgdSArIHYgPCBkb3QwMCAqIGRvdDExIC0gZG90MDEgKiBkb3QwMTtcbiAgfVxuXG59XG5SYXkuQ0xPU0VTVCA9IFJBWV9NT0RFUy5DTE9TRVNUO1xuUmF5LkFOWSA9IFJBWV9NT0RFUy5BTlk7XG5SYXkuQUxMID0gUkFZX01PREVTLkFMTDtcbmNvbnN0IHRtcEFBQkIkMSA9IG5ldyBBQUJCKCk7XG5jb25zdCB0bXBBcnJheSA9IFtdO1xuY29uc3QgdjEgPSBuZXcgVmVjMygpO1xuY29uc3QgdjIgPSBuZXcgVmVjMygpO1xuY29uc3QgaW50ZXJzZWN0Qm9keV94aSA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RCb2R5X3FpID0gbmV3IFF1YXRlcm5pb24oKTtcbmNvbnN0IGludGVyc2VjdFBvaW50ID0gbmV3IFZlYzMoKTtcbmNvbnN0IGEgPSBuZXcgVmVjMygpO1xuY29uc3QgYiA9IG5ldyBWZWMzKCk7XG5jb25zdCBjID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdENvbnZleE9wdGlvbnMgPSB7XG4gIGZhY2VMaXN0OiBbMF1cbn07XG5jb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheSA9IG5ldyBSYXkoKTtcbmNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4ID0gW107XG5jb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX2ludGVyc2VjdGlvblBvaW50ID0gbmV3IFZlYzMoKTtcbmNvbnN0IFJheV9pbnRlcnNlY3RTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdENvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgaW50ZXJzZWN0Q29udmV4X3ZlY3RvciA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRGlyZWN0aW9uID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxGcm9tID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbyA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfd29ybGRJbnRlcnNlY3RQb2ludCA9IG5ldyBWZWMzKCk7XG5uZXcgQUFCQigpO1xuY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXMgPSBbXTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcbmNvbnN0IHYwID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdCA9IG5ldyBWZWMzKCk7XG5cbmZ1bmN0aW9uIGRpc3RhbmNlRnJvbUludGVyc2VjdGlvbihmcm9tLCBkaXJlY3Rpb24sIHBvc2l0aW9uKSB7XG4gIC8vIHYwIGlzIHZlY3RvciBmcm9tIGZyb20gdG8gcG9zaXRpb25cbiAgcG9zaXRpb24udnN1Yihmcm9tLCB2MCk7XG4gIGNvbnN0IGRvdCA9IHYwLmRvdChkaXJlY3Rpb24pOyAvLyBpbnRlcnNlY3QgPSBkaXJlY3Rpb24qZG90ICsgZnJvbVxuXG4gIGRpcmVjdGlvbi5zY2FsZShkb3QsIGludGVyc2VjdCk7XG4gIGludGVyc2VjdC52YWRkKGZyb20sIGludGVyc2VjdCk7XG4gIGNvbnN0IGRpc3RhbmNlID0gcG9zaXRpb24uZGlzdGFuY2VUbyhpbnRlcnNlY3QpO1xuICByZXR1cm4gZGlzdGFuY2U7XG59XG5cbi8qKlxuICogU3dlZXAgYW5kIHBydW5lIGJyb2FkcGhhc2UgYWxvbmcgb25lIGF4aXMuXG4gKi9cbmNsYXNzIFNBUEJyb2FkcGhhc2UgZXh0ZW5kcyBCcm9hZHBoYXNlIHtcbiAgLyoqXG4gICAqIExpc3Qgb2YgYm9kaWVzIGN1cnJlbnRseSBpbiB0aGUgYnJvYWRwaGFzZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggaW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBeGlzIHRvIHNvcnQgdGhlIGJvZGllcyBhbG9uZy5cbiAgICogU2V0IHRvIDAgZm9yIHggYXhpcywgYW5kIDEgZm9yIHkgYXhpcy5cbiAgICogRm9yIGJlc3QgcGVyZm9ybWFuY2UsIHBpY2sgdGhlIGF4aXMgd2hlcmUgYm9kaWVzIGFyZSBtb3N0IGRpc3RyaWJ1dGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kcyBvZiB0d28gYm9kaWVzIG92ZXJsYXAsIGFsb25nIHRoZSBnaXZlbiBTQVAgYXhpcy5cbiAgICovXG4gIHN0YXRpYyBjaGVja0JvdW5kcyhiaSwgYmosIGF4aXNJbmRleCkge1xuICAgIGxldCBiaVBvcztcbiAgICBsZXQgYmpQb3M7XG5cbiAgICBpZiAoYXhpc0luZGV4ID09PSAwKSB7XG4gICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLng7XG4gICAgICBialBvcyA9IGJqLnBvc2l0aW9uLng7XG4gICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHtcbiAgICAgIGJpUG9zID0gYmkucG9zaXRpb24ueTtcbiAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueTtcbiAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikge1xuICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi56O1xuICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi56O1xuICAgIH1cblxuICAgIGNvbnN0IHJpID0gYmkuYm91bmRpbmdSYWRpdXMsXG4gICAgICAgICAgcmogPSBiai5ib3VuZGluZ1JhZGl1cyxcbiAgICAgICAgICBib3VuZEEyID0gYmlQb3MgKyByaSxcbiAgICAgICAgICBib3VuZEIxID0gYmpQb3MgLSByajtcbiAgICByZXR1cm4gYm91bmRCMSA8IGJvdW5kQTI7XG4gIH0gLy8gTm90ZTogdGhlc2UgYXJlIGlkZW50aWNhbCwgc2F2ZSBmb3IgeC95L3ogbG93ZXJib3VuZFxuXG4gIC8qKlxuICAgKiBpbnNlcnRpb25Tb3J0WFxuICAgKi9cblxuXG4gIHN0YXRpYyBpbnNlcnRpb25Tb3J0WChhKSB7XG4gICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3QgdiA9IGFbaV07XG4gICAgICBsZXQgajtcblxuICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC54IDw9IHYuYWFiYi5sb3dlckJvdW5kLngpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGFbaiArIDFdID0gYVtqXTtcbiAgICAgIH1cblxuICAgICAgYVtqICsgMV0gPSB2O1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9XG4gIC8qKlxuICAgKiBpbnNlcnRpb25Tb3J0WVxuICAgKi9cblxuXG4gIHN0YXRpYyBpbnNlcnRpb25Tb3J0WShhKSB7XG4gICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3QgdiA9IGFbaV07XG4gICAgICBsZXQgajtcblxuICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC55IDw9IHYuYWFiYi5sb3dlckJvdW5kLnkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGFbaiArIDFdID0gYVtqXTtcbiAgICAgIH1cblxuICAgICAgYVtqICsgMV0gPSB2O1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9XG4gIC8qKlxuICAgKiBpbnNlcnRpb25Tb3J0WlxuICAgKi9cblxuXG4gIHN0YXRpYyBpbnNlcnRpb25Tb3J0WihhKSB7XG4gICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3QgdiA9IGFbaV07XG4gICAgICBsZXQgajtcblxuICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC56IDw9IHYuYWFiYi5sb3dlckJvdW5kLnopIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGFbaiArIDFdID0gYVtqXTtcbiAgICAgIH1cblxuICAgICAgYVtqICsgMV0gPSB2O1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9XG5cbiAgY29uc3RydWN0b3Iod29ybGQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYXhpc0xpc3QgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZCA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNJbmRleCA9IHZvaWQgMDtcbiAgICB0aGlzLl9hZGRCb2R5SGFuZGxlciA9IHZvaWQgMDtcbiAgICB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlciA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNMaXN0ID0gW107XG4gICAgdGhpcy53b3JsZCA9IG51bGw7XG4gICAgdGhpcy5heGlzSW5kZXggPSAwO1xuICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDtcblxuICAgIHRoaXMuX2FkZEJvZHlIYW5kbGVyID0gZXZlbnQgPT4ge1xuICAgICAgYXhpc0xpc3QucHVzaChldmVudC5ib2R5KTtcbiAgICB9O1xuXG4gICAgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIgPSBldmVudCA9PiB7XG4gICAgICBjb25zdCBpZHggPSBheGlzTGlzdC5pbmRleE9mKGV2ZW50LmJvZHkpO1xuXG4gICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICBheGlzTGlzdC5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHdvcmxkKSB7XG4gICAgICB0aGlzLnNldFdvcmxkKHdvcmxkKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoYW5nZSB0aGUgd29ybGRcbiAgICovXG5cblxuICBzZXRXb3JsZCh3b3JsZCkge1xuICAgIC8vIENsZWFyIHRoZSBvbGQgYXhpcyBhcnJheVxuICAgIHRoaXMuYXhpc0xpc3QubGVuZ3RoID0gMDsgLy8gQWRkIGFsbCBib2RpZXMgZnJvbSB0aGUgbmV3IHdvcmxkXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5heGlzTGlzdC5wdXNoKHdvcmxkLmJvZGllc1tpXSk7XG4gICAgfSAvLyBSZW1vdmUgb2xkIGhhbmRsZXJzLCBpZiBhbnlcblxuXG4gICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkQm9keScsIHRoaXMuX2FkZEJvZHlIYW5kbGVyKTtcbiAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZW1vdmVCb2R5JywgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIpOyAvLyBBZGQgaGFuZGxlcnMgdG8gdXBkYXRlIHRoZSBsaXN0IG9mIGJvZGllcy5cblxuICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7XG4gICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncmVtb3ZlQm9keScsIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyKTtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIENvbGxlY3QgYWxsIGNvbGxpc2lvbiBwYWlyc1xuICAgKi9cblxuXG4gIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0O1xuICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoO1xuICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4O1xuICAgIGxldCBpO1xuICAgIGxldCBqO1xuXG4gICAgaWYgKHRoaXMuZGlydHkpIHtcbiAgICAgIHRoaXMuc29ydExpc3QoKTtcbiAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICB9IC8vIExvb2sgdGhyb3VnaCB0aGUgbGlzdFxuXG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldO1xuXG4gICAgICBmb3IgKGogPSBpICsgMTsgaiA8IE47IGorKykge1xuICAgICAgICBjb25zdCBiaiA9IGJvZGllc1tqXTtcblxuICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFTQVBCcm9hZHBoYXNlLmNoZWNrQm91bmRzKGJpLCBiaiwgYXhpc0luZGV4KSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcDEsIHAyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzb3J0TGlzdCgpIHtcbiAgICBjb25zdCBheGlzTGlzdCA9IHRoaXMuYXhpc0xpc3Q7XG4gICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7XG4gICAgY29uc3QgTiA9IGF4aXNMaXN0Lmxlbmd0aDsgLy8gVXBkYXRlIEFBQkJzXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiaSA9IGF4aXNMaXN0W2ldO1xuXG4gICAgICBpZiAoYmkuYWFiYk5lZWRzVXBkYXRlKSB7XG4gICAgICAgIGJpLnVwZGF0ZUFBQkIoKTtcbiAgICAgIH1cbiAgICB9IC8vIFNvcnQgdGhlIGxpc3RcblxuXG4gICAgaWYgKGF4aXNJbmRleCA9PT0gMCkge1xuICAgICAgU0FQQnJvYWRwaGFzZS5pbnNlcnRpb25Tb3J0WChheGlzTGlzdCk7XG4gICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHtcbiAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFkoYXhpc0xpc3QpO1xuICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAyKSB7XG4gICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRaKGF4aXNMaXN0KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSB2YXJpYW5jZSBvZiB0aGUgYm9keSBwb3NpdGlvbnMgYW5kIGVzdGltYXRlcyB0aGUgYmVzdCBheGlzIHRvIHVzZS5cbiAgICogV2lsbCBhdXRvbWF0aWNhbGx5IHNldCBwcm9wZXJ0eSBgYXhpc0luZGV4YC5cbiAgICovXG5cblxuICBhdXRvRGV0ZWN0QXhpcygpIHtcbiAgICBsZXQgc3VtWCA9IDA7XG4gICAgbGV0IHN1bVgyID0gMDtcbiAgICBsZXQgc3VtWSA9IDA7XG4gICAgbGV0IHN1bVkyID0gMDtcbiAgICBsZXQgc3VtWiA9IDA7XG4gICAgbGV0IHN1bVoyID0gMDtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0O1xuICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoO1xuICAgIGNvbnN0IGludk4gPSAxIC8gTjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07XG4gICAgICBjb25zdCBjZW50ZXJYID0gYi5wb3NpdGlvbi54O1xuICAgICAgc3VtWCArPSBjZW50ZXJYO1xuICAgICAgc3VtWDIgKz0gY2VudGVyWCAqIGNlbnRlclg7XG4gICAgICBjb25zdCBjZW50ZXJZID0gYi5wb3NpdGlvbi55O1xuICAgICAgc3VtWSArPSBjZW50ZXJZO1xuICAgICAgc3VtWTIgKz0gY2VudGVyWSAqIGNlbnRlclk7XG4gICAgICBjb25zdCBjZW50ZXJaID0gYi5wb3NpdGlvbi56O1xuICAgICAgc3VtWiArPSBjZW50ZXJaO1xuICAgICAgc3VtWjIgKz0gY2VudGVyWiAqIGNlbnRlclo7XG4gICAgfVxuXG4gICAgY29uc3QgdmFyaWFuY2VYID0gc3VtWDIgLSBzdW1YICogc3VtWCAqIGludk47XG4gICAgY29uc3QgdmFyaWFuY2VZID0gc3VtWTIgLSBzdW1ZICogc3VtWSAqIGludk47XG4gICAgY29uc3QgdmFyaWFuY2VaID0gc3VtWjIgLSBzdW1aICogc3VtWiAqIGludk47XG5cbiAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VZKSB7XG4gICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VaKSB7XG4gICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHZhcmlhbmNlWSA+IHZhcmlhbmNlWikge1xuICAgICAgdGhpcy5heGlzSW5kZXggPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmF4aXNJbmRleCA9IDI7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLlxuICAgKiBAcGFyYW0gcmVzdWx0IEFuIGFycmF5IHRvIHN0b3JlIHJlc3VsdGluZyBib2RpZXMgaW4uXG4gICAqL1xuXG5cbiAgYWFiYlF1ZXJ5KHdvcmxkLCBhYWJiLCByZXN1bHQgPSBbXSkge1xuICAgIGlmICh0aGlzLmRpcnR5KSB7XG4gICAgICB0aGlzLnNvcnRMaXN0KCk7XG4gICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7XG4gICAgbGV0IGF4aXMgPSAneCc7XG5cbiAgICBpZiAoYXhpc0luZGV4ID09PSAxKSB7XG4gICAgICBheGlzID0gJ3knO1xuICAgIH1cblxuICAgIGlmIChheGlzSW5kZXggPT09IDIpIHtcbiAgICAgIGF4aXMgPSAneic7XG4gICAgfVxuXG4gICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0O1xuICAgIGFhYmIubG93ZXJCb3VuZFtheGlzXTtcbiAgICBhYWJiLnVwcGVyQm91bmRbYXhpc107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4aXNMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBiID0gYXhpc0xpc3RbaV07XG5cbiAgICAgIGlmIChiLmFhYmJOZWVkc1VwZGF0ZSkge1xuICAgICAgICBiLnVwZGF0ZUFBQkIoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGIuYWFiYi5vdmVybGFwcyhhYWJiKSkge1xuICAgICAgICByZXN1bHQucHVzaChiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbn1cblxuY2xhc3MgVXRpbHMge1xuICAvKipcbiAgICogRXh0ZW5kIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMuXG4gICAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zIG9iamVjdC4gTWF5IGJlIGZhbHN5OiBpbiB0aGlzIGNhc2UsIGEgbmV3IG9iamVjdCBpcyBjcmVhdGVkIGFuZCByZXR1cm5lZC5cbiAgICogQHBhcmFtIGRlZmF1bHRzIEFuIG9iamVjdCBjb250YWluaW5nIGRlZmF1bHQgdmFsdWVzLlxuICAgKiBAcmV0dXJuIFRoZSBtb2RpZmllZCBvcHRpb25zIG9iamVjdC5cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0cyhvcHRpb25zID0ge30sIGRlZmF1bHRzKSB7XG4gICAgZm9yIChsZXQga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICBpZiAoIShrZXkgaW4gb3B0aW9ucykpIHtcbiAgICAgICAgb3B0aW9uc1trZXldID0gZGVmYXVsdHNba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuXG59XG5cbi8qKlxuICogQ29uc3RyYWludCBiYXNlIGNsYXNzXG4gKi9cbmNsYXNzIENvbnN0cmFpbnQge1xuICAvKipcbiAgICogRXF1YXRpb25zIHRvIGJlIHNvbHZlZCBpbiB0aGlzIGNvbnN0cmFpbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBCb2R5IEEuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBCb2R5IEIuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTZXQgdG8gZmFsc2UgaWYgeW91IGRvbid0IHdhbnQgdGhlIGJvZGllcyB0byBjb2xsaWRlIHdoZW4gdGhleSBhcmUgY29ubmVjdGVkLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmVxdWF0aW9ucyA9IHZvaWQgMDtcbiAgICB0aGlzLmJvZHlBID0gdm9pZCAwO1xuICAgIHRoaXMuYm9keUIgPSB2b2lkIDA7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSB2b2lkIDA7XG4gICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHtcbiAgICAgIGNvbGxpZGVDb25uZWN0ZWQ6IHRydWUsXG4gICAgICB3YWtlVXBCb2RpZXM6IHRydWVcbiAgICB9KTtcbiAgICB0aGlzLmVxdWF0aW9ucyA9IFtdO1xuICAgIHRoaXMuYm9keUEgPSBib2R5QTtcbiAgICB0aGlzLmJvZHlCID0gYm9keUI7XG4gICAgdGhpcy5pZCA9IENvbnN0cmFpbnQuaWRDb3VudGVyKys7XG4gICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkO1xuXG4gICAgaWYgKG9wdGlvbnMud2FrZVVwQm9kaWVzKSB7XG4gICAgICBpZiAoYm9keUEpIHtcbiAgICAgICAgYm9keUEud2FrZVVwKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChib2R5Qikge1xuICAgICAgICBib2R5Qi53YWtlVXAoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBhbGwgdGhlIGVxdWF0aW9ucyB3aXRoIGRhdGEuXG4gICAqL1xuXG5cbiAgdXBkYXRlKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignbWV0aG9kIHVwZGF0ZSgpIG5vdCBpbXBsbWVtZW50ZWQgaW4gdGhpcyBDb25zdHJhaW50IHN1YmNsYXNzIScpO1xuICB9XG4gIC8qKlxuICAgKiBFbmFibGVzIGFsbCBlcXVhdGlvbnMgaW4gdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG5cbiAgZW5hYmxlKCkge1xuICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGVxc1tpXS5lbmFibGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIERpc2FibGVzIGFsbCBlcXVhdGlvbnMgaW4gdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG5cbiAgZGlzYWJsZSgpIHtcbiAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9ucztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBlcXNbaV0uZW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG59XG5Db25zdHJhaW50LmlkQ291bnRlciA9IDA7XG5cbi8qKlxuICogQW4gZWxlbWVudCBjb250YWluaW5nIDYgZW50cmllcywgMyBzcGF0aWFsIGFuZCAzIHJvdGF0aW9uYWwgZGVncmVlcyBvZiBmcmVlZG9tLlxuICovXG5cbmNsYXNzIEphY29iaWFuRWxlbWVudCB7XG4gIC8qKlxuICAgKiBzcGF0aWFsXG4gICAqL1xuXG4gIC8qKlxuICAgKiByb3RhdGlvbmFsXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNwYXRpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5yb3RhdGlvbmFsID0gdm9pZCAwO1xuICAgIHRoaXMuc3BhdGlhbCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5yb3RhdGlvbmFsID0gbmV3IFZlYzMoKTtcbiAgfVxuICAvKipcbiAgICogTXVsdGlwbHkgd2l0aCBvdGhlciBKYWNvYmlhbkVsZW1lbnRcbiAgICovXG5cblxuICBtdWx0aXBseUVsZW1lbnQoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LnNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyBlbGVtZW50LnJvdGF0aW9uYWwuZG90KHRoaXMucm90YXRpb25hbCk7XG4gIH1cbiAgLyoqXG4gICAqIE11bHRpcGx5IHdpdGggdHdvIHZlY3RvcnNcbiAgICovXG5cblxuICBtdWx0aXBseVZlY3RvcnMoc3BhdGlhbCwgcm90YXRpb25hbCkge1xuICAgIHJldHVybiBzcGF0aWFsLmRvdCh0aGlzLnNwYXRpYWwpICsgcm90YXRpb25hbC5kb3QodGhpcy5yb3RhdGlvbmFsKTtcbiAgfVxuXG59XG5cbi8qKlxuICogRXF1YXRpb24gYmFzZSBjbGFzcy5cbiAqXG4gKiBgYWAsIGBiYCBhbmQgYGVwc2AgYXJlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci81RFYwNTgvVlQxNS9sZWN0dXJlcy9TUE9PS2xhYm5vdGVzLnBkZiBTUE9PS30gcGFyYW1ldGVycyB0aGF0IGRlZmF1bHQgdG8gYDAuMGAuIFNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3NjaHRlcHBlL2Nhbm5vbi5qcy9pc3N1ZXMvMjM4I2lzc3VlY29tbWVudC0xNDcxNzIzMjcgdGhpcyBleGNoYW5nZX0gZm9yIG1vcmUgZGV0YWlscyBvbiBDYW5ub24ncyBwaHlzaWNzIGltcGxlbWVudGF0aW9uLlxuICovXG5jbGFzcyBFcXVhdGlvbiB7XG4gIC8qKlxuICAgKiBNaW5pbXVtIChyZWFkOiBuZWdhdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBNYXhpbXVtIChyZWFkOiBwb3NpdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTUE9PSyBwYXJhbWV0ZXJcbiAgICovXG5cbiAgLyoqXG4gICAqIFNQT09LIHBhcmFtZXRlclxuICAgKi9cblxuICAvKipcbiAgICogU1BPT0sgcGFyYW1ldGVyXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBIG51bWJlciwgcHJvcG9ydGlvbmFsIHRvIHRoZSBmb3JjZSBhZGRlZCB0byB0aGUgYm9kaWVzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYmksIGJqLCBtaW5Gb3JjZSA9IC0xZTYsIG1heEZvcmNlID0gMWU2KSB7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLm1pbkZvcmNlID0gdm9pZCAwO1xuICAgIHRoaXMubWF4Rm9yY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5iaSA9IHZvaWQgMDtcbiAgICB0aGlzLmJqID0gdm9pZCAwO1xuICAgIHRoaXMuc2kgPSB2b2lkIDA7XG4gICAgdGhpcy5zaiA9IHZvaWQgMDtcbiAgICB0aGlzLmEgPSB2b2lkIDA7XG4gICAgdGhpcy5iID0gdm9pZCAwO1xuICAgIHRoaXMuZXBzID0gdm9pZCAwO1xuICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QSA9IHZvaWQgMDtcbiAgICB0aGlzLmphY29iaWFuRWxlbWVudEIgPSB2b2lkIDA7XG4gICAgdGhpcy5lbmFibGVkID0gdm9pZCAwO1xuICAgIHRoaXMubXVsdGlwbGllciA9IHZvaWQgMDtcbiAgICB0aGlzLmlkID0gRXF1YXRpb24uaWRDb3VudGVyKys7XG4gICAgdGhpcy5taW5Gb3JjZSA9IG1pbkZvcmNlO1xuICAgIHRoaXMubWF4Rm9yY2UgPSBtYXhGb3JjZTtcbiAgICB0aGlzLmJpID0gYmk7XG4gICAgdGhpcy5iaiA9IGJqO1xuICAgIHRoaXMuYSA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyXG5cbiAgICB0aGlzLmIgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlclxuXG4gICAgdGhpcy5lcHMgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlclxuXG4gICAgdGhpcy5qYWNvYmlhbkVsZW1lbnRBID0gbmV3IEphY29iaWFuRWxlbWVudCgpO1xuICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QiA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTtcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMubXVsdGlwbGllciA9IDA7XG4gICAgdGhpcy5zZXRTcG9va1BhcmFtcygxZTcsIDQsIDEgLyA2MCk7IC8vIFNldCB0eXBpY2FsIHNwb29rIHBhcmFtc1xuICB9XG4gIC8qKlxuICAgKiBSZWNhbGN1bGF0ZXMgYSwgYiwgYW5kIGVwcy5cbiAgICpcbiAgICogVGhlIEVxdWF0aW9uIGNvbnN0cnVjdG9yIHNldHMgdHlwaWNhbCBTUE9PSyBwYXJhbWV0ZXJzIGFzIHN1Y2g6XG4gICAqICogYHN0aWZmbmVzc2AgPSAxZTdcbiAgICogKiBgcmVsYXhhdGlvbmAgPSA0XG4gICAqICogYHRpbWVTdGVwYD0gMSAvIDYwLCBfbm90ZSB0aGUgaGFyZGNvZGVkIHJlZnJlc2ggcmF0ZS5fXG4gICAqL1xuXG5cbiAgc2V0U3Bvb2tQYXJhbXMoc3RpZmZuZXNzLCByZWxheGF0aW9uLCB0aW1lU3RlcCkge1xuICAgIGNvbnN0IGQgPSByZWxheGF0aW9uO1xuICAgIGNvbnN0IGsgPSBzdGlmZm5lc3M7XG4gICAgY29uc3QgaCA9IHRpbWVTdGVwO1xuICAgIHRoaXMuYSA9IDQuMCAvIChoICogKDEgKyA0ICogZCkpO1xuICAgIHRoaXMuYiA9IDQuMCAqIGQgLyAoMSArIDQgKiBkKTtcbiAgICB0aGlzLmVwcyA9IDQuMCAvIChoICogaCAqIGsgKiAoMSArIDQgKiBkKSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIFNQT09LIGVxdWF0aW9uXG4gICAqL1xuXG5cbiAgY29tcHV0ZUIoYSwgYiwgaCkge1xuICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTtcbiAgICBjb25zdCBHcSA9IHRoaXMuY29tcHV0ZUdxKCk7XG4gICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTtcbiAgICByZXR1cm4gLUdxICogYSAtIEdXICogYiAtIEdpTWYgKiBoO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyBHKnEsIHdoZXJlIHEgYXJlIHRoZSBnZW5lcmFsaXplZCBib2R5IGNvb3JkaW5hdGVzXG4gICAqL1xuXG5cbiAgY29tcHV0ZUdxKCkge1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IGJpID0gdGhpcy5iaTtcbiAgICBjb25zdCBiaiA9IHRoaXMuYmo7XG4gICAgY29uc3QgeGkgPSBiaS5wb3NpdGlvbjtcbiAgICBjb25zdCB4aiA9IGJqLnBvc2l0aW9uO1xuICAgIHJldHVybiBHQS5zcGF0aWFsLmRvdCh4aSkgKyBHQi5zcGF0aWFsLmRvdCh4aik7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGVzIEcqVywgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllc1xuICAgKi9cblxuXG4gIGNvbXB1dGVHVygpIHtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7XG4gICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTtcbiAgICBjb25zdCB3aSA9IGJpLmFuZ3VsYXJWZWxvY2l0eTtcbiAgICBjb25zdCB3aiA9IGJqLmFuZ3VsYXJWZWxvY2l0eTtcbiAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZXMgRypXbGFtYmRhLCB3aGVyZSBXIGFyZSB0aGUgYm9keSB2ZWxvY2l0aWVzXG4gICAqL1xuXG5cbiAgY29tcHV0ZUdXbGFtYmRhKCkge1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IGJpID0gdGhpcy5iaTtcbiAgICBjb25zdCBiaiA9IHRoaXMuYmo7XG4gICAgY29uc3QgdmkgPSBiaS52bGFtYmRhO1xuICAgIGNvbnN0IHZqID0gYmoudmxhbWJkYTtcbiAgICBjb25zdCB3aSA9IGJpLndsYW1iZGE7XG4gICAgY29uc3Qgd2ogPSBiai53bGFtYmRhO1xuICAgIHJldHVybiBHQS5tdWx0aXBseVZlY3RvcnModmksIHdpKSArIEdCLm11bHRpcGx5VmVjdG9ycyh2aiwgd2opO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyBHKmludihNKSpmLCB3aGVyZSBNIGlzIHRoZSBtYXNzIG1hdHJpeCB3aXRoIGRpYWdvbmFsIGJsb2NrcyBmb3IgZWFjaCBib2R5LCBhbmQgZiBhcmUgdGhlIGZvcmNlcyBvbiB0aGUgYm9kaWVzLlxuICAgKi9cblxuXG4gIGNvbXB1dGVHaU1mKCkge1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IGJpID0gdGhpcy5iaTtcbiAgICBjb25zdCBiaiA9IHRoaXMuYmo7XG4gICAgY29uc3QgZmkgPSBiaS5mb3JjZTtcbiAgICBjb25zdCB0aSA9IGJpLnRvcnF1ZTtcbiAgICBjb25zdCBmaiA9IGJqLmZvcmNlO1xuICAgIGNvbnN0IHRqID0gYmoudG9ycXVlO1xuICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlO1xuICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlO1xuICAgIGZpLnNjYWxlKGludk1hc3NpLCBpTWZpKTtcbiAgICBmai5zY2FsZShpbnZNYXNzaiwgaU1maik7XG4gICAgYmkuaW52SW5lcnRpYVdvcmxkU29sdmUudm11bHQodGksIGludklpX3ZtdWx0X3RhdWkpO1xuICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRqLCBpbnZJal92bXVsdF90YXVqKTtcbiAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKGlNZmksIGludklpX3ZtdWx0X3RhdWkpICsgR0IubXVsdGlwbHlWZWN0b3JzKGlNZmosIGludklqX3ZtdWx0X3RhdWopO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyBHKmludihNKSpHJ1xuICAgKi9cblxuXG4gIGNvbXB1dGVHaU1HdCgpIHtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlO1xuICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlO1xuICAgIGNvbnN0IGludklpID0gYmkuaW52SW5lcnRpYVdvcmxkU29sdmU7XG4gICAgY29uc3QgaW52SWogPSBiai5pbnZJbmVydGlhV29ybGRTb2x2ZTtcbiAgICBsZXQgcmVzdWx0ID0gaW52TWFzc2kgKyBpbnZNYXNzajtcbiAgICBpbnZJaS52bXVsdChHQS5yb3RhdGlvbmFsLCB0bXApO1xuICAgIHJlc3VsdCArPSB0bXAuZG90KEdBLnJvdGF0aW9uYWwpO1xuICAgIGludklqLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRtcCk7XG4gICAgcmVzdWx0ICs9IHRtcC5kb3QoR0Iucm90YXRpb25hbCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQWRkIGNvbnN0cmFpbnQgdmVsb2NpdHkgdG8gdGhlIGJvZGllcy5cbiAgICovXG5cblxuICBhZGRUb1dsYW1iZGEoZGVsdGFsYW1iZGEpIHtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IHRlbXAgPSBhZGRUb1dsYW1iZGFfdGVtcDsgLy8gQWRkIHRvIGxpbmVhciB2ZWxvY2l0eVxuICAgIC8vIHZfbGFtYmRhICs9IGludihNKSAqIGRlbHRhX2xhbWJhICogR1xuXG4gICAgYmkudmxhbWJkYS5hZGRTY2FsZWRWZWN0b3IoYmkuaW52TWFzc1NvbHZlICogZGVsdGFsYW1iZGEsIEdBLnNwYXRpYWwsIGJpLnZsYW1iZGEpO1xuICAgIGJqLnZsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGJqLmludk1hc3NTb2x2ZSAqIGRlbHRhbGFtYmRhLCBHQi5zcGF0aWFsLCBiai52bGFtYmRhKTsgLy8gQWRkIHRvIGFuZ3VsYXIgdmVsb2NpdHlcblxuICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRlbXApO1xuICAgIGJpLndsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGRlbHRhbGFtYmRhLCB0ZW1wLCBiaS53bGFtYmRhKTtcbiAgICBiai5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQi5yb3RhdGlvbmFsLCB0ZW1wKTtcbiAgICBiai53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmoud2xhbWJkYSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGUgdGhlIGRlbm9taW5hdG9yIHBhcnQgb2YgdGhlIFNQT09LIGVxdWF0aW9uOiBDID0gRyppbnYoTSkqRycgKyBlcHNcbiAgICovXG5cblxuICBjb21wdXRlQygpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wdXRlR2lNR3QoKSArIHRoaXMuZXBzO1xuICB9XG5cbn1cbkVxdWF0aW9uLmlkQ291bnRlciA9IDA7XG5jb25zdCBpTWZpID0gbmV3IFZlYzMoKTtcbmNvbnN0IGlNZmogPSBuZXcgVmVjMygpO1xuY29uc3QgaW52SWlfdm11bHRfdGF1aSA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnZJal92bXVsdF90YXVqID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRtcCA9IG5ldyBWZWMzKCk7XG5jb25zdCBhZGRUb1dsYW1iZGFfdGVtcCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQ29udGFjdC9ub24tcGVuZXRyYXRpb24gY29uc3RyYWludCBlcXVhdGlvblxuICovXG5jbGFzcyBDb250YWN0RXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7XG4gIC8qKlxuICAgKiBcImJvdW5jaW5lc3NcIjogdTEgPSAtZSp1MFxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgZ29lcyBmcm9tIHRoZSBjZW50ZXIgb2YgYmkgdG8gdGhlIGNvbnRhY3QgcG9pbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXb3JsZC1vcmllbnRlZCB2ZWN0b3IgdGhhdCBzdGFydHMgaW4gYm9keSBqIHBvc2l0aW9uIGFuZCBnb2VzIHRvIHRoZSBjb250YWN0IHBvaW50LlxuICAgKi9cblxuICAvKipcbiAgICogQ29udGFjdCBub3JtYWwsIHBvaW50aW5nIG91dCBvZiBib2R5IGkuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlID0gMWU2KSB7XG4gICAgc3VwZXIoYm9keUEsIGJvZHlCLCAwLCBtYXhGb3JjZSk7XG4gICAgdGhpcy5yZXN0aXR1dGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnJpID0gdm9pZCAwO1xuICAgIHRoaXMucmogPSB2b2lkIDA7XG4gICAgdGhpcy5uaSA9IHZvaWQgMDtcbiAgICB0aGlzLnJlc3RpdHV0aW9uID0gMC4wO1xuICAgIHRoaXMucmkgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucmogPSBuZXcgVmVjMygpO1xuICAgIHRoaXMubmkgPSBuZXcgVmVjMygpO1xuICB9XG5cbiAgY29tcHV0ZUIoaCkge1xuICAgIGNvbnN0IGEgPSB0aGlzLmE7XG4gICAgY29uc3QgYiA9IHRoaXMuYjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IHJpID0gdGhpcy5yaTtcbiAgICBjb25zdCByaiA9IHRoaXMucmo7XG4gICAgY29uc3Qgcml4biA9IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMTtcbiAgICBjb25zdCByanhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyO1xuICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7XG4gICAgY29uc3Qgd2kgPSBiaS5hbmd1bGFyVmVsb2NpdHk7XG4gICAgYmkuZm9yY2U7XG4gICAgYmkudG9ycXVlO1xuICAgIGNvbnN0IHZqID0gYmoudmVsb2NpdHk7XG4gICAgY29uc3Qgd2ogPSBiai5hbmd1bGFyVmVsb2NpdHk7XG4gICAgYmouZm9yY2U7XG4gICAgYmoudG9ycXVlO1xuICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzO1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IG4gPSB0aGlzLm5pOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHNcblxuICAgIHJpLmNyb3NzKG4sIHJpeG4pO1xuICAgIHJqLmNyb3NzKG4sIHJqeG4pOyAvLyBnID0geGorcmogLSh4aStyaSlcbiAgICAvLyBHID0gWyAtbmkgIC1yaXhuICBuaSAgcmp4biBdXG5cbiAgICBuLm5lZ2F0ZShHQS5zcGF0aWFsKTtcbiAgICByaXhuLm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTtcbiAgICBHQi5zcGF0aWFsLmNvcHkobik7XG4gICAgR0Iucm90YXRpb25hbC5jb3B5KHJqeG4pOyAvLyBDYWxjdWxhdGUgdGhlIHBlbmV0cmF0aW9uIHZlY3RvclxuXG4gICAgcGVuZXRyYXRpb25WZWMuY29weShiai5wb3NpdGlvbik7XG4gICAgcGVuZXRyYXRpb25WZWMudmFkZChyaiwgcGVuZXRyYXRpb25WZWMpO1xuICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIoYmkucG9zaXRpb24sIHBlbmV0cmF0aW9uVmVjKTtcbiAgICBwZW5ldHJhdGlvblZlYy52c3ViKHJpLCBwZW5ldHJhdGlvblZlYyk7XG4gICAgY29uc3QgZyA9IG4uZG90KHBlbmV0cmF0aW9uVmVjKTsgLy8gQ29tcHV0ZSBpdGVyYXRpb25cblxuICAgIGNvbnN0IGVQbHVzT25lID0gdGhpcy5yZXN0aXR1dGlvbiArIDE7XG4gICAgY29uc3QgR1cgPSBlUGx1c09uZSAqIHZqLmRvdChuKSAtIGVQbHVzT25lICogdmkuZG90KG4pICsgd2ouZG90KHJqeG4pIC0gd2kuZG90KHJpeG4pO1xuICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7XG4gICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mO1xuICAgIHJldHVybiBCO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgcmVsYXRpdmUgdmVsb2NpdHkgaW4gdGhlIGNvbnRhY3QgcG9pbnQuXG4gICAqL1xuXG5cbiAgZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCgpIHtcbiAgICBjb25zdCB2aSA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZpO1xuICAgIGNvbnN0IHZqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmo7XG4gICAgY29uc3QgeGkgPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aTtcbiAgICBjb25zdCB4aiA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hqO1xuICAgIGNvbnN0IHJlbFZlbCA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbDtcbiAgICB0aGlzLmJpLnBvc2l0aW9uLnZhZGQodGhpcy5yaSwgeGkpO1xuICAgIHRoaXMuYmoucG9zaXRpb24udmFkZCh0aGlzLnJqLCB4aik7XG4gICAgdGhpcy5iaS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh4aSwgdmkpO1xuICAgIHRoaXMuYmouZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoeGosIHZqKTtcbiAgICB2aS52c3ViKHZqLCByZWxWZWwpO1xuICAgIHJldHVybiB0aGlzLm5pLmRvdChyZWxWZWwpO1xuICB9XG5cbn1cbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMSA9IG5ldyBWZWMzKCk7IC8vIFRlbXAgdmVjdG9yc1xuXG5jb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpO1xuY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZpID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZqID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hpID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hqID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQ29ubmVjdHMgdHdvIGJvZGllcyBhdCBnaXZlbiBvZmZzZXQgcG9pbnRzLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBib2R5QSA9IG5ldyBCb2R5KHsgbWFzczogMSB9KVxuICogICAgIGNvbnN0IGJvZHlCID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pXG4gKiAgICAgYm9keUEucG9zaXRpb24uc2V0KC0xLCAwLCAwKVxuICogICAgIGJvZHlCLnBvc2l0aW9uLnNldCgxLCAwLCAwKVxuICogICAgIGJvZHlBLmFkZFNoYXBlKHNoYXBlQSlcbiAqICAgICBib2R5Qi5hZGRTaGFwZShzaGFwZUIpXG4gKiAgICAgd29ybGQuYWRkQm9keShib2R5QSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlCKVxuICogICAgIGNvbnN0IGxvY2FsUGl2b3RBID0gbmV3IFZlYzMoMSwgMCwgMClcbiAqICAgICBjb25zdCBsb2NhbFBpdm90QiA9IG5ldyBWZWMzKC0xLCAwLCAwKVxuICogICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChib2R5QSwgbG9jYWxQaXZvdEEsIGJvZHlCLCBsb2NhbFBpdm90QilcbiAqICAgICB3b3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQpXG4gKi9cbmNsYXNzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHtcbiAgLyoqXG4gICAqIFBpdm90LCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUEuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQaXZvdCwgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlCLlxuICAgKi9cblxuICAvKipcbiAgICogQHBhcmFtIHBpdm90QSBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlBIHdoaWNoIGJvZHlBIGlzIGNvbnN0cmFpbmVkIHRvLlxuICAgKiBAcGFyYW0gYm9keUIgQm9keSB0aGF0IHdpbGwgYmUgY29uc3RyYWluZWQgaW4gYSBzaW1pbGFyIHdheSB0byB0aGUgc2FtZSBwb2ludCBhcyBib2R5QS4gV2Ugd2lsbCB0aGVyZWZvcmUgZ2V0IGEgbGluayBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5Qi4gSWYgbm90IHNwZWNpZmllZCwgYm9keUEgd2lsbCBiZSBjb25zdHJhaW5lZCB0byBhIHN0YXRpYyBwb2ludC5cbiAgICogQHBhcmFtIHBpdm90QiBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlCIHdoaWNoIGJvZHlCIGlzIGNvbnN0cmFpbmVkIHRvLlxuICAgKiBAcGFyYW0gbWF4Rm9yY2UgVGhlIG1heGltdW0gZm9yY2UgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byBjb25zdHJhaW4gdGhlIGJvZGllcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBwaXZvdEEgPSBuZXcgVmVjMygpLCBib2R5QiwgcGl2b3RCID0gbmV3IFZlYzMoKSwgbWF4Rm9yY2UgPSAxZTYpIHtcbiAgICBzdXBlcihib2R5QSwgYm9keUIpO1xuICAgIHRoaXMucGl2b3RBID0gdm9pZCAwO1xuICAgIHRoaXMucGl2b3RCID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25YID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25ZID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25aID0gdm9pZCAwO1xuICAgIHRoaXMucGl2b3RBID0gcGl2b3RBLmNsb25lKCk7XG4gICAgdGhpcy5waXZvdEIgPSBwaXZvdEIuY2xvbmUoKTtcbiAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblggPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7XG4gICAgY29uc3QgeSA9IHRoaXMuZXF1YXRpb25ZID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpO1xuICAgIGNvbnN0IHogPSB0aGlzLmVxdWF0aW9uWiA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsgLy8gRXF1YXRpb25zIHRvIGJlIGZlZCB0byB0aGUgc29sdmVyXG5cbiAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHgsIHksIHopOyAvLyBNYWtlIHRoZSBlcXVhdGlvbnMgYmlkaXJlY3Rpb25hbFxuXG4gICAgeC5taW5Gb3JjZSA9IHkubWluRm9yY2UgPSB6Lm1pbkZvcmNlID0gLW1heEZvcmNlO1xuICAgIHgubWF4Rm9yY2UgPSB5Lm1heEZvcmNlID0gei5tYXhGb3JjZSA9IG1heEZvcmNlO1xuICAgIHgubmkuc2V0KDEsIDAsIDApO1xuICAgIHkubmkuc2V0KDAsIDEsIDApO1xuICAgIHoubmkuc2V0KDAsIDAsIDEpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTtcbiAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7XG4gICAgY29uc3QgeCA9IHRoaXMuZXF1YXRpb25YO1xuICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWTtcbiAgICBjb25zdCB6ID0gdGhpcy5lcXVhdGlvblo7IC8vIFJvdGF0ZSB0aGUgcGl2b3RzIHRvIHdvcmxkIHNwYWNlXG5cbiAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMucGl2b3RBLCB4LnJpKTtcbiAgICBib2R5Qi5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMucGl2b3RCLCB4LnJqKTtcbiAgICB5LnJpLmNvcHkoeC5yaSk7XG4gICAgeS5yai5jb3B5KHgucmopO1xuICAgIHoucmkuY29weSh4LnJpKTtcbiAgICB6LnJqLmNvcHkoeC5yaik7XG4gIH1cblxufVxuXG4vKipcbiAqIENvbmUgZXF1YXRpb24uIFdvcmtzIHRvIGtlZXAgdGhlIGdpdmVuIGJvZHkgd29ybGQgdmVjdG9ycyBhbGlnbmVkLCBvciB0aWx0ZWQgd2l0aGluIGEgZ2l2ZW4gYW5nbGUgZnJvbSBlYWNoIG90aGVyLlxuICovXG5jbGFzcyBDb25lRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7XG4gIC8qKlxuICAgKiBMb2NhbCBheGlzIGluIEFcbiAgICovXG5cbiAgLyoqXG4gICAqIExvY2FsIGF4aXMgaW4gQlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIFwiY29uZSBhbmdsZVwiIHRvIGtlZXBcbiAgICovXG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2O1xuICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7XG4gICAgdGhpcy5heGlzQSA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNCID0gdm9pZCAwO1xuICAgIHRoaXMuYW5nbGUgPSB2b2lkIDA7XG4gICAgdGhpcy5heGlzQSA9IG9wdGlvbnMuYXhpc0EgPyBvcHRpb25zLmF4aXNBLmNsb25lKCkgOiBuZXcgVmVjMygxLCAwLCAwKTtcbiAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApO1xuICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDtcbiAgfVxuXG4gIGNvbXB1dGVCKGgpIHtcbiAgICBjb25zdCBhID0gdGhpcy5hO1xuICAgIGNvbnN0IGIgPSB0aGlzLmI7XG4gICAgY29uc3QgbmkgPSB0aGlzLmF4aXNBO1xuICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjtcbiAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMjtcbiAgICBjb25zdCBuanhuaSA9IHRtcFZlYzIkMjtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzXG5cbiAgICBuaS5jcm9zcyhuaiwgbml4bmopO1xuICAgIG5qLmNyb3NzKG5pLCBuanhuaSk7IC8vIFRoZSBhbmdsZSBiZXR3ZWVuIHR3byB2ZWN0b3IgaXM6XG4gICAgLy8gY29zKHRoZXRhKSA9IGEgKiBiIC8gKGxlbmd0aChhKSAqIGxlbmd0aChiKSA9IHsgbGVuKGEpID0gbGVuKGIpID0gMSB9ID0gYSAqIGJcbiAgICAvLyBnID0gYSAqIGJcbiAgICAvLyBnZG90ID0gKGIgeCBhKSAqIHdpICsgKGEgeCBiKSAqIHdqXG4gICAgLy8gRyA9IFswIGJ4YSAwIGF4Yl1cbiAgICAvLyBXID0gW3ZpIHdpIHZqIHdqXVxuXG4gICAgR0Eucm90YXRpb25hbC5jb3B5KG5qeG5pKTtcbiAgICBHQi5yb3RhdGlvbmFsLmNvcHkobml4bmopO1xuICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLmFuZ2xlKSAtIG5pLmRvdChuaik7XG4gICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpO1xuICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7XG4gICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mO1xuICAgIHJldHVybiBCO1xuICB9XG5cbn1cbmNvbnN0IHRtcFZlYzEkMiA9IG5ldyBWZWMzKCk7XG5jb25zdCB0bXBWZWMyJDIgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIFJvdGF0aW9uYWwgY29uc3RyYWludC4gV29ya3MgdG8ga2VlcCB0aGUgbG9jYWwgdmVjdG9ycyBvcnRob2dvbmFsIHRvIGVhY2ggb3RoZXIgaW4gd29ybGQgc3BhY2UuXG4gKi9cbmNsYXNzIFJvdGF0aW9uYWxFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHtcbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIG1heEFuZ2xlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjtcbiAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpO1xuICAgIHRoaXMuYXhpc0EgPSB2b2lkIDA7XG4gICAgdGhpcy5heGlzQiA9IHZvaWQgMDtcbiAgICB0aGlzLm1heEFuZ2xlID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7XG4gICAgdGhpcy5heGlzQiA9IG9wdGlvbnMuYXhpc0IgPyBvcHRpb25zLmF4aXNCLmNsb25lKCkgOiBuZXcgVmVjMygwLCAxLCAwKTtcbiAgICB0aGlzLm1heEFuZ2xlID0gTWF0aC5QSSAvIDI7XG4gIH1cblxuICBjb21wdXRlQihoKSB7XG4gICAgY29uc3QgYSA9IHRoaXMuYTtcbiAgICBjb25zdCBiID0gdGhpcy5iO1xuICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTtcbiAgICBjb25zdCBuaiA9IHRoaXMuYXhpc0I7XG4gICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDE7XG4gICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDE7XG4gICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7XG4gICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0c1xuXG4gICAgbmkuY3Jvc3MobmosIG5peG5qKTtcbiAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBnID0gbmkgKiBualxuICAgIC8vIGdkb3QgPSAobmogeCBuaSkgKiB3aSArIChuaSB4IG5qKSAqIHdqXG4gICAgLy8gRyA9IFswIG5qeG5pIDAgbml4bmpdXG4gICAgLy8gVyA9IFt2aSB3aSB2aiB3al1cblxuICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7XG4gICAgR0Iucm90YXRpb25hbC5jb3B5KG5peG5qKTtcbiAgICBjb25zdCBnID0gTWF0aC5jb3ModGhpcy5tYXhBbmdsZSkgLSBuaS5kb3QobmopO1xuICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTtcbiAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpO1xuICAgIGNvbnN0IEIgPSAtZyAqIGEgLSBHVyAqIGIgLSBoICogR2lNZjtcbiAgICByZXR1cm4gQjtcbiAgfVxuXG59XG5jb25zdCB0bXBWZWMxJDEgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wVmVjMiQxID0gbmV3IFZlYzMoKTtcblxuLyoqXG4gKiBBIENvbmUgVHdpc3QgY29uc3RyYWludCwgdXNlZnVsIGZvciByYWdkb2xscy5cbiAqL1xuY2xhc3MgQ29uZVR3aXN0Q29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQge1xuICAvKipcbiAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBBLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBCLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGFwZXJ0dXJlIGFuZ2xlIG9mIHRoZSBjb25lLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHR3aXN0IGFuZ2xlIG9mIHRoZSBqb2ludC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlblxuXG4gICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwaXZvdEIgPSBvcHRpb25zLnBpdm90QiA/IG9wdGlvbnMucGl2b3RCLmNsb25lKCkgOiBuZXcgVmVjMygpO1xuICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTtcbiAgICB0aGlzLmF4aXNBID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7XG4gICAgdGhpcy5hbmdsZSA9IHZvaWQgMDtcbiAgICB0aGlzLnR3aXN0QW5nbGUgPSB2b2lkIDA7XG4gICAgdGhpcy5jb25lRXF1YXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy50d2lzdEVxdWF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoKTtcbiAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7XG4gICAgdGhpcy5hbmdsZSA9IHR5cGVvZiBvcHRpb25zLmFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYW5nbGUgOiAwO1xuICAgIGNvbnN0IGMgPSB0aGlzLmNvbmVFcXVhdGlvbiA9IG5ldyBDb25lRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCB0ID0gdGhpcy50d2lzdEVxdWF0aW9uID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpO1xuICAgIHRoaXMudHdpc3RBbmdsZSA9IHR5cGVvZiBvcHRpb25zLnR3aXN0QW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy50d2lzdEFuZ2xlIDogMDsgLy8gTWFrZSB0aGUgY29uZSBlcXVhdGlvbiBwdXNoIHRoZSBib2RpZXMgdG93YXJkIHRoZSBjb25lIGF4aXMsIG5vdCBvdXR3YXJkXG5cbiAgICBjLm1heEZvcmNlID0gMDtcbiAgICBjLm1pbkZvcmNlID0gLW1heEZvcmNlOyAvLyBNYWtlIHRoZSB0d2lzdCBlcXVhdGlvbiBhZGQgdG9ycXVlIHRvd2FyZCB0aGUgaW5pdGlhbCBwb3NpdGlvblxuXG4gICAgdC5tYXhGb3JjZSA9IDA7XG4gICAgdC5taW5Gb3JjZSA9IC1tYXhGb3JjZTtcbiAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGMsIHQpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTtcbiAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7XG4gICAgY29uc3QgY29uZSA9IHRoaXMuY29uZUVxdWF0aW9uO1xuICAgIGNvbnN0IHR3aXN0ID0gdGhpcy50d2lzdEVxdWF0aW9uO1xuICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBVcGRhdGUgdGhlIGF4ZXMgdG8gdGhlIGNvbmUgY29uc3RyYWludFxuXG4gICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuYXhpc0EsIGNvbmUuYXhpc0EpO1xuICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNCLCBjb25lLmF4aXNCKTsgLy8gVXBkYXRlIHRoZSB3b3JsZCBheGVzIGluIHRoZSB0d2lzdCBjb25zdHJhaW50XG5cbiAgICB0aGlzLmF4aXNBLnRhbmdlbnRzKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7XG4gICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7XG4gICAgdGhpcy5heGlzQi50YW5nZW50cyh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpO1xuICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpO1xuICAgIGNvbmUuYW5nbGUgPSB0aGlzLmFuZ2xlO1xuICAgIHR3aXN0Lm1heEFuZ2xlID0gdGhpcy50d2lzdEFuZ2xlO1xuICB9XG5cbn1cblxuLyoqXG4gKiBDb25zdHJhaW5zIHR3byBib2RpZXMgdG8gYmUgYXQgYSBjb25zdGFudCBkaXN0YW5jZSBmcm9tIGVhY2ggb3RoZXJzIGNlbnRlciBvZiBtYXNzLlxuICovXG5jbGFzcyBEaXN0YW5jZUNvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHtcbiAgLyoqXG4gICAqIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gZGlzdGFuY2UgVGhlIGRpc3RhbmNlIHRvIGtlZXAuIElmIHVuZGVmaW5lZCwgaXQgd2lsbCBiZSBzZXQgdG8gdGhlIGN1cnJlbnQgZGlzdGFuY2UgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIuXG4gICAqIEBwYXJhbSBtYXhGb3JjZSBUaGUgbWF4aW11bSBmb3JjZSB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNvbnN0cmFpbiB0aGUgYm9kaWVzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBkaXN0YW5jZSwgbWF4Rm9yY2UgPSAxZTYpIHtcbiAgICBzdXBlcihib2R5QSwgYm9keUIpO1xuICAgIHRoaXMuZGlzdGFuY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gdm9pZCAwO1xuXG4gICAgaWYgKHR5cGVvZiBkaXN0YW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRpc3RhbmNlID0gYm9keUEucG9zaXRpb24uZGlzdGFuY2VUbyhib2R5Qi5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgdGhpcy5kaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpO1xuICAgIHRoaXMuZXF1YXRpb25zLnB1c2goZXEpOyAvLyBNYWtlIGl0IGJpZGlyZWN0aW9uYWxcblxuICAgIGVxLm1pbkZvcmNlID0gLW1heEZvcmNlO1xuICAgIGVxLm1heEZvcmNlID0gbWF4Rm9yY2U7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZVxuICAgKi9cblxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7XG4gICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCO1xuICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uO1xuICAgIGNvbnN0IGhhbGZEaXN0ID0gdGhpcy5kaXN0YW5jZSAqIDAuNTtcbiAgICBjb25zdCBub3JtYWwgPSBlcS5uaTtcbiAgICBib2R5Qi5wb3NpdGlvbi52c3ViKGJvZHlBLnBvc2l0aW9uLCBub3JtYWwpO1xuICAgIG5vcm1hbC5ub3JtYWxpemUoKTtcbiAgICBub3JtYWwuc2NhbGUoaGFsZkRpc3QsIGVxLnJpKTtcbiAgICBub3JtYWwuc2NhbGUoLWhhbGZEaXN0LCBlcS5yaik7XG4gIH1cblxufVxuXG4vKipcbiAqIExvY2sgY29uc3RyYWludC4gV2lsbCByZW1vdmUgYWxsIGRlZ3JlZXMgb2YgZnJlZWRvbSBiZXR3ZWVuIHRoZSBib2RpZXMuXG4gKi9cbmNsYXNzIExvY2tDb25zdHJhaW50IGV4dGVuZHMgUG9pbnRUb1BvaW50Q29uc3RyYWludCB7XG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlblxuXG4gICAgY29uc3QgcGl2b3RBID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwaXZvdEIgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGhhbGZXYXkgPSBuZXcgVmVjMygpO1xuICAgIGJvZHlBLnBvc2l0aW9uLnZhZGQoYm9keUIucG9zaXRpb24sIGhhbGZXYXkpO1xuICAgIGhhbGZXYXkuc2NhbGUoMC41LCBoYWxmV2F5KTtcbiAgICBib2R5Qi5wb2ludFRvTG9jYWxGcmFtZShoYWxmV2F5LCBwaXZvdEIpO1xuICAgIGJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90QSk7IC8vIFRoZSBwb2ludC10by1wb2ludCBjb25zdHJhaW50IHdpbGwga2VlcCBhIHBvaW50IHNoYXJlZCBiZXR3ZWVuIHRoZSBib2RpZXNcblxuICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsgLy8gU3RvcmUgaW5pdGlhbCByb3RhdGlvbiBvZiB0aGUgYm9kaWVzIGFzIHVuaXQgdmVjdG9ycyBpbiB0aGUgbG9jYWwgYm9keSBzcGFjZXNcblxuICAgIHRoaXMueEEgPSB2b2lkIDA7XG4gICAgdGhpcy54QiA9IHZvaWQgMDtcbiAgICB0aGlzLnlBID0gdm9pZCAwO1xuICAgIHRoaXMueUIgPSB2b2lkIDA7XG4gICAgdGhpcy56QSA9IHZvaWQgMDtcbiAgICB0aGlzLnpCID0gdm9pZCAwO1xuICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IHZvaWQgMDtcbiAgICB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjIgPSB2b2lkIDA7XG4gICAgdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zID0gdm9pZCAwO1xuICAgIHRoaXMubW90b3JFcXVhdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnhBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTtcbiAgICB0aGlzLnhCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTtcbiAgICB0aGlzLnlBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTtcbiAgICB0aGlzLnlCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTtcbiAgICB0aGlzLnpBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTtcbiAgICB0aGlzLnpCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsgLy8gLi4uYW5kIHRoZSBmb2xsb3dpbmcgcm90YXRpb25hbCBlcXVhdGlvbnMgd2lsbCBrZWVwIGFsbCByb3RhdGlvbmFsIERPRidzIGluIHBsYWNlXG5cbiAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCByMyA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMyA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHIxLCByMiwgcjMpO1xuICB9XG4gIC8qKlxuICAgKiB1cGRhdGVcbiAgICovXG5cblxuICB1cGRhdGUoKSB7XG4gICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBO1xuICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb247XG4gICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjE7XG4gICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjI7XG4gICAgY29uc3QgcjMgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjM7XG4gICAgc3VwZXIudXBkYXRlKCk7IC8vIFRoZXNlIHZlY3RvciBwYWlycyBtdXN0IGJlIG9ydGhvZ29uYWxcblxuICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnhBLCByMS5heGlzQSk7XG4gICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUIsIHIxLmF4aXNCKTtcbiAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QSwgcjIuYXhpc0EpO1xuICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnpCLCByMi5heGlzQik7XG4gICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekEsIHIzLmF4aXNBKTtcbiAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QiwgcjMuYXhpc0IpO1xuICB9XG5cbn1cblxuLyoqXG4gKiBSb3RhdGlvbmFsIG1vdG9yIGNvbnN0cmFpbnQuIFRyaWVzIHRvIGtlZXAgdGhlIHJlbGF0aXZlIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZGllcyB0byBhIGdpdmVuIHZhbHVlLlxuICovXG5jbGFzcyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHtcbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIE1vdG9yIHZlbG9jaXR5LlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBtYXhGb3JjZSA9IDFlNikge1xuICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7XG4gICAgdGhpcy5heGlzQSA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNCID0gdm9pZCAwO1xuICAgIHRoaXMudGFyZ2V0VmVsb2NpdHkgPSB2b2lkIDA7XG4gICAgdGhpcy5heGlzQSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5heGlzQiA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy50YXJnZXRWZWxvY2l0eSA9IDA7XG4gIH1cblxuICBjb21wdXRlQihoKSB7XG4gICAgdGhpcy5hO1xuICAgIGNvbnN0IGIgPSB0aGlzLmI7XG4gICAgdGhpcy5iaTtcbiAgICB0aGlzLmJqO1xuICAgIGNvbnN0IGF4aXNBID0gdGhpcy5heGlzQTtcbiAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7XG4gICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7XG4gICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIGcgPSAwXG4gICAgLy8gZ2RvdCA9IGF4aXNBICogd2kgLSBheGlzQiAqIHdqXG4gICAgLy8gZ2RvdCA9IEcgKiBXID0gRyAqIFt2aSB3aSB2aiB3al1cbiAgICAvLyA9PlxuICAgIC8vIEcgPSBbMCBheGlzQSAwIC1heGlzQl1cblxuICAgIEdBLnJvdGF0aW9uYWwuY29weShheGlzQSk7XG4gICAgYXhpc0IubmVnYXRlKEdCLnJvdGF0aW9uYWwpO1xuICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKSAtIHRoaXMudGFyZ2V0VmVsb2NpdHk7XG4gICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTtcbiAgICBjb25zdCBCID0gLUdXICogYiAtIGggKiBHaU1mO1xuICAgIHJldHVybiBCO1xuICB9XG5cbn1cblxuLyoqXG4gKiBIaW5nZSBjb25zdHJhaW50LiBUaGluayBvZiBpdCBhcyBhIGRvb3IgaGluZ2UuIEl0IHRyaWVzIHRvIGtlZXAgdGhlIGRvb3IgaW4gdGhlIGNvcnJlY3QgcGxhY2UgYW5kIHdpdGggdGhlIGNvcnJlY3Qgb3JpZW50YXRpb24uXG4gKi9cbmNsYXNzIEhpbmdlQ29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQge1xuICAvKipcbiAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLlxuICAgKi9cblxuICAvKipcbiAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlCLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7XG4gICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwaXZvdEIgPSBvcHRpb25zLnBpdm90QiA/IG9wdGlvbnMucGl2b3RCLmNsb25lKCkgOiBuZXcgVmVjMygpO1xuICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTtcbiAgICB0aGlzLmF4aXNBID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7XG4gICAgdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xID0gdm9pZCAwO1xuICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IHZvaWQgMDtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24gPSB2b2lkIDA7XG4gICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApO1xuICAgIGF4aXNBLm5vcm1hbGl6ZSgpO1xuICAgIGNvbnN0IGF4aXNCID0gdGhpcy5heGlzQiA9IG9wdGlvbnMuYXhpc0IgPyBvcHRpb25zLmF4aXNCLmNsb25lKCkgOiBuZXcgVmVjMygxLCAwLCAwKTtcbiAgICBheGlzQi5ub3JtYWxpemUoKTtcbiAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSAhIW9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDtcbiAgICBjb25zdCByb3RhdGlvbmFsMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCByb3RhdGlvbmFsMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbihib2R5QSwgYm9keUIsIG1heEZvcmNlKTtcbiAgICBtb3Rvci5lbmFibGVkID0gZmFsc2U7IC8vIE5vdCBlbmFibGVkIGJ5IGRlZmF1bHRcbiAgICAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXJcblxuICAgIHRoaXMuZXF1YXRpb25zLnB1c2gocm90YXRpb25hbDEsIHJvdGF0aW9uYWwyLCBtb3Rvcik7XG4gIH1cbiAgLyoqXG4gICAqIGVuYWJsZU1vdG9yXG4gICAqL1xuXG5cbiAgZW5hYmxlTW90b3IoKSB7XG4gICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBkaXNhYmxlTW90b3JcbiAgICovXG5cblxuICBkaXNhYmxlTW90b3IoKSB7XG4gICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogc2V0TW90b3JTcGVlZFxuICAgKi9cblxuXG4gIHNldE1vdG9yU3BlZWQoc3BlZWQpIHtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24udGFyZ2V0VmVsb2NpdHkgPSBzcGVlZDtcbiAgfVxuICAvKipcbiAgICogc2V0TW90b3JNYXhGb3JjZVxuICAgKi9cblxuXG4gIHNldE1vdG9yTWF4Rm9yY2UobWF4Rm9yY2UpIHtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWF4Rm9yY2UgPSBtYXhGb3JjZTtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWluRm9yY2UgPSAtbWF4Rm9yY2U7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZVxuICAgKi9cblxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7XG4gICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCO1xuICAgIGNvbnN0IG1vdG9yID0gdGhpcy5tb3RvckVxdWF0aW9uO1xuICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xO1xuICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yO1xuICAgIGNvbnN0IHdvcmxkQXhpc0EgPSBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzE7XG4gICAgY29uc3Qgd29ybGRBeGlzQiA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMjtcbiAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0E7XG4gICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCO1xuICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBHZXQgd29ybGQgYXhlc1xuXG4gICAgYm9keUEucXVhdGVybmlvbi52bXVsdChheGlzQSwgd29ybGRBeGlzQSk7XG4gICAgYm9keUIucXVhdGVybmlvbi52bXVsdChheGlzQiwgd29ybGRBeGlzQik7XG4gICAgd29ybGRBeGlzQS50YW5nZW50cyhyMS5heGlzQSwgcjIuYXhpc0EpO1xuICAgIHIxLmF4aXNCLmNvcHkod29ybGRBeGlzQik7XG4gICAgcjIuYXhpc0IuY29weSh3b3JsZEF4aXNCKTtcblxuICAgIGlmICh0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCkge1xuICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdCh0aGlzLmF4aXNBLCBtb3Rvci5heGlzQSk7XG4gICAgICBib2R5Qi5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0IsIG1vdG9yLmF4aXNCKTtcbiAgICB9XG4gIH1cblxufVxuY29uc3QgSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxID0gbmV3IFZlYzMoKTtcbmNvbnN0IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMiA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQ29uc3RyYWlucyB0aGUgc2xpcHBpbmcgaW4gYSBjb250YWN0IGFsb25nIGEgdGFuZ2VudFxuICovXG5jbGFzcyBGcmljdGlvbkVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24ge1xuICAvLyBUYW5nZW50XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBzbGlwRm9yY2Ugc2hvdWxkIGJlICstRl9mcmljdGlvbiA9ICstbXUgKiBGX25vcm1hbCA9ICstbXUgKiBtICogZ1xuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBzbGlwRm9yY2UpIHtcbiAgICBzdXBlcihib2R5QSwgYm9keUIsIC1zbGlwRm9yY2UsIHNsaXBGb3JjZSk7XG4gICAgdGhpcy5yaSA9IHZvaWQgMDtcbiAgICB0aGlzLnJqID0gdm9pZCAwO1xuICAgIHRoaXMudCA9IHZvaWQgMDtcbiAgICB0aGlzLnJpID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnJqID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnQgPSBuZXcgVmVjMygpO1xuICB9XG5cbiAgY29tcHV0ZUIoaCkge1xuICAgIHRoaXMuYTtcbiAgICBjb25zdCBiID0gdGhpcy5iO1xuICAgIHRoaXMuYmk7XG4gICAgdGhpcy5iajtcbiAgICBjb25zdCByaSA9IHRoaXMucmk7XG4gICAgY29uc3QgcmogPSB0aGlzLnJqO1xuICAgIGNvbnN0IHJpeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxO1xuICAgIGNvbnN0IHJqeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyO1xuICAgIGNvbnN0IHQgPSB0aGlzLnQ7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0c1xuXG4gICAgcmkuY3Jvc3ModCwgcml4dCk7XG4gICAgcmouY3Jvc3ModCwgcmp4dCk7IC8vIEcgPSBbLXQgLXJpeHQgdCByanh0XVxuICAgIC8vIEFuZCByZW1lbWJlciwgdGhpcyBpcyBhIHB1cmUgdmVsb2NpdHkgY29uc3RyYWludCwgZyBpcyBhbHdheXMgemVybyFcblxuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIHQubmVnYXRlKEdBLnNwYXRpYWwpO1xuICAgIHJpeHQubmVnYXRlKEdBLnJvdGF0aW9uYWwpO1xuICAgIEdCLnNwYXRpYWwuY29weSh0KTtcbiAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4dCk7XG4gICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpO1xuICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7XG4gICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjtcbiAgICByZXR1cm4gQjtcbiAgfVxuXG59XG5jb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTtcbmNvbnN0IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIERlZmluZXMgd2hhdCBoYXBwZW5zIHdoZW4gdHdvIG1hdGVyaWFscyBtZWV0LlxuICogQHRvZG8gUmVmYWN0b3IgbWF0ZXJpYWxzIHRvIG1hdGVyaWFsQSBhbmQgbWF0ZXJpYWxCXG4gKi9cbmNsYXNzIENvbnRhY3RNYXRlcmlhbCB7XG4gIC8qKlxuICAgKiBJZGVudGlmaWVyIG9mIHRoaXMgbWF0ZXJpYWwuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQYXJ0aWNpcGF0aW5nIG1hdGVyaWFscy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEZyaWN0aW9uIGNvZWZmaWNpZW50LlxuICAgKiBAZGVmYXVsdCAwLjNcbiAgICovXG5cbiAgLyoqXG4gICAqIFJlc3RpdHV0aW9uIGNvZWZmaWNpZW50LlxuICAgKiBAZGVmYXVsdCAwLjNcbiAgICovXG5cbiAgLyoqXG4gICAqIFN0aWZmbmVzcyBvZiB0aGUgcHJvZHVjZWQgY29udGFjdCBlcXVhdGlvbnMuXG4gICAqIEBkZWZhdWx0IDFlN1xuICAgKi9cblxuICAvKipcbiAgICogUmVsYXhhdGlvbiB0aW1lIG9mIHRoZSBwcm9kdWNlZCBjb250YWN0IGVxdWF0aW9ucy5cbiAgICogQGRlZmF1bHQgM1xuICAgKi9cblxuICAvKipcbiAgICogU3RpZmZuZXNzIG9mIHRoZSBwcm9kdWNlZCBmcmljdGlvbiBlcXVhdGlvbnMuXG4gICAqIEBkZWZhdWx0IDFlN1xuICAgKi9cblxuICAvKipcbiAgICogUmVsYXhhdGlvbiB0aW1lIG9mIHRoZSBwcm9kdWNlZCBmcmljdGlvbiBlcXVhdGlvbnNcbiAgICogQGRlZmF1bHQgM1xuICAgKi9cbiAgY29uc3RydWN0b3IobTEsIG0yLCBvcHRpb25zKSB7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLm1hdGVyaWFscyA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMucmVzdGl0dXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MgPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uID0gdm9pZCAwO1xuICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgICBmcmljdGlvbjogMC4zLFxuICAgICAgcmVzdGl0dXRpb246IDAuMyxcbiAgICAgIGNvbnRhY3RFcXVhdGlvblN0aWZmbmVzczogMWU3LFxuICAgICAgY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbjogMyxcbiAgICAgIGZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M6IDFlNyxcbiAgICAgIGZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uOiAzXG4gICAgfSk7XG4gICAgdGhpcy5pZCA9IENvbnRhY3RNYXRlcmlhbC5pZENvdW50ZXIrKztcbiAgICB0aGlzLm1hdGVyaWFscyA9IFttMSwgbTJdO1xuICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uO1xuICAgIHRoaXMucmVzdGl0dXRpb24gPSBvcHRpb25zLnJlc3RpdHV0aW9uO1xuICAgIHRoaXMuY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3M7XG4gICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uO1xuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IG9wdGlvbnMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcztcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbjtcbiAgfVxuXG59XG5Db250YWN0TWF0ZXJpYWwuaWRDb3VudGVyID0gMDtcblxuLyoqXG4gKiBEZWZpbmVzIGEgcGh5c2ljcyBtYXRlcmlhbC5cbiAqL1xuY2xhc3MgTWF0ZXJpYWwge1xuICAvKipcbiAgICogTWF0ZXJpYWwgbmFtZS5cbiAgICogSWYgb3B0aW9ucyBpcyBhIHN0cmluZywgbmFtZSB3aWxsIGJlIHNldCB0byB0aGF0IHN0cmluZy5cbiAgICogQHRvZG8gRGVwcmVjYXRlIHRoaXNcbiAgICovXG5cbiAgLyoqIE1hdGVyaWFsIGlkLiAqL1xuXG4gIC8qKlxuICAgKiBGcmljdGlvbiBmb3IgdGhpcyBtYXRlcmlhbC5cbiAgICogSWYgbm9uLW5lZ2F0aXZlLCBpdCB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgZnJpY3Rpb24gZ2l2ZW4gYnkgQ29udGFjdE1hdGVyaWFscy4gSWYgdGhlcmUncyBubyBtYXRjaGluZyBDb250YWN0TWF0ZXJpYWwsIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0Q29udGFjdE1hdGVyaWFsYCBpbiB0aGUgV29ybGQgd2lsbCBiZSB1c2VkLlxuICAgKi9cblxuICAvKipcbiAgICogUmVzdGl0dXRpb24gZm9yIHRoaXMgbWF0ZXJpYWwuXG4gICAqIElmIG5vbi1uZWdhdGl2ZSwgaXQgd2lsbCBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIHJlc3RpdHV0aW9uIGdpdmVuIGJ5IENvbnRhY3RNYXRlcmlhbHMuIElmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgQ29udGFjdE1hdGVyaWFsLCB0aGUgdmFsdWUgZnJvbSBgZGVmYXVsdENvbnRhY3RNYXRlcmlhbGAgaW4gdGhlIFdvcmxkIHdpbGwgYmUgdXNlZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMubmFtZSA9IHZvaWQgMDtcbiAgICB0aGlzLmlkID0gdm9pZCAwO1xuICAgIHRoaXMuZnJpY3Rpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5yZXN0aXR1dGlvbiA9IHZvaWQgMDtcbiAgICBsZXQgbmFtZSA9ICcnOyAvLyBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBmaXhcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vY29uc29sZS53YXJuKGBQYXNzaW5nIGEgc3RyaW5nIHRvIE1hdGVyaWFsT3B0aW9ucyBpcyBkZXByZWNhdGVkLCBhbmQgaGFzIG5vIGVmZmVjdGApXG4gICAgICBuYW1lID0gb3B0aW9ucztcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuaWQgPSBNYXRlcmlhbC5pZENvdW50ZXIrKztcbiAgICB0aGlzLmZyaWN0aW9uID0gdHlwZW9mIG9wdGlvbnMuZnJpY3Rpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5mcmljdGlvbiA6IC0xO1xuICAgIHRoaXMucmVzdGl0dXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5yZXN0aXR1dGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnJlc3RpdHV0aW9uIDogLTE7XG4gIH1cblxufVxuTWF0ZXJpYWwuaWRDb3VudGVyID0gMDtcblxuLyoqXG4gKiBBIHNwcmluZywgY29ubmVjdGluZyB0d28gYm9kaWVzLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBzcHJpbmcgPSBuZXcgU3ByaW5nKGJveEJvZHksIHNwaGVyZUJvZHksIHtcbiAqICAgICAgIHJlc3RMZW5ndGg6IDAsXG4gKiAgICAgICBzdGlmZm5lc3M6IDUwLFxuICogICAgICAgZGFtcGluZzogMSxcbiAqICAgICB9KVxuICpcbiAqICAgICAvLyBDb21wdXRlIHRoZSBmb3JjZSBhZnRlciBlYWNoIHN0ZXBcbiAqICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIChldmVudCkgPT4ge1xuICogICAgICAgc3ByaW5nLmFwcGx5Rm9yY2UoKVxuICogICAgIH0pXG4gKi9cbmNsYXNzIFNwcmluZyB7XG4gIC8qKlxuICAgKiBSZXN0IGxlbmd0aCBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+IDAuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFN0aWZmbmVzcyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLlxuICAgKiBAZGVmYXVsdCAxMDBcbiAgICovXG5cbiAgLyoqXG4gICAqIERhbXBpbmcgb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPj0gMC5cbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogRmlyc3QgY29ubmVjdGVkIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTZWNvbmQgY29ubmVjdGVkIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbmNob3IgZm9yIGJvZHlBIGluIGxvY2FsIGJvZHlBIGNvb3JkaW5hdGVzLlxuICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBBLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLlxuICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbmNob3IgZm9yIGJvZHlCIGluIGxvY2FsIGJvZHlCIGNvb3JkaW5hdGVzLlxuICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBCLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLlxuICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMucmVzdExlbmd0aCA9IHZvaWQgMDtcbiAgICB0aGlzLnN0aWZmbmVzcyA9IHZvaWQgMDtcbiAgICB0aGlzLmRhbXBpbmcgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2R5QSA9IHZvaWQgMDtcbiAgICB0aGlzLmJvZHlCID0gdm9pZCAwO1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gdm9pZCAwO1xuICAgIHRoaXMubG9jYWxBbmNob3JCID0gdm9pZCAwO1xuICAgIHRoaXMucmVzdExlbmd0aCA9IHR5cGVvZiBvcHRpb25zLnJlc3RMZW5ndGggPT09ICdudW1iZXInID8gb3B0aW9ucy5yZXN0TGVuZ3RoIDogMTtcbiAgICB0aGlzLnN0aWZmbmVzcyA9IG9wdGlvbnMuc3RpZmZuZXNzIHx8IDEwMDtcbiAgICB0aGlzLmRhbXBpbmcgPSBvcHRpb25zLmRhbXBpbmcgfHwgMTtcbiAgICB0aGlzLmJvZHlBID0gYm9keUE7XG4gICAgdGhpcy5ib2R5QiA9IGJvZHlCO1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQiA9IG5ldyBWZWMzKCk7XG5cbiAgICBpZiAob3B0aW9ucy5sb2NhbEFuY2hvckEpIHtcbiAgICAgIHRoaXMubG9jYWxBbmNob3JBLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckEpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQikge1xuICAgICAgdGhpcy5sb2NhbEFuY2hvckIuY29weShvcHRpb25zLmxvY2FsQW5jaG9yQik7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JBKSB7XG4gICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQShvcHRpb25zLndvcmxkQW5jaG9yQSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JCKSB7XG4gICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQihvcHRpb25zLndvcmxkQW5jaG9yQik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIHVzaW5nIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKi9cblxuXG4gIHNldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpIHtcbiAgICB0aGlzLmJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQSwgdGhpcy5sb2NhbEFuY2hvckEpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEIsIHVzaW5nIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKi9cblxuXG4gIHNldFdvcmxkQW5jaG9yQih3b3JsZEFuY2hvckIpIHtcbiAgICB0aGlzLmJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQiwgdGhpcy5sb2NhbEFuY2hvckIpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICBnZXRXb3JsZEFuY2hvckEocmVzdWx0KSB7XG4gICAgdGhpcy5ib2R5QS5wb2ludFRvV29ybGRGcmFtZSh0aGlzLmxvY2FsQW5jaG9yQSwgcmVzdWx0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBCLCBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uXG4gICAqL1xuXG5cbiAgZ2V0V29ybGRBbmNob3JCKHJlc3VsdCkge1xuICAgIHRoaXMuYm9keUIucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckIsIHJlc3VsdCk7XG4gIH1cbiAgLyoqXG4gICAqIEFwcGx5IHRoZSBzcHJpbmcgZm9yY2UgdG8gdGhlIGNvbm5lY3RlZCBib2RpZXMuXG4gICAqL1xuXG5cbiAgYXBwbHlGb3JjZSgpIHtcbiAgICBjb25zdCBrID0gdGhpcy5zdGlmZm5lc3M7XG4gICAgY29uc3QgZCA9IHRoaXMuZGFtcGluZztcbiAgICBjb25zdCBsID0gdGhpcy5yZXN0TGVuZ3RoO1xuICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTtcbiAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7XG4gICAgY29uc3QgciA9IGFwcGx5Rm9yY2VfcjtcbiAgICBjb25zdCByX3VuaXQgPSBhcHBseUZvcmNlX3JfdW5pdDtcbiAgICBjb25zdCB1ID0gYXBwbHlGb3JjZV91O1xuICAgIGNvbnN0IGYgPSBhcHBseUZvcmNlX2Y7XG4gICAgY29uc3QgdG1wID0gYXBwbHlGb3JjZV90bXA7XG4gICAgY29uc3Qgd29ybGRBbmNob3JBID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckE7XG4gICAgY29uc3Qgd29ybGRBbmNob3JCID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckI7XG4gICAgY29uc3QgcmkgPSBhcHBseUZvcmNlX3JpO1xuICAgIGNvbnN0IHJqID0gYXBwbHlGb3JjZV9yajtcbiAgICBjb25zdCByaV94X2YgPSBhcHBseUZvcmNlX3JpX3hfZjtcbiAgICBjb25zdCByal94X2YgPSBhcHBseUZvcmNlX3JqX3hfZjsgLy8gR2V0IHdvcmxkIGFuY2hvcnNcblxuICAgIHRoaXMuZ2V0V29ybGRBbmNob3JBKHdvcmxkQW5jaG9yQSk7XG4gICAgdGhpcy5nZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKTsgLy8gR2V0IG9mZnNldCBwb2ludHNcblxuICAgIHdvcmxkQW5jaG9yQS52c3ViKGJvZHlBLnBvc2l0aW9uLCByaSk7XG4gICAgd29ybGRBbmNob3JCLnZzdWIoYm9keUIucG9zaXRpb24sIHJqKTsgLy8gQ29tcHV0ZSBkaXN0YW5jZSB2ZWN0b3IgYmV0d2VlbiB3b3JsZCBhbmNob3IgcG9pbnRzXG5cbiAgICB3b3JsZEFuY2hvckIudnN1Yih3b3JsZEFuY2hvckEsIHIpO1xuICAgIGNvbnN0IHJsZW4gPSByLmxlbmd0aCgpO1xuICAgIHJfdW5pdC5jb3B5KHIpO1xuICAgIHJfdW5pdC5ub3JtYWxpemUoKTsgLy8gQ29tcHV0ZSByZWxhdGl2ZSB2ZWxvY2l0eSBvZiB0aGUgYW5jaG9yIHBvaW50cywgdVxuXG4gICAgYm9keUIudmVsb2NpdHkudnN1Yihib2R5QS52ZWxvY2l0eSwgdSk7IC8vIEFkZCByb3RhdGlvbmFsIHZlbG9jaXR5XG5cbiAgICBib2R5Qi5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmosIHRtcCk7XG4gICAgdS52YWRkKHRtcCwgdSk7XG4gICAgYm9keUEuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJpLCB0bXApO1xuICAgIHUudnN1Yih0bXAsIHUpOyAvLyBGID0gLSBrICogKCB4IC0gTCApIC0gRCAqICggdSApXG5cbiAgICByX3VuaXQuc2NhbGUoLWsgKiAocmxlbiAtIGwpIC0gZCAqIHUuZG90KHJfdW5pdCksIGYpOyAvLyBBZGQgZm9yY2VzIHRvIGJvZGllc1xuXG4gICAgYm9keUEuZm9yY2UudnN1YihmLCBib2R5QS5mb3JjZSk7XG4gICAgYm9keUIuZm9yY2UudmFkZChmLCBib2R5Qi5mb3JjZSk7IC8vIEFuZ3VsYXIgZm9yY2VcblxuICAgIHJpLmNyb3NzKGYsIHJpX3hfZik7XG4gICAgcmouY3Jvc3MoZiwgcmpfeF9mKTtcbiAgICBib2R5QS50b3JxdWUudnN1YihyaV94X2YsIGJvZHlBLnRvcnF1ZSk7XG4gICAgYm9keUIudG9ycXVlLnZhZGQocmpfeF9mLCBib2R5Qi50b3JxdWUpO1xuICB9XG5cbn1cbmNvbnN0IGFwcGx5Rm9yY2VfciA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3JfdW5pdCA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3UgPSBuZXcgVmVjMygpO1xuY29uc3QgYXBwbHlGb3JjZV9mID0gbmV3IFZlYzMoKTtcbmNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JBID0gbmV3IFZlYzMoKTtcbmNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCID0gbmV3IFZlYzMoKTtcbmNvbnN0IGFwcGx5Rm9yY2VfcmkgPSBuZXcgVmVjMygpO1xuY29uc3QgYXBwbHlGb3JjZV9yaiA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3JpX3hfZiA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3JqX3hfZiA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3RtcCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogV2hlZWxJbmZvXG4gKi9cbmNsYXNzIFdoZWVsSW5mbyB7XG4gIC8qKlxuICAgKiBNYXggdHJhdmVsIGRpc3RhbmNlIG9mIHRoZSBzdXNwZW5zaW9uLCBpbiBtZXRlcnMuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFNwZWVkIHRvIGFwcGx5IHRvIHRoZSB3aGVlbCByb3RhdGlvbiB3aGVuIHRoZSB3aGVlbCBpcyBzbGlkaW5nLlxuICAgKiBAZGVmYXVsdCAtMC4xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCBzaG91bGQgYmUgdXNlZC5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG5cbiAgLyoqXG4gICAqIHNsaWRpbmdcbiAgICovXG5cbiAgLyoqXG4gICAqIENvbm5lY3Rpb24gcG9pbnQsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgY2hhc3NpcyBib2R5IGZyYW1lLlxuICAgKi9cblxuICAvKipcbiAgICogY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBkaXJlY3Rpb25Mb2NhbFxuICAgKi9cblxuICAvKipcbiAgICogZGlyZWN0aW9uV29ybGRcbiAgICovXG5cbiAgLyoqXG4gICAqIGF4bGVMb2NhbFxuICAgKi9cblxuICAvKipcbiAgICogYXhsZVdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzdXNwZW5zaW9uUmVzdExlbmd0aFxuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzdXNwZW5zaW9uTWF4TGVuZ3RoXG4gICAqIEBkZWZhdWx0IDJcbiAgICovXG5cbiAgLyoqXG4gICAqIHJhZGl1c1xuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzdXNwZW5zaW9uU3RpZmZuZXNzXG4gICAqIEBkZWZhdWx0IDEwMFxuICAgKi9cblxuICAvKipcbiAgICogZGFtcGluZ0NvbXByZXNzaW9uXG4gICAqIEBkZWZhdWx0IDEwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBkYW1waW5nUmVsYXhhdGlvblxuICAgKiBAZGVmYXVsdCAxMFxuICAgKi9cblxuICAvKipcbiAgICogZnJpY3Rpb25TbGlwXG4gICAqIEBkZWZhdWx0IDEwLjVcbiAgICovXG5cbiAgLyoqIGZvcndhcmRBY2NlbGVyYXRpb24gKi9cblxuICAvKiogc2lkZUFjY2VsZXJhdGlvbiAqL1xuXG4gIC8qKlxuICAgKiBzdGVlcmluZ1xuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSb3RhdGlvbiB2YWx1ZSwgaW4gcmFkaWFucy5cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cblxuICAvKipcbiAgICogZGVsdGFSb3RhdGlvblxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiByb2xsSW5mbHVlbmNlXG4gICAqIEBkZWZhdWx0IDAuMDFcbiAgICovXG5cbiAgLyoqXG4gICAqIG1heFN1c3BlbnNpb25Gb3JjZVxuICAgKi9cblxuICAvKipcbiAgICogZW5naW5lRm9yY2VcbiAgICovXG5cbiAgLyoqXG4gICAqIGJyYWtlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBpc0Zyb250V2hlZWxcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cblxuICAvKipcbiAgICogY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5XG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG5cbiAgLyoqXG4gICAqIHN1c3BlbnNpb25Gb3JjZVxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzbGlwSW5mb1xuICAgKi9cblxuICAvKipcbiAgICogc2tpZEluZm9cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cblxuICAvKipcbiAgICogc3VzcGVuc2lvbkxlbmd0aFxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzaWRlSW1wdWxzZVxuICAgKi9cblxuICAvKipcbiAgICogZm9yd2FyZEltcHVsc2VcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSByZXN1bHQgZnJvbSByYXljYXN0aW5nLlxuICAgKi9cblxuICAvKipcbiAgICogV2hlZWwgd29ybGQgdHJhbnNmb3JtLlxuICAgKi9cblxuICAvKipcbiAgICogaXNJbkNvbnRhY3RcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMubWF4U3VzcGVuc2lvblRyYXZlbCA9IHZvaWQgMDtcbiAgICB0aGlzLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgPSB2b2lkIDA7XG4gICAgdGhpcy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gdm9pZCAwO1xuICAgIHRoaXMuc2xpZGluZyA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCA9IHZvaWQgMDtcbiAgICB0aGlzLmRpcmVjdGlvbkxvY2FsID0gdm9pZCAwO1xuICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5heGxlTG9jYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5heGxlV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aCA9IHZvaWQgMDtcbiAgICB0aGlzLnN1c3BlbnNpb25NYXhMZW5ndGggPSB2b2lkIDA7XG4gICAgdGhpcy5yYWRpdXMgPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uU3RpZmZuZXNzID0gdm9pZCAwO1xuICAgIHRoaXMuZGFtcGluZ0NvbXByZXNzaW9uID0gdm9pZCAwO1xuICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5mcmljdGlvblNsaXAgPSB2b2lkIDA7XG4gICAgdGhpcy5mb3J3YXJkQWNjZWxlcmF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnN0ZWVyaW5nID0gdm9pZCAwO1xuICAgIHRoaXMucm90YXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5kZWx0YVJvdGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMucm9sbEluZmx1ZW5jZSA9IHZvaWQgMDtcbiAgICB0aGlzLm1heFN1c3BlbnNpb25Gb3JjZSA9IHZvaWQgMDtcbiAgICB0aGlzLmVuZ2luZUZvcmNlID0gdm9pZCAwO1xuICAgIHRoaXMuYnJha2UgPSB2b2lkIDA7XG4gICAgdGhpcy5pc0Zyb250V2hlZWwgPSB2b2lkIDA7XG4gICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHZvaWQgMDtcbiAgICB0aGlzLnN1c3BlbnNpb25Gb3JjZSA9IHZvaWQgMDtcbiAgICB0aGlzLnNsaXBJbmZvID0gdm9pZCAwO1xuICAgIHRoaXMuc2tpZEluZm8gPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uTGVuZ3RoID0gdm9pZCAwO1xuICAgIHRoaXMuc2lkZUltcHVsc2UgPSB2b2lkIDA7XG4gICAgdGhpcy5mb3J3YXJkSW1wdWxzZSA9IHZvaWQgMDtcbiAgICB0aGlzLnJheWNhc3RSZXN1bHQgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IHZvaWQgMDtcbiAgICB0aGlzLmlzSW5Db250YWN0ID0gdm9pZCAwO1xuICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWw6IG5ldyBWZWMzKCksXG4gICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ6IG5ldyBWZWMzKCksXG4gICAgICBkaXJlY3Rpb25Mb2NhbDogbmV3IFZlYzMoKSxcbiAgICAgIGRpcmVjdGlvbldvcmxkOiBuZXcgVmVjMygpLFxuICAgICAgYXhsZUxvY2FsOiBuZXcgVmVjMygpLFxuICAgICAgYXhsZVdvcmxkOiBuZXcgVmVjMygpLFxuICAgICAgc3VzcGVuc2lvblJlc3RMZW5ndGg6IDEsXG4gICAgICBzdXNwZW5zaW9uTWF4TGVuZ3RoOiAyLFxuICAgICAgcmFkaXVzOiAxLFxuICAgICAgc3VzcGVuc2lvblN0aWZmbmVzczogMTAwLFxuICAgICAgZGFtcGluZ0NvbXByZXNzaW9uOiAxMCxcbiAgICAgIGRhbXBpbmdSZWxheGF0aW9uOiAxMCxcbiAgICAgIGZyaWN0aW9uU2xpcDogMTAuNSxcbiAgICAgIGZvcndhcmRBY2NlbGVyYXRpb246IDEsXG4gICAgICBzaWRlQWNjZWxlcmF0aW9uOiAxLFxuICAgICAgc3RlZXJpbmc6IDAsXG4gICAgICByb3RhdGlvbjogMCxcbiAgICAgIGRlbHRhUm90YXRpb246IDAsXG4gICAgICByb2xsSW5mbHVlbmNlOiAwLjAxLFxuICAgICAgbWF4U3VzcGVuc2lvbkZvcmNlOiBOdW1iZXIuTUFYX1ZBTFVFLFxuICAgICAgaXNGcm9udFdoZWVsOiB0cnVlLFxuICAgICAgY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOiAxLFxuICAgICAgc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHk6IDAsXG4gICAgICBzdXNwZW5zaW9uRm9yY2U6IDAsXG4gICAgICBzbGlwSW5mbzogMCxcbiAgICAgIHNraWRJbmZvOiAwLFxuICAgICAgc3VzcGVuc2lvbkxlbmd0aDogMCxcbiAgICAgIG1heFN1c3BlbnNpb25UcmF2ZWw6IDEsXG4gICAgICB1c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiBmYWxzZSxcbiAgICAgIGN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQ6IC0wLjFcbiAgICB9KTtcbiAgICB0aGlzLm1heFN1c3BlbnNpb25UcmF2ZWwgPSBvcHRpb25zLm1heFN1c3BlbnNpb25UcmF2ZWw7XG4gICAgdGhpcy5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gb3B0aW9ucy5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkO1xuICAgIHRoaXMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDtcbiAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IG9wdGlvbnMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsLmNsb25lKCk7XG4gICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZC5jbG9uZSgpO1xuICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSBvcHRpb25zLmRpcmVjdGlvbkxvY2FsLmNsb25lKCk7XG4gICAgdGhpcy5kaXJlY3Rpb25Xb3JsZCA9IG9wdGlvbnMuZGlyZWN0aW9uV29ybGQuY2xvbmUoKTtcbiAgICB0aGlzLmF4bGVMb2NhbCA9IG9wdGlvbnMuYXhsZUxvY2FsLmNsb25lKCk7XG4gICAgdGhpcy5heGxlV29ybGQgPSBvcHRpb25zLmF4bGVXb3JsZC5jbG9uZSgpO1xuICAgIHRoaXMuc3VzcGVuc2lvblJlc3RMZW5ndGggPSBvcHRpb25zLnN1c3BlbnNpb25SZXN0TGVuZ3RoO1xuICAgIHRoaXMuc3VzcGVuc2lvbk1heExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvbk1heExlbmd0aDtcbiAgICB0aGlzLnJhZGl1cyA9IG9wdGlvbnMucmFkaXVzO1xuICAgIHRoaXMuc3VzcGVuc2lvblN0aWZmbmVzcyA9IG9wdGlvbnMuc3VzcGVuc2lvblN0aWZmbmVzcztcbiAgICB0aGlzLmRhbXBpbmdDb21wcmVzc2lvbiA9IG9wdGlvbnMuZGFtcGluZ0NvbXByZXNzaW9uO1xuICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSBvcHRpb25zLmRhbXBpbmdSZWxheGF0aW9uO1xuICAgIHRoaXMuZnJpY3Rpb25TbGlwID0gb3B0aW9ucy5mcmljdGlvblNsaXA7XG4gICAgdGhpcy5mb3J3YXJkQWNjZWxlcmF0aW9uID0gb3B0aW9ucy5mb3J3YXJkQWNjZWxlcmF0aW9uO1xuICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IG9wdGlvbnMuc2lkZUFjY2VsZXJhdGlvbjtcbiAgICB0aGlzLnN0ZWVyaW5nID0gMDtcbiAgICB0aGlzLnJvdGF0aW9uID0gMDtcbiAgICB0aGlzLmRlbHRhUm90YXRpb24gPSAwO1xuICAgIHRoaXMucm9sbEluZmx1ZW5jZSA9IG9wdGlvbnMucm9sbEluZmx1ZW5jZTtcbiAgICB0aGlzLm1heFN1c3BlbnNpb25Gb3JjZSA9IG9wdGlvbnMubWF4U3VzcGVuc2lvbkZvcmNlO1xuICAgIHRoaXMuZW5naW5lRm9yY2UgPSAwO1xuICAgIHRoaXMuYnJha2UgPSAwO1xuICAgIHRoaXMuaXNGcm9udFdoZWVsID0gb3B0aW9ucy5pc0Zyb250V2hlZWw7XG4gICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxO1xuICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwO1xuICAgIHRoaXMuc3VzcGVuc2lvbkZvcmNlID0gMDtcbiAgICB0aGlzLnNsaXBJbmZvID0gMDtcbiAgICB0aGlzLnNraWRJbmZvID0gMDtcbiAgICB0aGlzLnN1c3BlbnNpb25MZW5ndGggPSAwO1xuICAgIHRoaXMuc2lkZUltcHVsc2UgPSAwO1xuICAgIHRoaXMuZm9yd2FyZEltcHVsc2UgPSAwO1xuICAgIHRoaXMucmF5Y2FzdFJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7XG4gICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcbiAgICB0aGlzLmlzSW5Db250YWN0ID0gZmFsc2U7XG4gIH1cblxuICB1cGRhdGVXaGVlbChjaGFzc2lzKSB7XG4gICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHRoaXMucmF5Y2FzdFJlc3VsdDtcblxuICAgIGlmICh0aGlzLmlzSW5Db250YWN0KSB7XG4gICAgICBjb25zdCBwcm9qZWN0ID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QocmF5Y2FzdFJlc3VsdC5kaXJlY3Rpb25Xb3JsZCk7XG4gICAgICByYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzLnBvc2l0aW9uLCByZWxwb3MpO1xuICAgICAgY2hhc3Npcy5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChyZWxwb3MsIGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTtcbiAgICAgIGNvbnN0IHByb2pWZWwgPSByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7XG5cbiAgICAgIGlmIChwcm9qZWN0ID49IC0wLjEpIHtcbiAgICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDtcbiAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjAgLyAwLjE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpbnYgPSAtMSAvIHByb2plY3Q7XG4gICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52O1xuICAgICAgICB0aGlzLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IGludjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm90IGluIGNvbnRhY3QgOiBwb3NpdGlvbiB3aGVlbCBpbiBhIG5pY2UgKHJlc3QgbGVuZ3RoKSBwb3NpdGlvblxuICAgICAgcmF5Y2FzdFJlc3VsdC5zdXNwZW5zaW9uTGVuZ3RoID0gdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aDtcbiAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwLjA7XG4gICAgICByYXljYXN0UmVzdWx0LmRpcmVjdGlvbldvcmxkLnNjYWxlKC0xLCByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTtcbiAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wO1xuICAgIH1cbiAgfVxuXG59XG5jb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7XG5jb25zdCByZWxwb3MgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIFZlaGljbGUgaGVscGVyIGNsYXNzIHRoYXQgY2FzdHMgcmF5cyBmcm9tIHRoZSB3aGVlbCBwb3NpdGlvbnMgdG93YXJkcyB0aGUgZ3JvdW5kIGFuZCBhcHBsaWVzIGZvcmNlcy5cbiAqL1xuY2xhc3MgUmF5Y2FzdFZlaGljbGUge1xuICAvKiogVGhlIGNhciBjaGFzc2lzIGJvZHkuICovXG5cbiAgLyoqIFRoZSB3aGVlbHMuICovXG5cbiAgLyoqIFdpbGwgYmUgc2V0IHRvIHRydWUgaWYgdGhlIGNhciBpcyBzbGlkaW5nLiAqL1xuXG4gIC8qKiBJbmRleCBvZiB0aGUgcmlnaHQgYXhpcy4geD0wLCB5PTEsIHo9MiAqL1xuXG4gIC8qKiBJbmRleCBvZiB0aGUgZm9yd2FyZCBheGlzLiB4PTAsIHk9MSwgej0yICovXG5cbiAgLyoqIEluZGV4IG9mIHRoZSB1cCBheGlzLiB4PTAsIHk9MSwgej0yICovXG5cbiAgLyoqIFRoZSBjb25zdHJhaW50cy4gKi9cblxuICAvKiogT3B0aW9uYWwgcHJlLXN0ZXAgY2FsbGJhY2suICovXG5cbiAgLyoqIE51bWJlciBvZiB3aGVlbHMgb24gdGhlIGdyb3VuZC4gKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuY2hhc3Npc0JvZHkgPSB2b2lkIDA7XG4gICAgdGhpcy53aGVlbEluZm9zID0gdm9pZCAwO1xuICAgIHRoaXMuc2xpZGluZyA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaW5kZXhSaWdodEF4aXMgPSB2b2lkIDA7XG4gICAgdGhpcy5pbmRleEZvcndhcmRBeGlzID0gdm9pZCAwO1xuICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB2b2lkIDA7XG4gICAgdGhpcy5jb25zdHJhaW50cyA9IHZvaWQgMDtcbiAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9IHZvaWQgMDtcbiAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSB2b2lkIDA7XG4gICAgdGhpcy5udW1XaGVlbHNPbkdyb3VuZCA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNCb2R5ID0gb3B0aW9ucy5jaGFzc2lzQm9keTtcbiAgICB0aGlzLndoZWVsSW5mb3MgPSBbXTtcbiAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLndvcmxkID0gbnVsbDtcbiAgICB0aGlzLmluZGV4UmlnaHRBeGlzID0gdHlwZW9mIG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5pbmRleFJpZ2h0QXhpcyA6IDI7XG4gICAgdGhpcy5pbmRleEZvcndhcmRBeGlzID0gdHlwZW9mIG9wdGlvbnMuaW5kZXhGb3J3YXJkQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4Rm9yd2FyZEF4aXMgOiAwO1xuICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleFVwQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4VXBBeGlzIDogMTtcbiAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107XG5cbiAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHt9O1xuXG4gICAgdGhpcy5jdXJyZW50VmVoaWNsZVNwZWVkS21Ib3VyID0gMDtcbiAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gMDtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgd2hlZWwuIEZvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgb3B0aW9ucywgc2VlIGBXaGVlbEluZm9gLlxuICAgKi9cblxuXG4gIGFkZFdoZWVsKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGluZm8gPSBuZXcgV2hlZWxJbmZvKG9wdGlvbnMpO1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy53aGVlbEluZm9zLmxlbmd0aDtcbiAgICB0aGlzLndoZWVsSW5mb3MucHVzaChpbmZvKTtcbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgc3RlZXJpbmcgdmFsdWUgb2YgYSB3aGVlbC5cbiAgICovXG5cblxuICBzZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KSB7XG4gICAgY29uc3Qgd2hlZWwgPSB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF07XG4gICAgd2hlZWwuc3RlZXJpbmcgPSB2YWx1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSB3aGVlbCBmb3JjZSB0byBhcHBseSBvbiBvbmUgb2YgdGhlIHdoZWVscyBlYWNoIHRpbWUgc3RlcFxuICAgKi9cblxuXG4gIGFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpIHtcbiAgICB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0uZW5naW5lRm9yY2UgPSB2YWx1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBicmFraW5nIGZvcmNlIG9mIGEgd2hlZWxcbiAgICovXG5cblxuICBzZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleCkge1xuICAgIHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XS5icmFrZSA9IGJyYWtlO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgdGhlIHZlaGljbGUgaW5jbHVkaW5nIGl0cyBjb25zdHJhaW50cyB0byB0aGUgd29ybGQuXG4gICAqL1xuXG5cbiAgYWRkVG9Xb3JsZCh3b3JsZCkge1xuICAgIHdvcmxkLmFkZEJvZHkodGhpcy5jaGFzc2lzQm9keSk7XG4gICAgY29uc3QgdGhhdCA9IHRoaXM7XG5cbiAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgIHRoYXQudXBkYXRlVmVoaWNsZSh3b3JsZC5kdCk7XG4gICAgfTtcblxuICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7XG4gICAgdGhpcy53b3JsZCA9IHdvcmxkO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgb25lIG9mIHRoZSB3aGVlbCBheGxlcywgd29ybGQtb3JpZW50ZWQuXG4gICAqL1xuXG5cbiAgZ2V0VmVoaWNsZUF4aXNXb3JsZChheGlzSW5kZXgsIHJlc3VsdCkge1xuICAgIHJlc3VsdC5zZXQoYXhpc0luZGV4ID09PSAwID8gMSA6IDAsIGF4aXNJbmRleCA9PT0gMSA/IDEgOiAwLCBheGlzSW5kZXggPT09IDIgPyAxIDogMCk7XG4gICAgdGhpcy5jaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVzdWx0LCByZXN1bHQpO1xuICB9XG5cbiAgdXBkYXRlVmVoaWNsZSh0aW1lU3RlcCkge1xuICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7XG4gICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7XG4gICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgdGhpcy51cGRhdGVXaGVlbFRyYW5zZm9ybShpKTtcbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSAzLjYgKiBjaGFzc2lzQm9keS52ZWxvY2l0eS5sZW5ndGgoKTtcbiAgICBjb25zdCBmb3J3YXJkV29ybGQgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuZ2V0VmVoaWNsZUF4aXNXb3JsZCh0aGlzLmluZGV4Rm9yd2FyZEF4aXMsIGZvcndhcmRXb3JsZCk7XG5cbiAgICBpZiAoZm9yd2FyZFdvcmxkLmRvdChjaGFzc2lzQm9keS52ZWxvY2l0eSkgPCAwKSB7XG4gICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgKj0gLTE7XG4gICAgfSAvLyBzaW11bGF0ZSBzdXNwZW5zaW9uXG5cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHtcbiAgICAgIHRoaXMuY2FzdFJheSh3aGVlbEluZm9zW2ldKTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVN1c3BlbnNpb24odGltZVN0ZXApO1xuICAgIGNvbnN0IGltcHVsc2UgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7XG4gICAgICAvL2FwcGx5IHN1c3BlbnNpb24gZm9yY2VcbiAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTtcbiAgICAgIGxldCBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2U7XG5cbiAgICAgIGlmIChzdXNwZW5zaW9uRm9yY2UgPiB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2UpIHtcbiAgICAgICAgc3VzcGVuc2lvbkZvcmNlID0gd2hlZWwubWF4U3VzcGVuc2lvbkZvcmNlO1xuICAgICAgfVxuXG4gICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwLCBpbXB1bHNlKTtcbiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxwb3MpO1xuICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbHBvcyk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVGcmljdGlvbih0aW1lU3RlcCk7XG4gICAgY29uc3QgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgZndkID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB2ZWwgPSBuZXcgVmVjMygpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOyAvL2NvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7XG4gICAgICAvL3doZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxwb3MpO1xuXG4gICAgICBjaGFzc2lzQm9keS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQsIHZlbCk7IC8vIEhhY2sgdG8gZ2V0IHRoZSByb3RhdGlvbiBpbiB0aGUgY29ycmVjdCBkaXJlY3Rpb25cblxuICAgICAgbGV0IG0gPSAxO1xuXG4gICAgICBzd2l0Y2ggKHRoaXMuaW5kZXhVcEF4aXMpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIG0gPSAtMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7XG4gICAgICAgIHRoaXMuZ2V0VmVoaWNsZUF4aXNXb3JsZCh0aGlzLmluZGV4Rm9yd2FyZEF4aXMsIGZ3ZCk7XG4gICAgICAgIGNvbnN0IHByb2ogPSBmd2QuZG90KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQpO1xuICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHByb2osIGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2opO1xuICAgICAgICBmd2QudnN1YihoaXROb3JtYWxXb3JsZFNjYWxlZFdpdGhQcm9qLCBmd2QpO1xuICAgICAgICBjb25zdCBwcm9qMiA9IGZ3ZC5kb3QodmVsKTtcbiAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IG0gKiBwcm9qMiAqIHRpbWVTdGVwIC8gd2hlZWwucmFkaXVzO1xuICAgICAgfVxuXG4gICAgICBpZiAoKHdoZWVsLnNsaWRpbmcgfHwgIXdoZWVsLmlzSW5Db250YWN0KSAmJiB3aGVlbC5lbmdpbmVGb3JjZSAhPT0gMCAmJiB3aGVlbC51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkKSB7XG4gICAgICAgIC8vIEFwcGx5IGN1c3RvbSByb3RhdGlvbiB3aGVuIGFjY2VsZXJhdGluZyBhbmQgc2xpZGluZ1xuICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gKHdoZWVsLmVuZ2luZUZvcmNlID4gMCA/IDEgOiAtMSkgKiB3aGVlbC5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkICogdGltZVN0ZXA7XG4gICAgICB9IC8vIExvY2sgd2hlZWxzXG5cblxuICAgICAgaWYgKE1hdGguYWJzKHdoZWVsLmJyYWtlKSA+IE1hdGguYWJzKHdoZWVsLmVuZ2luZUZvcmNlKSkge1xuICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gMDtcbiAgICAgIH1cblxuICAgICAgd2hlZWwucm90YXRpb24gKz0gd2hlZWwuZGVsdGFSb3RhdGlvbjsgLy8gVXNlIHRoZSBvbGQgdmFsdWVcblxuICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiAqPSAwLjk5OyAvLyBkYW1waW5nIG9mIHJvdGF0aW9uIHdoZW4gbm90IGluIGNvbnRhY3RcbiAgICB9XG4gIH1cblxuICB1cGRhdGVTdXNwZW5zaW9uKGRlbHRhVGltZSkge1xuICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTtcbiAgICBjb25zdCBjaGFzc2lzTWFzcyA9IGNoYXNzaXNCb2R5Lm1hc3M7XG4gICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvcztcbiAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDtcblxuICAgIGZvciAobGV0IHdfaXQgPSAwOyB3X2l0IDwgbnVtV2hlZWxzOyB3X2l0KyspIHtcbiAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1t3X2l0XTtcblxuICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7XG4gICAgICAgIGxldCBmb3JjZTsgLy8gU3ByaW5nXG5cbiAgICAgICAgY29uc3Qgc3VzcF9sZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aDtcbiAgICAgICAgY29uc3QgY3VycmVudF9sZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoO1xuICAgICAgICBjb25zdCBsZW5ndGhfZGlmZiA9IHN1c3BfbGVuZ3RoIC0gY3VycmVudF9sZW5ndGg7XG4gICAgICAgIGZvcmNlID0gd2hlZWwuc3VzcGVuc2lvblN0aWZmbmVzcyAqIGxlbmd0aF9kaWZmICogd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOyAvLyBEYW1wZXJcblxuICAgICAgICBjb25zdCBwcm9qZWN0ZWRfcmVsX3ZlbCA9IHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5O1xuICAgICAgICBsZXQgc3VzcF9kYW1waW5nO1xuXG4gICAgICAgIGlmIChwcm9qZWN0ZWRfcmVsX3ZlbCA8IDApIHtcbiAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nQ29tcHJlc3Npb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VzcF9kYW1waW5nID0gd2hlZWwuZGFtcGluZ1JlbGF4YXRpb247XG4gICAgICAgIH1cblxuICAgICAgICBmb3JjZSAtPSBzdXNwX2RhbXBpbmcgKiBwcm9qZWN0ZWRfcmVsX3ZlbDtcbiAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gZm9yY2UgKiBjaGFzc2lzTWFzcztcblxuICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkZvcmNlIDwgMCkge1xuICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA9IDA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA9IDA7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIHZlaGljbGUgaW5jbHVkaW5nIGl0cyBjb25zdHJhaW50cyBmcm9tIHRoZSB3b3JsZC5cbiAgICovXG5cblxuICByZW1vdmVGcm9tV29ybGQod29ybGQpIHtcbiAgICB0aGlzLmNvbnN0cmFpbnRzO1xuICAgIHdvcmxkLnJlbW92ZUJvZHkodGhpcy5jaGFzc2lzQm9keSk7XG4gICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTtcbiAgICB0aGlzLndvcmxkID0gbnVsbDtcbiAgfVxuXG4gIGNhc3RSYXkod2hlZWwpIHtcbiAgICBjb25zdCByYXl2ZWN0b3IgPSBjYXN0UmF5X3JheXZlY3RvcjtcbiAgICBjb25zdCB0YXJnZXQgPSBjYXN0UmF5X3RhcmdldDtcbiAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpO1xuICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTtcbiAgICBsZXQgZGVwdGggPSAtMTtcbiAgICBjb25zdCByYXlsZW4gPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLnJhZGl1cztcbiAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZShyYXlsZW4sIHJheXZlY3Rvcik7XG4gICAgY29uc3Qgc291cmNlID0gd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkO1xuICAgIHNvdXJjZS52YWRkKHJheXZlY3RvciwgdGFyZ2V0KTtcbiAgICBjb25zdCByYXljYXN0UmVzdWx0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdDtcbiAgICByYXljYXN0UmVzdWx0LnJlc2V0KCk7IC8vIFR1cm4gb2ZmIHJheSBjb2xsaXNpb24gd2l0aCB0aGUgY2hhc3NpcyB0ZW1wb3JhcmlseVxuXG4gICAgY29uc3Qgb2xkU3RhdGUgPSBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZTtcbiAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGZhbHNlOyAvLyBDYXN0IHJheSBhZ2FpbnN0IHdvcmxkXG5cbiAgICB0aGlzLndvcmxkLnJheVRlc3Qoc291cmNlLCB0YXJnZXQsIHJheWNhc3RSZXN1bHQpO1xuICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gb2xkU3RhdGU7XG4gICAgY29uc3Qgb2JqZWN0ID0gcmF5Y2FzdFJlc3VsdC5ib2R5O1xuICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuZ3JvdW5kT2JqZWN0ID0gMDtcblxuICAgIGlmIChvYmplY3QpIHtcbiAgICAgIGRlcHRoID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTtcbiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQgPSByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkO1xuICAgICAgd2hlZWwuaXNJbkNvbnRhY3QgPSB0cnVlO1xuICAgICAgY29uc3QgaGl0RGlzdGFuY2UgPSByYXljYXN0UmVzdWx0LmRpc3RhbmNlO1xuICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IGhpdERpc3RhbmNlIC0gd2hlZWwucmFkaXVzOyAvLyBjbGFtcCBvbiBtYXggc3VzcGVuc2lvbiB0cmF2ZWxcblxuICAgICAgY29uc3QgbWluU3VzcGVuc2lvbkxlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoIC0gd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDtcbiAgICAgIGNvbnN0IG1heFN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7XG5cbiAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoIDwgbWluU3VzcGVuc2lvbkxlbmd0aCkge1xuICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gbWluU3VzcGVuc2lvbkxlbmd0aDtcbiAgICAgIH1cblxuICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPiBtYXhTdXNwZW5zaW9uTGVuZ3RoKSB7XG4gICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBtYXhTdXNwZW5zaW9uTGVuZ3RoO1xuICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LnJlc2V0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRlbm9taW5hdG9yID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3Qod2hlZWwuZGlyZWN0aW9uV29ybGQpO1xuICAgICAgY29uc3QgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQgPSBuZXcgVmVjMygpO1xuICAgICAgY2hhc3Npc0JvZHkuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7XG4gICAgICBjb25zdCBwcm9qVmVsID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QoY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpO1xuXG4gICAgICBpZiAoZGVub21pbmF0b3IgPj0gLTAuMSkge1xuICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7XG4gICAgICAgIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IDEgLyAwLjE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpbnYgPSAtMSAvIGRlbm9taW5hdG9yO1xuICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHByb2pWZWwgKiBpbnY7XG4gICAgICAgIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IGludjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy9wdXQgd2hlZWwgaW5mbyBhcyBpbiByZXN0IHBvc2l0aW9uXG4gICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggKyAwICogd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDtcbiAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wO1xuICAgICAgd2hlZWwuZGlyZWN0aW9uV29ybGQuc2NhbGUoLTEsIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQpO1xuICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wO1xuICAgIH1cblxuICAgIHJldHVybiBkZXB0aDtcbiAgfVxuXG4gIHVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpIHtcbiAgICB3aGVlbC5pc0luQ29udGFjdCA9IGZhbHNlO1xuICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTtcbiAgICBjaGFzc2lzQm9keS5wb2ludFRvV29ybGRGcmFtZSh3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwsIHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCk7XG4gICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmRpcmVjdGlvbkxvY2FsLCB3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7XG4gICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmF4bGVMb2NhbCwgd2hlZWwuYXhsZVdvcmxkKTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIG9uZSBvZiB0aGUgd2hlZWwgdHJhbnNmb3JtLlxuICAgKiBOb3RlIHdoZW4gcmVuZGVyaW5nIHdoZWVsczogZHVyaW5nIGVhY2ggc3RlcCwgd2hlZWwgdHJhbnNmb3JtcyBhcmUgdXBkYXRlZCBCRUZPUkUgdGhlIGNoYXNzaXM7IGllLiB0aGVpciBwb3NpdGlvbiBiZWNvbWVzIGludmFsaWQgYWZ0ZXIgdGhlIHN0ZXAuIFRodXMgd2hlbiB5b3UgcmVuZGVyIHdoZWVscywgeW91IG11c3QgdXBkYXRlIHdoZWVsIHRyYW5zZm9ybXMgYmVmb3JlIHJlbmRlcmluZyB0aGVtLiBTZWUgcmF5Y2FzdFZlaGljbGUgZGVtbyBmb3IgYW4gZXhhbXBsZS5cbiAgICogQHBhcmFtIHdoZWVsSW5kZXggVGhlIHdoZWVsIGluZGV4IHRvIHVwZGF0ZS5cbiAgICovXG5cblxuICB1cGRhdGVXaGVlbFRyYW5zZm9ybSh3aGVlbEluZGV4KSB7XG4gICAgY29uc3QgdXAgPSB0bXBWZWM0O1xuICAgIGNvbnN0IHJpZ2h0ID0gdG1wVmVjNTtcbiAgICBjb25zdCBmd2QgPSB0bXBWZWM2O1xuICAgIGNvbnN0IHdoZWVsID0gdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdO1xuICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCk7XG4gICAgd2hlZWwuZGlyZWN0aW9uTG9jYWwuc2NhbGUoLTEsIHVwKTtcbiAgICByaWdodC5jb3B5KHdoZWVsLmF4bGVMb2NhbCk7XG4gICAgdXAuY3Jvc3MocmlnaHQsIGZ3ZCk7XG4gICAgZndkLm5vcm1hbGl6ZSgpO1xuICAgIHJpZ2h0Lm5vcm1hbGl6ZSgpOyAvLyBSb3RhdGUgYXJvdW5kIHN0ZWVyaW5nIG92ZXIgdGhlIHdoZWVsQXhsZVxuXG4gICAgY29uc3Qgc3RlZXJpbmcgPSB3aGVlbC5zdGVlcmluZztcbiAgICBjb25zdCBzdGVlcmluZ09ybiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgc3RlZXJpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZSh1cCwgc3RlZXJpbmcpO1xuICAgIGNvbnN0IHJvdGF0aW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTtcbiAgICByb3RhdGluZ09ybi5zZXRGcm9tQXhpc0FuZ2xlKHJpZ2h0LCB3aGVlbC5yb3RhdGlvbik7IC8vIFdvcmxkIHJvdGF0aW9uIG9mIHRoZSB3aGVlbFxuXG4gICAgY29uc3QgcSA9IHdoZWVsLndvcmxkVHJhbnNmb3JtLnF1YXRlcm5pb247XG4gICAgdGhpcy5jaGFzc2lzQm9keS5xdWF0ZXJuaW9uLm11bHQoc3RlZXJpbmdPcm4sIHEpO1xuICAgIHEubXVsdChyb3RhdGluZ09ybiwgcSk7XG4gICAgcS5ub3JtYWxpemUoKTsgLy8gd29ybGQgcG9zaXRpb24gb2YgdGhlIHdoZWVsXG5cbiAgICBjb25zdCBwID0gd2hlZWwud29ybGRUcmFuc2Zvcm0ucG9zaXRpb247XG4gICAgcC5jb3B5KHdoZWVsLmRpcmVjdGlvbldvcmxkKTtcbiAgICBwLnNjYWxlKHdoZWVsLnN1c3BlbnNpb25MZW5ndGgsIHApO1xuICAgIHAudmFkZCh3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQsIHApO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHdvcmxkIHRyYW5zZm9ybSBvZiBvbmUgb2YgdGhlIHdoZWVsc1xuICAgKi9cblxuXG4gIGdldFdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWxJbmRleCkge1xuICAgIHJldHVybiB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0ud29ybGRUcmFuc2Zvcm07XG4gIH1cblxuICB1cGRhdGVGcmljdGlvbih0aW1lU3RlcCkge1xuICAgIGNvbnN0IHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiA9IHVwZGF0ZUZyaWN0aW9uX3N1cmZOb3JtYWxXU19zY2FsZWRfcHJvajsgLy9jYWxjdWxhdGUgdGhlIGltcHVsc2UsIHNvIHRoYXQgdGhlIHdoZWVscyBkb24ndCBtb3ZlIHNpZGV3YXJkc1xuXG4gICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvcztcbiAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDtcbiAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7XG4gICAgY29uc3QgZm9yd2FyZFdTID0gdXBkYXRlRnJpY3Rpb25fZm9yd2FyZFdTO1xuICAgIGNvbnN0IGF4bGUgPSB1cGRhdGVGcmljdGlvbl9heGxlO1xuICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldO1xuICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5O1xuXG4gICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7XG4gICAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQrKztcbiAgICAgIH1cblxuICAgICAgd2hlZWwuc2lkZUltcHVsc2UgPSAwO1xuICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSAwO1xuXG4gICAgICBpZiAoIWZvcndhcmRXU1tpXSkge1xuICAgICAgICBmb3J3YXJkV1NbaV0gPSBuZXcgVmVjMygpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWF4bGVbaV0pIHtcbiAgICAgICAgYXhsZVtpXSA9IG5ldyBWZWMzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldO1xuICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5O1xuXG4gICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGF4bGVpID0gYXhsZVtpXTtcbiAgICAgICAgY29uc3Qgd2hlZWxUcmFucyA9IHRoaXMuZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZChpKTsgLy8gR2V0IHdvcmxkIGF4bGVcblxuICAgICAgICB3aGVlbFRyYW5zLnZlY3RvclRvV29ybGRGcmFtZShkaXJlY3Rpb25zW3RoaXMuaW5kZXhSaWdodEF4aXNdLCBheGxlaSk7XG4gICAgICAgIGNvbnN0IHN1cmZOb3JtYWxXUyA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7XG4gICAgICAgIGNvbnN0IHByb2ogPSBheGxlaS5kb3Qoc3VyZk5vcm1hbFdTKTtcbiAgICAgICAgc3VyZk5vcm1hbFdTLnNjYWxlKHByb2osIHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaik7XG4gICAgICAgIGF4bGVpLnZzdWIoc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qLCBheGxlaSk7XG4gICAgICAgIGF4bGVpLm5vcm1hbGl6ZSgpO1xuICAgICAgICBzdXJmTm9ybWFsV1MuY3Jvc3MoYXhsZWksIGZvcndhcmRXU1tpXSk7XG4gICAgICAgIGZvcndhcmRXU1tpXS5ub3JtYWxpemUoKTtcbiAgICAgICAgd2hlZWwuc2lkZUltcHVsc2UgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsKGNoYXNzaXNCb2R5LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGdyb3VuZE9iamVjdCwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBheGxlaSk7XG4gICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHNpZGVGcmljdGlvblN0aWZmbmVzczI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2lkZUZhY3RvciA9IDE7XG4gICAgY29uc3QgZndkRmFjdG9yID0gMC41O1xuICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldO1xuICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5O1xuICAgICAgbGV0IHJvbGxpbmdGcmljdGlvbiA9IDA7XG4gICAgICB3aGVlbC5zbGlwSW5mbyA9IDE7XG5cbiAgICAgIGlmIChncm91bmRPYmplY3QpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdFJvbGxpbmdGcmljdGlvbkltcHVsc2UgPSAwO1xuICAgICAgICBjb25zdCBtYXhJbXB1bHNlID0gd2hlZWwuYnJha2UgPyB3aGVlbC5icmFrZSA6IGRlZmF1bHRSb2xsaW5nRnJpY3Rpb25JbXB1bHNlOyAvLyBidFdoZWVsQ29udGFjdFBvaW50IGNvbnRhY3RQdChjaGFzc2lzQm9keSxncm91bmRPYmplY3Qsd2hlZWxJbmZyYXljYXN0SW5mby5oaXRQb2ludFdvcmxkLGZvcndhcmRXU1t3aGVlbF0sbWF4SW1wdWxzZSk7XG4gICAgICAgIC8vIHJvbGxpbmdGcmljdGlvbiA9IGNhbGNSb2xsaW5nRnJpY3Rpb24oY29udGFjdFB0KTtcblxuICAgICAgICByb2xsaW5nRnJpY3Rpb24gPSBjYWxjUm9sbGluZ0ZyaWN0aW9uKGNoYXNzaXNCb2R5LCBncm91bmRPYmplY3QsIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgZm9yd2FyZFdTW2ldLCBtYXhJbXB1bHNlKTtcbiAgICAgICAgcm9sbGluZ0ZyaWN0aW9uICs9IHdoZWVsLmVuZ2luZUZvcmNlICogdGltZVN0ZXA7IC8vIHJvbGxpbmdGcmljdGlvbiA9IDA7XG5cbiAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4SW1wdWxzZSAvIHJvbGxpbmdGcmljdGlvbjtcbiAgICAgICAgd2hlZWwuc2xpcEluZm8gKj0gZmFjdG9yO1xuICAgICAgfSAvL3N3aXRjaCBiZXR3ZWVuIGFjdGl2ZSByb2xsaW5nICh0aHJvdHRsZSksIGJyYWtpbmcgYW5kIG5vbi1hY3RpdmUgcm9sbGluZyBmcmljdGlvbiAobnRocm90dGxlL2JyZWFrKVxuXG5cbiAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gMDtcbiAgICAgIHdoZWVsLnNraWRJbmZvID0gMTtcblxuICAgICAgaWYgKGdyb3VuZE9iamVjdCkge1xuICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7XG4gICAgICAgIGNvbnN0IG1heGltcCA9IHdoZWVsLnN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwICogd2hlZWwuZnJpY3Rpb25TbGlwO1xuICAgICAgICBjb25zdCBtYXhpbXBTaWRlID0gbWF4aW1wO1xuICAgICAgICBjb25zdCBtYXhpbXBTcXVhcmVkID0gbWF4aW1wICogbWF4aW1wU2lkZTtcbiAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSByb2xsaW5nRnJpY3Rpb247IC8vd2hlZWxJbmZvLmVuZ2luZUZvcmNlKiB0aW1lU3RlcDtcblxuICAgICAgICBjb25zdCB4ID0gd2hlZWwuZm9yd2FyZEltcHVsc2UgKiBmd2RGYWN0b3IgLyB3aGVlbC5mb3J3YXJkQWNjZWxlcmF0aW9uO1xuICAgICAgICBjb25zdCB5ID0gd2hlZWwuc2lkZUltcHVsc2UgKiBzaWRlRmFjdG9yIC8gd2hlZWwuc2lkZUFjY2VsZXJhdGlvbjtcbiAgICAgICAgY29uc3QgaW1wdWxzZVNxdWFyZWQgPSB4ICogeCArIHkgKiB5O1xuICAgICAgICB3aGVlbC5zbGlkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGltcHVsc2VTcXVhcmVkID4gbWF4aW1wU3F1YXJlZCkge1xuICAgICAgICAgIHRoaXMuc2xpZGluZyA9IHRydWU7XG4gICAgICAgICAgd2hlZWwuc2xpZGluZyA9IHRydWU7XG4gICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4aW1wIC8gTWF0aC5zcXJ0KGltcHVsc2VTcXVhcmVkKTtcbiAgICAgICAgICB3aGVlbC5za2lkSW5mbyAqPSBmYWN0b3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5zbGlkaW5nKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTtcblxuICAgICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHtcbiAgICAgICAgICBpZiAod2hlZWwuc2tpZEluZm8gPCAxKSB7XG4gICAgICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbztcbiAgICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gYXBwbHkgdGhlIGltcHVsc2VzXG5cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHtcbiAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTtcbiAgICAgIGNvbnN0IHJlbF9wb3MgPSBuZXcgVmVjMygpO1xuICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbF9wb3MpOyAvLyBjYW5ub25zIGFwcGx5aW1wdWxzZSBpcyB1c2luZyB3b3JsZCBjb29yZCBmb3IgdGhlIHBvc2l0aW9uXG4gICAgICAvL3JlbF9wb3MuY29weSh3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQpO1xuXG4gICAgICBpZiAod2hlZWwuZm9yd2FyZEltcHVsc2UgIT09IDApIHtcbiAgICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7XG4gICAgICAgIGZvcndhcmRXU1tpXS5zY2FsZSh3aGVlbC5mb3J3YXJkSW1wdWxzZSwgaW1wdWxzZSk7XG4gICAgICAgIGNoYXNzaXNCb2R5LmFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxfcG9zKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTtcbiAgICAgICAgY29uc3QgcmVsX3BvczIgPSBuZXcgVmVjMygpO1xuICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1Yihncm91bmRPYmplY3QucG9zaXRpb24sIHJlbF9wb3MyKTsgLy9yZWxfcG9zMi5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7XG5cbiAgICAgICAgY29uc3Qgc2lkZUltcCA9IG5ldyBWZWMzKCk7XG4gICAgICAgIGF4bGVbaV0uc2NhbGUod2hlZWwuc2lkZUltcHVsc2UsIHNpZGVJbXApOyAvLyBTY2FsZSB0aGUgcmVsYXRpdmUgcG9zaXRpb24gaW4gdGhlIHVwIGRpcmVjdGlvbiB3aXRoIHJvbGxJbmZsdWVuY2UuXG4gICAgICAgIC8vIElmIHJvbGxJbmZsdWVuY2UgaXMgMSwgdGhlIGltcHVsc2Ugd2lsbCBiZSBhcHBsaWVkIG9uIHRoZSBoaXRQb2ludCAoZWFzeSB0byByb2xsIG92ZXIpLCBpZiBpdCBpcyB6ZXJvIGl0IHdpbGwgYmUgYXBwbGllZCBpbiB0aGUgc2FtZSBwbGFuZSBhcyB0aGUgY2VudGVyIG9mIG1hc3MgKG5vdCBlYXN5IHRvIHJvbGwgb3ZlcikuXG5cbiAgICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Mb2NhbEZyYW1lKHJlbF9wb3MsIHJlbF9wb3MpO1xuICAgICAgICByZWxfcG9zWyd4eXonW3RoaXMuaW5kZXhVcEF4aXNdXSAqPSB3aGVlbC5yb2xsSW5mbHVlbmNlO1xuICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7XG4gICAgICAgIGNoYXNzaXNCb2R5LmFwcGx5SW1wdWxzZShzaWRlSW1wLCByZWxfcG9zKTsgLy9hcHBseSBmcmljdGlvbiBpbXB1bHNlIG9uIHRoZSBncm91bmRcblxuICAgICAgICBzaWRlSW1wLnNjYWxlKC0xLCBzaWRlSW1wKTtcbiAgICAgICAgZ3JvdW5kT2JqZWN0LmFwcGx5SW1wdWxzZShzaWRlSW1wLCByZWxfcG9zMik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cbmNvbnN0IHRtcFZlYzQgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wVmVjNSA9IG5ldyBWZWMzKCk7XG5jb25zdCB0bXBWZWM2ID0gbmV3IFZlYzMoKTtcbm5ldyBSYXkoKTtcbmNvbnN0IGNhc3RSYXlfcmF5dmVjdG9yID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNhc3RSYXlfdGFyZ2V0ID0gbmV3IFZlYzMoKTtcbmNvbnN0IGRpcmVjdGlvbnMgPSBbbmV3IFZlYzMoMSwgMCwgMCksIG5ldyBWZWMzKDAsIDEsIDApLCBuZXcgVmVjMygwLCAwLCAxKV07XG5jb25zdCB1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2ogPSBuZXcgVmVjMygpO1xuY29uc3QgdXBkYXRlRnJpY3Rpb25fYXhsZSA9IFtdO1xuY29uc3QgdXBkYXRlRnJpY3Rpb25fZm9yd2FyZFdTID0gW107XG5jb25zdCBzaWRlRnJpY3Rpb25TdGlmZm5lc3MyID0gMTtcbmNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMSA9IG5ldyBWZWMzKCk7XG5jb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDIgPSBuZXcgVmVjMygpO1xuY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwgPSBuZXcgVmVjMygpO1xuXG5mdW5jdGlvbiBjYWxjUm9sbGluZ0ZyaWN0aW9uKGJvZHkwLCBib2R5MSwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCwgbWF4SW1wdWxzZSkge1xuICBsZXQgajEgPSAwO1xuICBjb25zdCBjb250YWN0UG9zV29ybGQgPSBmcmljdGlvblBvc1dvcmxkOyAvLyBjb25zdCByZWxfcG9zMSA9IG5ldyBWZWMzKCk7XG4gIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTtcblxuICBjb25zdCB2ZWwxID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxO1xuICBjb25zdCB2ZWwyID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwyO1xuICBjb25zdCB2ZWwgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDsgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTAucG9zaXRpb24sIHJlbF9wb3MxKTtcbiAgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTEucG9zaXRpb24sIHJlbF9wb3MyKTtcblxuICBib2R5MC5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChjb250YWN0UG9zV29ybGQsIHZlbDEpO1xuICBib2R5MS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChjb250YWN0UG9zV29ybGQsIHZlbDIpO1xuICB2ZWwxLnZzdWIodmVsMiwgdmVsKTtcbiAgY29uc3QgdnJlbCA9IGZyaWN0aW9uRGlyZWN0aW9uV29ybGQuZG90KHZlbCk7XG4gIGNvbnN0IGRlbm9tMCA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keTAsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQpO1xuICBjb25zdCBkZW5vbTEgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHkxLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkKTtcbiAgY29uc3QgcmVsYXhhdGlvbiA9IDE7XG4gIGNvbnN0IGphY0RpYWdBQkludiA9IHJlbGF4YXRpb24gLyAoZGVub20wICsgZGVub20xKTsgLy8gY2FsY3VsYXRlIGogdGhhdCBtb3ZlcyB1cyB0byB6ZXJvIHJlbGF0aXZlIHZlbG9jaXR5XG5cbiAgajEgPSAtdnJlbCAqIGphY0RpYWdBQkludjtcblxuICBpZiAobWF4SW1wdWxzZSA8IGoxKSB7XG4gICAgajEgPSBtYXhJbXB1bHNlO1xuICB9XG5cbiAgaWYgKGoxIDwgLW1heEltcHVsc2UpIHtcbiAgICBqMSA9IC1tYXhJbXB1bHNlO1xuICB9XG5cbiAgcmV0dXJuIGoxO1xufVxuXG5jb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfYzAgPSBuZXcgVmVjMygpO1xuY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWMgPSBuZXcgVmVjMygpO1xuY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tID0gbmV3IFZlYzMoKTtcblxuZnVuY3Rpb24gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5LCBwb3MsIG5vcm1hbCkge1xuICBjb25zdCByMCA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfcjA7XG4gIGNvbnN0IGMwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMDtcbiAgY29uc3QgdmVjID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWM7XG4gIGNvbnN0IG0gPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX207XG4gIHBvcy52c3ViKGJvZHkucG9zaXRpb24sIHIwKTtcbiAgcjAuY3Jvc3Mobm9ybWFsLCBjMCk7XG4gIGJvZHkuaW52SW5lcnRpYVdvcmxkLnZtdWx0KGMwLCBtKTtcbiAgbS5jcm9zcyhyMCwgdmVjKTtcbiAgcmV0dXJuIGJvZHkuaW52TWFzcyArIG5vcm1hbC5kb3QodmVjKTtcbn1cblxuY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMiA9IG5ldyBWZWMzKCk7XG5jb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbCA9IG5ldyBWZWMzKCk7IC8vIGJpbGF0ZXJhbCBjb25zdHJhaW50IGJldHdlZW4gdHdvIGR5bmFtaWMgb2JqZWN0c1xuXG5mdW5jdGlvbiByZXNvbHZlU2luZ2xlQmlsYXRlcmFsKGJvZHkxLCBwb3MxLCBib2R5MiwgcG9zMiwgbm9ybWFsKSB7XG4gIGNvbnN0IG5vcm1hbExlblNxciA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7XG5cbiAgaWYgKG5vcm1hbExlblNxciA+IDEuMSkge1xuICAgIHJldHVybiAwOyAvLyBubyBpbXB1bHNlXG4gIH0gLy8gY29uc3QgcmVsX3BvczEgPSBuZXcgVmVjMygpO1xuICAvLyBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7XG4gIC8vIHBvczEudnN1Yihib2R5MS5wb3NpdGlvbiwgcmVsX3BvczEpO1xuICAvLyBwb3MyLnZzdWIoYm9keTIucG9zaXRpb24sIHJlbF9wb3MyKTtcblxuXG4gIGNvbnN0IHZlbDEgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDE7XG4gIGNvbnN0IHZlbDIgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDI7XG4gIGNvbnN0IHZlbCA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsO1xuICBib2R5MS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChwb3MxLCB2ZWwxKTtcbiAgYm9keTIuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocG9zMiwgdmVsMik7XG4gIHZlbDEudnN1Yih2ZWwyLCB2ZWwpO1xuICBjb25zdCByZWxfdmVsID0gbm9ybWFsLmRvdCh2ZWwpO1xuICBjb25zdCBjb250YWN0RGFtcGluZyA9IDAuMjtcbiAgY29uc3QgbWFzc1Rlcm0gPSAxIC8gKGJvZHkxLmludk1hc3MgKyBib2R5Mi5pbnZNYXNzKTtcbiAgY29uc3QgaW1wdWxzZSA9IC1jb250YWN0RGFtcGluZyAqIHJlbF92ZWwgKiBtYXNzVGVybTtcbiAgcmV0dXJuIGltcHVsc2U7XG59XG5cbi8qKlxuICogU3BoZXJpY2FsIHNoYXBlXG4gKiBAZXhhbXBsZVxuICogICAgIGNvbnN0IHJhZGl1cyA9IDFcbiAqICAgICBjb25zdCBzcGhlcmVTaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKHJhZGl1cylcbiAqICAgICBjb25zdCBzcGhlcmVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IHNwaGVyZVNoYXBlIH0pXG4gKiAgICAgd29ybGQuYWRkQm9keShzcGhlcmVCb2R5KVxuICovXG5jbGFzcyBTcGhlcmUgZXh0ZW5kcyBTaGFwZSB7XG4gIC8qKlxuICAgKiBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUuXG4gICAqL1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZSwgYSBub24tbmVnYXRpdmUgbnVtYmVyLlxuICAgKi9cbiAgY29uc3RydWN0b3IocmFkaXVzKSB7XG4gICAgc3VwZXIoe1xuICAgICAgdHlwZTogU2hhcGUudHlwZXMuU1BIRVJFXG4gICAgfSk7XG4gICAgdGhpcy5yYWRpdXMgPSB2b2lkIDA7XG4gICAgdGhpcy5yYWRpdXMgPSByYWRpdXMgIT09IHVuZGVmaW5lZCA/IHJhZGl1cyA6IDEuMDtcblxuICAgIGlmICh0aGlzLnJhZGl1cyA8IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNwaGVyZSByYWRpdXMgY2Fubm90IGJlIG5lZ2F0aXZlLicpO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTtcbiAgfVxuICAvKiogY2FsY3VsYXRlTG9jYWxJbmVydGlhICovXG5cblxuICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIGNvbnN0IEkgPSAyLjAgKiBtYXNzICogdGhpcy5yYWRpdXMgKiB0aGlzLnJhZGl1cyAvIDUuMDtcbiAgICB0YXJnZXQueCA9IEk7XG4gICAgdGFyZ2V0LnkgPSBJO1xuICAgIHRhcmdldC56ID0gSTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKiB2b2x1bWUgKi9cblxuXG4gIHZvbHVtZSgpIHtcbiAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIE1hdGgucG93KHRoaXMucmFkaXVzLCAzKSAvIDMuMDtcbiAgfVxuXG4gIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkge1xuICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB0aGlzLnJhZGl1cztcbiAgfVxuXG4gIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7XG4gICAgY29uc3QgciA9IHRoaXMucmFkaXVzO1xuICAgIGNvbnN0IGF4ZXMgPSBbJ3gnLCAneScsICd6J107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGF4ID0gYXhlc1tpXTtcbiAgICAgIG1pbltheF0gPSBwb3NbYXhdIC0gcjtcbiAgICAgIG1heFtheF0gPSBwb3NbYXhdICsgcjtcbiAgICB9XG4gIH1cblxufVxuXG4vKipcbiAqIFNpbXBsZSB2ZWhpY2xlIGhlbHBlciBjbGFzcyB3aXRoIHNwaGVyaWNhbCByaWdpZCBib2R5IHdoZWVscy5cbiAqL1xuY2xhc3MgUmlnaWRWZWhpY2xlIHtcbiAgLyoqXG4gICAqIFRoZSBib2RpZXMgb2YgdGhlIHdoZWVscy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBjaGFzc2lzIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY29uc3RyYWludHMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgd2hlZWwgYXhlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSB3aGVlbCBmb3JjZXMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLndoZWVsQm9kaWVzID0gdm9pZCAwO1xuICAgIHRoaXMuY29vcmRpbmF0ZVN5c3RlbSA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNCb2R5ID0gdm9pZCAwO1xuICAgIHRoaXMuY29uc3RyYWludHMgPSB2b2lkIDA7XG4gICAgdGhpcy53aGVlbEF4ZXMgPSB2b2lkIDA7XG4gICAgdGhpcy53aGVlbEZvcmNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLndoZWVsQm9kaWVzID0gW107XG4gICAgdGhpcy5jb29yZGluYXRlU3lzdGVtID0gdHlwZW9mIG9wdGlvbnMuY29vcmRpbmF0ZVN5c3RlbSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvb3JkaW5hdGVTeXN0ZW0uY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDIsIDMpO1xuXG4gICAgaWYgKG9wdGlvbnMuY2hhc3Npc0JvZHkpIHtcbiAgICAgIHRoaXMuY2hhc3Npc0JvZHkgPSBvcHRpb25zLmNoYXNzaXNCb2R5O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBObyBjaGFzc2lzIGJvZHkgZ2l2ZW4uIENyZWF0ZSBpdCFcbiAgICAgIHRoaXMuY2hhc3Npc0JvZHkgPSBuZXcgQm9keSh7XG4gICAgICAgIG1hc3M6IDEsXG4gICAgICAgIHNoYXBlOiBuZXcgQm94KG5ldyBWZWMzKDUsIDAuNSwgMikpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107XG4gICAgdGhpcy53aGVlbEF4ZXMgPSBbXTtcbiAgICB0aGlzLndoZWVsRm9yY2VzID0gW107XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHdoZWVsXG4gICAqL1xuXG5cbiAgYWRkV2hlZWwob3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IHdoZWVsQm9keTtcblxuICAgIGlmIChvcHRpb25zLmJvZHkpIHtcbiAgICAgIHdoZWVsQm9keSA9IG9wdGlvbnMuYm9keTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm8gd2hlZWwgYm9keSBnaXZlbi4gQ3JlYXRlIGl0IVxuICAgICAgd2hlZWxCb2R5ID0gbmV3IEJvZHkoe1xuICAgICAgICBtYXNzOiAxLFxuICAgICAgICBzaGFwZTogbmV3IFNwaGVyZSgxLjIpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLndoZWVsQm9kaWVzLnB1c2god2hlZWxCb2R5KTtcbiAgICB0aGlzLndoZWVsRm9yY2VzLnB1c2goMCk7IC8vIFBvc2l0aW9uIGNvbnN0cmFpbiB3aGVlbHNcblxuICAgIGNvbnN0IHBvc2l0aW9uID0gdHlwZW9mIG9wdGlvbnMucG9zaXRpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5wb3NpdGlvbi5jbG9uZSgpIDogbmV3IFZlYzMoKTsgLy8gU2V0IHBvc2l0aW9uIGxvY2FsbHkgdG8gdGhlIGNoYXNzaXNcblxuICAgIGNvbnN0IHdvcmxkUG9zaXRpb24gPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuY2hhc3Npc0JvZHkucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHdvcmxkUG9zaXRpb24pO1xuICAgIHdoZWVsQm9keS5wb3NpdGlvbi5zZXQod29ybGRQb3NpdGlvbi54LCB3b3JsZFBvc2l0aW9uLnksIHdvcmxkUG9zaXRpb24ueik7IC8vIENvbnN0cmFpbiB3aGVlbFxuXG4gICAgY29uc3QgYXhpcyA9IHR5cGVvZiBvcHRpb25zLmF4aXMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5heGlzLmNsb25lKCkgOiBuZXcgVmVjMygwLCAwLCAxKTtcbiAgICB0aGlzLndoZWVsQXhlcy5wdXNoKGF4aXMpO1xuICAgIGNvbnN0IGhpbmdlQ29uc3RyYWludCA9IG5ldyBIaW5nZUNvbnN0cmFpbnQodGhpcy5jaGFzc2lzQm9keSwgd2hlZWxCb2R5LCB7XG4gICAgICBwaXZvdEE6IHBvc2l0aW9uLFxuICAgICAgYXhpc0E6IGF4aXMsXG4gICAgICBwaXZvdEI6IFZlYzMuWkVSTyxcbiAgICAgIGF4aXNCOiBheGlzLFxuICAgICAgY29sbGlkZUNvbm5lY3RlZDogZmFsc2VcbiAgICB9KTtcbiAgICB0aGlzLmNvbnN0cmFpbnRzLnB1c2goaGluZ2VDb25zdHJhaW50KTtcbiAgICByZXR1cm4gdGhpcy53aGVlbEJvZGllcy5sZW5ndGggLSAxO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0ZWVyaW5nIHZhbHVlIG9mIGEgd2hlZWwuXG4gICAqIEB0b2RvIGNoZWNrIGNvb3JkaW5hdGVTeXN0ZW1cbiAgICovXG5cblxuICBzZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KSB7XG4gICAgLy8gU2V0IGFuZ2xlIG9mIHRoZSBoaW5nZSBheGlzXG4gICAgY29uc3QgYXhpcyA9IHRoaXMud2hlZWxBeGVzW3doZWVsSW5kZXhdO1xuICAgIGNvbnN0IGMgPSBNYXRoLmNvcyh2YWx1ZSk7XG4gICAgY29uc3QgcyA9IE1hdGguc2luKHZhbHVlKTtcbiAgICBjb25zdCB4ID0gYXhpcy54O1xuICAgIGNvbnN0IHogPSBheGlzLno7XG4gICAgdGhpcy5jb25zdHJhaW50c1t3aGVlbEluZGV4XS5heGlzQS5zZXQoLWMgKiB4ICsgcyAqIHosIDAsIHMgKiB4ICsgYyAqIHopO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHRhcmdldCByb3RhdGlvbmFsIHNwZWVkIG9mIHRoZSBoaW5nZSBjb25zdHJhaW50LlxuICAgKi9cblxuXG4gIHNldE1vdG9yU3BlZWQodmFsdWUsIHdoZWVsSW5kZXgpIHtcbiAgICBjb25zdCBoaW5nZUNvbnN0cmFpbnQgPSB0aGlzLmNvbnN0cmFpbnRzW3doZWVsSW5kZXhdO1xuICAgIGhpbmdlQ29uc3RyYWludC5lbmFibGVNb3RvcigpO1xuICAgIGhpbmdlQ29uc3RyYWludC5tb3RvclRhcmdldFZlbG9jaXR5ID0gdmFsdWU7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgdGFyZ2V0IHJvdGF0aW9uYWwgc3BlZWQgb2YgdGhlIGhpbmdlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG5cbiAgZGlzYWJsZU1vdG9yKHdoZWVsSW5kZXgpIHtcbiAgICBjb25zdCBoaW5nZUNvbnN0cmFpbnQgPSB0aGlzLmNvbnN0cmFpbnRzW3doZWVsSW5kZXhdO1xuICAgIGhpbmdlQ29uc3RyYWludC5kaXNhYmxlTW90b3IoKTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSB3aGVlbCBmb3JjZSB0byBhcHBseSBvbiBvbmUgb2YgdGhlIHdoZWVscyBlYWNoIHRpbWUgc3RlcFxuICAgKi9cblxuXG4gIHNldFdoZWVsRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpIHtcbiAgICB0aGlzLndoZWVsRm9yY2VzW3doZWVsSW5kZXhdID0gdmFsdWU7XG4gIH1cbiAgLyoqXG4gICAqIEFwcGx5IGEgdG9ycXVlIG9uIG9uZSBvZiB0aGUgd2hlZWxzLlxuICAgKi9cblxuXG4gIGFwcGx5V2hlZWxGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCkge1xuICAgIGNvbnN0IGF4aXMgPSB0aGlzLndoZWVsQXhlc1t3aGVlbEluZGV4XTtcbiAgICBjb25zdCB3aGVlbEJvZHkgPSB0aGlzLndoZWVsQm9kaWVzW3doZWVsSW5kZXhdO1xuICAgIGNvbnN0IGJvZHlUb3JxdWUgPSB3aGVlbEJvZHkudG9ycXVlO1xuICAgIGF4aXMuc2NhbGUodmFsdWUsIHRvcnF1ZSk7XG4gICAgd2hlZWxCb2R5LnZlY3RvclRvV29ybGRGcmFtZSh0b3JxdWUsIHRvcnF1ZSk7XG4gICAgYm9keVRvcnF1ZS52YWRkKHRvcnF1ZSwgYm9keVRvcnF1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIHRvIHRoZSB3b3JsZC5cbiAgICovXG5cblxuICBhZGRUb1dvcmxkKHdvcmxkKSB7XG4gICAgY29uc3QgY29uc3RyYWludHMgPSB0aGlzLmNvbnN0cmFpbnRzO1xuICAgIGNvbnN0IGJvZGllcyA9IHRoaXMud2hlZWxCb2RpZXMuY29uY2F0KFt0aGlzLmNoYXNzaXNCb2R5XSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgd29ybGQuYWRkQm9keShib2RpZXNbaV0pO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uc3RyYWludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHdvcmxkLmFkZENvbnN0cmFpbnQoY29uc3RyYWludHNbaV0pO1xuICAgIH1cblxuICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLl91cGRhdGUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBfdXBkYXRlKCkge1xuICAgIGNvbnN0IHdoZWVsRm9yY2VzID0gdGhpcy53aGVlbEZvcmNlcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2hlZWxGb3JjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuYXBwbHlXaGVlbEZvcmNlKHdoZWVsRm9yY2VzW2ldLCBpKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIGZyb20gdGhlIHdvcmxkLlxuICAgKi9cblxuXG4gIHJlbW92ZUZyb21Xb3JsZCh3b3JsZCkge1xuICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gdGhpcy5jb25zdHJhaW50cztcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLndoZWVsQm9kaWVzLmNvbmNhdChbdGhpcy5jaGFzc2lzQm9keV0pO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2RpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHdvcmxkLnJlbW92ZUJvZHkoYm9kaWVzW2ldKTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnN0cmFpbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB3b3JsZC5yZW1vdmVDb25zdHJhaW50KGNvbnN0cmFpbnRzW2ldKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHJvdGF0aW9uYWwgdmVsb2NpdHkgb2YgYSB3aGVlbFxuICAgKi9cblxuXG4gIGdldFdoZWVsU3BlZWQod2hlZWxJbmRleCkge1xuICAgIGNvbnN0IGF4aXMgPSB0aGlzLndoZWVsQXhlc1t3aGVlbEluZGV4XTtcbiAgICBjb25zdCB3aGVlbEJvZHkgPSB0aGlzLndoZWVsQm9kaWVzW3doZWVsSW5kZXhdO1xuICAgIGNvbnN0IHcgPSB3aGVlbEJvZHkuYW5ndWxhclZlbG9jaXR5O1xuICAgIHRoaXMuY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKGF4aXMsIHdvcmxkQXhpcyk7XG4gICAgcmV0dXJuIHcuZG90KHdvcmxkQXhpcyk7XG4gIH1cblxufVxuY29uc3QgdG9ycXVlID0gbmV3IFZlYzMoKTtcbmNvbnN0IHdvcmxkQXhpcyA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogU21vb3RoZWQtcGFydGljbGUgaHlkcm9keW5hbWljcyBzeXN0ZW1cbiAqIEB0b2RvIE1ha2UgcGFyYW1ldGVycyBjdXN0b21pemFibGUgaW4gdGhlIGNvbnN0cnVjdG9yXG4gKi9cbmNsYXNzIFNQSFN5c3RlbSB7XG4gIC8qKlxuICAgKiBUaGUgcGFydGljbGVzIGFycmF5LlxuICAgKi9cblxuICAvKipcbiAgICogRGVuc2l0eSBvZiB0aGUgc3lzdGVtIChrZy9tMykuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIERpc3RhbmNlIGJlbG93IHdoaWNoIHR3byBwYXJ0aWNsZXMgYXJlIGNvbnNpZGVyZWQgdG8gYmUgbmVpZ2hib3JzLlxuICAgKiBJdCBzaG91bGQgYmUgYWRqdXN0ZWQgc28gdGhlcmUgYXJlIGFib3V0IDE1LTIwIG5laWdoYm9yIHBhcnRpY2xlcyB3aXRoaW4gdGhpcyByYWRpdXMuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFZpc2Nvc2l0eSBvZiB0aGUgc3lzdGVtLlxuICAgKiBAZGVmYXVsdCAwLjAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAZGVmYXVsdCAwLjAwMDAwMVxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wYXJ0aWNsZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5kZW5zaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuc21vb3RoaW5nUmFkaXVzID0gdm9pZCAwO1xuICAgIHRoaXMuc3BlZWRPZlNvdW5kID0gdm9pZCAwO1xuICAgIHRoaXMudmlzY29zaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuZXBzID0gdm9pZCAwO1xuICAgIHRoaXMucHJlc3N1cmVzID0gdm9pZCAwO1xuICAgIHRoaXMuZGVuc2l0aWVzID0gdm9pZCAwO1xuICAgIHRoaXMubmVpZ2hib3JzID0gdm9pZCAwO1xuICAgIHRoaXMucGFydGljbGVzID0gW107XG4gICAgdGhpcy5kZW5zaXR5ID0gMTtcbiAgICB0aGlzLnNtb290aGluZ1JhZGl1cyA9IDE7XG4gICAgdGhpcy5zcGVlZE9mU291bmQgPSAxO1xuICAgIHRoaXMudmlzY29zaXR5ID0gMC4wMTtcbiAgICB0aGlzLmVwcyA9IDAuMDAwMDAxOyAvLyBTdHVmZiBDb21wdXRlZCBwZXIgcGFydGljbGVcblxuICAgIHRoaXMucHJlc3N1cmVzID0gW107XG4gICAgdGhpcy5kZW5zaXRpZXMgPSBbXTtcbiAgICB0aGlzLm5laWdoYm9ycyA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYSBwYXJ0aWNsZSB0byB0aGUgc3lzdGVtLlxuICAgKi9cblxuXG4gIGFkZChwYXJ0aWNsZSkge1xuICAgIHRoaXMucGFydGljbGVzLnB1c2gocGFydGljbGUpO1xuXG4gICAgaWYgKHRoaXMubmVpZ2hib3JzLmxlbmd0aCA8IHRoaXMucGFydGljbGVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5uZWlnaGJvcnMucHVzaChbXSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYSBwYXJ0aWNsZSBmcm9tIHRoZSBzeXN0ZW0uXG4gICAqL1xuXG5cbiAgcmVtb3ZlKHBhcnRpY2xlKSB7XG4gICAgY29uc3QgaWR4ID0gdGhpcy5wYXJ0aWNsZXMuaW5kZXhPZihwYXJ0aWNsZSk7XG5cbiAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgdGhpcy5wYXJ0aWNsZXMuc3BsaWNlKGlkeCwgMSk7XG5cbiAgICAgIGlmICh0aGlzLm5laWdoYm9ycy5sZW5ndGggPiB0aGlzLnBhcnRpY2xlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5uZWlnaGJvcnMucG9wKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgbmVpZ2hib3JzIHdpdGhpbiBzbW9vdGhpbmcgdm9sdW1lLCBzYXZlIGluIHRoZSBhcnJheSBuZWlnaGJvcnNcbiAgICovXG5cblxuICBnZXROZWlnaGJvcnMocGFydGljbGUsIG5laWdoYm9ycykge1xuICAgIGNvbnN0IE4gPSB0aGlzLnBhcnRpY2xlcy5sZW5ndGg7XG4gICAgY29uc3QgaWQgPSBwYXJ0aWNsZS5pZDtcbiAgICBjb25zdCBSMiA9IHRoaXMuc21vb3RoaW5nUmFkaXVzICogdGhpcy5zbW9vdGhpbmdSYWRpdXM7XG4gICAgY29uc3QgZGlzdCA9IFNQSFN5c3RlbV9nZXROZWlnaGJvcnNfZGlzdDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IHAgPSB0aGlzLnBhcnRpY2xlc1tpXTtcbiAgICAgIHAucG9zaXRpb24udnN1YihwYXJ0aWNsZS5wb3NpdGlvbiwgZGlzdCk7XG5cbiAgICAgIGlmIChpZCAhPT0gcC5pZCAmJiBkaXN0Lmxlbmd0aFNxdWFyZWQoKSA8IFIyKSB7XG4gICAgICAgIG5laWdoYm9ycy5wdXNoKHApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBOID0gdGhpcy5wYXJ0aWNsZXMubGVuZ3RoO1xuICAgIGNvbnN0IGRpc3QgPSBTUEhTeXN0ZW1fdXBkYXRlX2Rpc3Q7XG4gICAgY29uc3QgY3MgPSB0aGlzLnNwZWVkT2ZTb3VuZDtcbiAgICBjb25zdCBlcHMgPSB0aGlzLmVwcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IHAgPSB0aGlzLnBhcnRpY2xlc1tpXTsgLy8gQ3VycmVudCBwYXJ0aWNsZVxuXG4gICAgICBjb25zdCBuZWlnaGJvcnMgPSB0aGlzLm5laWdoYm9yc1tpXTsgLy8gR2V0IG5laWdoYm9yc1xuXG4gICAgICBuZWlnaGJvcnMubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuZ2V0TmVpZ2hib3JzKHAsIG5laWdoYm9ycyk7XG4gICAgICBuZWlnaGJvcnMucHVzaCh0aGlzLnBhcnRpY2xlc1tpXSk7IC8vIEFkZCBjdXJyZW50IHRvb1xuXG4gICAgICBjb25zdCBudW1OZWlnaGJvcnMgPSBuZWlnaGJvcnMubGVuZ3RoOyAvLyBBY2N1bXVsYXRlIGRlbnNpdHkgZm9yIHRoZSBwYXJ0aWNsZVxuXG4gICAgICBsZXQgc3VtID0gMC4wO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gbnVtTmVpZ2hib3JzOyBqKyspIHtcbiAgICAgICAgLy9wcmludGYoXCJDdXJyZW50IHBhcnRpY2xlIGhhcyBwb3NpdGlvbiAlZiAlZiAlZlxcblwiLG9iamVjdHNbaWRdLnBvcy54KCksb2JqZWN0c1tpZF0ucG9zLnkoKSxvYmplY3RzW2lkXS5wb3MueigpKTtcbiAgICAgICAgcC5wb3NpdGlvbi52c3ViKG5laWdoYm9yc1tqXS5wb3NpdGlvbiwgZGlzdCk7XG4gICAgICAgIGNvbnN0IGxlbiA9IGRpc3QubGVuZ3RoKCk7XG4gICAgICAgIGNvbnN0IHdlaWdodCA9IHRoaXMudyhsZW4pO1xuICAgICAgICBzdW0gKz0gbmVpZ2hib3JzW2pdLm1hc3MgKiB3ZWlnaHQ7XG4gICAgICB9IC8vIFNhdmVcblxuXG4gICAgICB0aGlzLmRlbnNpdGllc1tpXSA9IHN1bTtcbiAgICAgIHRoaXMucHJlc3N1cmVzW2ldID0gY3MgKiBjcyAqICh0aGlzLmRlbnNpdGllc1tpXSAtIHRoaXMuZGVuc2l0eSk7XG4gICAgfSAvLyBBZGQgZm9yY2VzXG4gICAgLy8gU3VtIHRvIHRoZXNlIGFjY2VsZXJhdGlvbnNcblxuXG4gICAgY29uc3QgYV9wcmVzc3VyZSA9IFNQSFN5c3RlbV91cGRhdGVfYV9wcmVzc3VyZTtcbiAgICBjb25zdCBhX3Zpc2MgPSBTUEhTeXN0ZW1fdXBkYXRlX2FfdmlzYztcbiAgICBjb25zdCBncmFkVyA9IFNQSFN5c3RlbV91cGRhdGVfZ3JhZFc7XG4gICAgY29uc3Qgcl92ZWMgPSBTUEhTeXN0ZW1fdXBkYXRlX3JfdmVjO1xuICAgIGNvbnN0IHUgPSBTUEhTeXN0ZW1fdXBkYXRlX3U7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBwYXJ0aWNsZSA9IHRoaXMucGFydGljbGVzW2ldO1xuICAgICAgYV9wcmVzc3VyZS5zZXQoMCwgMCwgMCk7XG4gICAgICBhX3Zpc2Muc2V0KDAsIDAsIDApOyAvLyBJbml0IHZhcnNcblxuICAgICAgbGV0IFBpajtcbiAgICAgIGxldCBuYWJsYTtcblxuICAgICAgY29uc3QgbmVpZ2hib3JzID0gdGhpcy5uZWlnaGJvcnNbaV07XG4gICAgICBjb25zdCBudW1OZWlnaGJvcnMgPSBuZWlnaGJvcnMubGVuZ3RoOyAvL3ByaW50ZihcIk5laWdoYm9yczogXCIpO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gbnVtTmVpZ2hib3JzOyBqKyspIHtcbiAgICAgICAgY29uc3QgbmVpZ2hib3IgPSBuZWlnaGJvcnNbal07IC8vcHJpbnRmKFwiJWQgXCIsbmopO1xuICAgICAgICAvLyBHZXQgciBvbmNlIGZvciBhbGwuLlxuXG4gICAgICAgIHBhcnRpY2xlLnBvc2l0aW9uLnZzdWIobmVpZ2hib3IucG9zaXRpb24sIHJfdmVjKTtcbiAgICAgICAgY29uc3QgciA9IHJfdmVjLmxlbmd0aCgpOyAvLyBQcmVzc3VyZSBjb250cmlidXRpb25cblxuICAgICAgICBQaWogPSAtbmVpZ2hib3IubWFzcyAqICh0aGlzLnByZXNzdXJlc1tpXSAvICh0aGlzLmRlbnNpdGllc1tpXSAqIHRoaXMuZGVuc2l0aWVzW2ldICsgZXBzKSArIHRoaXMucHJlc3N1cmVzW2pdIC8gKHRoaXMuZGVuc2l0aWVzW2pdICogdGhpcy5kZW5zaXRpZXNbal0gKyBlcHMpKTtcbiAgICAgICAgdGhpcy5ncmFkdyhyX3ZlYywgZ3JhZFcpOyAvLyBBZGQgdG8gcHJlc3N1cmUgYWNjZWxlcmF0aW9uXG5cbiAgICAgICAgZ3JhZFcuc2NhbGUoUGlqLCBncmFkVyk7XG4gICAgICAgIGFfcHJlc3N1cmUudmFkZChncmFkVywgYV9wcmVzc3VyZSk7IC8vIFZpc2Nvc2l0eSBjb250cmlidXRpb25cblxuICAgICAgICBuZWlnaGJvci52ZWxvY2l0eS52c3ViKHBhcnRpY2xlLnZlbG9jaXR5LCB1KTtcbiAgICAgICAgdS5zY2FsZSgxLjAgLyAoMC4wMDAxICsgdGhpcy5kZW5zaXRpZXNbaV0gKiB0aGlzLmRlbnNpdGllc1tqXSkgKiB0aGlzLnZpc2Nvc2l0eSAqIG5laWdoYm9yLm1hc3MsIHUpO1xuICAgICAgICBuYWJsYSA9IHRoaXMubmFibGF3KHIpO1xuICAgICAgICB1LnNjYWxlKG5hYmxhLCB1KTsgLy8gQWRkIHRvIHZpc2Nvc2l0eSBhY2NlbGVyYXRpb25cblxuICAgICAgICBhX3Zpc2MudmFkZCh1LCBhX3Zpc2MpO1xuICAgICAgfSAvLyBDYWxjdWxhdGUgZm9yY2VcblxuXG4gICAgICBhX3Zpc2Muc2NhbGUocGFydGljbGUubWFzcywgYV92aXNjKTtcbiAgICAgIGFfcHJlc3N1cmUuc2NhbGUocGFydGljbGUubWFzcywgYV9wcmVzc3VyZSk7IC8vIEFkZCBmb3JjZSB0byBwYXJ0aWNsZXNcblxuICAgICAgcGFydGljbGUuZm9yY2UudmFkZChhX3Zpc2MsIHBhcnRpY2xlLmZvcmNlKTtcbiAgICAgIHBhcnRpY2xlLmZvcmNlLnZhZGQoYV9wcmVzc3VyZSwgcGFydGljbGUuZm9yY2UpO1xuICAgIH1cbiAgfSAvLyBDYWxjdWxhdGUgdGhlIHdlaWdodCB1c2luZyB0aGUgVyhyKSB3ZWlnaHRmdW5jdGlvblxuXG5cbiAgdyhyKSB7XG4gICAgLy8gMzE1XG4gICAgY29uc3QgaCA9IHRoaXMuc21vb3RoaW5nUmFkaXVzO1xuICAgIHJldHVybiAzMTUuMCAvICg2NC4wICogTWF0aC5QSSAqIGggKiogOSkgKiAoaCAqIGggLSByICogcikgKiogMztcbiAgfSAvLyBjYWxjdWxhdGUgZ3JhZGllbnQgb2YgdGhlIHdlaWdodCBmdW5jdGlvblxuXG5cbiAgZ3JhZHcoclZlYywgcmVzdWx0VmVjKSB7XG4gICAgY29uc3QgciA9IHJWZWMubGVuZ3RoKCk7XG4gICAgY29uc3QgaCA9IHRoaXMuc21vb3RoaW5nUmFkaXVzO1xuICAgIHJWZWMuc2NhbGUoOTQ1LjAgLyAoMzIuMCAqIE1hdGguUEkgKiBoICoqIDkpICogKGggKiBoIC0gciAqIHIpICoqIDIsIHJlc3VsdFZlYyk7XG4gIH0gLy8gQ2FsY3VsYXRlIG5hYmxhKFcpXG5cblxuICBuYWJsYXcocikge1xuICAgIGNvbnN0IGggPSB0aGlzLnNtb290aGluZ1JhZGl1cztcbiAgICBjb25zdCBuYWJsYSA9IDk0NS4wIC8gKDMyLjAgKiBNYXRoLlBJICogaCAqKiA5KSAqIChoICogaCAtIHIgKiByKSAqICg3ICogciAqIHIgLSAzICogaCAqIGgpO1xuICAgIHJldHVybiBuYWJsYTtcbiAgfVxuXG59XG5jb25zdCBTUEhTeXN0ZW1fZ2V0TmVpZ2hib3JzX2Rpc3QgPSBuZXcgVmVjMygpOyAvLyBUZW1wIHZlY3RvcnMgZm9yIGNhbGN1bGF0aW9uXG5cbmNvbnN0IFNQSFN5c3RlbV91cGRhdGVfZGlzdCA9IG5ldyBWZWMzKCk7IC8vIFJlbGF0aXZlIHZlbG9jaXR5XG5cbmNvbnN0IFNQSFN5c3RlbV91cGRhdGVfYV9wcmVzc3VyZSA9IG5ldyBWZWMzKCk7XG5jb25zdCBTUEhTeXN0ZW1fdXBkYXRlX2FfdmlzYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBTUEhTeXN0ZW1fdXBkYXRlX2dyYWRXID0gbmV3IFZlYzMoKTtcbmNvbnN0IFNQSFN5c3RlbV91cGRhdGVfcl92ZWMgPSBuZXcgVmVjMygpO1xuY29uc3QgU1BIU3lzdGVtX3VwZGF0ZV91ID0gbmV3IFZlYzMoKTtcblxuLyoqXG4gKiBDeWxpbmRlciBjbGFzcy5cbiAqIEBleGFtcGxlXG4gKiAgICAgY29uc3QgcmFkaXVzVG9wID0gMC41XG4gKiAgICAgY29uc3QgcmFkaXVzQm90dG9tID0gMC41XG4gKiAgICAgY29uc3QgaGVpZ2h0ID0gMlxuICogICAgIGNvbnN0IG51bVNlZ21lbnRzID0gMTJcbiAqICAgICBjb25zdCBjeWxpbmRlclNoYXBlID0gbmV3IENBTk5PTi5DeWxpbmRlcihyYWRpdXNUb3AsIHJhZGl1c0JvdHRvbSwgaGVpZ2h0LCBudW1TZWdtZW50cylcbiAqICAgICBjb25zdCBjeWxpbmRlckJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY3lsaW5kZXJTaGFwZSB9KVxuICogICAgIHdvcmxkLmFkZEJvZHkoY3lsaW5kZXJCb2R5KVxuICovXG5cbmNsYXNzIEN5bGluZGVyIGV4dGVuZHMgQ29udmV4UG9seWhlZHJvbiB7XG4gIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIEN5bGluZGVyLiAqL1xuXG4gIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLiAqL1xuXG4gIC8qKiBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci4gKi9cblxuICAvKiogVGhlIG51bWJlciBvZiBzZWdtZW50cyB0byBidWlsZCB0aGUgY3lsaW5kZXIgb3V0IG9mLiAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gcmFkaXVzVG9wIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuXG4gICAqIEBwYXJhbSByYWRpdXNCb3R0b20gVGhlIHJhZGl1cyBvZiB0aGUgYm90dG9tIG9mIHRoZSBDeWxpbmRlci5cbiAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci5cbiAgICogQHBhcmFtIG51bVNlZ21lbnRzIFRoZSBudW1iZXIgb2Ygc2VnbWVudHMgdG8gYnVpbGQgdGhlIGN5bGluZGVyIG91dCBvZi5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHJhZGl1c1RvcCA9IDEsIHJhZGl1c0JvdHRvbSA9IDEsIGhlaWdodCA9IDEsIG51bVNlZ21lbnRzID0gOCkge1xuICAgIGlmIChyYWRpdXNUb3AgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjeWxpbmRlciByYWRpdXNUb3AgY2Fubm90IGJlIG5lZ2F0aXZlLicpO1xuICAgIH1cblxuICAgIGlmIChyYWRpdXNCb3R0b20gPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjeWxpbmRlciByYWRpdXNCb3R0b20gY2Fubm90IGJlIG5lZ2F0aXZlLicpO1xuICAgIH1cblxuICAgIGNvbnN0IE4gPSBudW1TZWdtZW50cztcbiAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdO1xuICAgIGNvbnN0IGF4ZXMgPSBbXTtcbiAgICBjb25zdCBmYWNlcyA9IFtdO1xuICAgIGNvbnN0IGJvdHRvbWZhY2UgPSBbXTtcbiAgICBjb25zdCB0b3BmYWNlID0gW107XG4gICAgY29uc3QgY29zID0gTWF0aC5jb3M7XG4gICAgY29uc3Qgc2luID0gTWF0aC5zaW47IC8vIEZpcnN0IGJvdHRvbSBwb2ludFxuXG4gICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKDApLCAtaGVpZ2h0ICogMC41LCByYWRpdXNCb3R0b20gKiBjb3MoMCkpKTtcbiAgICBib3R0b21mYWNlLnB1c2goMCk7IC8vIEZpcnN0IHRvcCBwb2ludFxuXG4gICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzVG9wICogc2luKDApLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcygwKSkpO1xuICAgIHRvcGZhY2UucHVzaCgxKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTjsgaSsrKSB7XG4gICAgICBjb25zdCB0aGV0YSA9IDIgKiBNYXRoLlBJIC8gTiAqIChpICsgMSk7XG4gICAgICBjb25zdCB0aGV0YU4gPSAyICogTWF0aC5QSSAvIE4gKiAoaSArIDAuNSk7XG5cbiAgICAgIGlmIChpIDwgTiAtIDEpIHtcbiAgICAgICAgLy8gQm90dG9tXG4gICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c0JvdHRvbSAqIHNpbih0aGV0YSksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcyh0aGV0YSkpKTtcbiAgICAgICAgYm90dG9tZmFjZS5wdXNoKDIgKiBpICsgMik7IC8vIFRvcFxuXG4gICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbih0aGV0YSksIGhlaWdodCAqIDAuNSwgcmFkaXVzVG9wICogY29zKHRoZXRhKSkpO1xuICAgICAgICB0b3BmYWNlLnB1c2goMiAqIGkgKyAzKTsgLy8gRmFjZVxuXG4gICAgICAgIGZhY2VzLnB1c2goWzIgKiBpLCAyICogaSArIDEsIDIgKiBpICsgMywgMiAqIGkgKyAyXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAxLCAwXSk7IC8vIENvbm5lY3RcbiAgICAgIH0gLy8gQXhpczogd2UgY2FuIGN1dCBvZmYgaGFsZiBvZiB0aGVtIGlmIHdlIGhhdmUgZXZlbiBudW1iZXIgb2Ygc2VnbWVudHNcblxuXG4gICAgICBpZiAoTiAlIDIgPT09IDEgfHwgaSA8IE4gLyAyKSB7XG4gICAgICAgIGF4ZXMucHVzaChuZXcgVmVjMygtc2luKHRoZXRhTiksIDAsIGNvcyh0aGV0YU4pKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZmFjZXMucHVzaChib3R0b21mYWNlKTtcbiAgICBheGVzLnB1c2gobmV3IFZlYzMoMCwgMSwgMCkpOyAvLyBSZW9yZGVyIHRvcCBmYWNlXG5cbiAgICBjb25zdCB0ZW1wID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvcGZhY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRlbXAucHVzaCh0b3BmYWNlW3RvcGZhY2UubGVuZ3RoIC0gaSAtIDFdKTtcbiAgICB9XG5cbiAgICBmYWNlcy5wdXNoKHRlbXApO1xuICAgIHN1cGVyKHtcbiAgICAgIHZlcnRpY2VzLFxuICAgICAgZmFjZXMsXG4gICAgICBheGVzXG4gICAgfSk7XG4gICAgdGhpcy5yYWRpdXNUb3AgPSB2b2lkIDA7XG4gICAgdGhpcy5yYWRpdXNCb3R0b20gPSB2b2lkIDA7XG4gICAgdGhpcy5oZWlnaHQgPSB2b2lkIDA7XG4gICAgdGhpcy5udW1TZWdtZW50cyA9IHZvaWQgMDtcbiAgICB0aGlzLnR5cGUgPSBTaGFwZS50eXBlcy5DWUxJTkRFUjtcbiAgICB0aGlzLnJhZGl1c1RvcCA9IHJhZGl1c1RvcDtcbiAgICB0aGlzLnJhZGl1c0JvdHRvbSA9IHJhZGl1c0JvdHRvbTtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLm51bVNlZ21lbnRzID0gbnVtU2VnbWVudHM7XG4gIH1cblxufVxuXG4vKipcbiAqIFBhcnRpY2xlIHNoYXBlLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBwYXJ0aWNsZVNoYXBlID0gbmV3IENBTk5PTi5QYXJ0aWNsZSgpXG4gKiAgICAgY29uc3QgcGFydGljbGVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IHBhcnRpY2xlU2hhcGUgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KHBhcnRpY2xlQm9keSlcbiAqL1xuY2xhc3MgUGFydGljbGUgZXh0ZW5kcyBTaGFwZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHtcbiAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYVxuICAgKi9cblxuXG4gIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgdGFyZ2V0LnNldCgwLCAwLCAwKTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7XG4gIH1cblxuICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkge1xuICAgIC8vIEdldCBlYWNoIGF4aXMgbWF4XG4gICAgbWluLmNvcHkocG9zKTtcbiAgICBtYXguY29weShwb3MpO1xuICB9XG5cbn1cblxuLyoqXG4gKiBBIHBsYW5lLCBmYWNpbmcgaW4gdGhlIFogZGlyZWN0aW9uLiBUaGUgcGxhbmUgaGFzIGl0cyBzdXJmYWNlIGF0IHo9MCBhbmQgZXZlcnl0aGluZyBiZWxvdyB6PTAgaXMgYXNzdW1lZCB0byBiZSBzb2xpZCBwbGFuZS4gVG8gbWFrZSB0aGUgcGxhbmUgZmFjZSBpbiBzb21lIG90aGVyIGRpcmVjdGlvbiB0aGFuIHosIHlvdSBtdXN0IHB1dCBpdCBpbnNpZGUgYSBCb2R5IGFuZCByb3RhdGUgdGhhdCBib2R5LiBTZWUgdGhlIGRlbW9zLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBwbGFuZVNoYXBlID0gbmV3IENBTk5PTi5QbGFuZSgpXG4gKiAgICAgY29uc3QgcGxhbmVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMCwgc2hhcGU6ICBwbGFuZVNoYXBlIH0pXG4gKiAgICAgcGxhbmVCb2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKC1NYXRoLlBJIC8gMiwgMCwgMCkgLy8gbWFrZSBpdCBmYWNlIHVwXG4gKiAgICAgd29ybGQuYWRkQm9keShwbGFuZUJvZHkpXG4gKi9cbmNsYXNzIFBsYW5lIGV4dGVuZHMgU2hhcGUge1xuICAvKiogd29ybGROb3JtYWwgKi9cblxuICAvKiogd29ybGROb3JtYWxOZWVkc1VwZGF0ZSAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcih7XG4gICAgICB0eXBlOiBTaGFwZS50eXBlcy5QTEFORVxuICAgIH0pOyAvLyBXb3JsZCBvcmllbnRlZCBub3JtYWxcblxuICAgIHRoaXMud29ybGROb3JtYWwgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gdm9pZCAwO1xuICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgfVxuICAvKiogY29tcHV0ZVdvcmxkTm9ybWFsICovXG5cblxuICBjb21wdXRlV29ybGROb3JtYWwocXVhdCkge1xuICAgIGNvbnN0IG4gPSB0aGlzLndvcmxkTm9ybWFsO1xuICAgIG4uc2V0KDAsIDAsIDEpO1xuICAgIHF1YXQudm11bHQobiwgbik7XG4gICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gZmFsc2U7XG4gIH1cblxuICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cblxuICB2b2x1bWUoKSB7XG4gICAgcmV0dXJuICgvLyBUaGUgcGxhbmUgaXMgaW5maW5pdGUuLi5cbiAgICAgIE51bWJlci5NQVhfVkFMVUVcbiAgICApO1xuICB9XG5cbiAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHtcbiAgICAvLyBUaGUgcGxhbmUgQUFCQiBpcyBpbmZpbml0ZSwgZXhjZXB0IGlmIHRoZSBub3JtYWwgaXMgcG9pbnRpbmcgYWxvbmcgYW55IGF4aXNcbiAgICB0ZW1wTm9ybWFsLnNldCgwLCAwLCAxKTsgLy8gRGVmYXVsdCBwbGFuZSBub3JtYWwgaXMgelxuXG4gICAgcXVhdC52bXVsdCh0ZW1wTm9ybWFsLCB0ZW1wTm9ybWFsKTtcbiAgICBjb25zdCBtYXhWYWwgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgIG1pbi5zZXQoLW1heFZhbCwgLW1heFZhbCwgLW1heFZhbCk7XG4gICAgbWF4LnNldChtYXhWYWwsIG1heFZhbCwgbWF4VmFsKTtcblxuICAgIGlmICh0ZW1wTm9ybWFsLnggPT09IDEpIHtcbiAgICAgIG1heC54ID0gcG9zLng7XG4gICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnggPT09IC0xKSB7XG4gICAgICBtaW4ueCA9IHBvcy54O1xuICAgIH1cblxuICAgIGlmICh0ZW1wTm9ybWFsLnkgPT09IDEpIHtcbiAgICAgIG1heC55ID0gcG9zLnk7XG4gICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnkgPT09IC0xKSB7XG4gICAgICBtaW4ueSA9IHBvcy55O1xuICAgIH1cblxuICAgIGlmICh0ZW1wTm9ybWFsLnogPT09IDEpIHtcbiAgICAgIG1heC56ID0gcG9zLno7XG4gICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnogPT09IC0xKSB7XG4gICAgICBtaW4ueiA9IHBvcy56O1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkge1xuICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICB9XG5cbn1cbmNvbnN0IHRlbXBOb3JtYWwgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIEhlaWdodGZpZWxkIHNoYXBlIGNsYXNzLiBIZWlnaHQgZGF0YSBpcyBnaXZlbiBhcyBhbiBhcnJheS4gVGhlc2UgZGF0YSBwb2ludHMgYXJlIHNwcmVhZCBvdXQgZXZlbmx5IHdpdGggYSBnaXZlbiBkaXN0YW5jZS5cbiAqIEB0b2RvIFNob3VsZCBiZSBwb3NzaWJsZSB0byB1c2UgYWxvbmcgYWxsIGF4ZXMsIG5vdCBqdXN0IHlcbiAqIEB0b2RvIHNob3VsZCBiZSBwb3NzaWJsZSB0byBzY2FsZSBhbG9uZyBhbGwgYXhlc1xuICogQHRvZG8gUmVmYWN0b3IgZWxlbWVudFNpemUgdG8gZWxlbWVudFNpemVYIGFuZCBlbGVtZW50U2l6ZVlcbiAqXG4gKiBAZXhhbXBsZVxuICogICAgIC8vIEdlbmVyYXRlIHNvbWUgaGVpZ2h0IGRhdGEgKHktdmFsdWVzKS5cbiAqICAgICBjb25zdCBkYXRhID0gW11cbiAqICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDA7IGkrKykge1xuICogICAgICAgICBjb25zdCB5ID0gMC41ICogTWF0aC5jb3MoMC4yICogaSlcbiAqICAgICAgICAgZGF0YS5wdXNoKHkpXG4gKiAgICAgfVxuICpcbiAqICAgICAvLyBDcmVhdGUgdGhlIGhlaWdodGZpZWxkIHNoYXBlXG4gKiAgICAgY29uc3QgaGVpZ2h0ZmllbGRTaGFwZSA9IG5ldyBDQU5OT04uSGVpZ2h0ZmllbGQoZGF0YSwge1xuICogICAgICAgICBlbGVtZW50U2l6ZTogMSAvLyBEaXN0YW5jZSBiZXR3ZWVuIHRoZSBkYXRhIHBvaW50cyBpbiBYIGFuZCBZIGRpcmVjdGlvbnNcbiAqICAgICB9KVxuICogICAgIGNvbnN0IGhlaWdodGZpZWxkQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IHNoYXBlOiBoZWlnaHRmaWVsZFNoYXBlIH0pXG4gKiAgICAgd29ybGQuYWRkQm9keShoZWlnaHRmaWVsZEJvZHkpXG4gKi9cbmNsYXNzIEhlaWdodGZpZWxkIGV4dGVuZHMgU2hhcGUge1xuICAvKipcbiAgICogQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLlxuICAgKi9cblxuICAvKipcbiAgICogTWF4IHZhbHVlIG9mIHRoZSBkYXRhIHBvaW50cyBpbiB0aGUgZGF0YSBhcnJheS5cbiAgICovXG5cbiAgLyoqXG4gICAqIE1pbmltdW0gdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2luZyBiZXR3ZWVuIHRoZSBkYXRhIHBvaW50cyBpbiBYIGFuZCBZIGRpcmVjdGlvbi5cbiAgICogQHRvZG8gZWxlbWVudFNpemVYIGFuZCBZXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG5cbiAgLyoqXG4gICAqIEBwYXJhbSBkYXRhIEFuIGFycmF5IG9mIG51bWJlcnMsIG9yIGhlaWdodCB2YWx1ZXMsIHRoYXQgYXJlIHNwcmVhZCBvdXQgYWxvbmcgdGhlIHggYXhpcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEsIG9wdGlvbnMgPSB7fSkge1xuICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgICBtYXhWYWx1ZTogbnVsbCxcbiAgICAgIG1pblZhbHVlOiBudWxsLFxuICAgICAgZWxlbWVudFNpemU6IDFcbiAgICB9KTtcbiAgICBzdXBlcih7XG4gICAgICB0eXBlOiBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRFxuICAgIH0pO1xuICAgIHRoaXMuZGF0YSA9IHZvaWQgMDtcbiAgICB0aGlzLm1heFZhbHVlID0gdm9pZCAwO1xuICAgIHRoaXMubWluVmFsdWUgPSB2b2lkIDA7XG4gICAgdGhpcy5lbGVtZW50U2l6ZSA9IHZvaWQgMDtcbiAgICB0aGlzLmNhY2hlRW5hYmxlZCA9IHZvaWQgMDtcbiAgICB0aGlzLnBpbGxhckNvbnZleCA9IHZvaWQgMDtcbiAgICB0aGlzLnBpbGxhck9mZnNldCA9IHZvaWQgMDtcbiAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0gdm9pZCAwO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5tYXhWYWx1ZSA9IG9wdGlvbnMubWF4VmFsdWU7XG4gICAgdGhpcy5taW5WYWx1ZSA9IG9wdGlvbnMubWluVmFsdWU7XG4gICAgdGhpcy5lbGVtZW50U2l6ZSA9IG9wdGlvbnMuZWxlbWVudFNpemU7XG5cbiAgICBpZiAob3B0aW9ucy5taW5WYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgdGhpcy51cGRhdGVNaW5WYWx1ZSgpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLm1heFZhbHVlID09PSBudWxsKSB7XG4gICAgICB0aGlzLnVwZGF0ZU1heFZhbHVlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jYWNoZUVuYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMucGlsbGFyQ29udmV4ID0gbmV3IENvbnZleFBvbHloZWRyb24oKTtcbiAgICB0aGlzLnBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOyAvLyBcImlfal9pc1VwcGVyXCIgPT4geyBjb252ZXg6IC4uLiwgb2Zmc2V0OiAuLi4gfVxuICAgIC8vIGZvciBleGFtcGxlOlxuICAgIC8vIF9jYWNoZWRQaWxsYXJzW1wiMF8yXzFcIl1cblxuICAgIHRoaXMuX2NhY2hlZFBpbGxhcnMgPSB7fTtcbiAgfVxuICAvKipcbiAgICogQ2FsbCB3aGVuZXZlciB5b3UgY2hhbmdlIHRoZSBkYXRhIGFycmF5LlxuICAgKi9cblxuXG4gIHVwZGF0ZSgpIHtcbiAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0ge307XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgYG1pblZhbHVlYCBwcm9wZXJ0eVxuICAgKi9cblxuXG4gIHVwZGF0ZU1pblZhbHVlKCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgbGV0IG1pblZhbHVlID0gZGF0YVswXVswXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykge1xuICAgICAgICBjb25zdCB2ID0gZGF0YVtpXVtqXTtcblxuICAgICAgICBpZiAodiA8IG1pblZhbHVlKSB7XG4gICAgICAgICAgbWluVmFsdWUgPSB2O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5taW5WYWx1ZSA9IG1pblZhbHVlO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGBtYXhWYWx1ZWAgcHJvcGVydHlcbiAgICovXG5cblxuICB1cGRhdGVNYXhWYWx1ZSgpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGxldCBtYXhWYWx1ZSA9IGRhdGFbMF1bMF07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07XG5cbiAgICAgICAgaWYgKHYgPiBtYXhWYWx1ZSkge1xuICAgICAgICAgIG1heFZhbHVlID0gdjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubWF4VmFsdWUgPSBtYXhWYWx1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBoZWlnaHQgdmFsdWUgYXQgYW4gaW5kZXguIERvbid0IGZvcmdldCB0byB1cGRhdGUgbWF4VmFsdWUgYW5kIG1pblZhbHVlIGFmdGVyIHlvdSdyZSBkb25lLlxuICAgKi9cblxuXG4gIHNldEhlaWdodFZhbHVlQXRJbmRleCh4aSwgeWksIHZhbHVlKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBkYXRhW3hpXVt5aV0gPSB2YWx1ZTsgLy8gSW52YWxpZGF0ZSBjYWNoZVxuXG4gICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZmFsc2UpO1xuXG4gICAgaWYgKHhpID4gMCkge1xuICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWksIHRydWUpO1xuICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWksIGZhbHNlKTtcbiAgICB9XG5cbiAgICBpZiAoeWkgPiAwKSB7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpIC0gMSwgdHJ1ZSk7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpIC0gMSwgZmFsc2UpO1xuICAgIH1cblxuICAgIGlmICh5aSA+IDAgJiYgeGkgPiAwKSB7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSAtIDEsIHRydWUpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IG1heC9taW4gaW4gYSByZWN0YW5nbGUgaW4gdGhlIG1hdHJpeCBkYXRhXG4gICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgdGhlIHJlc3VsdHMgaW4uXG4gICAqIEByZXR1cm4gVGhlIHJlc3VsdCBhcnJheSwgaWYgaXQgd2FzIHBhc3NlZCBpbi4gTWluaW11bSB3aWxsIGJlIGF0IHBvc2l0aW9uIDAgYW5kIG1heCBhdCAxLlxuICAgKi9cblxuXG4gIGdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIHJlc3VsdCA9IFtdKSB7XG4gICAgLy8gR2V0IG1heCBhbmQgbWluIG9mIHRoZSBkYXRhXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsgLy8gU2V0IGZpcnN0IHZhbHVlXG5cbiAgICBsZXQgbWF4ID0gdGhpcy5taW5WYWx1ZTtcblxuICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8PSBpTWF4WDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPD0gaU1heFk7IGorKykge1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBkYXRhW2ldW2pdO1xuXG4gICAgICAgIGlmIChoZWlnaHQgPiBtYXgpIHtcbiAgICAgICAgICBtYXggPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXN1bHRbMF0gPSB0aGlzLm1pblZhbHVlO1xuICAgIHJlc3VsdFsxXSA9IG1heDtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBpbmRleCBvZiBhIGxvY2FsIHBvc2l0aW9uIG9uIHRoZSBoZWlnaHRmaWVsZC4gVGhlIGluZGV4ZXMgaW5kaWNhdGUgdGhlIHJlY3RhbmdsZXMsIHNvIGlmIHlvdXIgdGVycmFpbiBpcyBtYWRlIG9mIE4geCBOIGhlaWdodCBkYXRhIHBvaW50cywgeW91IHdpbGwgaGF2ZSByZWN0YW5nbGUgaW5kZXhlcyByYW5naW5nIGZyb20gMCB0byBOLTEuXG4gICAqIEBwYXJhbSByZXN1bHQgVHdvLWVsZW1lbnQgYXJyYXlcbiAgICogQHBhcmFtIGNsYW1wIElmIHRoZSBwb3NpdGlvbiBzaG91bGQgYmUgY2xhbXBlZCB0byB0aGUgaGVpZ2h0ZmllbGQgZWRnZS5cbiAgICovXG5cblxuICBnZXRJbmRleE9mUG9zaXRpb24oeCwgeSwgcmVzdWx0LCBjbGFtcCkge1xuICAgIC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdFxuICAgIGNvbnN0IHcgPSB0aGlzLmVsZW1lbnRTaXplO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgbGV0IHhpID0gTWF0aC5mbG9vcih4IC8gdyk7XG4gICAgbGV0IHlpID0gTWF0aC5mbG9vcih5IC8gdyk7XG4gICAgcmVzdWx0WzBdID0geGk7XG4gICAgcmVzdWx0WzFdID0geWk7XG5cbiAgICBpZiAoY2xhbXApIHtcbiAgICAgIC8vIENsYW1wIGluZGV4IHRvIGVkZ2VzXG4gICAgICBpZiAoeGkgPCAwKSB7XG4gICAgICAgIHhpID0gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHlpIDwgMCkge1xuICAgICAgICB5aSA9IDA7XG4gICAgICB9XG5cbiAgICAgIGlmICh4aSA+PSBkYXRhLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgeGkgPSBkYXRhLmxlbmd0aCAtIDE7XG4gICAgICB9XG5cbiAgICAgIGlmICh5aSA+PSBkYXRhWzBdLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgeWkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7XG4gICAgICB9XG4gICAgfSAvLyBCYWlsIG91dCBpZiB3ZSBhcmUgb3V0IG9mIHRoZSB0ZXJyYWluXG5cblxuICAgIGlmICh4aSA8IDAgfHwgeWkgPCAwIHx8IHhpID49IGRhdGEubGVuZ3RoIC0gMSB8fCB5aSA+PSBkYXRhWzBdLmxlbmd0aCAtIDEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGdldFRyaWFuZ2xlQXQoeCwgeSwgZWRnZUNsYW1wLCBhLCBiLCBjKSB7XG4gICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4O1xuICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTtcbiAgICBsZXQgeGkgPSBpZHhbMF07XG4gICAgbGV0IHlpID0gaWR4WzFdO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG5cbiAgICBpZiAoZWRnZUNsYW1wKSB7XG4gICAgICB4aSA9IE1hdGgubWluKGRhdGEubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeGkpKTtcbiAgICAgIHlpID0gTWF0aC5taW4oZGF0YVswXS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB5aSkpO1xuICAgIH1cblxuICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTtcbiAgICBjb25zdCBsb3dlckRpc3QyID0gKHggLyBlbGVtZW50U2l6ZSAtIHhpKSAqKiAyICsgKHkgLyBlbGVtZW50U2l6ZSAtIHlpKSAqKiAyO1xuICAgIGNvbnN0IHVwcGVyRGlzdDIgPSAoeCAvIGVsZW1lbnRTaXplIC0gKHhpICsgMSkpICoqIDIgKyAoeSAvIGVsZW1lbnRTaXplIC0gKHlpICsgMSkpICoqIDI7XG4gICAgY29uc3QgdXBwZXIgPSBsb3dlckRpc3QyID4gdXBwZXJEaXN0MjtcbiAgICB0aGlzLmdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpO1xuICAgIHJldHVybiB1cHBlcjtcbiAgfVxuXG4gIGdldE5vcm1hbEF0KHgsIHksIGVkZ2VDbGFtcCwgcmVzdWx0KSB7XG4gICAgY29uc3QgYSA9IGdldE5vcm1hbEF0X2E7XG4gICAgY29uc3QgYiA9IGdldE5vcm1hbEF0X2I7XG4gICAgY29uc3QgYyA9IGdldE5vcm1hbEF0X2M7XG4gICAgY29uc3QgZTAgPSBnZXROb3JtYWxBdF9lMDtcbiAgICBjb25zdCBlMSA9IGdldE5vcm1hbEF0X2UxO1xuICAgIHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpO1xuICAgIGIudnN1YihhLCBlMCk7XG4gICAgYy52c3ViKGEsIGUxKTtcbiAgICBlMC5jcm9zcyhlMSwgcmVzdWx0KTtcbiAgICByZXN1bHQubm9ybWFsaXplKCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBBQUJCIG9mIGEgc3F1YXJlIGluIHRoZSBoZWlnaHRmaWVsZFxuICAgKiBAcGFyYW0geGlcbiAgICogQHBhcmFtIHlpXG4gICAqIEBwYXJhbSByZXN1bHRcbiAgICovXG5cblxuICBnZXRBYWJiQXRJbmRleCh4aSwgeWksIHtcbiAgICBsb3dlckJvdW5kLFxuICAgIHVwcGVyQm91bmRcbiAgfSkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplO1xuICAgIGxvd2VyQm91bmQuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7XG4gICAgdXBwZXJCb3VuZC5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGhlaWdodCBpbiB0aGUgaGVpZ2h0ZmllbGQgYXQgYSBnaXZlbiBwb3NpdGlvblxuICAgKi9cblxuXG4gIGdldEhlaWdodEF0KHgsIHksIGVkZ2VDbGFtcCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3QgYSA9IGdldEhlaWdodEF0X2E7XG4gICAgY29uc3QgYiA9IGdldEhlaWdodEF0X2I7XG4gICAgY29uc3QgYyA9IGdldEhlaWdodEF0X2M7XG4gICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4O1xuICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTtcbiAgICBsZXQgeGkgPSBpZHhbMF07XG4gICAgbGV0IHlpID0gaWR4WzFdO1xuXG4gICAgaWYgKGVkZ2VDbGFtcCkge1xuICAgICAgeGkgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHhpKSk7XG4gICAgICB5aSA9IE1hdGgubWluKGRhdGFbMF0ubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeWkpKTtcbiAgICB9XG5cbiAgICBjb25zdCB1cHBlciA9IHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpO1xuICAgIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBhLngsIGEueSwgYi54LCBiLnksIGMueCwgYy55LCBnZXRIZWlnaHRBdF93ZWlnaHRzKTtcbiAgICBjb25zdCB3ID0gZ2V0SGVpZ2h0QXRfd2VpZ2h0cztcblxuICAgIGlmICh1cHBlcikge1xuICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG4gICAgICByZXR1cm4gZGF0YVt4aSArIDFdW3lpICsgMV0gKiB3LnggKyBkYXRhW3hpXVt5aSArIDFdICogdy55ICsgZGF0YVt4aSArIDFdW3lpXSAqIHcuejtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG4gICAgICByZXR1cm4gZGF0YVt4aV1beWldICogdy54ICsgZGF0YVt4aSArIDFdW3lpXSAqIHcueSArIGRhdGFbeGldW3lpICsgMV0gKiB3Lno7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHtcbiAgICByZXR1cm4geGkgKyBcIl9cIiArIHlpICsgXCJfXCIgKyAoZ2V0VXBwZXJUcmlhbmdsZSA/IDEgOiAwKTtcbiAgfVxuXG4gIGdldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkge1xuICAgIHJldHVybiB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXTtcbiAgfVxuXG4gIHNldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSwgY29udmV4LCBvZmZzZXQpIHtcbiAgICB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXSA9IHtcbiAgICAgIGNvbnZleCxcbiAgICAgIG9mZnNldFxuICAgIH07XG4gIH1cblxuICBjbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkge1xuICAgIGRlbGV0ZSB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgdHJpYW5nbGUgZnJvbSB0aGUgaGVpZ2h0ZmllbGRcbiAgICovXG5cblxuICBnZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7XG5cbiAgICBpZiAodXBwZXIpIHtcbiAgICAgIC8vIFRvcCB0cmlhbmdsZSB2ZXJ0c1xuICAgICAgYS5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pO1xuICAgICAgYi5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSk7XG4gICAgICBjLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG4gICAgICBhLnNldCh4aSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0pO1xuICAgICAgYi5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSk7XG4gICAgICBjLnNldCh4aSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHRyaWFuZ2xlIGluIHRoZSB0ZXJyYWluIGluIHRoZSBmb3JtIG9mIGEgdHJpYW5ndWxhciBjb252ZXggc2hhcGUuXG4gICAqL1xuXG5cbiAgZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMucGlsbGFyQ29udmV4O1xuICAgIGxldCBvZmZzZXRSZXN1bHQgPSB0aGlzLnBpbGxhck9mZnNldDtcblxuICAgIGlmICh0aGlzLmNhY2hlRW5hYmxlZCkge1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKTtcblxuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBkYXRhLmNvbnZleDtcbiAgICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBkYXRhLm9mZnNldDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQgPSBuZXcgQ29udmV4UG9seWhlZHJvbigpO1xuICAgICAgb2Zmc2V0UmVzdWx0ID0gbmV3IFZlYzMoKTtcbiAgICAgIHRoaXMucGlsbGFyQ29udmV4ID0gcmVzdWx0O1xuICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBvZmZzZXRSZXN1bHQ7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7XG4gICAgY29uc3QgZmFjZXMgPSByZXN1bHQuZmFjZXM7IC8vIFJldXNlIHZlcnRzIGlmIHBvc3NpYmxlXG5cbiAgICByZXN1bHQudmVydGljZXMubGVuZ3RoID0gNjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICBpZiAoIXJlc3VsdC52ZXJ0aWNlc1tpXSkge1xuICAgICAgICByZXN1bHQudmVydGljZXNbaV0gPSBuZXcgVmVjMygpO1xuICAgICAgfVxuICAgIH0gLy8gUmV1c2UgZmFjZXMgaWYgcG9zc2libGVcblxuXG4gICAgZmFjZXMubGVuZ3RoID0gNTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICBpZiAoIWZhY2VzW2ldKSB7XG4gICAgICAgIGZhY2VzW2ldID0gW107XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdmVydHMgPSByZXN1bHQudmVydGljZXM7XG4gICAgY29uc3QgaCA9IChNYXRoLm1pbihkYXRhW3hpXVt5aV0sIGRhdGFbeGkgKyAxXVt5aV0sIGRhdGFbeGldW3lpICsgMV0sIGRhdGFbeGkgKyAxXVt5aSArIDFdKSAtIHRoaXMubWluVmFsdWUpIC8gMiArIHRoaXMubWluVmFsdWU7XG5cbiAgICBpZiAoIWdldFVwcGVyVHJpYW5nbGUpIHtcbiAgICAgIC8vIENlbnRlciBvZiB0aGUgdHJpYW5nbGUgcGlsbGFyIC0gYWxsIHBvbHlnb25zIGFyZSBnaXZlbiByZWxhdGl2ZSB0byB0aGlzIG9uZVxuICAgICAgb2Zmc2V0UmVzdWx0LnNldCgoeGkgKyAwLjI1KSAqIGVsZW1lbnRTaXplLCAvLyBzb3J0IG9mIGNlbnRlciBvZiBhIHRyaWFuZ2xlXG4gICAgICAoeWkgKyAwLjI1KSAqIGVsZW1lbnRTaXplLCBoIC8vIHZlcnRpY2FsIGNlbnRlclxuICAgICAgKTsgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG5cbiAgICAgIHZlcnRzWzBdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0gLSBoKTtcbiAgICAgIHZlcnRzWzFdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0gLSBoKTtcbiAgICAgIHZlcnRzWzJdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAwLjc1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0gLSBoKTsgLy8gYm90dG9tIHRyaWFuZ2xlIHZlcnRzXG5cbiAgICAgIHZlcnRzWzNdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTtcbiAgICAgIHZlcnRzWzRdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpO1xuICAgICAgdmVydHNbNV0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIDAuNzUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7IC8vIHRvcCB0cmlhbmdsZVxuXG4gICAgICBmYWNlc1swXVswXSA9IDA7XG4gICAgICBmYWNlc1swXVsxXSA9IDE7XG4gICAgICBmYWNlc1swXVsyXSA9IDI7IC8vIGJvdHRvbSB0cmlhbmdsZVxuXG4gICAgICBmYWNlc1sxXVswXSA9IDU7XG4gICAgICBmYWNlc1sxXVsxXSA9IDQ7XG4gICAgICBmYWNlc1sxXVsyXSA9IDM7IC8vIC14IGZhY2luZyBxdWFkXG5cbiAgICAgIGZhY2VzWzJdWzBdID0gMDtcbiAgICAgIGZhY2VzWzJdWzFdID0gMjtcbiAgICAgIGZhY2VzWzJdWzJdID0gNTtcbiAgICAgIGZhY2VzWzJdWzNdID0gMzsgLy8gLXkgZmFjaW5nIHF1YWRcblxuICAgICAgZmFjZXNbM11bMF0gPSAxO1xuICAgICAgZmFjZXNbM11bMV0gPSAwO1xuICAgICAgZmFjZXNbM11bMl0gPSAzO1xuICAgICAgZmFjZXNbM11bM10gPSA0OyAvLyAreHkgZmFjaW5nIHF1YWRcblxuICAgICAgZmFjZXNbNF1bMF0gPSA0O1xuICAgICAgZmFjZXNbNF1bMV0gPSA1O1xuICAgICAgZmFjZXNbNF1bMl0gPSAyO1xuICAgICAgZmFjZXNbNF1bM10gPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDZW50ZXIgb2YgdGhlIHRyaWFuZ2xlIHBpbGxhciAtIGFsbCBwb2x5Z29ucyBhcmUgZ2l2ZW4gcmVsYXRpdmUgdG8gdGhpcyBvbmVcbiAgICAgIG9mZnNldFJlc3VsdC5zZXQoKHhpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgLy8gc29ydCBvZiBjZW50ZXIgb2YgYSB0cmlhbmdsZVxuICAgICAgKHlpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgaCAvLyB2ZXJ0aWNhbCBjZW50ZXJcbiAgICAgICk7IC8vIFRvcCB0cmlhbmdsZSB2ZXJ0c1xuXG4gICAgICB2ZXJ0c1swXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdIC0gaCk7XG4gICAgICB2ZXJ0c1sxXS5zZXQoLTAuNzUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdIC0gaCk7XG4gICAgICB2ZXJ0c1syXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldIC0gaCk7IC8vIGJvdHRvbSB0cmlhbmdsZSB2ZXJ0c1xuXG4gICAgICB2ZXJ0c1szXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpO1xuICAgICAgdmVydHNbNF0uc2V0KC0wLjc1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7XG4gICAgICB2ZXJ0c1s1XS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsgLy8gVG9wIHRyaWFuZ2xlXG5cbiAgICAgIGZhY2VzWzBdWzBdID0gMDtcbiAgICAgIGZhY2VzWzBdWzFdID0gMTtcbiAgICAgIGZhY2VzWzBdWzJdID0gMjsgLy8gYm90dG9tIHRyaWFuZ2xlXG5cbiAgICAgIGZhY2VzWzFdWzBdID0gNTtcbiAgICAgIGZhY2VzWzFdWzFdID0gNDtcbiAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gK3ggZmFjaW5nIHF1YWRcblxuICAgICAgZmFjZXNbMl1bMF0gPSAyO1xuICAgICAgZmFjZXNbMl1bMV0gPSA1O1xuICAgICAgZmFjZXNbMl1bMl0gPSAzO1xuICAgICAgZmFjZXNbMl1bM10gPSAwOyAvLyAreSBmYWNpbmcgcXVhZFxuXG4gICAgICBmYWNlc1szXVswXSA9IDM7XG4gICAgICBmYWNlc1szXVsxXSA9IDQ7XG4gICAgICBmYWNlc1szXVsyXSA9IDE7XG4gICAgICBmYWNlc1szXVszXSA9IDA7IC8vIC14eSBmYWNpbmcgcXVhZFxuXG4gICAgICBmYWNlc1s0XVswXSA9IDE7XG4gICAgICBmYWNlc1s0XVsxXSA9IDQ7XG4gICAgICBmYWNlc1s0XVsyXSA9IDU7XG4gICAgICBmYWNlc1s0XVszXSA9IDI7XG4gICAgfVxuXG4gICAgcmVzdWx0LmNvbXB1dGVOb3JtYWxzKCk7XG4gICAgcmVzdWx0LmNvbXB1dGVFZGdlcygpO1xuICAgIHJlc3VsdC51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpO1xuICAgIHRoaXMuc2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlLCByZXN1bHQsIG9mZnNldFJlc3VsdCk7XG4gIH1cblxuICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRhcmdldC5zZXQoMCwgMCwgMCk7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIHZvbHVtZSgpIHtcbiAgICByZXR1cm4gKC8vIFRoZSB0ZXJyYWluIGlzIGluZmluaXRlXG4gICAgICBOdW1iZXIuTUFYX1ZBTFVFXG4gICAgKTtcbiAgfVxuXG4gIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7XG4gICAgLyoqIEBUT0RPIGRvIGl0IHByb3Blcmx5ICovXG4gICAgbWluLnNldCgtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFKTtcbiAgICBtYXguc2V0KE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUpO1xuICB9XG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgLy8gVXNlIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIG1pbi9tYXggdmFsdWVzXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBzID0gdGhpcy5lbGVtZW50U2l6ZTtcbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gbmV3IFZlYzMoZGF0YS5sZW5ndGggKiBzLCBkYXRhWzBdLmxlbmd0aCAqIHMsIE1hdGgubWF4KE1hdGguYWJzKHRoaXMubWF4VmFsdWUpLCBNYXRoLmFicyh0aGlzLm1pblZhbHVlKSkpLmxlbmd0aCgpO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBoZWlnaHQgdmFsdWVzIGZyb20gYW4gaW1hZ2UuIEN1cnJlbnRseSBvbmx5IHN1cHBvcnRlZCBpbiBicm93c2VyLlxuICAgKi9cblxuXG4gIHNldEhlaWdodHNGcm9tSW1hZ2UoaW1hZ2UsIHNjYWxlKSB7XG4gICAgY29uc3Qge1xuICAgICAgeCxcbiAgICAgIHosXG4gICAgICB5XG4gICAgfSA9IHNjYWxlO1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG4gICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwKTtcbiAgICBjb25zdCBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTtcbiAgICBjb25zdCBtYXRyaXggPSB0aGlzLmRhdGE7XG4gICAgbWF0cml4Lmxlbmd0aCA9IDA7XG4gICAgdGhpcy5lbGVtZW50U2l6ZSA9IE1hdGguYWJzKHgpIC8gaW1hZ2VEYXRhLndpZHRoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZURhdGEuaGVpZ2h0OyBpKyspIHtcbiAgICAgIGNvbnN0IHJvdyA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGltYWdlRGF0YS53aWR0aDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGEgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDRdO1xuICAgICAgICBjb25zdCBiID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0ICsgMV07XG4gICAgICAgIGNvbnN0IGMgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAyXTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gKGEgKyBiICsgYykgLyA0IC8gMjU1ICogejtcblxuICAgICAgICBpZiAoeCA8IDApIHtcbiAgICAgICAgICByb3cucHVzaChoZWlnaHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJvdy51bnNoaWZ0KGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHkgPCAwKSB7XG4gICAgICAgIG1hdHJpeC51bnNoaWZ0KHJvdyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXRyaXgucHVzaChyb3cpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlTWF4VmFsdWUoKTtcbiAgICB0aGlzLnVwZGF0ZU1pblZhbHVlKCk7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG59XG5jb25zdCBnZXRIZWlnaHRBdF9pZHggPSBbXTtcbmNvbnN0IGdldEhlaWdodEF0X3dlaWdodHMgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0SGVpZ2h0QXRfYSA9IG5ldyBWZWMzKCk7XG5jb25zdCBnZXRIZWlnaHRBdF9iID0gbmV3IFZlYzMoKTtcbmNvbnN0IGdldEhlaWdodEF0X2MgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0Tm9ybWFsQXRfYSA9IG5ldyBWZWMzKCk7XG5jb25zdCBnZXROb3JtYWxBdF9iID0gbmV3IFZlYzMoKTtcbmNvbnN0IGdldE5vcm1hbEF0X2MgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0Tm9ybWFsQXRfZTAgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0Tm9ybWFsQXRfZTEgPSBuZXcgVmVjMygpOyAvLyBmcm9tIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0JhcnljZW50cmljX2Nvb3JkaW5hdGVfc3lzdGVtXG5cbmZ1bmN0aW9uIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBheCwgYXksIGJ4LCBieSwgY3gsIGN5LCByZXN1bHQpIHtcbiAgcmVzdWx0LnggPSAoKGJ5IC0gY3kpICogKHggLSBjeCkgKyAoY3ggLSBieCkgKiAoeSAtIGN5KSkgLyAoKGJ5IC0gY3kpICogKGF4IC0gY3gpICsgKGN4IC0gYngpICogKGF5IC0gY3kpKTtcbiAgcmVzdWx0LnkgPSAoKGN5IC0gYXkpICogKHggLSBjeCkgKyAoYXggLSBjeCkgKiAoeSAtIGN5KSkgLyAoKGJ5IC0gY3kpICogKGF4IC0gY3gpICsgKGN4IC0gYngpICogKGF5IC0gY3kpKTtcbiAgcmVzdWx0LnogPSAxIC0gcmVzdWx0LnggLSByZXN1bHQueTtcbn1cblxuLyoqXG4gKiBPY3RyZWVOb2RlXG4gKi9cbmNsYXNzIE9jdHJlZU5vZGUge1xuICAvKiogVGhlIHJvb3Qgbm9kZSAqL1xuXG4gIC8qKiBCb3VuZGFyeSBvZiB0aGlzIG5vZGUgKi9cblxuICAvKiogQ29udGFpbmVkIGRhdGEgYXQgdGhlIGN1cnJlbnQgbm9kZSBsZXZlbCAqL1xuXG4gIC8qKiBDaGlsZHJlbiB0byB0aGlzIG5vZGUgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5yb290ID0gdm9pZCAwO1xuICAgIHRoaXMuYWFiYiA9IHZvaWQgMDtcbiAgICB0aGlzLmRhdGEgPSB2b2lkIDA7XG4gICAgdGhpcy5jaGlsZHJlbiA9IHZvaWQgMDtcbiAgICB0aGlzLnJvb3QgPSBvcHRpb25zLnJvb3QgfHwgbnVsbDtcbiAgICB0aGlzLmFhYmIgPSBvcHRpb25zLmFhYmIgPyBvcHRpb25zLmFhYmIuY2xvbmUoKSA6IG5ldyBBQUJCKCk7XG4gICAgdGhpcy5kYXRhID0gW107XG4gICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiByZXNldFxuICAgKi9cblxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuY2hpbGRyZW4ubGVuZ3RoID0gdGhpcy5kYXRhLmxlbmd0aCA9IDA7XG4gIH1cbiAgLyoqXG4gICAqIEluc2VydCBkYXRhIGludG8gdGhpcyBub2RlXG4gICAqIEByZXR1cm4gVHJ1ZSBpZiBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2VcbiAgICovXG5cblxuICBpbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsID0gMCkge1xuICAgIGNvbnN0IG5vZGVEYXRhID0gdGhpcy5kYXRhOyAvLyBJZ25vcmUgb2JqZWN0cyB0aGF0IGRvIG5vdCBiZWxvbmcgaW4gdGhpcyBub2RlXG5cbiAgICBpZiAoIXRoaXMuYWFiYi5jb250YWlucyhhYWJiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBvYmplY3QgY2Fubm90IGJlIGFkZGVkXG4gICAgfVxuXG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuO1xuICAgIGNvbnN0IG1heERlcHRoID0gdGhpcy5tYXhEZXB0aCB8fCB0aGlzLnJvb3QubWF4RGVwdGg7XG5cbiAgICBpZiAobGV2ZWwgPCBtYXhEZXB0aCkge1xuICAgICAgLy8gU3ViZGl2aWRlIGlmIHRoZXJlIGFyZSBubyBjaGlsZHJlbiB5ZXRcbiAgICAgIGxldCBzdWJkaXZpZGVkID0gZmFsc2U7XG5cbiAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuc3ViZGl2aWRlKCk7XG4gICAgICAgIHN1YmRpdmlkZWQgPSB0cnVlO1xuICAgICAgfSAvLyBhZGQgdG8gd2hpY2hldmVyIG5vZGUgd2lsbCBhY2NlcHQgaXRcblxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gODsgaSsrKSB7XG4gICAgICAgIGlmIChjaGlsZHJlbltpXS5pbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsICsgMSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc3ViZGl2aWRlZCkge1xuICAgICAgICAvLyBObyBjaGlsZHJlbiBhY2NlcHRlZCEgTWlnaHQgYXMgd2VsbCBqdXN0IHJlbW92ZSBlbSBzaW5jZSB0aGV5IGNvbnRhaW4gbm9uZVxuICAgICAgICBjaGlsZHJlbi5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgIH0gLy8gVG9vIGRlZXAsIG9yIGNoaWxkcmVuIGRpZG50IHdhbnQgaXQuIGFkZCBpdCBpbiBjdXJyZW50IG5vZGVcblxuXG4gICAgbm9kZURhdGEucHVzaChlbGVtZW50RGF0YSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSA4IGVxdWFsbHkgc2l6ZWQgY2hpbGRyZW4gbm9kZXMgYW5kIHB1dCB0aGVtIGluIHRoZSBgY2hpbGRyZW5gIGFycmF5LlxuICAgKi9cblxuXG4gIHN1YmRpdmlkZSgpIHtcbiAgICBjb25zdCBhYWJiID0gdGhpcy5hYWJiO1xuICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7XG4gICAgY29uc3QgdSA9IGFhYmIudXBwZXJCb3VuZDtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW47XG4gICAgY2hpbGRyZW4ucHVzaChuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDAsIDApXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDApXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDEsIDApXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDEsIDEpXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDEpXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDAsIDEpXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDEpXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDApXG4gICAgICB9KVxuICAgIH0pKTtcbiAgICB1LnZzdWIobCwgaGFsZkRpYWdvbmFsKTtcbiAgICBoYWxmRGlhZ29uYWwuc2NhbGUoMC41LCBoYWxmRGlhZ29uYWwpO1xuICAgIGNvbnN0IHJvb3QgPSB0aGlzLnJvb3QgfHwgdGhpcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07IC8vIFNldCBjdXJyZW50IG5vZGUgYXMgcm9vdFxuXG4gICAgICBjaGlsZC5yb290ID0gcm9vdDsgLy8gQ29tcHV0ZSBib3VuZHNcblxuICAgICAgY29uc3QgbG93ZXJCb3VuZCA9IGNoaWxkLmFhYmIubG93ZXJCb3VuZDtcbiAgICAgIGxvd2VyQm91bmQueCAqPSBoYWxmRGlhZ29uYWwueDtcbiAgICAgIGxvd2VyQm91bmQueSAqPSBoYWxmRGlhZ29uYWwueTtcbiAgICAgIGxvd2VyQm91bmQueiAqPSBoYWxmRGlhZ29uYWwuejtcbiAgICAgIGxvd2VyQm91bmQudmFkZChsLCBsb3dlckJvdW5kKTsgLy8gVXBwZXIgYm91bmQgaXMgYWx3YXlzIGxvd2VyIGJvdW5kICsgaGFsZkRpYWdvbmFsXG5cbiAgICAgIGxvd2VyQm91bmQudmFkZChoYWxmRGlhZ29uYWwsIGNoaWxkLmFhYmIudXBwZXJCb3VuZCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYWxsIGRhdGEsIHBvdGVudGlhbGx5IHdpdGhpbiBhbiBBQUJCXG4gICAqIEByZXR1cm4gVGhlIFwicmVzdWx0XCIgb2JqZWN0XG4gICAqL1xuXG5cbiAgYWFiYlF1ZXJ5KGFhYmIsIHJlc3VsdCkge1xuICAgIHRoaXMuZGF0YTsgLy8gYWJvcnQgaWYgdGhlIHJhbmdlIGRvZXMgbm90IGludGVyc2VjdCB0aGlzIG5vZGVcbiAgICAvLyBpZiAoIXRoaXMuYWFiYi5vdmVybGFwcyhhYWJiKSl7XG4gICAgLy8gICAgIHJldHVybiByZXN1bHQ7XG4gICAgLy8gfVxuICAgIC8vIEFkZCBvYmplY3RzIGF0IHRoaXMgbGV2ZWxcbiAgICAvLyBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGVEYXRhKTtcbiAgICAvLyBBZGQgY2hpbGQgZGF0YVxuICAgIC8vIEB0b2RvIHVud3JhcCByZWN1cnNpb24gaW50byBhIHF1ZXVlIC8gbG9vcCwgdGhhdCdzIGZhc3RlciBpbiBKU1xuXG4gICAgdGhpcy5jaGlsZHJlbjsgLy8gZm9yIChsZXQgaSA9IDAsIE4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgLy8gICAgIGNoaWxkcmVuW2ldLmFhYmJRdWVyeShhYWJiLCByZXN1bHQpO1xuICAgIC8vIH1cblxuICAgIGNvbnN0IHF1ZXVlID0gW3RoaXNdO1xuXG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpO1xuXG4gICAgICBpZiAobm9kZS5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHJlc3VsdCwgbm9kZS5kYXRhKTtcbiAgICAgIH1cblxuICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocXVldWUsIG5vZGUuY2hpbGRyZW4pO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgaW50ZXJzZWN0ZWQgYnkgYSByYXkuXG4gICAqIEByZXR1cm4gVGhlIFwicmVzdWx0XCIgb2JqZWN0XG4gICAqL1xuXG5cbiAgcmF5UXVlcnkocmF5LCB0cmVlVHJhbnNmb3JtLCByZXN1bHQpIHtcbiAgICAvLyBVc2UgYWFiYiBxdWVyeSBmb3Igbm93LlxuXG4gICAgLyoqIEB0b2RvIGltcGxlbWVudCByZWFsIHJheSBxdWVyeSB3aGljaCBuZWVkcyBsZXNzIGxvb2t1cHMgKi9cbiAgICByYXkuZ2V0QUFCQih0bXBBQUJCKTtcbiAgICB0bXBBQUJCLnRvTG9jYWxGcmFtZSh0cmVlVHJhbnNmb3JtLCB0bXBBQUJCKTtcbiAgICB0aGlzLmFhYmJRdWVyeSh0bXBBQUJCLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIHJlbW92ZUVtcHR5Tm9kZXNcbiAgICovXG5cblxuICByZW1vdmVFbXB0eU5vZGVzKCkge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aGlzLmNoaWxkcmVuW2ldLnJlbW92ZUVtcHR5Tm9kZXMoKTtcblxuICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuW2ldLmNoaWxkcmVuLmxlbmd0aCAmJiAhdGhpcy5jaGlsZHJlbltpXS5kYXRhLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShpLCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuLyoqXG4gKiBPY3RyZWVcbiAqL1xuXG5cbmNsYXNzIE9jdHJlZSBleHRlbmRzIE9jdHJlZU5vZGUge1xuICAvKipcbiAgICogTWF4aW11bSBzdWJkaXZpc2lvbiBkZXB0aFxuICAgKiBAZGVmYXVsdCA4XG4gICAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gYWFiYiBUaGUgdG90YWwgQUFCQiBvZiB0aGUgdHJlZVxuICAgKi9cbiAgY29uc3RydWN0b3IoYWFiYiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgcm9vdDogbnVsbCxcbiAgICAgIGFhYmJcbiAgICB9KTtcbiAgICB0aGlzLm1heERlcHRoID0gdm9pZCAwO1xuICAgIHRoaXMubWF4RGVwdGggPSB0eXBlb2Ygb3B0aW9ucy5tYXhEZXB0aCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heERlcHRoIDogODtcbiAgfVxuXG59XG5jb25zdCBoYWxmRGlhZ29uYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wQUFCQiA9IG5ldyBBQUJCKCk7XG5cbi8qKlxuICogVHJpbWVzaC5cbiAqIEBleGFtcGxlXG4gKiAgICAgLy8gSG93IHRvIG1ha2UgYSBtZXNoIHdpdGggYSBzaW5nbGUgdHJpYW5nbGVcbiAqICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtcbiAqICAgICAgICAgMCwgMCwgMCwgLy8gdmVydGV4IDBcbiAqICAgICAgICAgMSwgMCwgMCwgLy8gdmVydGV4IDFcbiAqICAgICAgICAgMCwgMSwgMCAgLy8gdmVydGV4IDJcbiAqICAgICBdXG4gKiAgICAgY29uc3QgaW5kaWNlcyA9IFtcbiAqICAgICAgICAgMCwgMSwgMiAgLy8gdHJpYW5nbGUgMFxuICogICAgIF1cbiAqICAgICBjb25zdCB0cmltZXNoU2hhcGUgPSBuZXcgQ0FOTk9OLlRyaW1lc2godmVydGljZXMsIGluZGljZXMpXG4gKi9cbmNsYXNzIFRyaW1lc2ggZXh0ZW5kcyBTaGFwZSB7XG4gIC8qKlxuICAgKiB2ZXJ0aWNlc1xuICAgKi9cblxuICAvKipcbiAgICogQXJyYXkgb2YgaW50ZWdlcnMsIGluZGljYXRpbmcgd2hpY2ggdmVydGljZXMgZWFjaCB0cmlhbmdsZSBjb25zaXN0cyBvZi4gVGhlIGxlbmd0aCBvZiB0aGlzIGFycmF5IGlzIHRodXMgMyB0aW1lcyB0aGUgbnVtYmVyIG9mIHRyaWFuZ2xlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBub3JtYWxzIGRhdGEuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgbG9jYWwgQUFCQiBvZiB0aGUgbWVzaC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFJlZmVyZW5jZXMgdG8gdmVydGV4IHBhaXJzLCBtYWtpbmcgdXAgYWxsIHVuaXF1ZSBlZGdlcyBpbiB0aGUgdHJpbWVzaC5cbiAgICovXG5cbiAgLyoqXG4gICAqIExvY2FsIHNjYWxpbmcgb2YgdGhlIG1lc2guIFVzZSAuc2V0U2NhbGUoKSB0byBzZXQgaXQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgaW5kZXhlZCB0cmlhbmdsZXMuIFVzZSAudXBkYXRlVHJlZSgpIHRvIHVwZGF0ZSBpdC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHZlcnRpY2VzLCBpbmRpY2VzKSB7XG4gICAgc3VwZXIoe1xuICAgICAgdHlwZTogU2hhcGUudHlwZXMuVFJJTUVTSFxuICAgIH0pO1xuICAgIHRoaXMudmVydGljZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5pbmRpY2VzID0gdm9pZCAwO1xuICAgIHRoaXMubm9ybWFscyA9IHZvaWQgMDtcbiAgICB0aGlzLmFhYmIgPSB2b2lkIDA7XG4gICAgdGhpcy5lZGdlcyA9IHZvaWQgMDtcbiAgICB0aGlzLnNjYWxlID0gdm9pZCAwO1xuICAgIHRoaXMudHJlZSA9IHZvaWQgMDtcbiAgICB0aGlzLnZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheSh2ZXJ0aWNlcyk7XG4gICAgdGhpcy5pbmRpY2VzID0gbmV3IEludDE2QXJyYXkoaW5kaWNlcyk7XG4gICAgdGhpcy5ub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShpbmRpY2VzLmxlbmd0aCk7XG4gICAgdGhpcy5hYWJiID0gbmV3IEFBQkIoKTtcbiAgICB0aGlzLmVkZ2VzID0gbnVsbDtcbiAgICB0aGlzLnNjYWxlID0gbmV3IFZlYzMoMSwgMSwgMSk7XG4gICAgdGhpcy50cmVlID0gbmV3IE9jdHJlZSgpO1xuICAgIHRoaXMudXBkYXRlRWRnZXMoKTtcbiAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTtcbiAgICB0aGlzLnVwZGF0ZUFBQkIoKTtcbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7XG4gICAgdGhpcy51cGRhdGVUcmVlKCk7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZVRyZWVcbiAgICovXG5cblxuICB1cGRhdGVUcmVlKCkge1xuICAgIGNvbnN0IHRyZWUgPSB0aGlzLnRyZWU7XG4gICAgdHJlZS5yZXNldCgpO1xuICAgIHRyZWUuYWFiYi5jb3B5KHRoaXMuYWFiYik7XG4gICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlOyAvLyBUaGUgbG9jYWwgbWVzaCBBQUJCIGlzIHNjYWxlZCwgYnV0IHRoZSBvY3RyZWUgQUFCQiBzaG91bGQgYmUgdW5zY2FsZWRcblxuICAgIHRyZWUuYWFiYi5sb3dlckJvdW5kLnggKj0gMSAvIHNjYWxlLng7XG4gICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueSAqPSAxIC8gc2NhbGUueTtcbiAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56O1xuICAgIHRyZWUuYWFiYi51cHBlckJvdW5kLnggKj0gMSAvIHNjYWxlLng7XG4gICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueSAqPSAxIC8gc2NhbGUueTtcbiAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56OyAvLyBJbnNlcnQgYWxsIHRyaWFuZ2xlc1xuXG4gICAgY29uc3QgdHJpYW5nbGVBQUJCID0gbmV3IEFBQkIoKTtcbiAgICBjb25zdCBhID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBiID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBjID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwb2ludHMgPSBbYSwgYiwgY107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHtcbiAgICAgIC8vdGhpcy5nZXRUcmlhbmdsZVZlcnRpY2VzKGksIGEsIGIsIGMpO1xuICAgICAgLy8gR2V0IHVuc2NhbGVkIHRyaWFuZ2xlIHZlcnRzXG4gICAgICBjb25zdCBpMyA9IGkgKiAzO1xuXG4gICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTNdLCBhKTtcblxuICAgICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMV0sIGIpO1xuXG4gICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAyXSwgYyk7XG5cbiAgICAgIHRyaWFuZ2xlQUFCQi5zZXRGcm9tUG9pbnRzKHBvaW50cyk7XG4gICAgICB0cmVlLmluc2VydCh0cmlhbmdsZUFBQkIsIGkpO1xuICAgIH1cblxuICAgIHRyZWUucmVtb3ZlRW1wdHlOb2RlcygpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdHJpYW5nbGVzIGluIGEgbG9jYWwgQUFCQiBmcm9tIHRoZSB0cmltZXNoLlxuICAgKiBAcGFyYW0gcmVzdWx0IEFuIGFycmF5IG9mIGludGVnZXJzLCByZWZlcmVuY2luZyB0aGUgcXVlcmllZCB0cmlhbmdsZXMuXG4gICAqL1xuXG5cbiAgZ2V0VHJpYW5nbGVzSW5BQUJCKGFhYmIsIHJlc3VsdCkge1xuICAgIHVuc2NhbGVkQUFCQi5jb3B5KGFhYmIpOyAvLyBTY2FsZSBpdCB0byBsb2NhbFxuXG4gICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlO1xuICAgIGNvbnN0IGlzeCA9IHNjYWxlLng7XG4gICAgY29uc3QgaXN5ID0gc2NhbGUueTtcbiAgICBjb25zdCBpc3ogPSBzY2FsZS56O1xuICAgIGNvbnN0IGwgPSB1bnNjYWxlZEFBQkIubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1ID0gdW5zY2FsZWRBQUJCLnVwcGVyQm91bmQ7XG4gICAgbC54IC89IGlzeDtcbiAgICBsLnkgLz0gaXN5O1xuICAgIGwueiAvPSBpc3o7XG4gICAgdS54IC89IGlzeDtcbiAgICB1LnkgLz0gaXN5O1xuICAgIHUueiAvPSBpc3o7XG4gICAgcmV0dXJuIHRoaXMudHJlZS5hYWJiUXVlcnkodW5zY2FsZWRBQUJCLCByZXN1bHQpO1xuICB9XG4gIC8qKlxuICAgKiBzZXRTY2FsZVxuICAgKi9cblxuXG4gIHNldFNjYWxlKHNjYWxlKSB7XG4gICAgY29uc3Qgd2FzVW5pZm9ybSA9IHRoaXMuc2NhbGUueCA9PT0gdGhpcy5zY2FsZS55ICYmIHRoaXMuc2NhbGUueSA9PT0gdGhpcy5zY2FsZS56O1xuICAgIGNvbnN0IGlzVW5pZm9ybSA9IHNjYWxlLnggPT09IHNjYWxlLnkgJiYgc2NhbGUueSA9PT0gc2NhbGUuejtcblxuICAgIGlmICghKHdhc1VuaWZvcm0gJiYgaXNVbmlmb3JtKSkge1xuICAgICAgLy8gTm9uLXVuaWZvcm0gc2NhbGluZy4gTmVlZCB0byB1cGRhdGUgbm9ybWFscy5cbiAgICAgIHRoaXMudXBkYXRlTm9ybWFscygpO1xuICAgIH1cblxuICAgIHRoaXMuc2NhbGUuY29weShzY2FsZSk7XG4gICAgdGhpcy51cGRhdGVBQUJCKCk7XG4gICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBub3JtYWxzIG9mIHRoZSBmYWNlcy4gV2lsbCBzYXZlIGluIHRoZSBgLm5vcm1hbHNgIGFycmF5LlxuICAgKi9cblxuXG4gIHVwZGF0ZU5vcm1hbHMoKSB7XG4gICAgY29uc3QgbiA9IGNvbXB1dGVOb3JtYWxzX247IC8vIEdlbmVyYXRlIG5vcm1hbHNcblxuICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLm5vcm1hbHM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHtcbiAgICAgIGNvbnN0IGkzID0gaSAqIDM7XG4gICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTtcbiAgICAgIGNvbnN0IGIgPSB0aGlzLmluZGljZXNbaTMgKyAxXTtcbiAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTtcbiAgICAgIHRoaXMuZ2V0VmVydGV4KGEsIHZhKTtcbiAgICAgIHRoaXMuZ2V0VmVydGV4KGIsIHZiKTtcbiAgICAgIHRoaXMuZ2V0VmVydGV4KGMsIHZjKTtcbiAgICAgIFRyaW1lc2guY29tcHV0ZU5vcm1hbCh2YiwgdmEsIHZjLCBuKTtcbiAgICAgIG5vcm1hbHNbaTNdID0gbi54O1xuICAgICAgbm9ybWFsc1tpMyArIDFdID0gbi55O1xuICAgICAgbm9ybWFsc1tpMyArIDJdID0gbi56O1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBgLmVkZ2VzYCBwcm9wZXJ0eVxuICAgKi9cblxuXG4gIHVwZGF0ZUVkZ2VzKCkge1xuICAgIGNvbnN0IGVkZ2VzID0ge307XG5cbiAgICBjb25zdCBhZGQgPSAoYSwgYikgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gYSA8IGIgPyBhICsgXCJfXCIgKyBiIDogYiArIFwiX1wiICsgYTtcbiAgICAgIGVkZ2VzW2tleV0gPSB0cnVlO1xuICAgIH07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHtcbiAgICAgIGNvbnN0IGkzID0gaSAqIDM7XG4gICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTtcbiAgICAgIGNvbnN0IGIgPSB0aGlzLmluZGljZXNbaTMgKyAxXTtcbiAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTtcbiAgICAgIGFkZChhLCBiKTtcbiAgICAgIGFkZChiLCBjKTtcbiAgICAgIGFkZChjLCBhKTtcbiAgICB9XG5cbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZWRnZXMpO1xuICAgIHRoaXMuZWRnZXMgPSBuZXcgSW50MTZBcnJheShrZXlzLmxlbmd0aCAqIDIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpbmRpY2VzID0ga2V5c1tpXS5zcGxpdCgnXycpO1xuICAgICAgdGhpcy5lZGdlc1syICogaV0gPSBwYXJzZUludChpbmRpY2VzWzBdLCAxMCk7XG4gICAgICB0aGlzLmVkZ2VzWzIgKiBpICsgMV0gPSBwYXJzZUludChpbmRpY2VzWzFdLCAxMCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gZWRnZSB2ZXJ0ZXhcbiAgICogQHBhcmFtIGZpcnN0T3JTZWNvbmQgMCBvciAxLCBkZXBlbmRpbmcgb24gd2hpY2ggb25lIG9mIHRoZSB2ZXJ0aWNlcyB5b3UgbmVlZC5cbiAgICogQHBhcmFtIHZlcnRleFN0b3JlIFdoZXJlIHRvIHN0b3JlIHRoZSByZXN1bHRcbiAgICovXG5cblxuICBnZXRFZGdlVmVydGV4KGVkZ2VJbmRleCwgZmlyc3RPclNlY29uZCwgdmVydGV4U3RvcmUpIHtcbiAgICBjb25zdCB2ZXJ0ZXhJbmRleCA9IHRoaXMuZWRnZXNbZWRnZUluZGV4ICogMiArIChmaXJzdE9yU2Vjb25kID8gMSA6IDApXTtcbiAgICB0aGlzLmdldFZlcnRleCh2ZXJ0ZXhJbmRleCwgdmVydGV4U3RvcmUpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSB2ZWN0b3IgYWxvbmcgYW4gZWRnZS5cbiAgICovXG5cblxuICBnZXRFZGdlVmVjdG9yKGVkZ2VJbmRleCwgdmVjdG9yU3RvcmUpIHtcbiAgICBjb25zdCB2YSA9IGdldEVkZ2VWZWN0b3JfdmE7XG4gICAgY29uc3QgdmIgPSBnZXRFZGdlVmVjdG9yX3ZiO1xuICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDAsIHZhKTtcbiAgICB0aGlzLmdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCAxLCB2Yik7XG4gICAgdmIudnN1Yih2YSwgdmVjdG9yU3RvcmUpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlc1xuICAgKi9cblxuXG4gIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkge1xuICAgIHZiLnZzdWIodmEsIGFiKTtcbiAgICB2Yy52c3ViKHZiLCBjYik7XG4gICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7XG5cbiAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkge1xuICAgICAgdGFyZ2V0Lm5vcm1hbGl6ZSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IHZlcnRleCBpLlxuICAgKiBAcmV0dXJuIFRoZSBcIm91dFwiIHZlY3RvciBvYmplY3RcbiAgICovXG5cblxuICBnZXRWZXJ0ZXgoaSwgb3V0KSB7XG4gICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlO1xuXG4gICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgoaSwgb3V0KTtcblxuICAgIG91dC54ICo9IHNjYWxlLng7XG4gICAgb3V0LnkgKj0gc2NhbGUueTtcbiAgICBvdXQueiAqPSBzY2FsZS56O1xuICAgIHJldHVybiBvdXQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCByYXcgdmVydGV4IGlcbiAgICogQHJldHVybiBUaGUgXCJvdXRcIiB2ZWN0b3Igb2JqZWN0XG4gICAqL1xuXG5cbiAgX2dldFVuc2NhbGVkVmVydGV4KGksIG91dCkge1xuICAgIGNvbnN0IGkzID0gaSAqIDM7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIHJldHVybiBvdXQuc2V0KHZlcnRpY2VzW2kzXSwgdmVydGljZXNbaTMgKyAxXSwgdmVydGljZXNbaTMgKyAyXSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHZlcnRleCBmcm9tIHRoZSB0cmltZXNoLHRyYW5zZm9ybWVkIGJ5IHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgcXVhdGVybmlvbi5cbiAgICogQHJldHVybiBUaGUgXCJvdXRcIiB2ZWN0b3Igb2JqZWN0XG4gICAqL1xuXG5cbiAgZ2V0V29ybGRWZXJ0ZXgoaSwgcG9zLCBxdWF0LCBvdXQpIHtcbiAgICB0aGlzLmdldFZlcnRleChpLCBvdXQpO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3MsIHF1YXQsIG91dCwgb3V0KTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHRocmVlIHZlcnRpY2VzIGZvciB0cmlhbmdsZSBpLlxuICAgKi9cblxuXG4gIGdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYykge1xuICAgIGNvbnN0IGkzID0gaSAqIDM7XG4gICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzXSwgYSk7XG4gICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMV0sIGIpO1xuICAgIHRoaXMuZ2V0VmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZSB0aGUgbm9ybWFsIG9mIHRyaWFuZ2xlIGkuXG4gICAqIEByZXR1cm4gVGhlIFwidGFyZ2V0XCIgdmVjdG9yIG9iamVjdFxuICAgKi9cblxuXG4gIGdldE5vcm1hbChpLCB0YXJnZXQpIHtcbiAgICBjb25zdCBpMyA9IGkgKiAzO1xuICAgIHJldHVybiB0YXJnZXQuc2V0KHRoaXMubm9ybWFsc1tpM10sIHRoaXMubm9ybWFsc1tpMyArIDFdLCB0aGlzLm5vcm1hbHNbaTMgKyAyXSk7XG4gIH1cbiAgLyoqXG4gICAqIEByZXR1cm4gVGhlIFwidGFyZ2V0XCIgdmVjdG9yIG9iamVjdFxuICAgKi9cblxuXG4gIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHtcbiAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhXG4gICAgLy8gRXhhY3QgaW5lcnRpYSBjYWxjdWxhdGlvbiBpcyBvdmVya2lsbCwgYnV0IHNlZSBodHRwOi8vZ2VvbWV0cmljdG9vbHMuY29tL0RvY3VtZW50YXRpb24vUG9seWhlZHJhbE1hc3NQcm9wZXJ0aWVzLnBkZiBmb3IgdGhlIGNvcnJlY3Qgd2F5IHRvIGRvIGl0XG4gICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKGNsaV9hYWJiKTtcbiAgICBjb25zdCB4ID0gY2xpX2FhYmIudXBwZXJCb3VuZC54IC0gY2xpX2FhYmIubG93ZXJCb3VuZC54O1xuICAgIGNvbnN0IHkgPSBjbGlfYWFiYi51cHBlckJvdW5kLnkgLSBjbGlfYWFiYi5sb3dlckJvdW5kLnk7XG4gICAgY29uc3QgeiA9IGNsaV9hYWJiLnVwcGVyQm91bmQueiAtIGNsaV9hYWJiLmxvd2VyQm91bmQuejtcbiAgICByZXR1cm4gdGFyZ2V0LnNldCgxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB4ICogMiAqIHggKyAyICogeiAqIDIgKiB6KSwgMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB4ICogMiAqIHgpKTtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZSB0aGUgbG9jYWwgQUFCQiBmb3IgdGhlIHRyaW1lc2hcbiAgICovXG5cblxuICBjb21wdXRlTG9jYWxBQUJCKGFhYmIpIHtcbiAgICBjb25zdCBsID0gYWFiYi5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7XG4gICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoO1xuICAgIHRoaXMudmVydGljZXM7XG4gICAgY29uc3QgdiA9IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0O1xuICAgIHRoaXMuZ2V0VmVydGV4KDAsIHYpO1xuICAgIGwuY29weSh2KTtcbiAgICB1LmNvcHkodik7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7XG4gICAgICB0aGlzLmdldFZlcnRleChpLCB2KTtcblxuICAgICAgaWYgKHYueCA8IGwueCkge1xuICAgICAgICBsLnggPSB2Lng7XG4gICAgICB9IGVsc2UgaWYgKHYueCA+IHUueCkge1xuICAgICAgICB1LnggPSB2Lng7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LnkgPCBsLnkpIHtcbiAgICAgICAgbC55ID0gdi55O1xuICAgICAgfSBlbHNlIGlmICh2LnkgPiB1LnkpIHtcbiAgICAgICAgdS55ID0gdi55O1xuICAgICAgfVxuXG4gICAgICBpZiAodi56IDwgbC56KSB7XG4gICAgICAgIGwueiA9IHYuejtcbiAgICAgIH0gZWxzZSBpZiAodi56ID4gdS56KSB7XG4gICAgICAgIHUueiA9IHYuejtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgYC5hYWJiYCBwcm9wZXJ0eVxuICAgKi9cblxuXG4gIHVwZGF0ZUFBQkIoKSB7XG4gICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKHRoaXMuYWFiYik7XG4gIH1cbiAgLyoqXG4gICAqIFdpbGwgdXBkYXRlIHRoZSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYCBwcm9wZXJ0eVxuICAgKi9cblxuXG4gIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkge1xuICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXJcbiAgICBsZXQgbWF4MiA9IDA7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIGNvbnN0IHYgPSBuZXcgVmVjMygpO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIE4gPSB2ZXJ0aWNlcy5sZW5ndGggLyAzOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIHRoaXMuZ2V0VmVydGV4KGksIHYpO1xuICAgICAgY29uc3Qgbm9ybTIgPSB2Lmxlbmd0aFNxdWFyZWQoKTtcblxuICAgICAgaWYgKG5vcm0yID4gbWF4Mikge1xuICAgICAgICBtYXgyID0gbm9ybTI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTtcbiAgfVxuICAvKipcbiAgICogY2FsY3VsYXRlV29ybGRBQUJCXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHtcbiAgICAvKlxuICAgICAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGggLyAzLFxuICAgICAgICAgICAgdmVydHMgPSB0aGlzLnZlcnRpY2VzO1xuICAgICAgICBjb25zdCBtaW54LG1pbnksbWlueixtYXh4LG1heHksbWF4ejtcbiAgICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7XG4gICAgICAgIGZvcihsZXQgaT0wOyBpPG47IGkrKyl7XG4gICAgICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTtcbiAgICAgICAgICAgIHF1YXQudm11bHQodiwgdik7XG4gICAgICAgICAgICBwb3MudmFkZCh2LCB2KTtcbiAgICAgICAgICAgIGlmICh2LnggPCBtaW54IHx8IG1pbng9PT11bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIG1pbnggPSB2Lng7XG4gICAgICAgICAgICB9IGVsc2UgaWYodi54ID4gbWF4eCB8fCBtYXh4PT09dW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBtYXh4ID0gdi54O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGlmICh2LnkgPCBtaW55IHx8IG1pbnk9PT11bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIG1pbnkgPSB2Lnk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodi55ID4gbWF4eSB8fCBtYXh5PT09dW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBtYXh5ID0gdi55O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGlmICh2LnogPCBtaW56IHx8IG1pbno9PT11bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIG1pbnogPSB2Lno7XG4gICAgICAgICAgICB9IGVsc2UgaWYodi56ID4gbWF4eiB8fCBtYXh6PT09dW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBtYXh6ID0gdi56O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1pbi5zZXQobWlueCxtaW55LG1pbnopO1xuICAgICAgICBtYXguc2V0KG1heHgsbWF4eSxtYXh6KTtcbiAgICAgICAgKi9cbiAgICAvLyBGYXN0ZXIgYXBwcm94aW1hdGlvbiB1c2luZyBsb2NhbCBBQUJCXG4gICAgY29uc3QgZnJhbWUgPSBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWU7XG4gICAgY29uc3QgcmVzdWx0ID0gY2FsY3VsYXRlV29ybGRBQUJCX2FhYmI7XG4gICAgZnJhbWUucG9zaXRpb24gPSBwb3M7XG4gICAgZnJhbWUucXVhdGVybmlvbiA9IHF1YXQ7XG4gICAgdGhpcy5hYWJiLnRvV29ybGRGcmFtZShmcmFtZSwgcmVzdWx0KTtcbiAgICBtaW4uY29weShyZXN1bHQubG93ZXJCb3VuZCk7XG4gICAgbWF4LmNvcHkocmVzdWx0LnVwcGVyQm91bmQpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYXBwcm94aW1hdGUgdm9sdW1lXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyAvIDMuMDtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgVHJpbWVzaCBpbnN0YW5jZSwgc2hhcGVkIGFzIGEgdG9ydXMuXG4gICAqL1xuXG5cbiAgc3RhdGljIGNyZWF0ZVRvcnVzKHJhZGl1cyA9IDEsIHR1YmUgPSAwLjUsIHJhZGlhbFNlZ21lbnRzID0gOCwgdHVidWxhclNlZ21lbnRzID0gNiwgYXJjID0gTWF0aC5QSSAqIDIpIHtcbiAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdO1xuICAgIGNvbnN0IGluZGljZXMgPSBbXTtcblxuICAgIGZvciAobGV0IGogPSAwOyBqIDw9IHJhZGlhbFNlZ21lbnRzOyBqKyspIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHR1YnVsYXJTZWdtZW50czsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHUgPSBpIC8gdHVidWxhclNlZ21lbnRzICogYXJjO1xuICAgICAgICBjb25zdCB2ID0gaiAvIHJhZGlhbFNlZ21lbnRzICogTWF0aC5QSSAqIDI7XG4gICAgICAgIGNvbnN0IHggPSAocmFkaXVzICsgdHViZSAqIE1hdGguY29zKHYpKSAqIE1hdGguY29zKHUpO1xuICAgICAgICBjb25zdCB5ID0gKHJhZGl1cyArIHR1YmUgKiBNYXRoLmNvcyh2KSkgKiBNYXRoLnNpbih1KTtcbiAgICAgICAgY29uc3QgeiA9IHR1YmUgKiBNYXRoLnNpbih2KTtcbiAgICAgICAgdmVydGljZXMucHVzaCh4LCB5LCB6KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBqID0gMTsgaiA8PSByYWRpYWxTZWdtZW50czsgaisrKSB7XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0dWJ1bGFyU2VnbWVudHM7IGkrKykge1xuICAgICAgICBjb25zdCBhID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogaiArIGkgLSAxO1xuICAgICAgICBjb25zdCBiID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogKGogLSAxKSArIGkgLSAxO1xuICAgICAgICBjb25zdCBjID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogKGogLSAxKSArIGk7XG4gICAgICAgIGNvbnN0IGQgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaTtcbiAgICAgICAgaW5kaWNlcy5wdXNoKGEsIGIsIGQpO1xuICAgICAgICBpbmRpY2VzLnB1c2goYiwgYywgZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBUcmltZXNoKHZlcnRpY2VzLCBpbmRpY2VzKTtcbiAgfVxuXG59XG5jb25zdCBjb21wdXRlTm9ybWFsc19uID0gbmV3IFZlYzMoKTtcbmNvbnN0IHVuc2NhbGVkQUFCQiA9IG5ldyBBQUJCKCk7XG5jb25zdCBnZXRFZGdlVmVjdG9yX3ZhID0gbmV3IFZlYzMoKTtcbmNvbnN0IGdldEVkZ2VWZWN0b3JfdmIgPSBuZXcgVmVjMygpO1xuY29uc3QgY2IgPSBuZXcgVmVjMygpO1xuY29uc3QgYWIgPSBuZXcgVmVjMygpO1xuY29uc3QgdmEgPSBuZXcgVmVjMygpO1xuY29uc3QgdmIgPSBuZXcgVmVjMygpO1xuY29uc3QgdmMgPSBuZXcgVmVjMygpO1xuY29uc3QgY2xpX2FhYmIgPSBuZXcgQUFCQigpO1xuY29uc3QgY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQgPSBuZXcgVmVjMygpO1xuY29uc3QgY2FsY3VsYXRlV29ybGRBQUJCX2ZyYW1lID0gbmV3IFRyYW5zZm9ybSgpO1xuY29uc3QgY2FsY3VsYXRlV29ybGRBQUJCX2FhYmIgPSBuZXcgQUFCQigpO1xuXG4vKipcbiAqIENvbnN0cmFpbnQgZXF1YXRpb24gc29sdmVyIGJhc2UgY2xhc3MuXG4gKi9cbmNsYXNzIFNvbHZlciB7XG4gIC8qKlxuICAgKiBBbGwgZXF1YXRpb25zIHRvIGJlIHNvbHZlZFxuICAgKi9cblxuICAvKipcbiAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZXF1YXRpb25zID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25zID0gW107XG4gIH1cbiAgLyoqXG4gICAqIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzIVxuICAgKiBAdG9kbyB1c2UgYWJzdHJhY3RcbiAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWRcbiAgICovXG5cblxuICBzb2x2ZShkdCwgd29ybGQpIHtcbiAgICByZXR1cm4gKC8vIFNob3VsZCByZXR1cm4gdGhlIG51bWJlciBvZiBpdGVyYXRpb25zIGRvbmUhXG4gICAgICAwXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQWRkIGFuIGVxdWF0aW9uXG4gICAqL1xuXG5cbiAgYWRkRXF1YXRpb24oZXEpIHtcbiAgICBpZiAoZXEuZW5hYmxlZCAmJiAhZXEuYmkuaXNUcmlnZ2VyICYmICFlcS5iai5pc1RyaWdnZXIpIHtcbiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goZXEpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGFuIGVxdWF0aW9uXG4gICAqL1xuXG5cbiAgcmVtb3ZlRXF1YXRpb24oZXEpIHtcbiAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9ucztcbiAgICBjb25zdCBpID0gZXFzLmluZGV4T2YoZXEpO1xuXG4gICAgaWYgKGkgIT09IC0xKSB7XG4gICAgICBlcXMuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQWRkIGFsbCBlcXVhdGlvbnNcbiAgICovXG5cblxuICByZW1vdmVBbGxFcXVhdGlvbnMoKSB7XG4gICAgdGhpcy5lcXVhdGlvbnMubGVuZ3RoID0gMDtcbiAgfVxuXG59XG5cbi8qKlxuICogQ29uc3RyYWludCBlcXVhdGlvbiBHYXVzcy1TZWlkZWwgc29sdmVyLlxuICogQHRvZG8gVGhlIHNwb29rIHBhcmFtZXRlcnMgc2hvdWxkIGJlIHNwZWNpZmllZCBmb3IgZWFjaCBjb25zdHJhaW50LCBub3QgZ2xvYmFsbHkuXG4gKiBAc2VlIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDA5L2xlY3R1cmVzL3Nwb29rbm90ZXMucGRmXG4gKi9cbmNsYXNzIEdTU29sdmVyIGV4dGVuZHMgU29sdmVyIHtcbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2Ygc29sdmVyIGl0ZXJhdGlvbnMgZGV0ZXJtaW5lcyBxdWFsaXR5IG9mIHRoZSBjb25zdHJhaW50cyBpbiB0aGUgd29ybGQuXG4gICAqIFRoZSBtb3JlIGl0ZXJhdGlvbnMsIHRoZSBtb3JlIGNvcnJlY3Qgc2ltdWxhdGlvbi4gTW9yZSBpdGVyYXRpb25zIG5lZWQgbW9yZSBjb21wdXRhdGlvbnMgdGhvdWdoLiBJZiB5b3UgaGF2ZSBhIGxhcmdlIGdyYXZpdHkgZm9yY2UgaW4geW91ciB3b3JsZCwgeW91IHdpbGwgbmVlZCBtb3JlIGl0ZXJhdGlvbnMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXaGVuIHRvbGVyYW5jZSBpcyByZWFjaGVkLCB0aGUgc3lzdGVtIGlzIGFzc3VtZWQgdG8gYmUgY29udmVyZ2VkLlxuICAgKi9cblxuICAvKipcbiAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pdGVyYXRpb25zID0gdm9pZCAwO1xuICAgIHRoaXMudG9sZXJhbmNlID0gdm9pZCAwO1xuICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwO1xuICAgIHRoaXMudG9sZXJhbmNlID0gMWUtNztcbiAgfVxuICAvKipcbiAgICogU29sdmVcbiAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWRcbiAgICovXG5cblxuICBzb2x2ZShkdCwgd29ybGQpIHtcbiAgICBsZXQgaXRlciA9IDA7XG4gICAgY29uc3QgbWF4SXRlciA9IHRoaXMuaXRlcmF0aW9ucztcbiAgICBjb25zdCB0b2xTcXVhcmVkID0gdGhpcy50b2xlcmFuY2UgKiB0aGlzLnRvbGVyYW5jZTtcbiAgICBjb25zdCBlcXVhdGlvbnMgPSB0aGlzLmVxdWF0aW9ucztcbiAgICBjb25zdCBOZXEgPSBlcXVhdGlvbnMubGVuZ3RoO1xuICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllcztcbiAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDtcbiAgICBjb25zdCBoID0gZHQ7XG4gICAgbGV0IEI7XG4gICAgbGV0IGludkM7XG4gICAgbGV0IGRlbHRhbGFtYmRhO1xuICAgIGxldCBkZWx0YWxhbWJkYVRvdDtcbiAgICBsZXQgR1dsYW1iZGE7XG4gICAgbGV0IGxhbWJkYWo7IC8vIFVwZGF0ZSBzb2x2ZSBtYXNzXG5cbiAgICBpZiAoTmVxICE9PSAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7XG4gICAgICAgIGJvZGllc1tpXS51cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCk7XG4gICAgICB9XG4gICAgfSAvLyBUaGluZ3MgdGhhdCBkbyBub3QgY2hhbmdlIGR1cmluZyBpdGVyYXRpb24gY2FuIGJlIGNvbXB1dGVkIG9uY2VcblxuXG4gICAgY29uc3QgaW52Q3MgPSBHU1NvbHZlcl9zb2x2ZV9pbnZDcztcbiAgICBjb25zdCBCcyA9IEdTU29sdmVyX3NvbHZlX0JzO1xuICAgIGNvbnN0IGxhbWJkYSA9IEdTU29sdmVyX3NvbHZlX2xhbWJkYTtcbiAgICBpbnZDcy5sZW5ndGggPSBOZXE7XG4gICAgQnMubGVuZ3RoID0gTmVxO1xuICAgIGxhbWJkYS5sZW5ndGggPSBOZXE7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxOyBpKyspIHtcbiAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbaV07XG4gICAgICBsYW1iZGFbaV0gPSAwLjA7XG4gICAgICBCc1tpXSA9IGMuY29tcHV0ZUIoaCk7XG4gICAgICBpbnZDc1tpXSA9IDEuMCAvIGMuY29tcHV0ZUMoKTtcbiAgICB9XG5cbiAgICBpZiAoTmVxICE9PSAwKSB7XG4gICAgICAvLyBSZXNldCB2bGFtYmRhXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07XG4gICAgICAgIGNvbnN0IHZsYW1iZGEgPSBiLnZsYW1iZGE7XG4gICAgICAgIGNvbnN0IHdsYW1iZGEgPSBiLndsYW1iZGE7XG4gICAgICAgIHZsYW1iZGEuc2V0KDAsIDAsIDApO1xuICAgICAgICB3bGFtYmRhLnNldCgwLCAwLCAwKTtcbiAgICAgIH0gLy8gSXRlcmF0ZSBvdmVyIGVxdWF0aW9uc1xuXG5cbiAgICAgIGZvciAoaXRlciA9IDA7IGl0ZXIgIT09IG1heEl0ZXI7IGl0ZXIrKykge1xuICAgICAgICAvLyBBY2N1bXVsYXRlIHRoZSB0b3RhbCBlcnJvciBmb3IgZWFjaCBpdGVyYXRpb24uXG4gICAgICAgIGRlbHRhbGFtYmRhVG90ID0gMC4wO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBOZXE7IGorKykge1xuICAgICAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbal07IC8vIENvbXB1dGUgaXRlcmF0aW9uXG5cbiAgICAgICAgICBCID0gQnNbal07XG4gICAgICAgICAgaW52QyA9IGludkNzW2pdO1xuICAgICAgICAgIGxhbWJkYWogPSBsYW1iZGFbal07XG4gICAgICAgICAgR1dsYW1iZGEgPSBjLmNvbXB1dGVHV2xhbWJkYSgpO1xuICAgICAgICAgIGRlbHRhbGFtYmRhID0gaW52QyAqIChCIC0gR1dsYW1iZGEgLSBjLmVwcyAqIGxhbWJkYWopOyAvLyBDbGFtcCBpZiB3ZSBhcmUgbm90IHdpdGhpbiB0aGUgbWluL21heCBpbnRlcnZhbFxuXG4gICAgICAgICAgaWYgKGxhbWJkYWogKyBkZWx0YWxhbWJkYSA8IGMubWluRm9yY2UpIHtcbiAgICAgICAgICAgIGRlbHRhbGFtYmRhID0gYy5taW5Gb3JjZSAtIGxhbWJkYWo7XG4gICAgICAgICAgfSBlbHNlIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPiBjLm1heEZvcmNlKSB7XG4gICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGMubWF4Rm9yY2UgLSBsYW1iZGFqO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxhbWJkYVtqXSArPSBkZWx0YWxhbWJkYTtcbiAgICAgICAgICBkZWx0YWxhbWJkYVRvdCArPSBkZWx0YWxhbWJkYSA+IDAuMCA/IGRlbHRhbGFtYmRhIDogLWRlbHRhbGFtYmRhOyAvLyBhYnMoZGVsdGFsYW1iZGEpXG5cbiAgICAgICAgICBjLmFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSk7XG4gICAgICAgIH0gLy8gSWYgdGhlIHRvdGFsIGVycm9yIGlzIHNtYWxsIGVub3VnaCAtIHN0b3AgaXRlcmF0ZVxuXG5cbiAgICAgICAgaWYgKGRlbHRhbGFtYmRhVG90ICogZGVsdGFsYW1iZGFUb3QgPCB0b2xTcXVhcmVkKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gQWRkIHJlc3VsdCB0byB2ZWxvY2l0eVxuXG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHtcbiAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTtcbiAgICAgICAgY29uc3QgdiA9IGIudmVsb2NpdHk7XG4gICAgICAgIGNvbnN0IHcgPSBiLmFuZ3VsYXJWZWxvY2l0eTtcbiAgICAgICAgYi52bGFtYmRhLnZtdWwoYi5saW5lYXJGYWN0b3IsIGIudmxhbWJkYSk7XG4gICAgICAgIHYudmFkZChiLnZsYW1iZGEsIHYpO1xuICAgICAgICBiLndsYW1iZGEudm11bChiLmFuZ3VsYXJGYWN0b3IsIGIud2xhbWJkYSk7XG4gICAgICAgIHcudmFkZChiLndsYW1iZGEsIHcpO1xuICAgICAgfSAvLyBTZXQgdGhlIGAubXVsdGlwbGllcmAgcHJvcGVydHkgb2YgZWFjaCBlcXVhdGlvblxuXG5cbiAgICAgIGxldCBsID0gZXF1YXRpb25zLmxlbmd0aDtcbiAgICAgIGNvbnN0IGludkR0ID0gMSAvIGg7XG5cbiAgICAgIHdoaWxlIChsLS0pIHtcbiAgICAgICAgZXF1YXRpb25zW2xdLm11bHRpcGxpZXIgPSBsYW1iZGFbbF0gKiBpbnZEdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXRlcjtcbiAgfVxuXG59IC8vIEp1c3QgdGVtcG9yYXJ5IG51bWJlciBob2xkZXJzIHRoYXQgd2Ugd2FudCB0byByZXVzZSBlYWNoIGl0ZXJhdGlvbi5cblxuY29uc3QgR1NTb2x2ZXJfc29sdmVfbGFtYmRhID0gW107XG5jb25zdCBHU1NvbHZlcl9zb2x2ZV9pbnZDcyA9IFtdO1xuY29uc3QgR1NTb2x2ZXJfc29sdmVfQnMgPSBbXTtcblxuLyoqXG4gKiBTcGxpdHMgdGhlIGVxdWF0aW9ucyBpbnRvIGlzbGFuZHMgYW5kIHNvbHZlcyB0aGVtIGluZGVwZW5kZW50bHkuIENhbiBpbXByb3ZlIHBlcmZvcm1hbmNlLlxuICovXG5jbGFzcyBTcGxpdFNvbHZlciBleHRlbmRzIFNvbHZlciB7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLiBUaGUgbW9yZSBpdGVyYXRpb25zLCB0aGUgbW9yZSBjb3JyZWN0IHNpbXVsYXRpb24uIE1vcmUgaXRlcmF0aW9ucyBuZWVkIG1vcmUgY29tcHV0YXRpb25zIHRob3VnaC4gSWYgeW91IGhhdmUgYSBsYXJnZSBncmF2aXR5IGZvcmNlIGluIHlvdXIgd29ybGQsIHlvdSB3aWxsIG5lZWQgbW9yZSBpdGVyYXRpb25zLlxuICAgKi9cblxuICAvKipcbiAgICogV2hlbiB0b2xlcmFuY2UgaXMgcmVhY2hlZCwgdGhlIHN5c3RlbSBpcyBhc3N1bWVkIHRvIGJlIGNvbnZlcmdlZC5cbiAgICovXG5cbiAgLyoqIHN1YnNvbHZlciAqL1xuICBjb25zdHJ1Y3RvcihzdWJzb2x2ZXIpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuaXRlcmF0aW9ucyA9IHZvaWQgMDtcbiAgICB0aGlzLnRvbGVyYW5jZSA9IHZvaWQgMDtcbiAgICB0aGlzLnN1YnNvbHZlciA9IHZvaWQgMDtcbiAgICB0aGlzLm5vZGVzID0gdm9pZCAwO1xuICAgIHRoaXMubm9kZVBvb2wgPSB2b2lkIDA7XG4gICAgdGhpcy5pdGVyYXRpb25zID0gMTA7XG4gICAgdGhpcy50b2xlcmFuY2UgPSAxZS03O1xuICAgIHRoaXMuc3Vic29sdmVyID0gc3Vic29sdmVyO1xuICAgIHRoaXMubm9kZXMgPSBbXTtcbiAgICB0aGlzLm5vZGVQb29sID0gW107IC8vIENyZWF0ZSBuZWVkZWQgbm9kZXMsIHJldXNlIGlmIHBvc3NpYmxlXG5cbiAgICB3aGlsZSAodGhpcy5ub2RlUG9vbC5sZW5ndGggPCAxMjgpIHtcbiAgICAgIHRoaXMubm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBjcmVhdGVOb2RlXG4gICAqL1xuXG5cbiAgY3JlYXRlTm9kZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYm9keTogbnVsbCxcbiAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgIGVxczogW10sXG4gICAgICB2aXNpdGVkOiBmYWxzZVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFNvbHZlIHRoZSBzdWJzeXN0ZW1zXG4gICAqIEByZXR1cm4gbnVtYmVyIG9mIGl0ZXJhdGlvbnMgcGVyZm9ybWVkXG4gICAqL1xuXG5cbiAgc29sdmUoZHQsIHdvcmxkKSB7XG4gICAgY29uc3Qgbm9kZXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlcztcbiAgICBjb25zdCBub2RlUG9vbCA9IHRoaXMubm9kZVBvb2w7XG4gICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzO1xuICAgIGNvbnN0IGVxdWF0aW9ucyA9IHRoaXMuZXF1YXRpb25zO1xuICAgIGNvbnN0IE5lcSA9IGVxdWF0aW9ucy5sZW5ndGg7XG4gICAgY29uc3QgTmJvZGllcyA9IGJvZGllcy5sZW5ndGg7XG4gICAgY29uc3Qgc3Vic29sdmVyID0gdGhpcy5zdWJzb2x2ZXI7IC8vIENyZWF0ZSBuZWVkZWQgbm9kZXMsIHJldXNlIGlmIHBvc3NpYmxlXG5cbiAgICB3aGlsZSAobm9kZVBvb2wubGVuZ3RoIDwgTmJvZGllcykge1xuICAgICAgbm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7XG4gICAgfVxuXG4gICAgbm9kZXMubGVuZ3RoID0gTmJvZGllcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTmJvZGllczsgaSsrKSB7XG4gICAgICBub2Rlc1tpXSA9IG5vZGVQb29sW2ldO1xuICAgIH0gLy8gUmVzZXQgbm9kZSB2YWx1ZXNcblxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykge1xuICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgbm9kZS5ib2R5ID0gYm9kaWVzW2ldO1xuICAgICAgbm9kZS5jaGlsZHJlbi5sZW5ndGggPSAwO1xuICAgICAgbm9kZS5lcXMubGVuZ3RoID0gMDtcbiAgICAgIG5vZGUudmlzaXRlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBOZXE7IGsrKykge1xuICAgICAgY29uc3QgZXEgPSBlcXVhdGlvbnNba107XG4gICAgICBjb25zdCBpID0gYm9kaWVzLmluZGV4T2YoZXEuYmkpO1xuICAgICAgY29uc3QgaiA9IGJvZGllcy5pbmRleE9mKGVxLmJqKTtcbiAgICAgIGNvbnN0IG5pID0gbm9kZXNbaV07XG4gICAgICBjb25zdCBuaiA9IG5vZGVzW2pdO1xuICAgICAgbmkuY2hpbGRyZW4ucHVzaChuaik7XG4gICAgICBuaS5lcXMucHVzaChlcSk7XG4gICAgICBuai5jaGlsZHJlbi5wdXNoKG5pKTtcbiAgICAgIG5qLmVxcy5wdXNoKGVxKTtcbiAgICB9XG5cbiAgICBsZXQgY2hpbGQ7XG4gICAgbGV0IG4gPSAwO1xuICAgIGxldCBlcXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9lcXM7XG4gICAgc3Vic29sdmVyLnRvbGVyYW5jZSA9IHRoaXMudG9sZXJhbmNlO1xuICAgIHN1YnNvbHZlci5pdGVyYXRpb25zID0gdGhpcy5pdGVyYXRpb25zO1xuICAgIGNvbnN0IGR1bW15V29ybGQgPSBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkO1xuXG4gICAgd2hpbGUgKGNoaWxkID0gZ2V0VW52aXNpdGVkTm9kZShub2RlcykpIHtcbiAgICAgIGVxcy5sZW5ndGggPSAwO1xuICAgICAgZHVtbXlXb3JsZC5ib2RpZXMubGVuZ3RoID0gMDtcbiAgICAgIGJmcyhjaGlsZCwgdmlzaXRGdW5jLCBkdW1teVdvcmxkLmJvZGllcywgZXFzKTtcbiAgICAgIGNvbnN0IE5lcXMgPSBlcXMubGVuZ3RoO1xuICAgICAgZXFzID0gZXFzLnNvcnQoc29ydEJ5SWQpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxczsgaSsrKSB7XG4gICAgICAgIHN1YnNvbHZlci5hZGRFcXVhdGlvbihlcXNbaV0pO1xuICAgICAgfVxuXG4gICAgICBzdWJzb2x2ZXIuc29sdmUoZHQsIGR1bW15V29ybGQpO1xuICAgICAgc3Vic29sdmVyLnJlbW92ZUFsbEVxdWF0aW9ucygpO1xuICAgICAgbisrO1xuICAgIH1cblxuICAgIHJldHVybiBuO1xuICB9XG5cbn0gLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIHN1YnN5c3RlbXNcblxuY29uc3QgU3BsaXRTb2x2ZXJfc29sdmVfbm9kZXMgPSBbXTsgLy8gQWxsIGFsbG9jYXRlZCBub2RlIG9iamVjdHNcblxuY29uc3QgU3BsaXRTb2x2ZXJfc29sdmVfZXFzID0gW107IC8vIFRlbXAgYXJyYXlcblxuY29uc3QgU3BsaXRTb2x2ZXJfc29sdmVfZHVtbXlXb3JsZCA9IHtcbiAgYm9kaWVzOiBbXVxufTsgLy8gVGVtcCBvYmplY3RcblxuY29uc3QgU1RBVElDID0gQm9keS5TVEFUSUM7XG5cbmZ1bmN0aW9uIGdldFVudmlzaXRlZE5vZGUobm9kZXMpIHtcbiAgY29uc3QgTm5vZGVzID0gbm9kZXMubGVuZ3RoO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpICE9PSBObm9kZXM7IGkrKykge1xuICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcblxuICAgIGlmICghbm9kZS52aXNpdGVkICYmICEobm9kZS5ib2R5LnR5cGUgJiBTVEFUSUMpKSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmNvbnN0IHF1ZXVlID0gW107XG5cbmZ1bmN0aW9uIGJmcyhyb290LCB2aXNpdEZ1bmMsIGJkcywgZXFzKSB7XG4gIHF1ZXVlLnB1c2gocm9vdCk7XG4gIHJvb3QudmlzaXRlZCA9IHRydWU7XG4gIHZpc2l0RnVuYyhyb290LCBiZHMsIGVxcyk7XG5cbiAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgIGNvbnN0IG5vZGUgPSBxdWV1ZS5wb3AoKTsgLy8gTG9vcCBvdmVyIHVudmlzaXRlZCBjaGlsZCBub2Rlc1xuXG4gICAgbGV0IGNoaWxkO1xuXG4gICAgd2hpbGUgKGNoaWxkID0gZ2V0VW52aXNpdGVkTm9kZShub2RlLmNoaWxkcmVuKSkge1xuICAgICAgY2hpbGQudmlzaXRlZCA9IHRydWU7XG4gICAgICB2aXNpdEZ1bmMoY2hpbGQsIGJkcywgZXFzKTtcbiAgICAgIHF1ZXVlLnB1c2goY2hpbGQpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB2aXNpdEZ1bmMobm9kZSwgYmRzLCBlcXMpIHtcbiAgYmRzLnB1c2gobm9kZS5ib2R5KTtcbiAgY29uc3QgTmVxcyA9IG5vZGUuZXFzLmxlbmd0aDtcblxuICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxczsgaSsrKSB7XG4gICAgY29uc3QgZXEgPSBub2RlLmVxc1tpXTtcblxuICAgIGlmICghZXFzLmluY2x1ZGVzKGVxKSkge1xuICAgICAgZXFzLnB1c2goZXEpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzb3J0QnlJZChhLCBiKSB7XG4gIHJldHVybiBiLmlkIC0gYS5pZDtcbn1cblxuLyoqXG4gKiBGb3IgcG9vbGluZyBvYmplY3RzIHRoYXQgY2FuIGJlIHJldXNlZC5cbiAqL1xuY2xhc3MgUG9vbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMub2JqZWN0cyA9IFtdO1xuICAgIHRoaXMudHlwZSA9IE9iamVjdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlIGFuIG9iamVjdCBhZnRlciB1c2VcbiAgICovXG4gIHJlbGVhc2UoLi4uYXJncykge1xuICAgIGNvbnN0IE5hcmdzID0gYXJncy5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmFyZ3M7IGkrKykge1xuICAgICAgdGhpcy5vYmplY3RzLnB1c2goYXJnc1tpXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBvYmplY3RcbiAgICovXG5cblxuICBnZXQoKSB7XG4gICAgaWYgKHRoaXMub2JqZWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdE9iamVjdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5vYmplY3RzLnBvcCgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ29uc3RydWN0IGFuIG9iamVjdC4gU2hvdWxkIGJlIGltcGxlbWVudGVkIGluIGVhY2ggc3ViY2xhc3MuXG4gICAqL1xuXG5cbiAgY29uc3RydWN0T2JqZWN0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY29uc3RydWN0T2JqZWN0KCkgbm90IGltcGxlbWVudGVkIGluIHRoaXMgUG9vbCBzdWJjbGFzcyB5ZXQhJyk7XG4gIH1cbiAgLyoqXG4gICAqIEByZXR1cm4gU2VsZiwgZm9yIGNoYWluaW5nXG4gICAqL1xuXG5cbiAgcmVzaXplKHNpemUpIHtcbiAgICBjb25zdCBvYmplY3RzID0gdGhpcy5vYmplY3RzO1xuXG4gICAgd2hpbGUgKG9iamVjdHMubGVuZ3RoID4gc2l6ZSkge1xuICAgICAgb2JqZWN0cy5wb3AoKTtcbiAgICB9XG5cbiAgICB3aGlsZSAob2JqZWN0cy5sZW5ndGggPCBzaXplKSB7XG4gICAgICBvYmplY3RzLnB1c2godGhpcy5jb25zdHJ1Y3RPYmplY3QoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxufVxuXG4vKipcbiAqIFZlYzNQb29sXG4gKi9cblxuY2xhc3MgVmVjM1Bvb2wgZXh0ZW5kcyBQb29sIHtcbiAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICAgIHRoaXMudHlwZSA9IFZlYzM7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3RydWN0IGEgdmVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RPYmplY3QoKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMzKCk7XG4gIH1cblxufVxuXG5sZXQgX0NPTExJU0lPTl9UWVBFUyRzcGhlLCBfQ09MTElTSU9OX1RZUEVTJHNwaGUyLCBfQ09MTElTSU9OX1RZUEVTJGJveEIsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTMsIF9DT0xMSVNJT05fVFlQRVMkcGxhbiwgX0NPTExJU0lPTl9UWVBFUyRjb252LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU0LCBfQ09MTElTSU9OX1RZUEVTJHBsYW4yLCBfQ09MTElTSU9OX1RZUEVTJGJveEMsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTUsIF9DT0xMSVNJT05fVFlQRVMkYm94SCwgX0NPTExJU0lPTl9UWVBFUyRjb252MiwgX0NPTExJU0lPTl9UWVBFUyRzcGhlNiwgX0NPTExJU0lPTl9UWVBFUyRwbGFuMywgX0NPTExJU0lPTl9UWVBFUyRib3hQLCBfQ09MTElTSU9OX1RZUEVTJGNvbnYzLCBfQ09MTElTSU9OX1RZUEVTJGN5bGksIF9DT0xMSVNJT05fVFlQRVMkc3BoZTcsIF9DT0xMSVNJT05fVFlQRVMkcGxhbjQsIF9DT0xMSVNJT05fVFlQRVMkYm94QzIsIF9DT0xMSVNJT05fVFlQRVMkY29udjQsIF9DT0xMSVNJT05fVFlQRVMkaGVpZywgX0NPTExJU0lPTl9UWVBFUyRwYXJ0LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU4LCBfQ09MTElTSU9OX1RZUEVTJHBsYW41O1xuLy8gTmFtaW5nIHJ1bGU6IGJhc2VkIG9mIHRoZSBvcmRlciBpbiBTSEFQRV9UWVBFUyxcbi8vIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBtZXRob2QgaXMgZm9ybWVkIGJ5IHRoZVxuLy8gc2hhcGUgdHlwZSB0aGF0IGNvbWVzIGJlZm9yZSwgaW4gdGhlIHNlY29uZCBwYXJ0XG4vLyB0aGVyZSBpcyB0aGUgc2hhcGUgdHlwZSB0aGF0IGNvbWVzIGFmdGVyIGluIHRoZSBTSEFQRV9UWVBFUyBsaXN0XG5jb25zdCBDT0xMSVNJT05fVFlQRVMgPSB7XG4gIHNwaGVyZVNwaGVyZTogU2hhcGUudHlwZXMuU1BIRVJFLFxuICBzcGhlcmVQbGFuZTogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuUExBTkUsXG4gIGJveEJveDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQk9YLFxuICBzcGhlcmVCb3g6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkJPWCxcbiAgcGxhbmVCb3g6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQk9YLFxuICBjb252ZXhDb252ZXg6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sXG4gIHNwaGVyZUNvbnZleDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTixcbiAgcGxhbmVDb252ZXg6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTixcbiAgYm94Q29udmV4OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLFxuICBzcGhlcmVIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsXG4gIGJveEhlaWdodGZpZWxkOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRCxcbiAgY29udmV4SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRCxcbiAgc3BoZXJlUGFydGljbGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuU1BIRVJFLFxuICBwbGFuZVBhcnRpY2xlOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLlBBUlRJQ0xFLFxuICBib3hQYXJ0aWNsZTogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsXG4gIGNvbnZleFBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sXG4gIGN5bGluZGVyQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLkNZTElOREVSLFxuICBzcGhlcmVDeWxpbmRlcjogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsXG4gIHBsYW5lQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsXG4gIGJveEN5bGluZGVyOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgY29udmV4Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgaGVpZ2h0ZmllbGRDeWxpbmRlcjogU2hhcGUudHlwZXMuSEVJR0hURklFTEQgfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgcGFydGljbGVDeWxpbmRlcjogU2hhcGUudHlwZXMuUEFSVElDTEUgfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgc3BoZXJlVHJpbWVzaDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuVFJJTUVTSCxcbiAgcGxhbmVUcmltZXNoOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLlRSSU1FU0hcbn07XG5fQ09MTElTSU9OX1RZUEVTJHNwaGUgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlU3BoZXJlO1xuX0NPTExJU0lPTl9UWVBFUyRzcGhlMiA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVQbGFuZTtcbl9DT0xMSVNJT05fVFlQRVMkYm94QiA9IENPTExJU0lPTl9UWVBFUy5ib3hCb3g7XG5fQ09MTElTSU9OX1RZUEVTJHNwaGUzID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZUJveDtcbl9DT0xMSVNJT05fVFlQRVMkcGxhbiA9IENPTExJU0lPTl9UWVBFUy5wbGFuZUJveDtcbl9DT0xMSVNJT05fVFlQRVMkY29udiA9IENPTExJU0lPTl9UWVBFUy5jb252ZXhDb252ZXg7XG5fQ09MTElTSU9OX1RZUEVTJHNwaGU0ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZUNvbnZleDtcbl9DT0xMSVNJT05fVFlQRVMkcGxhbjIgPSBDT0xMSVNJT05fVFlQRVMucGxhbmVDb252ZXg7XG5fQ09MTElTSU9OX1RZUEVTJGJveEMgPSBDT0xMSVNJT05fVFlQRVMuYm94Q29udmV4O1xuX0NPTExJU0lPTl9UWVBFUyRzcGhlNSA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVIZWlnaHRmaWVsZDtcbl9DT0xMSVNJT05fVFlQRVMkYm94SCA9IENPTExJU0lPTl9UWVBFUy5ib3hIZWlnaHRmaWVsZDtcbl9DT0xMSVNJT05fVFlQRVMkY29udjIgPSBDT0xMSVNJT05fVFlQRVMuY29udmV4SGVpZ2h0ZmllbGQ7XG5fQ09MTElTSU9OX1RZUEVTJHNwaGU2ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZVBhcnRpY2xlO1xuX0NPTExJU0lPTl9UWVBFUyRwbGFuMyA9IENPTExJU0lPTl9UWVBFUy5wbGFuZVBhcnRpY2xlO1xuX0NPTExJU0lPTl9UWVBFUyRib3hQID0gQ09MTElTSU9OX1RZUEVTLmJveFBhcnRpY2xlO1xuX0NPTExJU0lPTl9UWVBFUyRjb252MyA9IENPTExJU0lPTl9UWVBFUy5jb252ZXhQYXJ0aWNsZTtcbl9DT0xMSVNJT05fVFlQRVMkY3lsaSA9IENPTExJU0lPTl9UWVBFUy5jeWxpbmRlckN5bGluZGVyO1xuX0NPTExJU0lPTl9UWVBFUyRzcGhlNyA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVDeWxpbmRlcjtcbl9DT0xMSVNJT05fVFlQRVMkcGxhbjQgPSBDT0xMSVNJT05fVFlQRVMucGxhbmVDeWxpbmRlcjtcbl9DT0xMSVNJT05fVFlQRVMkYm94QzIgPSBDT0xMSVNJT05fVFlQRVMuYm94Q3lsaW5kZXI7XG5fQ09MTElTSU9OX1RZUEVTJGNvbnY0ID0gQ09MTElTSU9OX1RZUEVTLmNvbnZleEN5bGluZGVyO1xuX0NPTExJU0lPTl9UWVBFUyRoZWlnID0gQ09MTElTSU9OX1RZUEVTLmhlaWdodGZpZWxkQ3lsaW5kZXI7XG5fQ09MTElTSU9OX1RZUEVTJHBhcnQgPSBDT0xMSVNJT05fVFlQRVMucGFydGljbGVDeWxpbmRlcjtcbl9DT0xMSVNJT05fVFlQRVMkc3BoZTggPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlVHJpbWVzaDtcbl9DT0xMSVNJT05fVFlQRVMkcGxhbjUgPSBDT0xMSVNJT05fVFlQRVMucGxhbmVUcmltZXNoO1xuXG4vKipcbiAqIEhlbHBlciBjbGFzcyBmb3IgdGhlIFdvcmxkLiBHZW5lcmF0ZXMgQ29udGFjdEVxdWF0aW9ucy5cbiAqIEB0b2RvIFNwaGVyZS1Db252ZXhQb2x5aGVkcm9uIGNvbnRhY3RzXG4gKiBAdG9kbyBDb250YWN0IHJlZHVjdGlvblxuICogQHRvZG8gc2hvdWxkIG1vdmUgbWV0aG9kcyB0byBwcm90b3R5cGVcbiAqL1xuY2xhc3MgTmFycm93cGhhc2Uge1xuICAvKipcbiAgICogSW50ZXJuYWwgc3RvcmFnZSBvZiBwb29sZWQgY29udGFjdCBwb2ludHMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQb29sZWQgdmVjdG9ycy5cbiAgICovXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlXSgpIHtcbiAgICByZXR1cm4gdGhpcy5zcGhlcmVTcGhlcmU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkc3BoZTJdKCkge1xuICAgIHJldHVybiB0aGlzLnNwaGVyZVBsYW5lO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGJveEJdKCkge1xuICAgIHJldHVybiB0aGlzLmJveEJveDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlM10oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlQm94O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW5dKCkge1xuICAgIHJldHVybiB0aGlzLnBsYW5lQm94O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnZdKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlNF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW4yXSgpIHtcbiAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hDXSgpIHtcbiAgICByZXR1cm4gdGhpcy5ib3hDb252ZXg7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkc3BoZTVdKCkge1xuICAgIHJldHVybiB0aGlzLnNwaGVyZUhlaWdodGZpZWxkO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGJveEhdKCkge1xuICAgIHJldHVybiB0aGlzLmJveEhlaWdodGZpZWxkO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnYyXSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlNl0oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlUGFydGljbGU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjNdKCkge1xuICAgIHJldHVybiB0aGlzLnBsYW5lUGFydGljbGU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkYm94UF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuYm94UGFydGljbGU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkY29udjNdKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGN5bGldKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlN10oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW40XSgpIHtcbiAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hDMl0oKSB7XG4gICAgcmV0dXJuIHRoaXMuYm94Q29udmV4O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnY0XSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXg7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkaGVpZ10oKSB7XG4gICAgcmV0dXJuIHRoaXMuaGVpZ2h0ZmllbGRDeWxpbmRlcjtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRwYXJ0XSgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNsZUN5bGluZGVyO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU4XSgpIHtcbiAgICByZXR1cm4gdGhpcy5zcGhlcmVUcmltZXNoO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW41XSgpIHtcbiAgICByZXR1cm4gdGhpcy5wbGFuZVRyaW1lc2g7XG4gIH0gLy8gZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4VHJpbWVzaF0oKSB7XG4gIC8vICAgcmV0dXJuIHRoaXMuY29udmV4VHJpbWVzaFxuICAvLyB9XG5cblxuICBjb25zdHJ1Y3Rvcih3b3JsZCkge1xuICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gdm9pZCAwO1xuICAgIHRoaXMucmVzdWx0ID0gdm9pZCAwO1xuICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSB2b2lkIDA7XG4gICAgdGhpcy52M3Bvb2wgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZCA9IHZvaWQgMDtcbiAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbnRhY3RQb2ludFBvb2wgPSBbXTtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107XG4gICAgdGhpcy5yZXN1bHQgPSBbXTtcbiAgICB0aGlzLmZyaWN0aW9uUmVzdWx0ID0gW107XG4gICAgdGhpcy52M3Bvb2wgPSBuZXcgVmVjM1Bvb2woKTtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsID0gd29ybGQuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDtcbiAgICB0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIE1ha2UgYSBjb250YWN0IG9iamVjdCwgYnkgdXNpbmcgdGhlIGludGVybmFsIHBvb2wgb3IgY3JlYXRpbmcgYSBuZXcgb25lLlxuICAgKi9cblxuXG4gIGNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgb3ZlcnJpZGVTaGFwZUEsIG92ZXJyaWRlU2hhcGVCKSB7XG4gICAgbGV0IGM7XG5cbiAgICBpZiAodGhpcy5jb250YWN0UG9pbnRQb29sLmxlbmd0aCkge1xuICAgICAgYyA9IHRoaXMuY29udGFjdFBvaW50UG9vbC5wb3AoKTtcbiAgICAgIGMuYmkgPSBiaTtcbiAgICAgIGMuYmogPSBiajtcbiAgICB9IGVsc2Uge1xuICAgICAgYyA9IG5ldyBDb250YWN0RXF1YXRpb24oYmksIGJqKTtcbiAgICB9XG5cbiAgICBjLmVuYWJsZWQgPSBiaS5jb2xsaXNpb25SZXNwb25zZSAmJiBiai5jb2xsaXNpb25SZXNwb25zZSAmJiBzaS5jb2xsaXNpb25SZXNwb25zZSAmJiBzai5jb2xsaXNpb25SZXNwb25zZTtcbiAgICBjb25zdCBjbSA9IHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbDtcbiAgICBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247XG4gICAgYy5zZXRTcG9va1BhcmFtcyhjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsIGNtLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24sIHRoaXMud29ybGQuZHQpO1xuICAgIGNvbnN0IG1hdEEgPSBzaS5tYXRlcmlhbCB8fCBiaS5tYXRlcmlhbDtcbiAgICBjb25zdCBtYXRCID0gc2oubWF0ZXJpYWwgfHwgYmoubWF0ZXJpYWw7XG5cbiAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEucmVzdGl0dXRpb24gPj0gMCAmJiBtYXRCLnJlc3RpdHV0aW9uID49IDApIHtcbiAgICAgIGMucmVzdGl0dXRpb24gPSBtYXRBLnJlc3RpdHV0aW9uICogbWF0Qi5yZXN0aXR1dGlvbjtcbiAgICB9XG5cbiAgICBjLnNpID0gb3ZlcnJpZGVTaGFwZUEgfHwgc2k7XG4gICAgYy5zaiA9IG92ZXJyaWRlU2hhcGVCIHx8IHNqO1xuICAgIHJldHVybiBjO1xuICB9XG5cbiAgY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChjb250YWN0RXF1YXRpb24sIG91dEFycmF5KSB7XG4gICAgY29uc3QgYm9keUEgPSBjb250YWN0RXF1YXRpb24uYmk7XG4gICAgY29uc3QgYm9keUIgPSBjb250YWN0RXF1YXRpb24uYmo7XG4gICAgY29uc3Qgc2hhcGVBID0gY29udGFjdEVxdWF0aW9uLnNpO1xuICAgIGNvbnN0IHNoYXBlQiA9IGNvbnRhY3RFcXVhdGlvbi5zajtcbiAgICBjb25zdCB3b3JsZCA9IHRoaXMud29ybGQ7XG4gICAgY29uc3QgY20gPSB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWw7IC8vIElmIGZyaWN0aW9uIG9yIHJlc3RpdHV0aW9uIHdlcmUgc3BlY2lmaWVkIGluIHRoZSBtYXRlcmlhbCwgdXNlIHRoZW1cblxuICAgIGxldCBmcmljdGlvbiA9IGNtLmZyaWN0aW9uO1xuICAgIGNvbnN0IG1hdEEgPSBzaGFwZUEubWF0ZXJpYWwgfHwgYm9keUEubWF0ZXJpYWw7XG4gICAgY29uc3QgbWF0QiA9IHNoYXBlQi5tYXRlcmlhbCB8fCBib2R5Qi5tYXRlcmlhbDtcblxuICAgIGlmIChtYXRBICYmIG1hdEIgJiYgbWF0QS5mcmljdGlvbiA+PSAwICYmIG1hdEIuZnJpY3Rpb24gPj0gMCkge1xuICAgICAgZnJpY3Rpb24gPSBtYXRBLmZyaWN0aW9uICogbWF0Qi5mcmljdGlvbjtcbiAgICB9XG5cbiAgICBpZiAoZnJpY3Rpb24gPiAwKSB7XG4gICAgICAvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9uc1xuICAgICAgY29uc3QgbXVnID0gZnJpY3Rpb24gKiB3b3JsZC5ncmF2aXR5Lmxlbmd0aCgpO1xuICAgICAgbGV0IHJlZHVjZWRNYXNzID0gYm9keUEuaW52TWFzcyArIGJvZHlCLmludk1hc3M7XG5cbiAgICAgIGlmIChyZWR1Y2VkTWFzcyA+IDApIHtcbiAgICAgICAgcmVkdWNlZE1hc3MgPSAxIC8gcmVkdWNlZE1hc3M7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBvb2wgPSB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sO1xuICAgICAgY29uc3QgYzEgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihib2R5QSwgYm9keUIsIG11ZyAqIHJlZHVjZWRNYXNzKTtcbiAgICAgIGNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtdWcgKiByZWR1Y2VkTWFzcyk7XG4gICAgICBjMS5iaSA9IGMyLmJpID0gYm9keUE7XG4gICAgICBjMS5iaiA9IGMyLmJqID0gYm9keUI7XG4gICAgICBjMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZyAqIHJlZHVjZWRNYXNzO1xuICAgICAgYzEubWF4Rm9yY2UgPSBjMi5tYXhGb3JjZSA9IG11ZyAqIHJlZHVjZWRNYXNzOyAvLyBDb3B5IG92ZXIgdGhlIHJlbGF0aXZlIHZlY3RvcnNcblxuICAgICAgYzEucmkuY29weShjb250YWN0RXF1YXRpb24ucmkpO1xuICAgICAgYzEucmouY29weShjb250YWN0RXF1YXRpb24ucmopO1xuICAgICAgYzIucmkuY29weShjb250YWN0RXF1YXRpb24ucmkpO1xuICAgICAgYzIucmouY29weShjb250YWN0RXF1YXRpb24ucmopOyAvLyBDb25zdHJ1Y3QgdGFuZ2VudHNcblxuICAgICAgY29udGFjdEVxdWF0aW9uLm5pLnRhbmdlbnRzKGMxLnQsIGMyLnQpOyAvLyBTZXQgc3Bvb2sgcGFyYW1zXG5cbiAgICAgIGMxLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCB3b3JsZC5kdCk7XG4gICAgICBjMi5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgd29ybGQuZHQpO1xuICAgICAgYzEuZW5hYmxlZCA9IGMyLmVuYWJsZWQgPSBjb250YWN0RXF1YXRpb24uZW5hYmxlZDtcbiAgICAgIG91dEFycmF5LnB1c2goYzEsIGMyKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogVGFrZSB0aGUgYXZlcmFnZSBOIGxhdGVzdCBjb250YWN0IHBvaW50IG9uIHRoZSBwbGFuZS5cbiAgICovXG5cblxuICBjcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKSB7XG4gICAgLy8gVGhlIGxhc3QgY29udGFjdEVxdWF0aW9uXG4gICAgbGV0IGMgPSB0aGlzLnJlc3VsdFt0aGlzLnJlc3VsdC5sZW5ndGggLSAxXTsgLy8gQ3JlYXRlIHRoZSByZXN1bHQ6IHR3byBcImF2ZXJhZ2VcIiBmcmljdGlvbiBlcXVhdGlvbnNcblxuICAgIGlmICghdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGMsIHRoaXMuZnJpY3Rpb25SZXN1bHQpIHx8IG51bUNvbnRhY3RzID09PSAxKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZjEgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMl07XG4gICAgY29uc3QgZjIgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMV07XG4gICAgYXZlcmFnZU5vcm1hbC5zZXRaZXJvKCk7XG4gICAgYXZlcmFnZUNvbnRhY3RQb2ludEEuc2V0WmVybygpO1xuICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNldFplcm8oKTtcbiAgICBjb25zdCBib2R5QSA9IGMuYmk7XG4gICAgYy5iajtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBudW1Db250YWN0czsgaSsrKSB7XG4gICAgICBjID0gdGhpcy5yZXN1bHRbdGhpcy5yZXN1bHQubGVuZ3RoIC0gMSAtIGldO1xuXG4gICAgICBpZiAoYy5iaSAhPT0gYm9keUEpIHtcbiAgICAgICAgYXZlcmFnZU5vcm1hbC52YWRkKGMubmksIGF2ZXJhZ2VOb3JtYWwpO1xuICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRBKTtcbiAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIudmFkZChjLnJqLCBhdmVyYWdlQ29udGFjdFBvaW50Qik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhdmVyYWdlTm9ybWFsLnZzdWIoYy5uaSwgYXZlcmFnZU5vcm1hbCk7XG4gICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnZhZGQoYy5yaiwgYXZlcmFnZUNvbnRhY3RQb2ludEEpO1xuICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRCKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpbnZOdW1Db250YWN0cyA9IDEgLyBudW1Db250YWN0cztcbiAgICBhdmVyYWdlQ29udGFjdFBvaW50QS5zY2FsZShpbnZOdW1Db250YWN0cywgZjEucmkpO1xuICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaik7XG4gICAgZjIucmkuY29weShmMS5yaSk7IC8vIFNob3VsZCBiZSB0aGUgc2FtZVxuXG4gICAgZjIucmouY29weShmMS5yaik7XG4gICAgYXZlcmFnZU5vcm1hbC5ub3JtYWxpemUoKTtcbiAgICBhdmVyYWdlTm9ybWFsLnRhbmdlbnRzKGYxLnQsIGYyLnQpOyAvLyByZXR1cm4gZXE7XG4gIH1cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGFsbCBjb250YWN0cyBiZXR3ZWVuIGEgbGlzdCBvZiBib2R5IHBhaXJzXG4gICAqIEBwYXJhbSBwMSBBcnJheSBvZiBib2R5IGluZGljZXNcbiAgICogQHBhcmFtIHAyIEFycmF5IG9mIGJvZHkgaW5kaWNlc1xuICAgKiBAcGFyYW0gcmVzdWx0IEFycmF5IHRvIHN0b3JlIGdlbmVyYXRlZCBjb250YWN0c1xuICAgKiBAcGFyYW0gb2xkY29udGFjdHMgT3B0aW9uYWwuIEFycmF5IG9mIHJldXNhYmxlIGNvbnRhY3Qgb2JqZWN0c1xuICAgKi9cblxuXG4gIGdldENvbnRhY3RzKHAxLCBwMiwgd29ybGQsIHJlc3VsdCwgb2xkY29udGFjdHMsIGZyaWN0aW9uUmVzdWx0LCBmcmljdGlvblBvb2wpIHtcbiAgICAvLyBTYXZlIG9sZCBjb250YWN0IG9iamVjdHNcbiAgICB0aGlzLmNvbnRhY3RQb2ludFBvb2wgPSBvbGRjb250YWN0cztcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gZnJpY3Rpb25Qb29sO1xuICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBmcmljdGlvblJlc3VsdDtcbiAgICBjb25zdCBxaSA9IHRtcFF1YXQxO1xuICAgIGNvbnN0IHFqID0gdG1wUXVhdDI7XG4gICAgY29uc3QgeGkgPSB0bXBWZWMxO1xuICAgIGNvbnN0IHhqID0gdG1wVmVjMjtcblxuICAgIGZvciAobGV0IGsgPSAwLCBOID0gcDEubGVuZ3RoOyBrICE9PSBOOyBrKyspIHtcbiAgICAgIC8vIEdldCBjdXJyZW50IGNvbGxpc2lvbiBib2RpZXNcbiAgICAgIGNvbnN0IGJpID0gcDFba107XG4gICAgICBjb25zdCBiaiA9IHAyW2tdOyAvLyBHZXQgY29udGFjdCBtYXRlcmlhbFxuXG4gICAgICBsZXQgYm9keUNvbnRhY3RNYXRlcmlhbCA9IG51bGw7XG5cbiAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkge1xuICAgICAgICBib2R5Q29udGFjdE1hdGVyaWFsID0gd29ybGQuZ2V0Q29udGFjdE1hdGVyaWFsKGJpLm1hdGVyaWFsLCBiai5tYXRlcmlhbCkgfHwgbnVsbDtcbiAgICAgIH1cblxuICAgICAgY29uc3QganVzdFRlc3QgPSBiaS50eXBlICYgQm9keS5LSU5FTUFUSUMgJiYgYmoudHlwZSAmIEJvZHkuU1RBVElDIHx8IGJpLnR5cGUgJiBCb2R5LlNUQVRJQyAmJiBiai50eXBlICYgQm9keS5LSU5FTUFUSUMgfHwgYmkudHlwZSAmIEJvZHkuS0lORU1BVElDICYmIGJqLnR5cGUgJiBCb2R5LktJTkVNQVRJQztcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaS5zaGFwZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYmkucXVhdGVybmlvbi5tdWx0KGJpLnNoYXBlT3JpZW50YXRpb25zW2ldLCBxaSk7XG4gICAgICAgIGJpLnF1YXRlcm5pb24udm11bHQoYmkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7XG4gICAgICAgIHhpLnZhZGQoYmkucG9zaXRpb24sIHhpKTtcbiAgICAgICAgY29uc3Qgc2kgPSBiaS5zaGFwZXNbaV07XG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBiai5zaGFwZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAvLyBDb21wdXRlIHdvcmxkIHRyYW5zZm9ybSBvZiBzaGFwZXNcbiAgICAgICAgICBiai5xdWF0ZXJuaW9uLm11bHQoYmouc2hhcGVPcmllbnRhdGlvbnNbal0sIHFqKTtcbiAgICAgICAgICBiai5xdWF0ZXJuaW9uLnZtdWx0KGJqLnNoYXBlT2Zmc2V0c1tqXSwgeGopO1xuICAgICAgICAgIHhqLnZhZGQoYmoucG9zaXRpb24sIHhqKTtcbiAgICAgICAgICBjb25zdCBzaiA9IGJqLnNoYXBlc1tqXTtcblxuICAgICAgICAgIGlmICghKHNpLmNvbGxpc2lvbkZpbHRlck1hc2sgJiBzai5jb2xsaXNpb25GaWx0ZXJHcm91cCAmJiBzai5jb2xsaXNpb25GaWx0ZXJNYXNrICYgc2kuY29sbGlzaW9uRmlsdGVyR3JvdXApKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9IC8vIEdldCBjb2xsaXNpb24gbWF0ZXJpYWxcblxuXG4gICAgICAgICAgbGV0IHNoYXBlQ29udGFjdE1hdGVyaWFsID0gbnVsbDtcblxuICAgICAgICAgIGlmIChzaS5tYXRlcmlhbCAmJiBzai5tYXRlcmlhbCkge1xuICAgICAgICAgICAgc2hhcGVDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5nZXRDb250YWN0TWF0ZXJpYWwoc2kubWF0ZXJpYWwsIHNqLm1hdGVyaWFsKSB8fCBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbCA9IHNoYXBlQ29udGFjdE1hdGVyaWFsIHx8IGJvZHlDb250YWN0TWF0ZXJpYWwgfHwgd29ybGQuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDsgLy8gR2V0IGNvbnRhY3RzXG5cbiAgICAgICAgICBjb25zdCByZXNvbHZlckluZGV4ID0gc2kudHlwZSB8IHNqLnR5cGU7XG4gICAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzW3Jlc29sdmVySW5kZXhdO1xuXG4gICAgICAgICAgaWYgKHJlc29sdmVyKSB7XG4gICAgICAgICAgICBsZXQgcmV0dmFsID0gZmFsc2U7IC8vIFRPIERPOiBpbnZlc3RpZ2F0ZSB3aHkgc3BoZXJlUGFydGljbGUgYW5kIGNvbnZleFBhcnRpY2xlXG4gICAgICAgICAgICAvLyByZXNvbHZlcnMgZXhwZWN0IHNpIGFuZCBzaiBzaGFwZXMgdG8gYmUgaW4gcmV2ZXJzZSBvcmRlclxuICAgICAgICAgICAgLy8gKGkuZS4gbGFyZ2VyIGludGVnZXIgdmFsdWUgdHlwZSBmaXJzdCBpbnN0ZWFkIG9mIHNtYWxsZXIgZmlyc3QpXG5cbiAgICAgICAgICAgIGlmIChzaS50eXBlIDwgc2oudHlwZSkge1xuICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgc2ksIHNqLCBqdXN0VGVzdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZXR2YWwgJiYganVzdFRlc3QpIHtcbiAgICAgICAgICAgICAgLy8gUmVnaXN0ZXIgb3ZlcmxhcFxuICAgICAgICAgICAgICB3b3JsZC5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7XG4gICAgICAgICAgICAgIHdvcmxkLmJvZHlPdmVybGFwS2VlcGVyLnNldChiaS5pZCwgYmouaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNwaGVyZVNwaGVyZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgcmV0dXJuIHhpLmRpc3RhbmNlU3F1YXJlZCh4aikgPCAoc2kucmFkaXVzICsgc2oucmFkaXVzKSAqKiAyO1xuICAgIH0gLy8gV2Ugd2lsbCBoYXZlIG9ubHkgb25lIGNvbnRhY3QgaW4gdGhpcyBjYXNlXG5cblxuICAgIGNvbnN0IGNvbnRhY3RFcSA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7IC8vIENvbnRhY3Qgbm9ybWFsXG5cbiAgICB4ai52c3ViKHhpLCBjb250YWN0RXEubmkpO1xuICAgIGNvbnRhY3RFcS5uaS5ub3JtYWxpemUoKTsgLy8gQ29udGFjdCBwb2ludCBsb2NhdGlvbnNcblxuICAgIGNvbnRhY3RFcS5yaS5jb3B5KGNvbnRhY3RFcS5uaSk7XG4gICAgY29udGFjdEVxLnJqLmNvcHkoY29udGFjdEVxLm5pKTtcbiAgICBjb250YWN0RXEucmkuc2NhbGUoc2kucmFkaXVzLCBjb250YWN0RXEucmkpO1xuICAgIGNvbnRhY3RFcS5yai5zY2FsZSgtc2oucmFkaXVzLCBjb250YWN0RXEucmopO1xuICAgIGNvbnRhY3RFcS5yaS52YWRkKHhpLCBjb250YWN0RXEucmkpO1xuICAgIGNvbnRhY3RFcS5yaS52c3ViKGJpLnBvc2l0aW9uLCBjb250YWN0RXEucmkpO1xuICAgIGNvbnRhY3RFcS5yai52YWRkKHhqLCBjb250YWN0RXEucmopO1xuICAgIGNvbnRhY3RFcS5yai52c3ViKGJqLnBvc2l0aW9uLCBjb250YWN0RXEucmopO1xuICAgIHRoaXMucmVzdWx0LnB1c2goY29udGFjdEVxKTtcbiAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoY29udGFjdEVxLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgfVxuXG4gIHNwaGVyZVBsYW5lKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgLy8gV2Ugd2lsbCBoYXZlIG9uZSBjb250YWN0IGluIHRoaXMgY2FzZVxuICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOyAvLyBDb250YWN0IG5vcm1hbFxuXG4gICAgci5uaS5zZXQoMCwgMCwgMSk7XG4gICAgcWoudm11bHQoci5uaSwgci5uaSk7XG4gICAgci5uaS5uZWdhdGUoci5uaSk7IC8vIGJvZHkgaSBpcyB0aGUgc3BoZXJlLCBmbGlwIG5vcm1hbFxuXG4gICAgci5uaS5ub3JtYWxpemUoKTsgLy8gTmVlZGVkP1xuICAgIC8vIFZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gY29udGFjdCBwb2ludFxuXG4gICAgci5uaS5zY2FsZShzaS5yYWRpdXMsIHIucmkpOyAvLyBQcm9qZWN0IGRvd24gc3BoZXJlIG9uIHBsYW5lXG5cbiAgICB4aS52c3ViKHhqLCBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUpO1xuICAgIHIubmkuc2NhbGUoci5uaS5kb3QocG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlKSwgcGxhbmVfdG9fc3BoZXJlX29ydGhvKTtcbiAgICBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUudnN1YihwbGFuZV90b19zcGhlcmVfb3J0aG8sIHIucmopOyAvLyBUaGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byBwbGFuZVxuXG4gICAgaWYgKC1wb2ludF9vbl9wbGFuZV90b19zcGhlcmUuZG90KHIubmkpIDw9IHNpLnJhZGl1cykge1xuICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5XG5cblxuICAgICAgY29uc3QgcmkgPSByLnJpO1xuICAgICAgY29uc3QgcmogPSByLnJqO1xuICAgICAgcmkudmFkZCh4aSwgcmkpO1xuICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpO1xuICAgICAgcmoudmFkZCh4aiwgcmopO1xuICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopO1xuICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBib3hCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzai5tYXRlcmlhbDtcbiAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTtcbiAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpO1xuICB9XG5cbiAgc3BoZXJlQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7IC8vIHdlIHJlZmVyIHRvIHRoZSBib3ggYXMgYm9keSBqXG5cbiAgICBjb25zdCBzaWRlcyA9IHNwaGVyZUJveF9zaWRlcztcbiAgICB4aS52c3ViKHhqLCBib3hfdG9fc3BoZXJlKTtcbiAgICBzai5nZXRTaWRlTm9ybWFscyhzaWRlcywgcWopO1xuICAgIGNvbnN0IFIgPSBzaS5yYWRpdXM7XG5cbiAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gU3RvcmUgdGhlIHJlc3VsdGluZyBzaWRlIHBlbmV0cmF0aW9uIGluZm9cblxuICAgIGNvbnN0IHNpZGVfbnMgPSBzcGhlcmVCb3hfc2lkZV9ucztcbiAgICBjb25zdCBzaWRlX25zMSA9IHNwaGVyZUJveF9zaWRlX25zMTtcbiAgICBjb25zdCBzaWRlX25zMiA9IHNwaGVyZUJveF9zaWRlX25zMjtcbiAgICBsZXQgc2lkZV9oID0gbnVsbDtcbiAgICBsZXQgc2lkZV9wZW5ldHJhdGlvbnMgPSAwO1xuICAgIGxldCBzaWRlX2RvdDEgPSAwO1xuICAgIGxldCBzaWRlX2RvdDIgPSAwO1xuICAgIGxldCBzaWRlX2Rpc3RhbmNlID0gbnVsbDtcblxuICAgIGZvciAobGV0IGlkeCA9IDAsIG5zaWRlcyA9IHNpZGVzLmxlbmd0aDsgaWR4ICE9PSBuc2lkZXMgJiYgZm91bmQgPT09IGZhbHNlOyBpZHgrKykge1xuICAgICAgLy8gR2V0IHRoZSBwbGFuZSBzaWRlIG5vcm1hbCAobnMpXG4gICAgICBjb25zdCBucyA9IHNwaGVyZUJveF9ucztcbiAgICAgIG5zLmNvcHkoc2lkZXNbaWR4XSk7XG4gICAgICBjb25zdCBoID0gbnMubGVuZ3RoKCk7XG4gICAgICBucy5ub3JtYWxpemUoKTsgLy8gVGhlIG5vcm1hbC9kaXN0YW5jZSBkb3QgcHJvZHVjdCB0ZWxscyB3aGljaCBzaWRlIG9mIHRoZSBwbGFuZSB3ZSBhcmVcblxuICAgICAgY29uc3QgZG90ID0gYm94X3RvX3NwaGVyZS5kb3QobnMpO1xuXG4gICAgICBpZiAoZG90IDwgaCArIFIgJiYgZG90ID4gMCkge1xuICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgdGhlIG90aGVyIHR3byBkaW1lbnNpb25zXG4gICAgICAgIGNvbnN0IG5zMSA9IHNwaGVyZUJveF9uczE7XG4gICAgICAgIGNvbnN0IG5zMiA9IHNwaGVyZUJveF9uczI7XG4gICAgICAgIG5zMS5jb3B5KHNpZGVzWyhpZHggKyAxKSAlIDNdKTtcbiAgICAgICAgbnMyLmNvcHkoc2lkZXNbKGlkeCArIDIpICUgM10pO1xuICAgICAgICBjb25zdCBoMSA9IG5zMS5sZW5ndGgoKTtcbiAgICAgICAgY29uc3QgaDIgPSBuczIubGVuZ3RoKCk7XG4gICAgICAgIG5zMS5ub3JtYWxpemUoKTtcbiAgICAgICAgbnMyLm5vcm1hbGl6ZSgpO1xuICAgICAgICBjb25zdCBkb3QxID0gYm94X3RvX3NwaGVyZS5kb3QobnMxKTtcbiAgICAgICAgY29uc3QgZG90MiA9IGJveF90b19zcGhlcmUuZG90KG5zMik7XG5cbiAgICAgICAgaWYgKGRvdDEgPCBoMSAmJiBkb3QxID4gLWgxICYmIGRvdDIgPCBoMiAmJiBkb3QyID4gLWgyKSB7XG4gICAgICAgICAgY29uc3QgZGlzdCA9IE1hdGguYWJzKGRvdCAtIGggLSBSKTtcblxuICAgICAgICAgIGlmIChzaWRlX2Rpc3RhbmNlID09PSBudWxsIHx8IGRpc3QgPCBzaWRlX2Rpc3RhbmNlKSB7XG4gICAgICAgICAgICBzaWRlX2Rpc3RhbmNlID0gZGlzdDtcbiAgICAgICAgICAgIHNpZGVfZG90MSA9IGRvdDE7XG4gICAgICAgICAgICBzaWRlX2RvdDIgPSBkb3QyO1xuICAgICAgICAgICAgc2lkZV9oID0gaDtcbiAgICAgICAgICAgIHNpZGVfbnMuY29weShucyk7XG4gICAgICAgICAgICBzaWRlX25zMS5jb3B5KG5zMSk7XG4gICAgICAgICAgICBzaWRlX25zMi5jb3B5KG5zMik7XG4gICAgICAgICAgICBzaWRlX3BlbmV0cmF0aW9ucysrO1xuXG4gICAgICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNpZGVfcGVuZXRyYXRpb25zKSB7XG4gICAgICBmb3VuZCA9IHRydWU7XG4gICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgIHNpZGVfbnMuc2NhbGUoLVIsIHIucmkpOyAvLyBTcGhlcmUgclxuXG4gICAgICByLm5pLmNvcHkoc2lkZV9ucyk7XG4gICAgICByLm5pLm5lZ2F0ZShyLm5pKTsgLy8gTm9ybWFsIHNob3VsZCBiZSBvdXQgb2Ygc3BoZXJlXG5cbiAgICAgIHNpZGVfbnMuc2NhbGUoc2lkZV9oLCBzaWRlX25zKTtcbiAgICAgIHNpZGVfbnMxLnNjYWxlKHNpZGVfZG90MSwgc2lkZV9uczEpO1xuICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMxLCBzaWRlX25zKTtcbiAgICAgIHNpZGVfbnMyLnNjYWxlKHNpZGVfZG90Miwgc2lkZV9uczIpO1xuICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMyLCByLnJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXNcblxuICAgICAgci5yaS52YWRkKHhpLCByLnJpKTtcbiAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7XG4gICAgICByLnJqLnZhZGQoeGosIHIucmopO1xuICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTtcbiAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgfSAvLyBDaGVjayBjb3JuZXJzXG5cblxuICAgIGxldCByaiA9IHYzcG9vbC5nZXQoKTtcbiAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXI7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gMiAmJiAhZm91bmQ7IGorKykge1xuICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IDIgJiYgIWZvdW5kOyBrKyspIHtcbiAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgIT09IDIgJiYgIWZvdW5kOyBsKyspIHtcbiAgICAgICAgICByai5zZXQoMCwgMCwgMCk7XG5cbiAgICAgICAgICBpZiAoaikge1xuICAgICAgICAgICAgcmoudmFkZChzaWRlc1swXSwgcmopO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByai52c3ViKHNpZGVzWzBdLCByaik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGspIHtcbiAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMV0sIHJqKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmoudnN1YihzaWRlc1sxXSwgcmopO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICByai52YWRkKHNpZGVzWzJdLCByaik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMl0sIHJqKTtcbiAgICAgICAgICB9IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lclxuXG5cbiAgICAgICAgICB4ai52YWRkKHJqLCBzcGhlcmVfdG9fY29ybmVyKTtcbiAgICAgICAgICBzcGhlcmVfdG9fY29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpO1xuXG4gICAgICAgICAgaWYgKHNwaGVyZV90b19jb3JuZXIubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHtcbiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7XG4gICAgICAgICAgICByLnJpLmNvcHkoc3BoZXJlX3RvX2Nvcm5lcik7XG4gICAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgci5uaS5jb3B5KHIucmkpO1xuICAgICAgICAgICAgci5yaS5zY2FsZShSLCByLnJpKTtcbiAgICAgICAgICAgIHIucmouY29weShyaik7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzXG5cbiAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7XG4gICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTtcbiAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHYzcG9vbC5yZWxlYXNlKHJqKTtcbiAgICByaiA9IG51bGw7IC8vIENoZWNrIGVkZ2VzXG5cbiAgICBjb25zdCBlZGdlVGFuZ2VudCA9IHYzcG9vbC5nZXQoKTtcbiAgICBjb25zdCBlZGdlQ2VudGVyID0gdjNwb29sLmdldCgpO1xuICAgIGNvbnN0IHIgPSB2M3Bvb2wuZ2V0KCk7IC8vIHIgPSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyXG5cbiAgICBjb25zdCBvcnRob2dvbmFsID0gdjNwb29sLmdldCgpO1xuICAgIGNvbnN0IGRpc3QgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgY29uc3QgTnNpZGVzID0gc2lkZXMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaiA9IDA7IGogIT09IE5zaWRlcyAmJiAhZm91bmQ7IGorKykge1xuICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5zaWRlcyAmJiAhZm91bmQ7IGsrKykge1xuICAgICAgICBpZiAoaiAlIDMgIT09IGsgJSAzKSB7XG4gICAgICAgICAgLy8gR2V0IGVkZ2UgdGFuZ2VudFxuICAgICAgICAgIHNpZGVzW2tdLmNyb3NzKHNpZGVzW2pdLCBlZGdlVGFuZ2VudCk7XG4gICAgICAgICAgZWRnZVRhbmdlbnQubm9ybWFsaXplKCk7XG4gICAgICAgICAgc2lkZXNbal0udmFkZChzaWRlc1trXSwgZWRnZUNlbnRlcik7XG4gICAgICAgICAgci5jb3B5KHhpKTtcbiAgICAgICAgICByLnZzdWIoZWRnZUNlbnRlciwgcik7XG4gICAgICAgICAgci52c3ViKHhqLCByKTtcbiAgICAgICAgICBjb25zdCBvcnRob25vcm0gPSByLmRvdChlZGdlVGFuZ2VudCk7IC8vIGRpc3RhbmNlIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb25cblxuICAgICAgICAgIGVkZ2VUYW5nZW50LnNjYWxlKG9ydGhvbm9ybSwgb3J0aG9nb25hbCk7IC8vIFZlY3RvciBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIgaW4gdGhlIHRhbmdlbnQgZGlyZWN0aW9uXG4gICAgICAgICAgLy8gRmluZCB0aGUgdGhpcmQgc2lkZSBvcnRob2dvbmFsIHRvIHRoaXMgb25lXG5cbiAgICAgICAgICBsZXQgbCA9IDA7XG5cbiAgICAgICAgICB3aGlsZSAobCA9PT0gaiAlIDMgfHwgbCA9PT0gayAlIDMpIHtcbiAgICAgICAgICAgIGwrKztcbiAgICAgICAgICB9IC8vIHZlYyBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBwcm9qZWN0ZWQgdG8gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gdGhlIGVkZ2UgdGFuZ2VudFxuXG5cbiAgICAgICAgICBkaXN0LmNvcHkoeGkpO1xuICAgICAgICAgIGRpc3QudnN1YihvcnRob2dvbmFsLCBkaXN0KTtcbiAgICAgICAgICBkaXN0LnZzdWIoZWRnZUNlbnRlciwgZGlzdCk7XG4gICAgICAgICAgZGlzdC52c3ViKHhqLCBkaXN0KTsgLy8gRGlzdGFuY2VzIGluIHRhbmdlbnQgZGlyZWN0aW9uIGFuZCBkaXN0YW5jZSBpbiB0aGUgcGxhbmUgb3J0aG9nb25hbCB0byBpdFxuXG4gICAgICAgICAgY29uc3QgdGRpc3QgPSBNYXRoLmFicyhvcnRob25vcm0pO1xuICAgICAgICAgIGNvbnN0IG5kaXN0ID0gZGlzdC5sZW5ndGgoKTtcblxuICAgICAgICAgIGlmICh0ZGlzdCA8IHNpZGVzW2xdLmxlbmd0aCgpICYmIG5kaXN0IDwgUikge1xuICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCByZXMgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opO1xuICAgICAgICAgICAgZWRnZUNlbnRlci52YWRkKG9ydGhvZ29uYWwsIHJlcy5yaik7IC8vIGJveCByalxuXG4gICAgICAgICAgICByZXMucmouY29weShyZXMucmopO1xuICAgICAgICAgICAgZGlzdC5uZWdhdGUocmVzLm5pKTtcbiAgICAgICAgICAgIHJlcy5uaS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIHJlcy5yaS5jb3B5KHJlcy5yaik7XG4gICAgICAgICAgICByZXMucmkudmFkZCh4aiwgcmVzLnJpKTtcbiAgICAgICAgICAgIHJlcy5yaS52c3ViKHhpLCByZXMucmkpO1xuICAgICAgICAgICAgcmVzLnJpLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgcmVzLnJpLnNjYWxlKFIsIHJlcy5yaSk7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzXG5cbiAgICAgICAgICAgIHJlcy5yaS52YWRkKHhpLCByZXMucmkpO1xuICAgICAgICAgICAgcmVzLnJpLnZzdWIoYmkucG9zaXRpb24sIHJlcy5yaSk7XG4gICAgICAgICAgICByZXMucmoudmFkZCh4aiwgcmVzLnJqKTtcbiAgICAgICAgICAgIHJlcy5yai52c3ViKGJqLnBvc2l0aW9uLCByZXMucmopO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyZXMpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHJlcywgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdjNwb29sLnJlbGVhc2UoZWRnZVRhbmdlbnQsIGVkZ2VDZW50ZXIsIHIsIG9ydGhvZ29uYWwsIGRpc3QpO1xuICB9XG5cbiAgcGxhbmVCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzai5tYXRlcmlhbDtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uaWQgPSBzai5pZDtcbiAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleChzaSwgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTtcbiAgfVxuXG4gIGNvbnZleENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCwgZmFjZUxpc3RBLCBmYWNlTGlzdEIpIHtcbiAgICBjb25zdCBzZXBBeGlzID0gY29udmV4Q29udmV4X3NlcEF4aXM7XG5cbiAgICBpZiAoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHNpLmZpbmRTZXBhcmF0aW5nQXhpcyhzaiwgeGksIHFpLCB4aiwgcWosIHNlcEF4aXMsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSkge1xuICAgICAgY29uc3QgcmVzID0gW107XG4gICAgICBjb25zdCBxID0gY29udmV4Q29udmV4X3E7XG4gICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGksIHFpLCBzaiwgeGosIHFqLCBzZXBBeGlzLCAtMTAwLCAxMDAsIHJlcyk7XG4gICAgICBsZXQgbnVtQ29udGFjdHMgPSAwO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gcmVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7XG4gICAgICAgIGNvbnN0IHJpID0gci5yaTtcbiAgICAgICAgY29uc3QgcmogPSByLnJqO1xuICAgICAgICBzZXBBeGlzLm5lZ2F0ZShyLm5pKTtcbiAgICAgICAgcmVzW2pdLm5vcm1hbC5uZWdhdGUocSk7XG4gICAgICAgIHEuc2NhbGUocmVzW2pdLmRlcHRoLCBxKTtcbiAgICAgICAgcmVzW2pdLnBvaW50LnZhZGQocSwgcmkpO1xuICAgICAgICByai5jb3B5KHJlc1tqXS5wb2ludCk7IC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmVcblxuICAgICAgICByaS52c3ViKHhpLCByaSk7XG4gICAgICAgIHJqLnZzdWIoeGosIHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXNcblxuICAgICAgICByaS52YWRkKHhpLCByaSk7XG4gICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTtcbiAgICAgICAgcmoudmFkZCh4aiwgcmopO1xuICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7XG4gICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgIG51bUNvbnRhY3RzKys7XG5cbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uKSB7XG4gICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uICYmIG51bUNvbnRhY3RzKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3BoZXJlQ29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7XG4gICAgeGkudnN1Yih4aiwgY29udmV4X3RvX3NwaGVyZSk7XG4gICAgY29uc3Qgbm9ybWFscyA9IHNqLmZhY2VOb3JtYWxzO1xuICAgIGNvbnN0IGZhY2VzID0gc2ouZmFjZXM7XG4gICAgY29uc3QgdmVydHMgPSBzai52ZXJ0aWNlcztcbiAgICBjb25zdCBSID0gc2kucmFkaXVzO1xuICAgIC8vICAgICByZXR1cm47XG4gICAgLy8gfVxuXG4gICAgbGV0IGZvdW5kID0gZmFsc2U7IC8vIENoZWNrIGNvcm5lcnNcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB2ZXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBXb3JsZCBwb3NpdGlvbiBvZiBjb3JuZXJcblxuICAgICAgY29uc3Qgd29ybGRDb3JuZXIgPSBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXI7XG4gICAgICBxai52bXVsdCh2LCB3b3JsZENvcm5lcik7XG4gICAgICB4ai52YWRkKHdvcmxkQ29ybmVyLCB3b3JsZENvcm5lcik7XG4gICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyO1xuICAgICAgd29ybGRDb3JuZXIudnN1Yih4aSwgc3BoZXJlX3RvX2Nvcm5lcik7XG5cbiAgICAgIGlmIChzcGhlcmVfdG9fY29ybmVyLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7XG4gICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpO1xuICAgICAgICByLnJpLm5vcm1hbGl6ZSgpO1xuICAgICAgICByLm5pLmNvcHkoci5yaSk7XG4gICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7XG4gICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGosIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuXG5cbiAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTtcbiAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LlxuXG4gICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7XG4gICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7XG4gICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gLy8gQ2hlY2sgc2lkZSAocGxhbmUpIGludGVyc2VjdGlvbnNcblxuXG4gICAgZm9yIChsZXQgaSA9IDAsIG5mYWNlcyA9IGZhY2VzLmxlbmd0aDsgaSAhPT0gbmZhY2VzICYmIGZvdW5kID09PSBmYWxzZTsgaSsrKSB7XG4gICAgICBjb25zdCBub3JtYWwgPSBub3JtYWxzW2ldO1xuICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ldOyAvLyBHZXQgd29ybGQtdHJhbnNmb3JtZWQgbm9ybWFsIG9mIHRoZSBmYWNlXG5cbiAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gc3BoZXJlQ29udmV4X3dvcmxkTm9ybWFsO1xuICAgICAgcWoudm11bHQobm9ybWFsLCB3b3JsZE5vcm1hbCk7IC8vIEdldCBhIHdvcmxkIHZlcnRleCBmcm9tIHRoZSBmYWNlXG5cbiAgICAgIGNvbnN0IHdvcmxkUG9pbnQgPSBzcGhlcmVDb252ZXhfd29ybGRQb2ludDtcbiAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2VbMF1dLCB3b3JsZFBvaW50KTtcbiAgICAgIHdvcmxkUG9pbnQudmFkZCh4aiwgd29ybGRQb2ludCk7IC8vIEdldCBhIHBvaW50IG9uIHRoZSBzcGhlcmUsIGNsb3Nlc3QgdG8gdGhlIGZhY2Ugbm9ybWFsXG5cbiAgICAgIGNvbnN0IHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSA9IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmU7XG4gICAgICB3b3JsZE5vcm1hbC5zY2FsZSgtUiwgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lKTtcbiAgICAgIHhpLnZhZGQod29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lLCB3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUpOyAvLyBWZWN0b3IgZnJvbSBhIGZhY2UgcG9pbnQgdG8gdGhlIGNsb3Nlc3QgcG9pbnQgb24gdGhlIHNwaGVyZVxuXG4gICAgICBjb25zdCBwZW5ldHJhdGlvblZlYyA9IHNwaGVyZUNvbnZleF9wZW5ldHJhdGlvblZlYztcbiAgICAgIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZS52c3ViKHdvcmxkUG9pbnQsIHBlbmV0cmF0aW9uVmVjKTsgLy8gVGhlIHBlbmV0cmF0aW9uLiBOZWdhdGl2ZSB2YWx1ZSBtZWFucyBvdmVybGFwLlxuXG4gICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uVmVjLmRvdCh3b3JsZE5vcm1hbCk7XG4gICAgICBjb25zdCB3b3JsZFBvaW50VG9TcGhlcmUgPSBzcGhlcmVDb252ZXhfc3BoZXJlVG9Xb3JsZFBvaW50O1xuICAgICAgeGkudnN1Yih3b3JsZFBvaW50LCB3b3JsZFBvaW50VG9TcGhlcmUpO1xuXG4gICAgICBpZiAocGVuZXRyYXRpb24gPCAwICYmIHdvcmxkUG9pbnRUb1NwaGVyZS5kb3Qod29ybGROb3JtYWwpID4gMCkge1xuICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgaWYgdGhlIHNwaGVyZSBpcyBpbnNpZGUgdGhlIGZhY2UgcG9seWdvblxuICAgICAgICBjb25zdCBmYWNlVmVydHMgPSBbXTsgLy8gRmFjZSB2ZXJ0aWNlcywgaW4gd29ybGQgY29vcmRzXG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDAsIE52ZXJ0cyA9IGZhY2UubGVuZ3RoOyBqICE9PSBOdmVydHM7IGorKykge1xuICAgICAgICAgIGNvbnN0IHdvcmxkVmVydGV4ID0gdjNwb29sLmdldCgpO1xuICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2Vbal1dLCB3b3JsZFZlcnRleCk7XG4gICAgICAgICAgeGoudmFkZCh3b3JsZFZlcnRleCwgd29ybGRWZXJ0ZXgpO1xuICAgICAgICAgIGZhY2VWZXJ0cy5wdXNoKHdvcmxkVmVydGV4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb2ludEluUG9seWdvbihmYWNlVmVydHMsIHdvcmxkTm9ybWFsLCB4aSkpIHtcbiAgICAgICAgICAvLyBJcyB0aGUgc3BoZXJlIGNlbnRlciBpbiB0aGUgZmFjZSBwb2x5Z29uP1xuICAgICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opO1xuICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCByLnJpKTsgLy8gQ29udGFjdCBvZmZzZXQsIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0XG5cbiAgICAgICAgICB3b3JsZE5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBwb2ludGluZyBvdXQgb2Ygc3BoZXJlXG5cbiAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblZlYzIgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLXBlbmV0cmF0aW9uLCBwZW5ldHJhdGlvblZlYzIpO1xuICAgICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOyAvL3hpLnZzdWIoeGopLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCkudmFkZChwZW5ldHJhdGlvblZlYzIgLCByLnJqKTtcblxuICAgICAgICAgIHhpLnZzdWIoeGosIHIucmopO1xuICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblNwaGVyZVBvaW50LCByLnJqKTtcbiAgICAgICAgICByLnJqLnZhZGQocGVuZXRyYXRpb25WZWMyLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LlxuXG4gICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTtcbiAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuXG5cbiAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpO1xuICAgICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7XG4gICAgICAgICAgdjNwb29sLnJlbGVhc2UocGVuZXRyYXRpb25WZWMyKTtcbiAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblNwaGVyZVBvaW50KTtcbiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsgLy8gUmVsZWFzZSB3b3JsZCB2ZXJ0aWNlc1xuXG4gICAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5mYWNldmVydHMgPSBmYWNlVmVydHMubGVuZ3RoOyBqICE9PSBOZmFjZXZlcnRzOyBqKyspIHtcbiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuOyAvLyBXZSBvbmx5IGV4cGVjdCAqb25lKiBmYWNlIGNvbnRhY3RcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBFZGdlP1xuICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBmYWNlLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAvLyBHZXQgdHdvIHdvcmxkIHRyYW5zZm9ybWVkIHZlcnRpY2VzXG4gICAgICAgICAgICBjb25zdCB2MSA9IHYzcG9vbC5nZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IHYyID0gdjNwb29sLmdldCgpO1xuICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDEpICUgZmFjZS5sZW5ndGhdXSwgdjEpO1xuICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDIpICUgZmFjZS5sZW5ndGhdXSwgdjIpO1xuICAgICAgICAgICAgeGoudmFkZCh2MSwgdjEpO1xuICAgICAgICAgICAgeGoudmFkZCh2MiwgdjIpOyAvLyBDb25zdHJ1Y3QgZWRnZSB2ZWN0b3JcblxuICAgICAgICAgICAgY29uc3QgZWRnZSA9IHNwaGVyZUNvbnZleF9lZGdlO1xuICAgICAgICAgICAgdjIudnN1Yih2MSwgZWRnZSk7IC8vIENvbnN0cnVjdCB0aGUgc2FtZSB2ZWN0b3IsIGJ1dCBub3JtYWxpemVkXG5cbiAgICAgICAgICAgIGNvbnN0IGVkZ2VVbml0ID0gc3BoZXJlQ29udmV4X2VkZ2VVbml0O1xuICAgICAgICAgICAgZWRnZS51bml0KGVkZ2VVbml0KTsgLy8gcCBpcyB4aSBwcm9qZWN0ZWQgb250byB0aGUgZWRnZVxuXG4gICAgICAgICAgICBjb25zdCBwID0gdjNwb29sLmdldCgpO1xuICAgICAgICAgICAgY29uc3QgdjFfdG9feGkgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgICAgICAgICB4aS52c3ViKHYxLCB2MV90b194aSk7XG4gICAgICAgICAgICBjb25zdCBkb3QgPSB2MV90b194aS5kb3QoZWRnZVVuaXQpO1xuICAgICAgICAgICAgZWRnZVVuaXQuc2NhbGUoZG90LCBwKTtcbiAgICAgICAgICAgIHAudmFkZCh2MSwgcCk7IC8vIENvbXB1dGUgYSB2ZWN0b3IgZnJvbSBwIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZVxuXG4gICAgICAgICAgICBjb25zdCB4aV90b19wID0gdjNwb29sLmdldCgpO1xuICAgICAgICAgICAgcC52c3ViKHhpLCB4aV90b19wKTsgLy8gQ29sbGlzaW9uIGlmIHRoZSBlZGdlLXNwaGVyZSBkaXN0YW5jZSBpcyBsZXNzIHRoYW4gdGhlIHJhZGl1c1xuICAgICAgICAgICAgLy8gQU5EIGlmIHAgaXMgaW4gYmV0d2VlbiB2MSBhbmQgdjJcblxuICAgICAgICAgICAgaWYgKGRvdCA+IDAgJiYgZG90ICogZG90IDwgZWRnZS5sZW5ndGhTcXVhcmVkKCkgJiYgeGlfdG9fcC5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikge1xuICAgICAgICAgICAgICAvLyBDb2xsaXNpb24gaWYgdGhlIGVkZ2Utc3BoZXJlIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgcmFkaXVzXG4gICAgICAgICAgICAgIC8vIEVkZ2UgY29udGFjdCFcbiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgICAgICAgICAgcC52c3ViKHhqLCByLnJqKTtcbiAgICAgICAgICAgICAgcC52c3ViKHhpLCByLm5pKTtcbiAgICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgICAgci5uaS5zY2FsZShSLCByLnJpKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LlxuXG4gICAgICAgICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7XG4gICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS5cblxuICAgICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpO1xuICAgICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXNcblxuICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykge1xuICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MSk7XG4gICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYyKTtcbiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocCk7XG4gICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHhpX3RvX3ApO1xuICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MV90b194aSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjEpO1xuICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpO1xuICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocCk7XG4gICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh4aV90b19wKTtcbiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gLy8gUmVsZWFzZSB3b3JsZCB2ZXJ0aWNlc1xuXG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5mYWNldmVydHMgPSBmYWNlVmVydHMubGVuZ3RoOyBqICE9PSBOZmFjZXZlcnRzOyBqKyspIHtcbiAgICAgICAgICB2M3Bvb2wucmVsZWFzZShmYWNlVmVydHNbal0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcGxhbmVDb252ZXgocGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHBsYW5lUG9zaXRpb24sIGNvbnZleFBvc2l0aW9uLCBwbGFuZVF1YXQsIGNvbnZleFF1YXQsIHBsYW5lQm9keSwgY29udmV4Qm9keSwgc2ksIHNqLCBqdXN0VGVzdCkge1xuICAgIC8vIFNpbXBseSByZXR1cm4gdGhlIHBvaW50cyBiZWhpbmQgdGhlIHBsYW5lLlxuICAgIGNvbnN0IHdvcmxkVmVydGV4ID0gcGxhbmVDb252ZXhfdjtcbiAgICBjb25zdCB3b3JsZE5vcm1hbCA9IHBsYW5lQ29udmV4X25vcm1hbDtcbiAgICB3b3JsZE5vcm1hbC5zZXQoMCwgMCwgMSk7XG4gICAgcGxhbmVRdWF0LnZtdWx0KHdvcmxkTm9ybWFsLCB3b3JsZE5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZSBvcmllbnRhdGlvblxuXG4gICAgbGV0IG51bUNvbnRhY3RzID0gMDtcbiAgICBjb25zdCByZWxwb3MgPSBwbGFuZUNvbnZleF9yZWxwb3M7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gY29udmV4U2hhcGUudmVydGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB3b3JsZCBjb252ZXggdmVydGV4XG4gICAgICB3b3JsZFZlcnRleC5jb3B5KGNvbnZleFNoYXBlLnZlcnRpY2VzW2ldKTtcbiAgICAgIGNvbnZleFF1YXQudm11bHQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTtcbiAgICAgIGNvbnZleFBvc2l0aW9uLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTtcbiAgICAgIHdvcmxkVmVydGV4LnZzdWIocGxhbmVQb3NpdGlvbiwgcmVscG9zKTtcbiAgICAgIGNvbnN0IGRvdCA9IHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpO1xuXG4gICAgICBpZiAoZG90IDw9IDAuMCkge1xuICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihwbGFuZUJvZHksIGNvbnZleEJvZHksIHBsYW5lU2hhcGUsIGNvbnZleFNoYXBlLCBzaSwgc2opOyAvLyBHZXQgdmVydGV4IHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZVxuXG4gICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBsYW5lQ29udmV4X3Byb2plY3RlZDtcbiAgICAgICAgd29ybGROb3JtYWwuc2NhbGUod29ybGROb3JtYWwuZG90KHJlbHBvcyksIHByb2plY3RlZCk7XG4gICAgICAgIHdvcmxkVmVydGV4LnZzdWIocHJvamVjdGVkLCBwcm9qZWN0ZWQpO1xuICAgICAgICBwcm9qZWN0ZWQudnN1YihwbGFuZVBvc2l0aW9uLCByLnJpKTsgLy8gRnJvbSBwbGFuZSB0byB2ZXJ0ZXggcHJvamVjdGVkIG9uIHBsYW5lXG5cbiAgICAgICAgci5uaS5jb3B5KHdvcmxkTm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbCBvdXQgZnJvbSBwbGFuZVxuICAgICAgICAvLyByaiBpcyBub3cganVzdCB0aGUgdmVjdG9yIGZyb20gdGhlIGNvbnZleCBjZW50ZXIgdG8gdGhlIHZlcnRleFxuXG4gICAgICAgIHdvcmxkVmVydGV4LnZzdWIoY29udmV4UG9zaXRpb24sIHIucmopOyAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5XG5cbiAgICAgICAgci5yaS52YWRkKHBsYW5lUG9zaXRpb24sIHIucmkpO1xuICAgICAgICByLnJpLnZzdWIocGxhbmVCb2R5LnBvc2l0aW9uLCByLnJpKTtcbiAgICAgICAgci5yai52YWRkKGNvbnZleFBvc2l0aW9uLCByLnJqKTtcbiAgICAgICAgci5yai52c3ViKGNvbnZleEJvZHkucG9zaXRpb24sIHIucmopO1xuICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICBudW1Db250YWN0cysrO1xuXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikge1xuICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uICYmIG51bUNvbnRhY3RzKSB7XG4gICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRnJvbUF2ZXJhZ2UobnVtQ29udGFjdHMpO1xuICAgIH1cbiAgfVxuXG4gIGJveENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsO1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlO1xuICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTtcbiAgfVxuXG4gIHNwaGVyZUhlaWdodGZpZWxkKHNwaGVyZVNoYXBlLCBoZlNoYXBlLCBzcGhlcmVQb3MsIGhmUG9zLCBzcGhlcmVRdWF0LCBoZlF1YXQsIHNwaGVyZUJvZHksIGhmQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTtcbiAgICBjb25zdCByYWRpdXMgPSBzcGhlcmVTaGFwZS5yYWRpdXM7XG4gICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7XG4gICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAyOyAvLyBHZXQgc3BoZXJlIHBvc2l0aW9uIHRvIGhlaWdodGZpZWxkIGxvY2FsIVxuXG4gICAgY29uc3QgbG9jYWxTcGhlcmVQb3MgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAxO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBzcGhlcmVQb3MsIGxvY2FsU3BoZXJlUG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0XG5cbiAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbFNwaGVyZVBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTtcbiAgICBsZXQgaU1heFggPSBNYXRoLmNlaWwoKGxvY2FsU3BoZXJlUG9zLnggKyByYWRpdXMpIC8gdykgKyAxO1xuICAgIGxldCBpTWluWSA9IE1hdGguZmxvb3IoKGxvY2FsU3BoZXJlUG9zLnkgLSByYWRpdXMpIC8gdykgLSAxO1xuICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW5cblxuICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gQ2xhbXAgaW5kZXggdG8gZWRnZXNcblxuXG4gICAgaWYgKGlNaW5YIDwgMCkge1xuICAgICAgaU1pblggPSAwO1xuICAgIH1cblxuICAgIGlmIChpTWF4WCA8IDApIHtcbiAgICAgIGlNYXhYID0gMDtcbiAgICB9XG5cbiAgICBpZiAoaU1pblkgPCAwKSB7XG4gICAgICBpTWluWSA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGlNYXhZIDwgMCkge1xuICAgICAgaU1heFkgPSAwO1xuICAgIH1cblxuICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkge1xuICAgICAgaU1pblggPSBkYXRhLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgaWYgKGlNYXhYID49IGRhdGEubGVuZ3RoKSB7XG4gICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBpZiAoaU1heFkgPj0gZGF0YVswXS5sZW5ndGgpIHtcbiAgICAgIGlNYXhZID0gZGF0YVswXS5sZW5ndGggLSAxO1xuICAgIH1cblxuICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkge1xuICAgICAgaU1pblkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgY29uc3QgbWluTWF4ID0gW107XG4gICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpO1xuICAgIGNvbnN0IG1pbiA9IG1pbk1heFswXTtcbiAgICBjb25zdCBtYXggPSBtaW5NYXhbMV07IC8vIEJhaWwgb3V0IGlmIHdlIGNhbid0IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94XG5cbiAgICBpZiAobG9jYWxTcGhlcmVQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbFNwaGVyZVBvcy56ICsgcmFkaXVzIDwgbWluKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7XG5cbiAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPCBpTWF4WDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7XG4gICAgICAgIGNvbnN0IG51bUNvbnRhY3RzQmVmb3JlID0gcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgbGV0IGludGVyc2VjdGluZyA9IGZhbHNlOyAvLyBMb3dlciB0cmlhbmdsZVxuXG4gICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgZmFsc2UpO1xuICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTtcblxuICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykge1xuICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuc3BoZXJlQ29udmV4KHNwaGVyZVNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgc3BoZXJlUG9zLCB3b3JsZFBpbGxhck9mZnNldCwgc3BoZXJlUXVhdCwgaGZRdWF0LCBzcGhlcmVCb2R5LCBoZkJvZHksIHNwaGVyZVNoYXBlLCBoZlNoYXBlLCBqdXN0VGVzdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7XG4gICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpO1xuXG4gICAgICAgIGlmIChzcGhlcmVQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNwaGVyZVNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5zcGhlcmVDb252ZXgoc3BoZXJlU2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBzcGhlcmVQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBzcGhlcmVRdWF0LCBoZlF1YXQsIHNwaGVyZUJvZHksIGhmQm9keSwgc3BoZXJlU2hhcGUsIGhmU2hhcGUsIGp1c3RUZXN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG51bUNvbnRhY3RzID0gcmVzdWx0Lmxlbmd0aCAtIG51bUNvbnRhY3RzQmVmb3JlO1xuXG4gICAgICAgIGlmIChudW1Db250YWN0cyA+IDIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLypcbiAgICAgICAgICAvLyBTa2lwIGFsbCBidXQgMVxuICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbnVtQ29udGFjdHMgLSAxOyBrKyspIHtcbiAgICAgICAgICAgICAgcmVzdWx0LnBvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgKi9cblxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGJveEhlaWdodGZpZWxkKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7XG4gICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7XG4gICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7XG4gIH1cblxuICBjb252ZXhIZWlnaHRmaWVsZChjb252ZXhTaGFwZSwgaGZTaGFwZSwgY29udmV4UG9zLCBoZlBvcywgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIGNvbnN0IGRhdGEgPSBoZlNoYXBlLmRhdGE7XG4gICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7XG4gICAgY29uc3QgcmFkaXVzID0gY29udmV4U2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXM7XG4gICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBjb252ZXhIZWlnaHRmaWVsZF90bXAyO1xuICAgIGNvbnN0IGZhY2VMaXN0ID0gY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3Q7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhXG5cbiAgICBjb25zdCBsb2NhbENvbnZleFBvcyA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDE7XG4gICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKGhmUG9zLCBoZlF1YXQsIGNvbnZleFBvcywgbG9jYWxDb252ZXhQb3MpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3RcblxuICAgIGxldCBpTWluWCA9IE1hdGguZmxvb3IoKGxvY2FsQ29udmV4UG9zLnggLSByYWRpdXMpIC8gdykgLSAxO1xuICAgIGxldCBpTWF4WCA9IE1hdGguY2VpbCgobG9jYWxDb252ZXhQb3MueCArIHJhZGl1cykgLyB3KSArIDE7XG4gICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxDb252ZXhQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7XG4gICAgbGV0IGlNYXhZID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy55ICsgcmFkaXVzKSAvIHcpICsgMTsgLy8gQmFpbCBvdXQgaWYgd2UgYXJlIG91dCBvZiB0aGUgdGVycmFpblxuXG4gICAgaWYgKGlNYXhYIDwgMCB8fCBpTWF4WSA8IDAgfHwgaU1pblggPiBkYXRhLmxlbmd0aCB8fCBpTWluWSA+IGRhdGFbMF0ubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlc1xuXG5cbiAgICBpZiAoaU1pblggPCAwKSB7XG4gICAgICBpTWluWCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGlNYXhYIDwgMCkge1xuICAgICAgaU1heFggPSAwO1xuICAgIH1cblxuICAgIGlmIChpTWluWSA8IDApIHtcbiAgICAgIGlNaW5ZID0gMDtcbiAgICB9XG5cbiAgICBpZiAoaU1heFkgPCAwKSB7XG4gICAgICBpTWF4WSA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGlNaW5YID49IGRhdGEubGVuZ3RoKSB7XG4gICAgICBpTWluWCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHtcbiAgICAgIGlNYXhYID0gZGF0YS5sZW5ndGggLSAxO1xuICAgIH1cblxuICAgIGlmIChpTWF4WSA+PSBkYXRhWzBdLmxlbmd0aCkge1xuICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgaWYgKGlNaW5ZID49IGRhdGFbMF0ubGVuZ3RoKSB7XG4gICAgICBpTWluWSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBjb25zdCBtaW5NYXggPSBbXTtcbiAgICBoZlNoYXBlLmdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIG1pbk1heCk7XG4gICAgY29uc3QgbWluID0gbWluTWF4WzBdO1xuICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UncmUgY2FudCB0b3VjaCB0aGUgYm91bmRpbmcgaGVpZ2h0IGJveFxuXG4gICAgaWYgKGxvY2FsQ29udmV4UG9zLnogLSByYWRpdXMgPiBtYXggfHwgbG9jYWxDb252ZXhQb3MueiArIHJhZGl1cyA8IG1pbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHtcbiAgICAgICAgbGV0IGludGVyc2VjdGluZyA9IGZhbHNlOyAvLyBMb3dlciB0cmlhbmdsZVxuXG4gICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgZmFsc2UpO1xuICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTtcblxuICAgICAgICBpZiAoY29udmV4UG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBjb252ZXhTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykge1xuICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7XG4gICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpO1xuXG4gICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5jb252ZXhDb252ZXgoY29udmV4U2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBjb252ZXhQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgbnVsbCwgbnVsbCwganVzdFRlc3QsIGZhY2VMaXN0LCBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNwaGVyZVBhcnRpY2xlKHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgLy8gVGhlIG5vcm1hbCBpcyB0aGUgdW5pdCB2ZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIHBhcnRpY2xlIGNlbnRlclxuICAgIGNvbnN0IG5vcm1hbCA9IHBhcnRpY2xlU3BoZXJlX25vcm1hbDtcbiAgICBub3JtYWwuc2V0KDAsIDAsIDEpO1xuICAgIHhpLnZzdWIoeGosIG5vcm1hbCk7XG4gICAgY29uc3QgbGVuZ3RoU3F1YXJlZCA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7XG5cbiAgICBpZiAobGVuZ3RoU3F1YXJlZCA8PSBzai5yYWRpdXMgKiBzai5yYWRpdXMpIHtcbiAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7XG4gICAgICBub3JtYWwubm9ybWFsaXplKCk7XG4gICAgICByLnJqLmNvcHkobm9ybWFsKTtcbiAgICAgIHIucmouc2NhbGUoc2oucmFkaXVzLCByLnJqKTtcbiAgICAgIHIubmkuY29weShub3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbFxuXG4gICAgICByLm5pLm5lZ2F0ZShyLm5pKTtcbiAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGVcblxuICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBwbGFuZVBhcnRpY2xlKHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVQbGFuZV9ub3JtYWw7XG4gICAgbm9ybWFsLnNldCgwLCAwLCAxKTtcbiAgICBiai5xdWF0ZXJuaW9uLnZtdWx0KG5vcm1hbCwgbm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lIG9yaWVudGF0aW9uXG5cbiAgICBjb25zdCByZWxwb3MgPSBwYXJ0aWNsZVBsYW5lX3JlbHBvcztcbiAgICB4aS52c3ViKGJqLnBvc2l0aW9uLCByZWxwb3MpO1xuICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTtcblxuICAgIGlmIChkb3QgPD0gMC4wKSB7XG4gICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opO1xuICAgICAgci5uaS5jb3B5KG5vcm1hbCk7IC8vIENvbnRhY3Qgbm9ybWFsIGlzIHRoZSBwbGFuZSBub3JtYWxcblxuICAgICAgci5uaS5uZWdhdGUoci5uaSk7XG4gICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlXG4gICAgICAvLyBHZXQgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lXG5cbiAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBhcnRpY2xlUGxhbmVfcHJvamVjdGVkO1xuICAgICAgbm9ybWFsLnNjYWxlKG5vcm1hbC5kb3QoeGkpLCBwcm9qZWN0ZWQpO1xuICAgICAgeGkudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vcHJvamVjdGVkLnZhZGQoYmoucG9zaXRpb24scHJvamVjdGVkKTtcbiAgICAgIC8vIHJqIGlzIG5vdyB0aGUgcHJvamVjdGVkIHdvcmxkIHBvc2l0aW9uIG1pbnVzIHBsYW5lIHBvc2l0aW9uXG5cbiAgICAgIHIucmouY29weShwcm9qZWN0ZWQpO1xuICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBib3hQYXJ0aWNsZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsO1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlO1xuICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlKHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpO1xuICB9XG5cbiAgY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBsZXQgcGVuZXRyYXRlZEZhY2VJbmRleCA9IC0xO1xuICAgIGNvbnN0IHBlbmV0cmF0ZWRGYWNlTm9ybWFsID0gY29udmV4UGFydGljbGVfcGVuZXRyYXRlZEZhY2VOb3JtYWw7XG4gICAgY29uc3Qgd29ybGRQZW5ldHJhdGlvblZlYyA9IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWM7XG4gICAgbGV0IG1pblBlbmV0cmF0aW9uID0gbnVsbDtcblxuICAgIGNvbnN0IGxvY2FsID0gY29udmV4UGFydGljbGVfbG9jYWw7XG4gICAgbG9jYWwuY29weSh4aSk7XG4gICAgbG9jYWwudnN1Yih4aiwgbG9jYWwpOyAvLyBDb252ZXJ0IHBvc2l0aW9uIHRvIHJlbGF0aXZlIHRoZSBjb252ZXggb3JpZ2luXG5cbiAgICBxai5jb25qdWdhdGUoY3FqKTtcbiAgICBjcWoudm11bHQobG9jYWwsIGxvY2FsKTtcblxuICAgIGlmIChzai5wb2ludElzSW5zaWRlKGxvY2FsKSkge1xuICAgICAgaWYgKHNqLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSkge1xuICAgICAgICBzai5jb21wdXRlV29ybGRWZXJ0aWNlcyh4aiwgcWopO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2oud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlKSB7XG4gICAgICAgIHNqLmNvbXB1dGVXb3JsZEZhY2VOb3JtYWxzKHFqKTtcbiAgICAgIH0gLy8gRm9yIGVhY2ggd29ybGQgcG9seWdvbiBpbiB0aGUgcG9seWhlZHJhXG5cblxuICAgICAgZm9yIChsZXQgaSA9IDAsIG5mYWNlcyA9IHNqLmZhY2VzLmxlbmd0aDsgaSAhPT0gbmZhY2VzOyBpKyspIHtcbiAgICAgICAgLy8gQ29uc3RydWN0IHdvcmxkIGZhY2UgdmVydGljZXNcbiAgICAgICAgY29uc3QgdmVydHMgPSBbc2oud29ybGRWZXJ0aWNlc1tzai5mYWNlc1tpXVswXV1dO1xuICAgICAgICBjb25zdCBub3JtYWwgPSBzai53b3JsZEZhY2VOb3JtYWxzW2ldOyAvLyBDaGVjayBob3cgbXVjaCB0aGUgcGFydGljbGUgcGVuZXRyYXRlcyB0aGUgcG9seWdvbiBwbGFuZS5cblxuICAgICAgICB4aS52c3ViKHZlcnRzWzBdLCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlKTtcbiAgICAgICAgY29uc3QgcGVuZXRyYXRpb24gPSAtbm9ybWFsLmRvdChjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlKTtcblxuICAgICAgICBpZiAobWluUGVuZXRyYXRpb24gPT09IG51bGwgfHwgTWF0aC5hYnMocGVuZXRyYXRpb24pIDwgTWF0aC5hYnMobWluUGVuZXRyYXRpb24pKSB7XG4gICAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBtaW5QZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uO1xuICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlSW5kZXggPSBpO1xuICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlTm9ybWFsLmNvcHkobm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocGVuZXRyYXRlZEZhY2VJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgLy8gU2V0dXAgY29udGFjdFxuICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuc2NhbGUobWluUGVuZXRyYXRpb24sIHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvLyByaiBpcyB0aGUgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBmYWNlXG5cbiAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52YWRkKHhpLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTtcbiAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52c3ViKHhqLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTtcbiAgICAgICAgci5yai5jb3B5KHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvL2NvbnN0IHByb2plY3RlZFRvRmFjZSA9IHhpLnZzdWIoeGopLnZhZGQod29ybGRQZW5ldHJhdGlvblZlYyk7XG4gICAgICAgIC8vcHJvamVjdGVkVG9GYWNlLmNvcHkoci5yaik7XG4gICAgICAgIC8vcWoudm11bHQoci5yaixyLnJqKTtcblxuICAgICAgICBwZW5ldHJhdGVkRmFjZU5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIENvbnRhY3Qgbm9ybWFsXG5cbiAgICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZVxuXG4gICAgICAgIGNvbnN0IHJpID0gci5yaTtcbiAgICAgICAgY29uc3QgcmogPSByLnJqOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllc1xuXG4gICAgICAgIHJpLnZhZGQoeGksIHJpKTtcbiAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpO1xuICAgICAgICByai52YWRkKHhqLCByaik7XG4gICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTtcbiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdQb2ludCBmb3VuZCBpbnNpZGUgY29udmV4LCBidXQgZGlkIG5vdCBmaW5kIHBlbmV0cmF0aW5nIGZhY2UhJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGVpZ2h0ZmllbGRDeWxpbmRlcihoZlNoYXBlLCBjb252ZXhTaGFwZSwgaGZQb3MsIGNvbnZleFBvcywgaGZRdWF0LCBjb252ZXhRdWF0LCBoZkJvZHksIGNvbnZleEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleEhlaWdodGZpZWxkKGNvbnZleFNoYXBlLCBoZlNoYXBlLCBjb252ZXhQb3MsIGhmUG9zLCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KTtcbiAgfVxuXG4gIHBhcnRpY2xlQ3lsaW5kZXIoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCk7XG4gIH1cblxuICBzcGhlcmVUcmltZXNoKHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHNwaGVyZVBvcywgdHJpbWVzaFBvcywgc3BoZXJlUXVhdCwgdHJpbWVzaFF1YXQsIHNwaGVyZUJvZHksIHRyaW1lc2hCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBjb25zdCBlZGdlVmVydGV4QSA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEE7XG4gICAgY29uc3QgZWRnZVZlcnRleEIgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCO1xuICAgIGNvbnN0IGVkZ2VWZWN0b3IgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3I7XG4gICAgY29uc3QgZWRnZVZlY3RvclVuaXQgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3JVbml0O1xuICAgIGNvbnN0IGxvY2FsU3BoZXJlUG9zID0gc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvcztcbiAgICBjb25zdCB0bXAgPSBzcGhlcmVUcmltZXNoX3RtcDtcbiAgICBjb25zdCBsb2NhbFNwaGVyZUFBQkIgPSBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlQUFCQjtcbiAgICBjb25zdCB2MiA9IHNwaGVyZVRyaW1lc2hfdjI7XG4gICAgY29uc3QgcmVscG9zID0gc3BoZXJlVHJpbWVzaF9yZWxwb3M7XG4gICAgY29uc3QgdHJpYW5nbGVzID0gc3BoZXJlVHJpbWVzaF90cmlhbmdsZXM7IC8vIENvbnZlcnQgc3BoZXJlIHBvc2l0aW9uIHRvIGxvY2FsIGluIHRoZSB0cmltZXNoXG5cbiAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHNwaGVyZVBvcywgbG9jYWxTcGhlcmVQb3MpOyAvLyBHZXQgdGhlIGFhYmIgb2YgdGhlIHNwaGVyZSBsb2NhbGx5IGluIHRoZSB0cmltZXNoXG5cbiAgICBjb25zdCBzcGhlcmVSYWRpdXMgPSBzcGhlcmVTaGFwZS5yYWRpdXM7XG4gICAgbG9jYWxTcGhlcmVBQUJCLmxvd2VyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogLSBzcGhlcmVSYWRpdXMpO1xuICAgIGxvY2FsU3BoZXJlQUFCQi51cHBlckJvdW5kLnNldChsb2NhbFNwaGVyZVBvcy54ICsgc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy55ICsgc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy56ICsgc3BoZXJlUmFkaXVzKTtcbiAgICB0cmltZXNoU2hhcGUuZ2V0VHJpYW5nbGVzSW5BQUJCKGxvY2FsU3BoZXJlQUFCQiwgdHJpYW5nbGVzKTsgLy9mb3IgKGxldCBpID0gMDsgaSA8IHRyaW1lc2hTaGFwZS5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgdHJpYW5nbGVzLnB1c2goaSk7IC8vIEFsbFxuICAgIC8vIFZlcnRpY2VzXG5cbiAgICBjb25zdCB2ID0gc3BoZXJlVHJpbWVzaF92O1xuICAgIGNvbnN0IHJhZGl1c1NxdWFyZWQgPSBzcGhlcmVTaGFwZS5yYWRpdXMgKiBzcGhlcmVTaGFwZS5yYWRpdXM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaWFuZ2xlcy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgal0sIHYpOyAvLyBDaGVjayB2ZXJ0ZXggb3ZlcmxhcCBpbiBzcGhlcmVcblxuICAgICAgICB2LnZzdWIobG9jYWxTcGhlcmVQb3MsIHJlbHBvcyk7XG5cbiAgICAgICAgaWYgKHJlbHBvcy5sZW5ndGhTcXVhcmVkKCkgPD0gcmFkaXVzU3F1YXJlZCkge1xuICAgICAgICAgIC8vIFNhZmUgdXBcbiAgICAgICAgICB2Mi5jb3B5KHYpO1xuICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpO1xuICAgICAgICAgIHYudnN1YihzcGhlcmVQb3MsIHJlbHBvcyk7XG5cbiAgICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTtcbiAgICAgICAgICByLm5pLmNvcHkocmVscG9zKTtcbiAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOyAvLyByaSBpcyB0aGUgdmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byB0aGUgc3BoZXJlIHN1cmZhY2VcblxuICAgICAgICAgIHIucmkuY29weShyLm5pKTtcbiAgICAgICAgICByLnJpLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7XG4gICAgICAgICAgci5yaS52YWRkKHNwaGVyZVBvcywgci5yaSk7XG4gICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICAgIHIucmouY29weSh2KTtcbiAgICAgICAgICByLnJqLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOyAvLyBTdG9yZSByZXN1bHRcblxuICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBDaGVjayBhbGwgZWRnZXNcblxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCBlZGdlVmVydGV4QSk7XG4gICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIChqICsgMSkgJSAzXSwgZWRnZVZlcnRleEIpO1xuICAgICAgICBlZGdlVmVydGV4Qi52c3ViKGVkZ2VWZXJ0ZXhBLCBlZGdlVmVjdG9yKTsgLy8gUHJvamVjdCBzcGhlcmUgcG9zaXRpb24gdG8gdGhlIGVkZ2VcblxuICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhCLCB0bXApO1xuICAgICAgICBjb25zdCBwb3NpdGlvbkFsb25nRWRnZUIgPSB0bXAuZG90KGVkZ2VWZWN0b3IpO1xuICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhBLCB0bXApO1xuICAgICAgICBsZXQgcG9zaXRpb25BbG9uZ0VkZ2VBID0gdG1wLmRvdChlZGdlVmVjdG9yKTtcblxuICAgICAgICBpZiAocG9zaXRpb25BbG9uZ0VkZ2VBID4gMCAmJiBwb3NpdGlvbkFsb25nRWRnZUIgPCAwKSB7XG4gICAgICAgICAgLy8gTm93IGNoZWNrIHRoZSBvcnRob2dvbmFsIGRpc3RhbmNlIGZyb20gZWRnZSB0byBzcGhlcmUgY2VudGVyXG4gICAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1YihlZGdlVmVydGV4QSwgdG1wKTtcbiAgICAgICAgICBlZGdlVmVjdG9yVW5pdC5jb3B5KGVkZ2VWZWN0b3IpO1xuICAgICAgICAgIGVkZ2VWZWN0b3JVbml0Lm5vcm1hbGl6ZSgpO1xuICAgICAgICAgIHBvc2l0aW9uQWxvbmdFZGdlQSA9IHRtcC5kb3QoZWRnZVZlY3RvclVuaXQpO1xuICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LnNjYWxlKHBvc2l0aW9uQWxvbmdFZGdlQSwgdG1wKTtcbiAgICAgICAgICB0bXAudmFkZChlZGdlVmVydGV4QSwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIGNlbnRlciBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIGVkZ2UsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgdHJpbWVzaCBmcmFtZVxuXG4gICAgICAgICAgY29uc3QgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTtcblxuICAgICAgICAgIGlmIChkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7XG4gICAgICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opO1xuICAgICAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpO1xuICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTtcbiAgICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpO1xuICAgICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7XG4gICAgICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7XG4gICAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTtcbiAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIFRyaWFuZ2xlIGZhY2VzXG5cblxuICAgIGNvbnN0IHZhID0gc3BoZXJlVHJpbWVzaF92YTtcbiAgICBjb25zdCB2YiA9IHNwaGVyZVRyaW1lc2hfdmI7XG4gICAgY29uc3QgdmMgPSBzcGhlcmVUcmltZXNoX3ZjO1xuICAgIGNvbnN0IG5vcm1hbCA9IHNwaGVyZVRyaW1lc2hfbm9ybWFsO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIE4gPSB0cmlhbmdsZXMubGVuZ3RoOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZVZlcnRpY2VzKHRyaWFuZ2xlc1tpXSwgdmEsIHZiLCB2Yyk7XG4gICAgICB0cmltZXNoU2hhcGUuZ2V0Tm9ybWFsKHRyaWFuZ2xlc1tpXSwgbm9ybWFsKTtcbiAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIodmEsIHRtcCk7XG4gICAgICBsZXQgZGlzdCA9IHRtcC5kb3Qobm9ybWFsKTtcbiAgICAgIG5vcm1hbC5zY2FsZShkaXN0LCB0bXApO1xuICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih0bXAsIHRtcCk7IC8vIHRtcCBpcyBub3cgdGhlIHNwaGVyZSBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIHRyaWFuZ2xlIHBsYW5lXG5cbiAgICAgIGRpc3QgPSB0bXAuZGlzdGFuY2VUbyhsb2NhbFNwaGVyZVBvcyk7XG5cbiAgICAgIGlmIChSYXkucG9pbnRJblRyaWFuZ2xlKHRtcCwgdmEsIHZiLCB2YykgJiYgZGlzdCA8IHNwaGVyZVNoYXBlLnJhZGl1cykge1xuICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTtcbiAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpO1xuICAgICAgICByLm5pLm5vcm1hbGl6ZSgpO1xuICAgICAgICByLm5pLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7XG4gICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpO1xuICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7XG4gICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdG1wLCB0bXApO1xuICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7XG4gICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIubmksIHIubmkpO1xuICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLnJpLCByLnJpKTtcbiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRyaWFuZ2xlcy5sZW5ndGggPSAwO1xuICB9XG5cbiAgcGxhbmVUcmltZXNoKHBsYW5lU2hhcGUsIHRyaW1lc2hTaGFwZSwgcGxhbmVQb3MsIHRyaW1lc2hQb3MsIHBsYW5lUXVhdCwgdHJpbWVzaFF1YXQsIHBsYW5lQm9keSwgdHJpbWVzaEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIC8vIE1ha2UgY29udGFjdHMhXG4gICAgY29uc3QgdiA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3Qgbm9ybWFsID0gcGxhbmVUcmltZXNoX25vcm1hbDtcbiAgICBub3JtYWwuc2V0KDAsIDAsIDEpO1xuICAgIHBsYW5lUXVhdC52bXVsdChub3JtYWwsIG5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmltZXNoU2hhcGUudmVydGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7XG4gICAgICAvLyBHZXQgd29ybGQgdmVydGV4IGZyb20gdHJpbWVzaFxuICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleChpLCB2KTsgLy8gU2FmZSB1cFxuXG4gICAgICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7XG4gICAgICB2Mi5jb3B5KHYpO1xuICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB2Miwgdik7IC8vIENoZWNrIHBsYW5lIHNpZGVcblxuICAgICAgY29uc3QgcmVscG9zID0gcGxhbmVUcmltZXNoX3JlbHBvcztcbiAgICAgIHYudnN1YihwbGFuZVBvcywgcmVscG9zKTtcbiAgICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTtcblxuICAgICAgaWYgKGRvdCA8PSAwLjApIHtcbiAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24ocGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7XG4gICAgICAgIHIubmkuY29weShub3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbCBpcyB0aGUgcGxhbmUgbm9ybWFsXG4gICAgICAgIC8vIEdldCB2ZXJ0ZXggcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lXG5cbiAgICAgICAgY29uc3QgcHJvamVjdGVkID0gcGxhbmVUcmltZXNoX3Byb2plY3RlZDtcbiAgICAgICAgbm9ybWFsLnNjYWxlKHJlbHBvcy5kb3Qobm9ybWFsKSwgcHJvamVjdGVkKTtcbiAgICAgICAgdi52c3ViKHByb2plY3RlZCwgcHJvamVjdGVkKTsgLy8gcmkgaXMgdGhlIHByb2plY3RlZCB3b3JsZCBwb3NpdGlvbiBtaW51cyBwbGFuZSBwb3NpdGlvblxuXG4gICAgICAgIHIucmkuY29weShwcm9qZWN0ZWQpO1xuICAgICAgICByLnJpLnZzdWIocGxhbmVCb2R5LnBvc2l0aW9uLCByLnJpKTtcbiAgICAgICAgci5yai5jb3B5KHYpO1xuICAgICAgICByLnJqLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOyAvLyBTdG9yZSByZXN1bHRcblxuICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9IC8vIGNvbnZleFRyaW1lc2goXG4gIC8vICAgc2k6IENvbnZleFBvbHloZWRyb24sIHNqOiBUcmltZXNoLCB4aTogVmVjMywgeGo6IFZlYzMsIHFpOiBRdWF0ZXJuaW9uLCBxajogUXVhdGVybmlvbixcbiAgLy8gICBiaTogQm9keSwgYmo6IEJvZHksIHJzaT86IFNoYXBlIHwgbnVsbCwgcnNqPzogU2hhcGUgfCBudWxsLFxuICAvLyAgIGZhY2VMaXN0QT86IG51bWJlcltdIHwgbnVsbCwgZmFjZUxpc3RCPzogbnVtYmVyW10gfCBudWxsLFxuICAvLyApIHtcbiAgLy8gICBjb25zdCBzZXBBeGlzID0gY29udmV4Q29udmV4X3NlcEF4aXM7XG4gIC8vICAgaWYoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKXtcbiAgLy8gICAgICAgcmV0dXJuO1xuICAvLyAgIH1cbiAgLy8gICAvLyBDb25zdHJ1Y3QgYSB0ZW1wIGh1bGwgZm9yIGVhY2ggdHJpYW5nbGVcbiAgLy8gICBjb25zdCBodWxsQiA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7XG4gIC8vICAgaHVsbEIuZmFjZXMgPSBbWzAsMSwyXV07XG4gIC8vICAgY29uc3QgdmEgPSBuZXcgVmVjMygpO1xuICAvLyAgIGNvbnN0IHZiID0gbmV3IFZlYzMoKTtcbiAgLy8gICBjb25zdCB2YyA9IG5ldyBWZWMzKCk7XG4gIC8vICAgaHVsbEIudmVydGljZXMgPSBbXG4gIC8vICAgICAgIHZhLFxuICAvLyAgICAgICB2YixcbiAgLy8gICAgICAgdmNcbiAgLy8gICBdO1xuICAvLyAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2ouaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHtcbiAgLy8gICAgICAgY29uc3QgdHJpYW5nbGVOb3JtYWwgPSBuZXcgVmVjMygpO1xuICAvLyAgICAgICBzai5nZXROb3JtYWwoaSwgdHJpYW5nbGVOb3JtYWwpO1xuICAvLyAgICAgICBodWxsQi5mYWNlTm9ybWFscyA9IFt0cmlhbmdsZU5vcm1hbF07XG4gIC8vICAgICAgIHNqLmdldFRyaWFuZ2xlVmVydGljZXMoaSwgdmEsIHZiLCB2Yyk7XG4gIC8vICAgICAgIGxldCBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7XG4gIC8vICAgICAgIGlmKCFkKXtcbiAgLy8gICAgICAgICAgIHRyaWFuZ2xlTm9ybWFsLnNjYWxlKC0xLCB0cmlhbmdsZU5vcm1hbCk7XG4gIC8vICAgICAgICAgICBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7XG4gIC8vICAgICAgICAgICBpZighZCl7XG4gIC8vICAgICAgICAgICAgICAgY29udGludWU7XG4gIC8vICAgICAgICAgICB9XG4gIC8vICAgICAgIH1cbiAgLy8gICAgICAgY29uc3QgcmVzOiBDb252ZXhQb2x5aGVkcm9uQ29udGFjdFBvaW50W10gPSBbXTtcbiAgLy8gICAgICAgY29uc3QgcSA9IGNvbnZleENvbnZleF9xO1xuICAvLyAgICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGkscWksaHVsbEIseGoscWosdHJpYW5nbGVOb3JtYWwsLTEwMCwxMDAscmVzKTtcbiAgLy8gICAgICAgZm9yKGxldCBqID0gMDsgaiAhPT0gcmVzLmxlbmd0aDsgaisrKXtcbiAgLy8gICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSxiaixzaSxzaixyc2kscnNqKSxcbiAgLy8gICAgICAgICAgICAgICByaSA9IHIucmksXG4gIC8vICAgICAgICAgICAgICAgcmogPSByLnJqO1xuICAvLyAgICAgICAgICAgci5uaS5jb3B5KHRyaWFuZ2xlTm9ybWFsKTtcbiAgLy8gICAgICAgICAgIHIubmkubmVnYXRlKHIubmkpO1xuICAvLyAgICAgICAgICAgcmVzW2pdLm5vcm1hbC5uZWdhdGUocSk7XG4gIC8vICAgICAgICAgICBxLm11bHQocmVzW2pdLmRlcHRoLCBxKTtcbiAgLy8gICAgICAgICAgIHJlc1tqXS5wb2ludC52YWRkKHEsIHJpKTtcbiAgLy8gICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTtcbiAgLy8gICAgICAgICAgIC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmVcbiAgLy8gICAgICAgICAgIHJpLnZzdWIoeGkscmkpO1xuICAvLyAgICAgICAgICAgcmoudnN1Yih4aixyaik7XG4gIC8vICAgICAgICAgICAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllc1xuICAvLyAgICAgICAgICAgcmkudmFkZCh4aSwgcmkpO1xuICAvLyAgICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpO1xuICAvLyAgICAgICAgICAgcmoudmFkZCh4aiwgcmopO1xuICAvLyAgICAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopO1xuICAvLyAgICAgICAgICAgcmVzdWx0LnB1c2gocik7XG4gIC8vICAgICAgIH1cbiAgLy8gICB9XG4gIC8vIH1cblxuXG59XG5jb25zdCBhdmVyYWdlTm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IGF2ZXJhZ2VDb250YWN0UG9pbnRBID0gbmV3IFZlYzMoKTtcbmNvbnN0IGF2ZXJhZ2VDb250YWN0UG9pbnRCID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRtcFZlYzEgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wVmVjMiA9IG5ldyBWZWMzKCk7XG5jb25zdCB0bXBRdWF0MSA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5jb25zdCB0bXBRdWF0MiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbmNvbnN0IHBsYW5lVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgcGxhbmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7XG5jb25zdCBwbGFuZVRyaW1lc2hfcHJvamVjdGVkID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfbm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfcmVscG9zID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdiA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX3YyID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEEgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QiA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3IgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdCA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlUG9zID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdG1wID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdmEgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF92YiA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX3ZjID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCID0gbmV3IEFBQkIoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdHJpYW5nbGVzID0gW107XG5jb25zdCBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUgPSBuZXcgVmVjMygpO1xuY29uc3QgcGxhbmVfdG9fc3BoZXJlX29ydGhvID0gbmV3IFZlYzMoKTsgLy8gU2VlIGh0dHA6Ly9idWxsZXRwaHlzaWNzLmNvbS9CdWxsZXQvQnVsbGV0RnVsbC9TcGhlcmVUcmlhbmdsZURldGVjdG9yXzhjcHBfc291cmNlLmh0bWxcblxuY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZSA9IG5ldyBWZWMzKCk7XG5jb25zdCBwb2ludEluUG9seWdvbl9lZGdlX3hfbm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IHBvaW50SW5Qb2x5Z29uX3Z0cCA9IG5ldyBWZWMzKCk7XG5cbmZ1bmN0aW9uIHBvaW50SW5Qb2x5Z29uKHZlcnRzLCBub3JtYWwsIHApIHtcbiAgbGV0IHBvc2l0aXZlUmVzdWx0ID0gbnVsbDtcbiAgY29uc3QgTiA9IHZlcnRzLmxlbmd0aDtcblxuICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBHZXQgZWRnZSB0byB0aGUgbmV4dCB2ZXJ0ZXhcblxuICAgIGNvbnN0IGVkZ2UgPSBwb2ludEluUG9seWdvbl9lZGdlO1xuICAgIHZlcnRzWyhpICsgMSkgJSBOXS52c3ViKHYsIGVkZ2UpOyAvLyBHZXQgY3Jvc3MgcHJvZHVjdCBiZXR3ZWVuIHBvbHlnb24gbm9ybWFsIGFuZCB0aGUgZWRnZVxuXG4gICAgY29uc3QgZWRnZV94X25vcm1hbCA9IHBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWw7IC8vY29uc3QgZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7XG5cbiAgICBlZGdlLmNyb3NzKG5vcm1hbCwgZWRnZV94X25vcm1hbCk7IC8vIEdldCB2ZWN0b3IgYmV0d2VlbiBwb2ludCBhbmQgY3VycmVudCB2ZXJ0ZXhcblxuICAgIGNvbnN0IHZlcnRleF90b19wID0gcG9pbnRJblBvbHlnb25fdnRwO1xuICAgIHAudnN1Yih2LCB2ZXJ0ZXhfdG9fcCk7IC8vIFRoaXMgZG90IHByb2R1Y3QgZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBlZGdlIHRoZSBwb2ludCBpc1xuXG4gICAgY29uc3QgciA9IGVkZ2VfeF9ub3JtYWwuZG90KHZlcnRleF90b19wKTsgLy8gSWYgYWxsIHN1Y2ggZG90IHByb2R1Y3RzIGhhdmUgc2FtZSBzaWduLCB3ZSBhcmUgaW5zaWRlIHRoZSBwb2x5Z29uLlxuXG4gICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsIHx8IHIgPiAwICYmIHBvc2l0aXZlUmVzdWx0ID09PSB0cnVlIHx8IHIgPD0gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgIGlmIChwb3NpdGl2ZVJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgICBwb3NpdGl2ZVJlc3VsdCA9IHIgPiAwO1xuICAgICAgfVxuXG4gICAgICBjb250aW51ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmNvdW50ZXJlZCBzb21lIG90aGVyIHNpZ24uIEV4aXQuXG4gICAgfVxuICB9IC8vIElmIHdlIGdvdCBoZXJlLCBhbGwgZG90IHByb2R1Y3RzIHdlcmUgb2YgdGhlIHNhbWUgc2lnbi5cblxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5jb25zdCBib3hfdG9fc3BoZXJlID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUJveF9ucyA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVCb3hfbnMxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUJveF9uczIgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQm94X3NpZGVzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldO1xuY29uc3Qgc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXIgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUJveF9zaWRlX25zMiA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhfdG9fc3BoZXJlID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF9lZGdlID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF9lZGdlVW5pdCA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVDb252ZXhfc3BoZXJlVG9Db3JuZXIgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkQ29ybmVyID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF93b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVDb252ZXhfd29ybGRQb2ludCA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVDb252ZXhfd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF9wZW5ldHJhdGlvblZlYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVDb252ZXhfc3BoZXJlVG9Xb3JsZFBvaW50ID0gbmV3IFZlYzMoKTtcbmNvbnN0IHBsYW5lQ29udmV4X3YgPSBuZXcgVmVjMygpO1xuY29uc3QgcGxhbmVDb252ZXhfbm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IHBsYW5lQ29udmV4X3JlbHBvcyA9IG5ldyBWZWMzKCk7XG5jb25zdCBwbGFuZUNvbnZleF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpO1xuY29uc3QgY29udmV4Q29udmV4X3NlcEF4aXMgPSBuZXcgVmVjMygpO1xuY29uc3QgY29udmV4Q29udmV4X3EgPSBuZXcgVmVjMygpO1xuY29uc3QgcGFydGljbGVQbGFuZV9ub3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgcGFydGljbGVQbGFuZV9yZWxwb3MgPSBuZXcgVmVjMygpO1xuY29uc3QgcGFydGljbGVQbGFuZV9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpO1xuY29uc3QgcGFydGljbGVTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTsgLy8gV0lQXG5cbmNvbnN0IGNxaiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5jb25zdCBjb252ZXhQYXJ0aWNsZV9sb2NhbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpO1xuY29uc3QgY29udmV4SGVpZ2h0ZmllbGRfdG1wMSA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNvbnZleEhlaWdodGZpZWxkX2ZhY2VMaXN0ID0gWzBdO1xuY29uc3Qgc3BoZXJlSGVpZ2h0ZmllbGRfdG1wMSA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTtcblxuY2xhc3MgT3ZlcmxhcEtlZXBlciB7XG4gIC8qKlxuICAgKiBAdG9kbyBSZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jdXJyZW50ID0gdm9pZCAwO1xuICAgIHRoaXMucHJldmlvdXMgPSB2b2lkIDA7XG4gICAgdGhpcy5jdXJyZW50ID0gW107XG4gICAgdGhpcy5wcmV2aW91cyA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiBnZXRLZXlcbiAgICovXG5cblxuICBnZXRLZXkoaSwgaikge1xuICAgIGlmIChqIDwgaSkge1xuICAgICAgY29uc3QgdGVtcCA9IGo7XG4gICAgICBqID0gaTtcbiAgICAgIGkgPSB0ZW1wO1xuICAgIH1cblxuICAgIHJldHVybiBpIDw8IDE2IHwgajtcbiAgfVxuICAvKipcbiAgICogc2V0XG4gICAqL1xuXG5cbiAgc2V0KGksIGopIHtcbiAgICAvLyBJbnNlcnRpb24gc29ydC4gVGhpcyB3YXkgdGhlIGRpZmYgd2lsbCBoYXZlIGxpbmVhciBjb21wbGV4aXR5LlxuICAgIGNvbnN0IGtleSA9IHRoaXMuZ2V0S2V5KGksIGopO1xuICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgbGV0IGluZGV4ID0gMDtcblxuICAgIHdoaWxlIChrZXkgPiBjdXJyZW50W2luZGV4XSkge1xuICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSBjdXJyZW50W2luZGV4XSkge1xuICAgICAgcmV0dXJuOyAvLyBQYWlyIHdhcyBhbHJlYWR5IGFkZGVkXG4gICAgfVxuXG4gICAgZm9yIChsZXQgaiA9IGN1cnJlbnQubGVuZ3RoIC0gMTsgaiA+PSBpbmRleDsgai0tKSB7XG4gICAgICBjdXJyZW50W2ogKyAxXSA9IGN1cnJlbnRbal07XG4gICAgfVxuXG4gICAgY3VycmVudFtpbmRleF0gPSBrZXk7XG4gIH1cbiAgLyoqXG4gICAqIHRpY2tcbiAgICovXG5cblxuICB0aWNrKCkge1xuICAgIGNvbnN0IHRtcCA9IHRoaXMuY3VycmVudDtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnByZXZpb3VzO1xuICAgIHRoaXMucHJldmlvdXMgPSB0bXA7XG4gICAgdGhpcy5jdXJyZW50Lmxlbmd0aCA9IDA7XG4gIH1cbiAgLyoqXG4gICAqIGdldERpZmZcbiAgICovXG5cblxuICBnZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpIHtcbiAgICBjb25zdCBhID0gdGhpcy5jdXJyZW50O1xuICAgIGNvbnN0IGIgPSB0aGlzLnByZXZpb3VzO1xuICAgIGNvbnN0IGFsID0gYS5sZW5ndGg7XG4gICAgY29uc3QgYmwgPSBiLmxlbmd0aDtcbiAgICBsZXQgaiA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsOyBpKyspIHtcbiAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgY29uc3Qga2V5QSA9IGFbaV07XG5cbiAgICAgIHdoaWxlIChrZXlBID4gYltqXSkge1xuICAgICAgICBqKys7XG4gICAgICB9XG5cbiAgICAgIGZvdW5kID0ga2V5QSA9PT0gYltqXTtcblxuICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICB1bnBhY2tBbmRQdXNoKGFkZGl0aW9ucywga2V5QSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaiA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsOyBpKyspIHtcbiAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgY29uc3Qga2V5QiA9IGJbaV07XG5cbiAgICAgIHdoaWxlIChrZXlCID4gYVtqXSkge1xuICAgICAgICBqKys7XG4gICAgICB9XG5cbiAgICAgIGZvdW5kID0gYVtqXSA9PT0ga2V5QjtcblxuICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICB1bnBhY2tBbmRQdXNoKHJlbW92YWxzLCBrZXlCKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuXG5mdW5jdGlvbiB1bnBhY2tBbmRQdXNoKGFycmF5LCBrZXkpIHtcbiAgYXJyYXkucHVzaCgoa2V5ICYgMHhmZmZmMDAwMCkgPj4gMTYsIGtleSAmIDB4MDAwMGZmZmYpO1xufVxuXG4vKipcbiAqIFR1cGxlRGljdGlvbmFyeVxuICovXG5jbGFzcyBUdXBsZURpY3Rpb25hcnkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRhdGEgPSB7XG4gICAgICBrZXlzOiBbXVxuICAgIH07XG4gIH1cblxuICAvKiogZ2V0ICovXG4gIGdldChpLCBqKSB7XG4gICAgaWYgKGkgPiBqKSB7XG4gICAgICAvLyBzd2FwXG4gICAgICBjb25zdCB0ZW1wID0gajtcbiAgICAgIGogPSBpO1xuICAgICAgaSA9IHRlbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YVtpICsgXCItXCIgKyBqXTtcbiAgfVxuICAvKiogc2V0ICovXG5cblxuICBzZXQoaSwgaiwgdmFsdWUpIHtcbiAgICBpZiAoaSA+IGopIHtcbiAgICAgIGNvbnN0IHRlbXAgPSBqO1xuICAgICAgaiA9IGk7XG4gICAgICBpID0gdGVtcDtcbiAgICB9XG5cbiAgICBjb25zdCBrZXkgPSBpICsgXCItXCIgKyBqOyAvLyBDaGVjayBpZiBrZXkgYWxyZWFkeSBleGlzdHNcblxuICAgIGlmICghdGhpcy5nZXQoaSwgaikpIHtcbiAgICAgIHRoaXMuZGF0YS5rZXlzLnB1c2goa2V5KTtcbiAgICB9XG5cbiAgICB0aGlzLmRhdGFba2V5XSA9IHZhbHVlO1xuICB9XG4gIC8qKiByZXNldCAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBrZXlzID0gZGF0YS5rZXlzO1xuXG4gICAgd2hpbGUgKGtleXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgIGRlbGV0ZSBkYXRhW2tleV07XG4gICAgfVxuICB9XG5cbn1cblxuLyoqXG4gKiBUaGUgcGh5c2ljcyB3b3JsZFxuICovXG5jbGFzcyBXb3JsZCBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcbiAgLyoqXG4gICAqIEN1cnJlbnRseSAvIGxhc3QgdXNlZCB0aW1lc3RlcC4gSXMgc2V0IHRvIC0xIGlmIG5vdCBhdmFpbGFibGUuIFRoaXMgdmFsdWUgaXMgdXBkYXRlZCBiZWZvcmUgZWFjaCBpbnRlcm5hbCBzdGVwLCB3aGljaCBtZWFucyB0aGF0IGl0IGlzIFwiZnJlc2hcIiBpbnNpZGUgZXZlbnQgY2FsbGJhY2tzLlxuICAgKi9cblxuICAvKipcbiAgICogTWFrZXMgYm9kaWVzIGdvIHRvIHNsZWVwIHdoZW4gdGhleSd2ZSBiZWVuIGluYWN0aXZlLlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cblxuICAvKipcbiAgICogQWxsIHRoZSBjdXJyZW50IGNvbnRhY3RzIChpbnN0YW5jZXMgb2YgQ29udGFjdEVxdWF0aW9uKSBpbiB0aGUgd29ybGQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBIb3cgb2Z0ZW4gdG8gbm9ybWFsaXplIHF1YXRlcm5pb25zLiBTZXQgdG8gMCBmb3IgZXZlcnkgc3RlcCwgMSBmb3IgZXZlcnkgc2Vjb25kIGV0Yy4uIEEgbGFyZ2VyIHZhbHVlIGluY3JlYXNlcyBwZXJmb3JtYW5jZS4gSWYgYm9kaWVzIHRlbmQgdG8gZXhwbG9kZSwgc2V0IHRvIGEgc21hbGxlciB2YWx1ZSAoemVybyB0byBiZSBzdXJlIG5vdGhpbmcgY2FuIGdvIHdyb25nKS5cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cblxuICAvKipcbiAgICogU2V0IHRvIHRydWUgdG8gdXNlIGZhc3QgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBJdCBpcyBvZnRlbiBlbm91Z2ggYWNjdXJhdGUgdG8gdXNlLlxuICAgKiBJZiBib2RpZXMgdGVuZCB0byBleHBsb2RlLCBzZXQgdG8gZmFsc2UuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgd2FsbC1jbG9jayB0aW1lIHNpbmNlIHNpbXVsYXRpb24gc3RhcnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgdGltZXN0ZXBzIHRha2VuIHNpbmNlIHN0YXJ0LlxuICAgKi9cblxuICAvKipcbiAgICogRGVmYXVsdCBhbmQgbGFzdCB0aW1lc3RlcCBzaXplcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBncmF2aXR5IG9mIHRoZSB3b3JsZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBicm9hZHBoYXNlIGFsZ29yaXRobSB0byB1c2UuXG4gICAqIEBkZWZhdWx0IE5haXZlQnJvYWRwaGFzZVxuICAgKi9cblxuICAvKipcbiAgICogQWxsIGJvZGllcyBpbiB0aGlzIHdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUcnVlIGlmIGFueSBib2RpZXMgYXJlIG5vdCBzbGVlcGluZywgZmFsc2UgaWYgZXZlcnkgYm9keSBpcyBzbGVlcGluZy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBzb2x2ZXIgYWxnb3JpdGhtIHRvIHVzZS5cbiAgICogQGRlZmF1bHQgR1NTb2x2ZXJcbiAgICovXG5cbiAgLyoqXG4gICAqIGNvbGxpc2lvbk1hdHJpeFxuICAgKi9cblxuICAvKipcbiAgICogQ29sbGlzaW9uTWF0cml4IGZyb20gdGhlIHByZXZpb3VzIHN0ZXAuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbGwgYWRkZWQgbWF0ZXJpYWxzLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBAdG9kbyBSZW1vdmVcbiAgICovXG5cbiAgLyoqXG4gICAqIEFsbCBhZGRlZCBjb250YWN0bWF0ZXJpYWxzLlxuICAgKi9cblxuICAvKipcbiAgICogVXNlZCB0byBsb29rIHVwIGEgQ29udGFjdE1hdGVyaWFsIGdpdmVuIHR3byBpbnN0YW5jZXMgb2YgTWF0ZXJpYWwuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBtYXRlcmlhbCBvZiB0aGUgYm9kaWVzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhpcyBjb250YWN0IG1hdGVyaWFsIGlzIHVzZWQgaWYgbm8gc3VpdGFibGUgY29udGFjdG1hdGVyaWFsIGlzIGZvdW5kIGZvciBhIGNvbnRhY3QuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaW1lIGFjY3VtdWxhdG9yIGZvciBpbnRlcnBvbGF0aW9uLlxuICAgKiBAc2VlIGh0dHBzOi8vZ2FmZmVyb25nYW1lcy5jb20vZ2FtZS1waHlzaWNzL2ZpeC15b3VyLXRpbWVzdGVwL1xuICAgKi9cblxuICAvKipcbiAgICogRGlzcGF0Y2hlZCBhZnRlciBhIGJvZHkgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIHdvcmxkLlxuICAgKi9cblxuICAvKipcbiAgICogRGlzcGF0Y2hlZCBhZnRlciBhIGJvZHkgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSB3b3JsZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5kdCA9IHZvaWQgMDtcbiAgICB0aGlzLmFsbG93U2xlZXAgPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0cyA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gdm9pZCAwO1xuICAgIHRoaXMucXVhdE5vcm1hbGl6ZVNraXAgPSB2b2lkIDA7XG4gICAgdGhpcy5xdWF0Tm9ybWFsaXplRmFzdCA9IHZvaWQgMDtcbiAgICB0aGlzLnRpbWUgPSB2b2lkIDA7XG4gICAgdGhpcy5zdGVwbnVtYmVyID0gdm9pZCAwO1xuICAgIHRoaXMuZGVmYXVsdF9kdCA9IHZvaWQgMDtcbiAgICB0aGlzLm5leHRJZCA9IHZvaWQgMDtcbiAgICB0aGlzLmdyYXZpdHkgPSB2b2lkIDA7XG4gICAgdGhpcy5icm9hZHBoYXNlID0gdm9pZCAwO1xuICAgIHRoaXMuYm9kaWVzID0gdm9pZCAwO1xuICAgIHRoaXMuaGFzQWN0aXZlQm9kaWVzID0gdm9pZCAwO1xuICAgIHRoaXMuc29sdmVyID0gdm9pZCAwO1xuICAgIHRoaXMuY29uc3RyYWludHMgPSB2b2lkIDA7XG4gICAgdGhpcy5uYXJyb3dwaGFzZSA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gdm9pZCAwO1xuICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIgPSB2b2lkIDA7XG4gICAgdGhpcy5tYXRlcmlhbHMgPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0bWF0ZXJpYWxzID0gdm9pZCAwO1xuICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUgPSB2b2lkIDA7XG4gICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsID0gdm9pZCAwO1xuICAgIHRoaXMuZG9Qcm9maWxpbmcgPSB2b2lkIDA7XG4gICAgdGhpcy5wcm9maWxlID0gdm9pZCAwO1xuICAgIHRoaXMuYWNjdW11bGF0b3IgPSB2b2lkIDA7XG4gICAgdGhpcy5zdWJzeXN0ZW1zID0gdm9pZCAwO1xuICAgIHRoaXMuYWRkQm9keUV2ZW50ID0gdm9pZCAwO1xuICAgIHRoaXMucmVtb3ZlQm9keUV2ZW50ID0gdm9pZCAwO1xuICAgIHRoaXMuaWRUb0JvZHlNYXAgPSB2b2lkIDA7XG4gICAgdGhpcy5kdCA9IC0xO1xuICAgIHRoaXMuYWxsb3dTbGVlcCA9ICEhb3B0aW9ucy5hbGxvd1NsZWVwO1xuICAgIHRoaXMuY29udGFjdHMgPSBbXTtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gW107XG4gICAgdGhpcy5xdWF0Tm9ybWFsaXplU2tpcCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZVNraXAgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZVNraXAgOiAwO1xuICAgIHRoaXMucXVhdE5vcm1hbGl6ZUZhc3QgPSBvcHRpb25zLnF1YXROb3JtYWxpemVGYXN0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnF1YXROb3JtYWxpemVGYXN0IDogZmFsc2U7XG4gICAgdGhpcy50aW1lID0gMC4wO1xuICAgIHRoaXMuc3RlcG51bWJlciA9IDA7XG4gICAgdGhpcy5kZWZhdWx0X2R0ID0gMSAvIDYwO1xuICAgIHRoaXMubmV4dElkID0gMDtcbiAgICB0aGlzLmdyYXZpdHkgPSBuZXcgVmVjMygpO1xuXG4gICAgaWYgKG9wdGlvbnMuZ3Jhdml0eSkge1xuICAgICAgdGhpcy5ncmF2aXR5LmNvcHkob3B0aW9ucy5ncmF2aXR5KTtcbiAgICB9XG5cbiAgICB0aGlzLmJyb2FkcGhhc2UgPSBvcHRpb25zLmJyb2FkcGhhc2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYnJvYWRwaGFzZSA6IG5ldyBOYWl2ZUJyb2FkcGhhc2UoKTtcbiAgICB0aGlzLmJvZGllcyA9IFtdO1xuICAgIHRoaXMuaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7XG4gICAgdGhpcy5zb2x2ZXIgPSBvcHRpb25zLnNvbHZlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zb2x2ZXIgOiBuZXcgR1NTb2x2ZXIoKTtcbiAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107XG4gICAgdGhpcy5uYXJyb3dwaGFzZSA9IG5ldyBOYXJyb3dwaGFzZSh0aGlzKTtcbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IG5ldyBBcnJheUNvbGxpc2lvbk1hdHJpeCgpO1xuICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSBuZXcgQXJyYXlDb2xsaXNpb25NYXRyaXgoKTtcbiAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyID0gbmV3IE92ZXJsYXBLZWVwZXIoKTtcbiAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlciA9IG5ldyBPdmVybGFwS2VlcGVyKCk7XG4gICAgdGhpcy5tYXRlcmlhbHMgPSBbXTtcbiAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMgPSBbXTtcbiAgICB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlID0gbmV3IFR1cGxlRGljdGlvbmFyeSgpO1xuICAgIHRoaXMuZGVmYXVsdE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKCdkZWZhdWx0Jyk7XG4gICAgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsID0gbmV3IENvbnRhY3RNYXRlcmlhbCh0aGlzLmRlZmF1bHRNYXRlcmlhbCwgdGhpcy5kZWZhdWx0TWF0ZXJpYWwsIHtcbiAgICAgIGZyaWN0aW9uOiAwLjMsXG4gICAgICByZXN0aXR1dGlvbjogMC4wXG4gICAgfSk7XG4gICAgdGhpcy5kb1Byb2ZpbGluZyA9IGZhbHNlO1xuICAgIHRoaXMucHJvZmlsZSA9IHtcbiAgICAgIHNvbHZlOiAwLFxuICAgICAgbWFrZUNvbnRhY3RDb25zdHJhaW50czogMCxcbiAgICAgIGJyb2FkcGhhc2U6IDAsXG4gICAgICBpbnRlZ3JhdGU6IDAsXG4gICAgICBuYXJyb3dwaGFzZTogMFxuICAgIH07XG4gICAgdGhpcy5hY2N1bXVsYXRvciA9IDA7XG4gICAgdGhpcy5zdWJzeXN0ZW1zID0gW107XG4gICAgdGhpcy5hZGRCb2R5RXZlbnQgPSB7XG4gICAgICB0eXBlOiAnYWRkQm9keScsXG4gICAgICBib2R5OiBudWxsXG4gICAgfTtcbiAgICB0aGlzLnJlbW92ZUJvZHlFdmVudCA9IHtcbiAgICAgIHR5cGU6ICdyZW1vdmVCb2R5JyxcbiAgICAgIGJvZHk6IG51bGxcbiAgICB9O1xuICAgIHRoaXMuaWRUb0JvZHlNYXAgPSB7fTtcbiAgICB0aGlzLmJyb2FkcGhhc2Uuc2V0V29ybGQodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY29udGFjdCBtYXRlcmlhbCBiZXR3ZWVuIG1hdGVyaWFscyBtMSBhbmQgbTJcbiAgICogQHJldHVybiBUaGUgY29udGFjdCBtYXRlcmlhbCBpZiBpdCB3YXMgZm91bmQuXG4gICAqL1xuXG5cbiAgZ2V0Q29udGFjdE1hdGVyaWFsKG0xLCBtMikge1xuICAgIHJldHVybiB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlLmdldChtMS5pZCwgbTIuaWQpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgbnVtYmVyIG9mIG9iamVjdHMgaW4gdGhlIHdvcmxkLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cblxuXG4gIG51bU9iamVjdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuYm9kaWVzLmxlbmd0aDtcbiAgfVxuICAvKipcbiAgICogU3RvcmUgb2xkIGNvbGxpc2lvbiBzdGF0ZSBpbmZvXG4gICAqL1xuXG5cbiAgY29sbGlzaW9uTWF0cml4VGljaygpIHtcbiAgICBjb25zdCB0ZW1wID0gdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cztcbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gdGhpcy5jb2xsaXNpb25NYXRyaXg7XG4gICAgdGhpcy5jb2xsaXNpb25NYXRyaXggPSB0ZW1wO1xuICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnJlc2V0KCk7XG4gICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci50aWNrKCk7XG4gICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIudGljaygpO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYSBjb25zdHJhaW50IHRvIHRoZSBzaW11bGF0aW9uLlxuICAgKi9cblxuXG4gIGFkZENvbnN0cmFpbnQoYykge1xuICAgIHRoaXMuY29uc3RyYWludHMucHVzaChjKTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNvbnN0cmFpbnRcbiAgICovXG5cblxuICByZW1vdmVDb25zdHJhaW50KGMpIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLmNvbnN0cmFpbnRzLmluZGV4T2YoYyk7XG5cbiAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgdGhpcy5jb25zdHJhaW50cy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJheWNhc3QgdGVzdFxuICAgKiBAZGVwcmVjYXRlZCBVc2UgLnJheWNhc3RBbGwsIC5yYXljYXN0Q2xvc2VzdCBvciAucmF5Y2FzdEFueSBpbnN0ZWFkLlxuICAgKi9cblxuXG4gIHJheVRlc3QoZnJvbSwgdG8sIHJlc3VsdCkge1xuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSYXljYXN0UmVzdWx0KSB7XG4gICAgICAvLyBEbyByYXljYXN0Q2xvc2VzdFxuICAgICAgdGhpcy5yYXljYXN0Q2xvc2VzdChmcm9tLCB0bywge1xuICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlXG4gICAgICB9LCByZXN1bHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEbyByYXljYXN0QWxsXG4gICAgICB0aGlzLnJheWNhc3RBbGwoZnJvbSwgdG8sIHtcbiAgICAgICAgc2tpcEJhY2tmYWNlczogdHJ1ZVxuICAgICAgfSwgcmVzdWx0KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJheSBjYXN0IGFnYWluc3QgYWxsIGJvZGllcy4gVGhlIHByb3ZpZGVkIGNhbGxiYWNrIHdpbGwgYmUgZXhlY3V0ZWQgZm9yIGVhY2ggaGl0IHdpdGggYSBSYXljYXN0UmVzdWx0IGFzIHNpbmdsZSBhcmd1bWVudC5cbiAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuXG4gICAqL1xuXG5cbiAgcmF5Y2FzdEFsbChmcm9tLCB0bywgb3B0aW9ucyA9IHt9LCBjYWxsYmFjaykge1xuICAgIG9wdGlvbnMubW9kZSA9IFJheS5BTEw7XG4gICAgb3B0aW9ucy5mcm9tID0gZnJvbTtcbiAgICBvcHRpb25zLnRvID0gdG87XG4gICAgb3B0aW9ucy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIFJheSBjYXN0LCBhbmQgc3RvcCBhdCB0aGUgZmlyc3QgcmVzdWx0LiBOb3RlIHRoYXQgdGhlIG9yZGVyIGlzIHJhbmRvbSAtIGJ1dCB0aGUgbWV0aG9kIGlzIGZhc3QuXG4gICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LlxuICAgKi9cblxuXG4gIHJheWNhc3RBbnkoZnJvbSwgdG8sIG9wdGlvbnMgPSB7fSwgcmVzdWx0KSB7XG4gICAgb3B0aW9ucy5tb2RlID0gUmF5LkFOWTtcbiAgICBvcHRpb25zLmZyb20gPSBmcm9tO1xuICAgIG9wdGlvbnMudG8gPSB0bztcbiAgICBvcHRpb25zLnJlc3VsdCA9IHJlc3VsdDtcbiAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBSYXkgY2FzdCwgYW5kIHJldHVybiBpbmZvcm1hdGlvbiBvZiB0aGUgY2xvc2VzdCBoaXQuXG4gICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LlxuICAgKi9cblxuXG4gIHJheWNhc3RDbG9zZXN0KGZyb20sIHRvLCBvcHRpb25zID0ge30sIHJlc3VsdCkge1xuICAgIG9wdGlvbnMubW9kZSA9IFJheS5DTE9TRVNUO1xuICAgIG9wdGlvbnMuZnJvbSA9IGZyb207XG4gICAgb3B0aW9ucy50byA9IHRvO1xuICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0O1xuICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHJpZ2lkIGJvZHkgdG8gdGhlIHNpbXVsYXRpb24uXG4gICAqIEB0b2RvIElmIHRoZSBzaW11bGF0aW9uIGhhcyBub3QgeWV0IHN0YXJ0ZWQsIHdoeSByZWNyZXRlIGFuZCBjb3B5IGFycmF5cyBmb3IgZWFjaCBib2R5PyBBY2N1bXVsYXRlIGluIGR5bmFtaWMgYXJyYXlzIGluIHRoaXMgY2FzZS5cbiAgICogQHRvZG8gQWRkaW5nIGFuIGFycmF5IG9mIGJvZGllcyBzaG91bGQgYmUgcG9zc2libGUuIFRoaXMgd291bGQgc2F2ZSBzb21lIGxvb3BzIHRvb1xuICAgKi9cblxuXG4gIGFkZEJvZHkoYm9keSkge1xuICAgIGlmICh0aGlzLmJvZGllcy5pbmNsdWRlcyhib2R5KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGJvZHkuaW5kZXggPSB0aGlzLmJvZGllcy5sZW5ndGg7XG4gICAgdGhpcy5ib2RpZXMucHVzaChib2R5KTtcbiAgICBib2R5LndvcmxkID0gdGhpcztcbiAgICBib2R5LmluaXRQb3NpdGlvbi5jb3B5KGJvZHkucG9zaXRpb24pO1xuICAgIGJvZHkuaW5pdFZlbG9jaXR5LmNvcHkoYm9keS52ZWxvY2l0eSk7XG4gICAgYm9keS50aW1lTGFzdFNsZWVweSA9IHRoaXMudGltZTtcblxuICAgIGlmIChib2R5IGluc3RhbmNlb2YgQm9keSkge1xuICAgICAgYm9keS5pbml0QW5ndWxhclZlbG9jaXR5LmNvcHkoYm9keS5hbmd1bGFyVmVsb2NpdHkpO1xuICAgICAgYm9keS5pbml0UXVhdGVybmlvbi5jb3B5KGJvZHkucXVhdGVybmlvbik7XG4gICAgfVxuXG4gICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0TnVtT2JqZWN0cyh0aGlzLmJvZGllcy5sZW5ndGgpO1xuICAgIHRoaXMuYWRkQm9keUV2ZW50LmJvZHkgPSBib2R5O1xuICAgIHRoaXMuaWRUb0JvZHlNYXBbYm9keS5pZF0gPSBib2R5O1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLmFkZEJvZHlFdmVudCk7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBhIHJpZ2lkIGJvZHkgZnJvbSB0aGUgc2ltdWxhdGlvbi5cbiAgICovXG5cblxuICByZW1vdmVCb2R5KGJvZHkpIHtcbiAgICBib2R5LndvcmxkID0gbnVsbDtcbiAgICBjb25zdCBuID0gdGhpcy5ib2RpZXMubGVuZ3RoIC0gMTtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllcztcbiAgICBjb25zdCBpZHggPSBib2RpZXMuaW5kZXhPZihib2R5KTtcblxuICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICBib2RpZXMuc3BsaWNlKGlkeCwgMSk7IC8vIFRvZG86IHNob3VsZCB1c2UgYSBnYXJiYWdlIGZyZWUgbWV0aG9kXG4gICAgICAvLyBSZWNvbXB1dGUgaW5kZXhcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBib2RpZXNbaV0uaW5kZXggPSBpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXROdW1PYmplY3RzKG4pO1xuICAgICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQuYm9keSA9IGJvZHk7XG4gICAgICBkZWxldGUgdGhpcy5pZFRvQm9keU1hcFtib2R5LmlkXTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLnJlbW92ZUJvZHlFdmVudCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Qm9keUJ5SWQoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5pZFRvQm9keU1hcFtpZF07XG4gIH1cbiAgLyoqXG4gICAqIEB0b2RvIE1ha2UgYSBmYXN0ZXIgbWFwXG4gICAqL1xuXG5cbiAgZ2V0U2hhcGVCeUlkKGlkKSB7XG4gICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgc2hhcGVzID0gYm9kaWVzW2ldLnNoYXBlcztcblxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaGFwZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbal07XG5cbiAgICAgICAgaWYgKHNoYXBlLmlkID09PSBpZCkge1xuICAgICAgICAgIHJldHVybiBzaGFwZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBBZGRzIGEgbWF0ZXJpYWwgdG8gdGhlIFdvcmxkLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBAdG9kbyBSZW1vdmVcbiAgICovXG5cblxuICBhZGRNYXRlcmlhbChtKSB7XG4gICAgdGhpcy5tYXRlcmlhbHMucHVzaChtKTtcbiAgfVxuICAvKipcbiAgICogQWRkcyBhIGNvbnRhY3QgbWF0ZXJpYWwgdG8gdGhlIFdvcmxkXG4gICAqL1xuXG5cbiAgYWRkQ29udGFjdE1hdGVyaWFsKGNtYXQpIHtcbiAgICAvLyBBZGQgY29udGFjdCBtYXRlcmlhbFxuICAgIHRoaXMuY29udGFjdG1hdGVyaWFscy5wdXNoKGNtYXQpOyAvLyBBZGQgY3VycmVudCBjb250YWN0IG1hdGVyaWFsIHRvIHRoZSBtYXRlcmlhbCB0YWJsZVxuXG4gICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5zZXQoY21hdC5tYXRlcmlhbHNbMF0uaWQsIGNtYXQubWF0ZXJpYWxzWzFdLmlkLCBjbWF0KTtcbiAgfVxuICAvKipcbiAgICogU3RlcCB0aGUgcGh5c2ljcyB3b3JsZCBmb3J3YXJkIGluIHRpbWUuXG4gICAqXG4gICAqIFRoZXJlIGFyZSB0d28gbW9kZXMuIFRoZSBzaW1wbGUgbW9kZSBpcyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uLiBJbiB0aGlzIGNhc2UgeW91IG9ubHkgdXNlIHRoZSBmaXJzdCBhcmd1bWVudC4gVGhlIHNlY29uZCBjYXNlIHVzZXMgaW50ZXJwb2xhdGlvbi4gSW4gdGhhdCB5b3UgYWxzbyBwcm92aWRlIHRoZSB0aW1lIHNpbmNlIHRoZSBmdW5jdGlvbiB3YXMgbGFzdCB1c2VkLCBhcyB3ZWxsIGFzIHRoZSBtYXhpbXVtIGZpeGVkIHRpbWVzdGVwcyB0byB0YWtlLlxuICAgKlxuICAgKiBAcGFyYW0gZHQgVGhlIGZpeGVkIHRpbWUgc3RlcCBzaXplIHRvIHVzZS5cbiAgICogQHBhcmFtIHRpbWVTaW5jZUxhc3RDYWxsZWQgVGhlIHRpbWUgZWxhcHNlZCBzaW5jZSB0aGUgZnVuY3Rpb24gd2FzIGxhc3QgY2FsbGVkLlxuICAgKiBAcGFyYW0gbWF4U3ViU3RlcHMgTWF4aW11bSBudW1iZXIgb2YgZml4ZWQgc3RlcHMgdG8gdGFrZSBwZXIgZnVuY3Rpb24gY2FsbC5cbiAgICogQHNlZSBodHRwczovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxODA0MjYxNTQ1MzEvaHR0cDovL2J1bGxldHBoeXNpY3Mub3JnL21lZGlhd2lraS0xLjUuOC9pbmRleC5waHAvU3RlcHBpbmdfVGhlX1dvcmxkI1doYXRfZG9fdGhlX3BhcmFtZXRlcnNfdG9fYnREeW5hbWljc1dvcmxkOjpzdGVwU2ltdWxhdGlvbl9tZWFuLjNGXG4gICAqIEBleGFtcGxlXG4gICAqICAgICAvLyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uXG4gICAqICAgICB3b3JsZC5zdGVwKDEgLyA2MClcbiAgICovXG5cblxuICBzdGVwKGR0LCB0aW1lU2luY2VMYXN0Q2FsbGVkLCBtYXhTdWJTdGVwcyA9IDEwKSB7XG4gICAgaWYgKHRpbWVTaW5jZUxhc3RDYWxsZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gRml4ZWQsIHNpbXBsZSBzdGVwcGluZ1xuICAgICAgdGhpcy5pbnRlcm5hbFN0ZXAoZHQpOyAvLyBJbmNyZW1lbnQgdGltZVxuXG4gICAgICB0aGlzLnRpbWUgKz0gZHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWNjdW11bGF0b3IgKz0gdGltZVNpbmNlTGFzdENhbGxlZDtcbiAgICAgIGNvbnN0IHQwID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBsZXQgc3Vic3RlcHMgPSAwO1xuXG4gICAgICB3aGlsZSAodGhpcy5hY2N1bXVsYXRvciA+PSBkdCAmJiBzdWJzdGVwcyA8IG1heFN1YlN0ZXBzKSB7XG4gICAgICAgIC8vIERvIGZpeGVkIHN0ZXBzIHRvIGNhdGNoIHVwXG4gICAgICAgIHRoaXMuaW50ZXJuYWxTdGVwKGR0KTtcbiAgICAgICAgdGhpcy5hY2N1bXVsYXRvciAtPSBkdDtcbiAgICAgICAgc3Vic3RlcHMrKztcblxuICAgICAgICBpZiAocGVyZm9ybWFuY2Uubm93KCkgLSB0MCA+IGR0ICogMTAwMCkge1xuICAgICAgICAgIC8vIFRoZSBmcmFtZXJhdGUgaXMgbm90IGludGVyYWN0aXZlIGFueW1vcmUuXG4gICAgICAgICAgLy8gV2UgYXJlIGJlbG93IHRoZSB0YXJnZXQgZnJhbWVyYXRlLlxuICAgICAgICAgIC8vIEJldHRlciBiYWlsIG91dC5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSAvLyBSZW1vdmUgdGhlIGV4Y2VzcyBhY2N1bXVsYXRvciwgc2luY2Ugd2UgbWF5IG5vdFxuICAgICAgLy8gaGF2ZSBoYWQgZW5vdWdoIHN1YnN0ZXBzIGF2YWlsYWJsZSB0byBjYXRjaCB1cFxuXG5cbiAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSB0aGlzLmFjY3VtdWxhdG9yICUgZHQ7XG4gICAgICBjb25zdCB0ID0gdGhpcy5hY2N1bXVsYXRvciAvIGR0O1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gdGhpcy5ib2RpZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY29uc3QgYiA9IHRoaXMuYm9kaWVzW2pdO1xuICAgICAgICBiLnByZXZpb3VzUG9zaXRpb24ubGVycChiLnBvc2l0aW9uLCB0LCBiLmludGVycG9sYXRlZFBvc2l0aW9uKTtcbiAgICAgICAgYi5wcmV2aW91c1F1YXRlcm5pb24uc2xlcnAoYi5xdWF0ZXJuaW9uLCB0LCBiLmludGVycG9sYXRlZFF1YXRlcm5pb24pO1xuICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5ub3JtYWxpemUoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50aW1lICs9IHRpbWVTaW5jZUxhc3RDYWxsZWQ7XG4gICAgfVxuICB9XG5cbiAgaW50ZXJuYWxTdGVwKGR0KSB7XG4gICAgdGhpcy5kdCA9IGR0O1xuICAgIGNvbnN0IGNvbnRhY3RzID0gdGhpcy5jb250YWN0cztcbiAgICBjb25zdCBwMSA9IFdvcmxkX3N0ZXBfcDE7XG4gICAgY29uc3QgcDIgPSBXb3JsZF9zdGVwX3AyO1xuICAgIGNvbnN0IE4gPSB0aGlzLm51bU9iamVjdHMoKTtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllcztcbiAgICBjb25zdCBzb2x2ZXIgPSB0aGlzLnNvbHZlcjtcbiAgICBjb25zdCBncmF2aXR5ID0gdGhpcy5ncmF2aXR5O1xuICAgIGNvbnN0IGRvUHJvZmlsaW5nID0gdGhpcy5kb1Byb2ZpbGluZztcbiAgICBjb25zdCBwcm9maWxlID0gdGhpcy5wcm9maWxlO1xuICAgIGNvbnN0IERZTkFNSUMgPSBCb2R5LkRZTkFNSUM7XG4gICAgbGV0IHByb2ZpbGluZ1N0YXJ0ID0gLUluZmluaXR5O1xuICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gdGhpcy5jb25zdHJhaW50cztcbiAgICBjb25zdCBmcmljdGlvbkVxdWF0aW9uUG9vbCA9IFdvcmxkX3N0ZXBfZnJpY3Rpb25FcXVhdGlvblBvb2w7XG4gICAgZ3Jhdml0eS5sZW5ndGgoKTtcbiAgICBjb25zdCBneCA9IGdyYXZpdHkueDtcbiAgICBjb25zdCBneSA9IGdyYXZpdHkueTtcbiAgICBjb25zdCBneiA9IGdyYXZpdHkuejtcbiAgICBsZXQgaSA9IDA7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfSAvLyBBZGQgZ3Jhdml0eSB0byBhbGwgb2JqZWN0c1xuXG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldO1xuXG4gICAgICBpZiAoYmkudHlwZSA9PT0gRFlOQU1JQykge1xuICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllc1xuICAgICAgICBjb25zdCBmID0gYmkuZm9yY2U7XG4gICAgICAgIGNvbnN0IG0gPSBiaS5tYXNzO1xuICAgICAgICBmLnggKz0gbSAqIGd4O1xuICAgICAgICBmLnkgKz0gbSAqIGd5O1xuICAgICAgICBmLnogKz0gbSAqIGd6O1xuICAgICAgfVxuICAgIH0gLy8gVXBkYXRlIHN1YnN5c3RlbXNcblxuXG4gICAgZm9yIChsZXQgaSA9IDAsIE5zdWJzeXN0ZW1zID0gdGhpcy5zdWJzeXN0ZW1zLmxlbmd0aDsgaSAhPT0gTnN1YnN5c3RlbXM7IGkrKykge1xuICAgICAgdGhpcy5zdWJzeXN0ZW1zW2ldLnVwZGF0ZSgpO1xuICAgIH0gLy8gQ29sbGlzaW9uIGRldGVjdGlvblxuXG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfVxuXG4gICAgcDEubGVuZ3RoID0gMDsgLy8gQ2xlYW4gdXAgcGFpciBhcnJheXMgZnJvbSBsYXN0IHN0ZXBcblxuICAgIHAyLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5icm9hZHBoYXNlLmNvbGxpc2lvblBhaXJzKHRoaXMsIHAxLCBwMik7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGUuYnJvYWRwaGFzZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7XG4gICAgfSAvLyBSZW1vdmUgY29uc3RyYWluZWQgcGFpcnMgd2l0aCBjb2xsaWRlQ29ubmVjdGVkID09IGZhbHNlXG5cblxuICAgIGxldCBOY29uc3RyYWludHMgPSBjb25zdHJhaW50cy5sZW5ndGg7XG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOY29uc3RyYWludHM7IGkrKykge1xuICAgICAgY29uc3QgYyA9IGNvbnN0cmFpbnRzW2ldO1xuXG4gICAgICBpZiAoIWMuY29sbGlkZUNvbm5lY3RlZCkge1xuICAgICAgICBmb3IgKGxldCBqID0gcDEubGVuZ3RoIC0gMTsgaiA+PSAwOyBqIC09IDEpIHtcbiAgICAgICAgICBpZiAoYy5ib2R5QSA9PT0gcDFbal0gJiYgYy5ib2R5QiA9PT0gcDJbal0gfHwgYy5ib2R5QiA9PT0gcDFbal0gJiYgYy5ib2R5QSA9PT0gcDJbal0pIHtcbiAgICAgICAgICAgIHAxLnNwbGljZShqLCAxKTtcbiAgICAgICAgICAgIHAyLnNwbGljZShqLCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFRpY2soKTsgLy8gR2VuZXJhdGUgY29udGFjdHNcblxuICAgIGlmIChkb1Byb2ZpbGluZykge1xuICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRjb250YWN0cyA9IFdvcmxkX3N0ZXBfb2xkQ29udGFjdHM7XG4gICAgY29uc3QgTm9sZENvbnRhY3RzID0gY29udGFjdHMubGVuZ3RoO1xuXG4gICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZENvbnRhY3RzOyBpKyspIHtcbiAgICAgIG9sZGNvbnRhY3RzLnB1c2goY29udGFjdHNbaV0pO1xuICAgIH1cblxuICAgIGNvbnRhY3RzLmxlbmd0aCA9IDA7IC8vIFRyYW5zZmVyIEZyaWN0aW9uRXF1YXRpb24gZnJvbSBjdXJyZW50IGxpc3QgdG8gdGhlIHBvb2wgZm9yIHJldXNlXG5cbiAgICBjb25zdCBOb2xkRnJpY3Rpb25FcXVhdGlvbnMgPSB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE5vbGRGcmljdGlvbkVxdWF0aW9uczsgaSsrKSB7XG4gICAgICBmcmljdGlvbkVxdWF0aW9uUG9vbC5wdXNoKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pO1xuICAgIH1cblxuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoID0gMDtcbiAgICB0aGlzLm5hcnJvd3BoYXNlLmdldENvbnRhY3RzKHAxLCBwMiwgdGhpcywgY29udGFjdHMsIG9sZGNvbnRhY3RzLCAvLyBUbyBiZSByZXVzZWRcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLCBmcmljdGlvbkVxdWF0aW9uUG9vbCk7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGUubmFycm93cGhhc2UgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0O1xuICAgIH0gLy8gTG9vcCBvdmVyIGFsbCBjb2xsaXNpb25zXG5cblxuICAgIGlmIChkb1Byb2ZpbGluZykge1xuICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB9IC8vIEFkZCBhbGwgZnJpY3Rpb24gZXFzXG5cblxuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzb2x2ZXIuYWRkRXF1YXRpb24odGhpcy5mcmljdGlvbkVxdWF0aW9uc1tpXSk7XG4gICAgfVxuXG4gICAgY29uc3QgbmNvbnRhY3RzID0gY29udGFjdHMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgayA9IDA7IGsgIT09IG5jb250YWN0czsgaysrKSB7XG4gICAgICAvLyBDdXJyZW50IGNvbnRhY3RcbiAgICAgIGNvbnN0IGMgPSBjb250YWN0c1trXTsgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGluZGVjZXNcblxuICAgICAgY29uc3QgYmkgPSBjLmJpO1xuICAgICAgY29uc3QgYmogPSBjLmJqO1xuICAgICAgY29uc3Qgc2kgPSBjLnNpO1xuICAgICAgY29uc3Qgc2ogPSBjLnNqOyAvLyBHZXQgY29sbGlzaW9uIHByb3BlcnRpZXNcblxuICAgICAgbGV0IGNtO1xuXG4gICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHtcbiAgICAgICAgY20gPSB0aGlzLmdldENvbnRhY3RNYXRlcmlhbChiaS5tYXRlcmlhbCwgYmoubWF0ZXJpYWwpIHx8IHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNtID0gdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsO1xuICAgICAgfSAvLyBjLmVuYWJsZWQgPSBiaS5jb2xsaXNpb25SZXNwb25zZSAmJiBiai5jb2xsaXNpb25SZXNwb25zZSAmJiBzaS5jb2xsaXNpb25SZXNwb25zZSAmJiBzai5jb2xsaXNpb25SZXNwb25zZTtcblxuXG4gICAgICBjbS5mcmljdGlvbjsgLy8gYy5yZXN0aXR1dGlvbiA9IGNtLnJlc3RpdHV0aW9uO1xuICAgICAgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbVxuXG4gICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHtcbiAgICAgICAgaWYgKGJpLm1hdGVyaWFsLmZyaWN0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCkge1xuICAgICAgICAgIGJpLm1hdGVyaWFsLmZyaWN0aW9uICogYmoubWF0ZXJpYWwuZnJpY3Rpb247XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYmkubWF0ZXJpYWwucmVzdGl0dXRpb24gPj0gMCAmJiBiai5tYXRlcmlhbC5yZXN0aXR1dGlvbiA+PSAwKSB7XG4gICAgICAgICAgYy5yZXN0aXR1dGlvbiA9IGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uICogYmoubWF0ZXJpYWwucmVzdGl0dXRpb247XG4gICAgICAgIH1cbiAgICAgIH0gLy8gYy5zZXRTcG9va1BhcmFtcyhcbiAgICAgIC8vICAgICAgICAgICBjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsXG4gICAgICAvLyAgICAgICAgICAgY20uY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbixcbiAgICAgIC8vICAgICAgICAgICBkdFxuICAgICAgLy8gICAgICAgKTtcblxuXG4gICAgICBzb2x2ZXIuYWRkRXF1YXRpb24oYyk7IC8vIC8vIEFkZCBmcmljdGlvbiBjb25zdHJhaW50IGVxdWF0aW9uXG4gICAgICAvLyBpZihtdSA+IDApe1xuICAgICAgLy8gXHQvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9uc1xuICAgICAgLy8gXHRjb25zdCBtdWcgPSBtdSAqIGdub3JtO1xuICAgICAgLy8gXHRjb25zdCByZWR1Y2VkTWFzcyA9IChiaS5pbnZNYXNzICsgYmouaW52TWFzcyk7XG4gICAgICAvLyBcdGlmKHJlZHVjZWRNYXNzID4gMCl7XG4gICAgICAvLyBcdFx0cmVkdWNlZE1hc3MgPSAxL3JlZHVjZWRNYXNzO1xuICAgICAgLy8gXHR9XG4gICAgICAvLyBcdGNvbnN0IHBvb2wgPSBmcmljdGlvbkVxdWF0aW9uUG9vbDtcbiAgICAgIC8vIFx0Y29uc3QgYzEgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihiaSxiaixtdWcqcmVkdWNlZE1hc3MpO1xuICAgICAgLy8gXHRjb25zdCBjMiA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJpLGJqLG11ZypyZWR1Y2VkTWFzcyk7XG4gICAgICAvLyBcdHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMucHVzaChjMSwgYzIpO1xuICAgICAgLy8gXHRjMS5iaSA9IGMyLmJpID0gYmk7XG4gICAgICAvLyBcdGMxLmJqID0gYzIuYmogPSBiajtcbiAgICAgIC8vIFx0YzEubWluRm9yY2UgPSBjMi5taW5Gb3JjZSA9IC1tdWcqcmVkdWNlZE1hc3M7XG4gICAgICAvLyBcdGMxLm1heEZvcmNlID0gYzIubWF4Rm9yY2UgPSBtdWcqcmVkdWNlZE1hc3M7XG4gICAgICAvLyBcdC8vIENvcHkgb3ZlciB0aGUgcmVsYXRpdmUgdmVjdG9yc1xuICAgICAgLy8gXHRjMS5yaS5jb3B5KGMucmkpO1xuICAgICAgLy8gXHRjMS5yai5jb3B5KGMucmopO1xuICAgICAgLy8gXHRjMi5yaS5jb3B5KGMucmkpO1xuICAgICAgLy8gXHRjMi5yai5jb3B5KGMucmopO1xuICAgICAgLy8gXHQvLyBDb25zdHJ1Y3QgdGFuZ2VudHNcbiAgICAgIC8vIFx0Yy5uaS50YW5nZW50cyhjMS50LCBjMi50KTtcbiAgICAgIC8vICAgICAgICAgICAvLyBTZXQgc3Bvb2sgcGFyYW1zXG4gICAgICAvLyAgICAgICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIGR0KTtcbiAgICAgIC8vICAgICAgICAgICBjMi5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgZHQpO1xuICAgICAgLy8gICAgICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gYy5lbmFibGVkO1xuICAgICAgLy8gXHQvLyBBZGQgZXF1YXRpb25zIHRvIHNvbHZlclxuICAgICAgLy8gXHRzb2x2ZXIuYWRkRXF1YXRpb24oYzEpO1xuICAgICAgLy8gXHRzb2x2ZXIuYWRkRXF1YXRpb24oYzIpO1xuICAgICAgLy8gfVxuXG4gICAgICBpZiAoYmkuYWxsb3dTbGVlcCAmJiBiaS50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiai5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJqLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7XG4gICAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZEIgPSBiai52ZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCkgKyBiai5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpO1xuICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEIgPSBiai5zbGVlcFNwZWVkTGltaXQgKiogMjtcblxuICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQiA+PSBzcGVlZExpbWl0U3F1YXJlZEIgKiAyKSB7XG4gICAgICAgICAgYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGJqLmFsbG93U2xlZXAgJiYgYmoudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJqLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiaS50eXBlICE9PSBCb2R5LlNUQVRJQykge1xuICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWRBID0gYmkudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgYmkuYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTtcbiAgICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWRBID0gYmkuc2xlZXBTcGVlZExpbWl0ICoqIDI7XG5cbiAgICAgICAgaWYgKHNwZWVkU3F1YXJlZEEgPj0gc3BlZWRMaW1pdFNxdWFyZWRBICogMikge1xuICAgICAgICAgIGJqLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IC8vIE5vdyB3ZSBrbm93IHRoYXQgaSBhbmQgaiBhcmUgaW4gY29udGFjdC4gU2V0IGNvbGxpc2lvbiBtYXRyaXggc3RhdGVcblxuXG4gICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXQoYmksIGJqLCB0cnVlKTtcblxuICAgICAgaWYgKCF0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzLmdldChiaSwgYmopKSB7XG4gICAgICAgIC8vIEZpcnN0IGNvbnRhY3QhXG4gICAgICAgIC8vIFdlIHJldXNlIHRoZSBjb2xsaWRlRXZlbnQgb2JqZWN0LCBvdGhlcndpc2Ugd2Ugd2lsbCBlbmQgdXAgY3JlYXRpbmcgbmV3IG9iamVjdHMgZm9yIGVhY2ggbmV3IGNvbnRhY3QsIGV2ZW4gaWYgdGhlcmUncyBubyBldmVudCBsaXN0ZW5lciBhdHRhY2hlZC5cbiAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuYm9keSA9IGJqO1xuICAgICAgICBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudC5jb250YWN0ID0gYztcbiAgICAgICAgYmkuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCk7XG4gICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiaTtcbiAgICAgICAgYmouZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuc2V0KGJpLmlkLCBiai5pZCk7XG4gICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci5zZXQoc2kuaWQsIHNqLmlkKTtcbiAgICB9XG5cbiAgICB0aGlzLmVtaXRDb250YWN0RXZlbnRzKCk7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGUubWFrZUNvbnRhY3RDb25zdHJhaW50cyA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7XG4gICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH0gLy8gV2FrZSB1cCBib2RpZXNcblxuXG4gICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTtcblxuICAgICAgaWYgKGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UpIHtcbiAgICAgICAgYmkud2FrZVVwKCk7XG4gICAgICAgIGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IC8vIEFkZCB1c2VyLWFkZGVkIGNvbnN0cmFpbnRzXG5cblxuICAgIE5jb25zdHJhaW50cyA9IGNvbnN0cmFpbnRzLmxlbmd0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE5jb25zdHJhaW50czsgaSsrKSB7XG4gICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07XG4gICAgICBjLnVwZGF0ZSgpO1xuXG4gICAgICBmb3IgKGxldCBqID0gMCwgTmVxID0gYy5lcXVhdGlvbnMubGVuZ3RoOyBqICE9PSBOZXE7IGorKykge1xuICAgICAgICBjb25zdCBlcSA9IGMuZXF1YXRpb25zW2pdO1xuICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24oZXEpO1xuICAgICAgfVxuICAgIH0gLy8gU29sdmUgdGhlIGNvbnN0cmFpbmVkIHN5c3RlbVxuXG5cbiAgICBzb2x2ZXIuc29sdmUoZHQsIHRoaXMpO1xuXG4gICAgaWYgKGRvUHJvZmlsaW5nKSB7XG4gICAgICBwcm9maWxlLnNvbHZlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDtcbiAgICB9IC8vIFJlbW92ZSBhbGwgY29udGFjdHMgZnJvbSBzb2x2ZXJcblxuXG4gICAgc29sdmVyLnJlbW92ZUFsbEVxdWF0aW9ucygpOyAvLyBBcHBseSBkYW1waW5nLCBzZWUgaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2J1bGxldC9pc3N1ZXMvZGV0YWlsP2lkPTc0IGZvciBkZXRhaWxzXG5cbiAgICBjb25zdCBwb3cgPSBNYXRoLnBvdztcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07XG5cbiAgICAgIGlmIChiaS50eXBlICYgRFlOQU1JQykge1xuICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllc1xuICAgICAgICBjb25zdCBsZCA9IHBvdygxLjAgLSBiaS5saW5lYXJEYW1waW5nLCBkdCk7XG4gICAgICAgIGNvbnN0IHYgPSBiaS52ZWxvY2l0eTtcbiAgICAgICAgdi5zY2FsZShsZCwgdik7XG4gICAgICAgIGNvbnN0IGF2ID0gYmkuYW5ndWxhclZlbG9jaXR5O1xuXG4gICAgICAgIGlmIChhdikge1xuICAgICAgICAgIGNvbnN0IGFkID0gcG93KDEuMCAtIGJpLmFuZ3VsYXJEYW1waW5nLCBkdCk7XG4gICAgICAgICAgYXYuc2NhbGUoYWQsIGF2KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCk7IC8vIEludm9rZSBwcmUtc3RlcCBjYWxsYmFja3NcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07XG5cbiAgICAgIGlmIChiaS5wcmVTdGVwKSB7XG4gICAgICAgIGJpLnByZVN0ZXAuY2FsbChiaSk7XG4gICAgICB9XG4gICAgfSAvLyBMZWFwIGZyb2dcbiAgICAvLyB2bmV3ID0gdiArIGgqZi9tXG4gICAgLy8geG5ldyA9IHggKyBoKnZuZXdcblxuXG4gICAgaWYgKGRvUHJvZmlsaW5nKSB7XG4gICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0ZXBudW1iZXIgPSB0aGlzLnN0ZXBudW1iZXI7XG4gICAgY29uc3QgcXVhdE5vcm1hbGl6ZSA9IHN0ZXBudW1iZXIgJSAodGhpcy5xdWF0Tm9ybWFsaXplU2tpcCArIDEpID09PSAwO1xuICAgIGNvbnN0IHF1YXROb3JtYWxpemVGYXN0ID0gdGhpcy5xdWF0Tm9ybWFsaXplRmFzdDtcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgYm9kaWVzW2ldLmludGVncmF0ZShkdCwgcXVhdE5vcm1hbGl6ZSwgcXVhdE5vcm1hbGl6ZUZhc3QpO1xuICAgIH1cblxuICAgIHRoaXMuY2xlYXJGb3JjZXMoKTtcbiAgICB0aGlzLmJyb2FkcGhhc2UuZGlydHkgPSB0cnVlO1xuXG4gICAgaWYgKGRvUHJvZmlsaW5nKSB7XG4gICAgICBwcm9maWxlLmludGVncmF0ZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7XG4gICAgfSAvLyBVcGRhdGUgc3RlcCBudW1iZXJcblxuXG4gICAgdGhpcy5zdGVwbnVtYmVyICs9IDE7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCk7IC8vIEludm9rZSBwb3N0LXN0ZXAgY2FsbGJhY2tzXG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldO1xuICAgICAgY29uc3QgcG9zdFN0ZXAgPSBiaS5wb3N0U3RlcDtcblxuICAgICAgaWYgKHBvc3RTdGVwKSB7XG4gICAgICAgIHBvc3RTdGVwLmNhbGwoYmkpO1xuICAgICAgfVxuICAgIH0gLy8gU2xlZXBpbmcgdXBkYXRlXG5cblxuICAgIGxldCBoYXNBY3RpdmVCb2RpZXMgPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMuYWxsb3dTbGVlcCkge1xuICAgICAgaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTtcbiAgICAgICAgYmkuc2xlZXBUaWNrKHRoaXMudGltZSk7XG5cbiAgICAgICAgaWYgKGJpLnNsZWVwU3RhdGUgIT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSBoYXNBY3RpdmVCb2RpZXM7XG4gIH1cblxuICBlbWl0Q29udGFjdEV2ZW50cygpIHtcbiAgICBjb25zdCBoYXNCZWdpbkNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2JlZ2luQ29udGFjdCcpO1xuICAgIGNvbnN0IGhhc0VuZENvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnKTtcblxuICAgIGlmIChoYXNCZWdpbkNvbnRhY3QgfHwgaGFzRW5kQ29udGFjdCkge1xuICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5nZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpO1xuICAgIH1cblxuICAgIGlmIChoYXNCZWdpbkNvbnRhY3QpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWRkaXRpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikge1xuICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2ldKTtcbiAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUIgPSB0aGlzLmdldEJvZHlCeUlkKGFkZGl0aW9uc1tpICsgMV0pO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5Db250YWN0RXZlbnQpO1xuICAgICAgfVxuXG4gICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luQ29udGFjdEV2ZW50LmJvZHlCID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoaGFzRW5kQ29udGFjdCkge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHtcbiAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlBID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpXSk7XG4gICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QiA9IHRoaXMuZ2V0Qm9keUJ5SWQocmVtb3ZhbHNbaSArIDFdKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGVuZENvbnRhY3RFdmVudCk7XG4gICAgICB9XG5cbiAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IGVuZENvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7XG4gICAgfVxuXG4gICAgYWRkaXRpb25zLmxlbmd0aCA9IHJlbW92YWxzLmxlbmd0aCA9IDA7XG4gICAgY29uc3QgaGFzQmVnaW5TaGFwZUNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2JlZ2luU2hhcGVDb250YWN0Jyk7XG4gICAgY29uc3QgaGFzRW5kU2hhcGVDb250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdlbmRTaGFwZUNvbnRhY3QnKTtcblxuICAgIGlmIChoYXNCZWdpblNoYXBlQ29udGFjdCB8fCBoYXNFbmRTaGFwZUNvbnRhY3QpIHtcbiAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyLmdldERpZmYoYWRkaXRpb25zLCByZW1vdmFscyk7XG4gICAgfVxuXG4gICAgaWYgKGhhc0JlZ2luU2hhcGVDb250YWN0KSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFkZGl0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHtcbiAgICAgICAgY29uc3Qgc2hhcGVBID0gdGhpcy5nZXRTaGFwZUJ5SWQoYWRkaXRpb25zW2ldKTtcbiAgICAgICAgY29uc3Qgc2hhcGVCID0gdGhpcy5nZXRTaGFwZUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7XG4gICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBO1xuICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQiA9IHNoYXBlQjtcbiAgICAgICAgaWYgKHNoYXBlQSkgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5O1xuICAgICAgICBpZiAoc2hhcGVCKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChiZWdpblNoYXBlQ29udGFjdEV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoaGFzRW5kU2hhcGVDb250YWN0KSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHJlbW92YWxzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikge1xuICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpXSk7XG4gICAgICAgIGNvbnN0IHNoYXBlQiA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2kgKyAxXSk7XG4gICAgICAgIGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IHNoYXBlQTtcbiAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCO1xuICAgICAgICBpZiAoc2hhcGVBKSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5O1xuICAgICAgICBpZiAoc2hhcGVCKSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IHNoYXBlQi5ib2R5O1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kU2hhcGVDb250YWN0RXZlbnQpO1xuICAgICAgfVxuXG4gICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNldHMgYWxsIGJvZHkgZm9yY2VzIGluIHRoZSB3b3JsZCB0byB6ZXJvLlxuICAgKi9cblxuXG4gIGNsZWFyRm9yY2VzKCkge1xuICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzO1xuICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTtcbiAgICAgIGIuZm9yY2U7XG4gICAgICBiLnRvcnF1ZTtcbiAgICAgIGIuZm9yY2Uuc2V0KDAsIDAsIDApO1xuICAgICAgYi50b3JxdWUuc2V0KDAsIDAsIDApO1xuICAgIH1cbiAgfVxuXG59IC8vIFRlbXAgc3R1ZmZcblxubmV3IEFBQkIoKTtcbmNvbnN0IHRtcFJheSA9IG5ldyBSYXkoKTsgLy8gcGVyZm9ybWFuY2Uubm93KCkgZmFsbGJhY2sgb24gRGF0ZS5ub3coKVxuXG5jb25zdCBwZXJmb3JtYW5jZSA9IGdsb2JhbFRoaXMucGVyZm9ybWFuY2UgfHwge307XG5cbmlmICghcGVyZm9ybWFuY2Uubm93KSB7XG4gIGxldCBub3dPZmZzZXQgPSBEYXRlLm5vdygpO1xuXG4gIGlmIChwZXJmb3JtYW5jZS50aW1pbmcgJiYgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCkge1xuICAgIG5vd09mZnNldCA9IHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQ7XG4gIH1cblxuICBwZXJmb3JtYW5jZS5ub3cgPSAoKSA9PiBEYXRlLm5vdygpIC0gbm93T2Zmc2V0O1xufVxuLy8gUmV1c2FibGUgZXZlbnQgb2JqZWN0cyB0byBzYXZlIG1lbW9yeS5cblxuY29uc3QgV29ybGRfc3RlcF9wb3N0U3RlcEV2ZW50ID0ge1xuICB0eXBlOiAncG9zdFN0ZXAnXG59OyAvLyBEaXNwYXRjaGVkIGJlZm9yZSB0aGUgd29ybGQgc3RlcHMgZm9yd2FyZCBpbiB0aW1lLlxuXG5jb25zdCBXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCA9IHtcbiAgdHlwZTogJ3ByZVN0ZXAnXG59O1xuY29uc3QgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQgPSB7XG4gIHR5cGU6IEJvZHkuQ09MTElERV9FVkVOVF9OQU1FLFxuICBib2R5OiBudWxsLFxuICBjb250YWN0OiBudWxsXG59OyAvLyBQb29scyBmb3IgdW51c2VkIG9iamVjdHNcblxuY29uc3QgV29ybGRfc3RlcF9vbGRDb250YWN0cyA9IFtdO1xuY29uc3QgV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbCA9IFtdOyAvLyBSZXVzYWJsZSBhcnJheXMgZm9yIGNvbGxpc2lvbiBwYWlyc1xuXG5jb25zdCBXb3JsZF9zdGVwX3AxID0gW107XG5jb25zdCBXb3JsZF9zdGVwX3AyID0gW107IC8vIFN0dWZmIGZvciBlbWl0Q29udGFjdEV2ZW50c1xuXG5jb25zdCBhZGRpdGlvbnMgPSBbXTtcbmNvbnN0IHJlbW92YWxzID0gW107XG5jb25zdCBiZWdpbkNvbnRhY3RFdmVudCA9IHtcbiAgdHlwZTogJ2JlZ2luQ29udGFjdCcsXG4gIGJvZHlBOiBudWxsLFxuICBib2R5QjogbnVsbFxufTtcbmNvbnN0IGVuZENvbnRhY3RFdmVudCA9IHtcbiAgdHlwZTogJ2VuZENvbnRhY3QnLFxuICBib2R5QTogbnVsbCxcbiAgYm9keUI6IG51bGxcbn07XG5jb25zdCBiZWdpblNoYXBlQ29udGFjdEV2ZW50ID0ge1xuICB0eXBlOiAnYmVnaW5TaGFwZUNvbnRhY3QnLFxuICBib2R5QTogbnVsbCxcbiAgYm9keUI6IG51bGwsXG4gIHNoYXBlQTogbnVsbCxcbiAgc2hhcGVCOiBudWxsXG59O1xuY29uc3QgZW5kU2hhcGVDb250YWN0RXZlbnQgPSB7XG4gIHR5cGU6ICdlbmRTaGFwZUNvbnRhY3QnLFxuICBib2R5QTogbnVsbCxcbiAgYm9keUI6IG51bGwsXG4gIHNoYXBlQTogbnVsbCxcbiAgc2hhcGVCOiBudWxsXG59O1xuXG5leHBvcnQgeyBBQUJCLCBBcnJheUNvbGxpc2lvbk1hdHJpeCwgQk9EWV9TTEVFUF9TVEFURVMsIEJPRFlfVFlQRVMsIEJvZHksIEJveCwgQnJvYWRwaGFzZSwgQ09MTElTSU9OX1RZUEVTLCBDb25lVHdpc3RDb25zdHJhaW50LCBDb25zdHJhaW50LCBDb250YWN0RXF1YXRpb24sIENvbnRhY3RNYXRlcmlhbCwgQ29udmV4UG9seWhlZHJvbiwgQ3lsaW5kZXIsIERpc3RhbmNlQ29uc3RyYWludCwgRXF1YXRpb24sIEV2ZW50VGFyZ2V0LCBGcmljdGlvbkVxdWF0aW9uLCBHU1NvbHZlciwgR3JpZEJyb2FkcGhhc2UsIEhlaWdodGZpZWxkLCBIaW5nZUNvbnN0cmFpbnQsIEphY29iaWFuRWxlbWVudCwgTG9ja0NvbnN0cmFpbnQsIE1hdDMsIE1hdGVyaWFsLCBOYWl2ZUJyb2FkcGhhc2UsIE5hcnJvd3BoYXNlLCBPYmplY3RDb2xsaXNpb25NYXRyaXgsIFBhcnRpY2xlLCBQbGFuZSwgUG9pbnRUb1BvaW50Q29uc3RyYWludCwgUG9vbCwgUXVhdGVybmlvbiwgUkFZX01PREVTLCBSYXksIFJheWNhc3RSZXN1bHQsIFJheWNhc3RWZWhpY2xlLCBSaWdpZFZlaGljbGUsIFJvdGF0aW9uYWxFcXVhdGlvbiwgUm90YXRpb25hbE1vdG9yRXF1YXRpb24sIFNBUEJyb2FkcGhhc2UsIFNIQVBFX1RZUEVTLCBTUEhTeXN0ZW0sIFNoYXBlLCBTb2x2ZXIsIFNwaGVyZSwgU3BsaXRTb2x2ZXIsIFNwcmluZywgVHJhbnNmb3JtLCBUcmltZXNoLCBWZWMzLCBWZWMzUG9vbCwgV2hlZWxJbmZvLCBXb3JsZCB9O1xuIiwiaW1wb3J0IHtcbiAgQm9keSxcbiAgQm94LFxuICBDb252ZXhQb2x5aGVkcm9uLFxuICBDeWxpbmRlcixcbiAgSGVpZ2h0ZmllbGQsXG4gIE1hdGVyaWFsLFxuICBQYXJ0aWNsZSxcbiAgUGxhbmUsXG4gIFF1YXRlcm5pb24sXG4gIFNwaGVyZSxcbiAgVHJpbWVzaCxcbiAgVmVjMyxcbn0gZnJvbSAnY2Fubm9uLWVzJ1xuXG5jb25zdCBtYWtlVmVjMyA9IChbeCwgeSwgel0pID0+IG5ldyBWZWMzKHgsIHksIHopXG5jb25zdCBwcmVwYXJlU3BoZXJlID0gKGFyZ3MpID0+IChBcnJheS5pc0FycmF5KGFyZ3MpID8gYXJncyA6IFthcmdzXSlcbmNvbnN0IHByZXBhcmVDb252ZXhQb2x5aGVkcm9uID0gKFt2LCBmYWNlcywgbiwgYSwgYm91bmRpbmdTcGhlcmVSYWRpdXNdKSA9PiBbXG4gIHtcbiAgICB2ZXJ0aWNlczogdiA/IHYubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZCxcbiAgICBmYWNlcyxcbiAgICBub3JtYWxzOiBuID8gbi5tYXAobWFrZVZlYzMpIDogdW5kZWZpbmVkLFxuICAgIGF4ZXM6IGEgPyBhLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsXG4gICAgYm91bmRpbmdTcGhlcmVSYWRpdXMsXG4gIH0sXG5dXG5cbmZ1bmN0aW9uIGNyZWF0ZVNoYXBlKHR5cGUsIGFyZ3MpIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnQm94JzpcbiAgICAgIHJldHVybiBuZXcgQm94KG5ldyBWZWMzKC4uLmFyZ3MubWFwKCh2KSA9PiB2IC8gMikpKSAvLyBleHRlbnRzID0+IGhhbGZFeHRlbnRzXG4gICAgY2FzZSAnQ29udmV4UG9seWhlZHJvbic6XG4gICAgICByZXR1cm4gbmV3IENvbnZleFBvbHloZWRyb24oLi4ucHJlcGFyZUNvbnZleFBvbHloZWRyb24oYXJncykpXG4gICAgY2FzZSAnQ3lsaW5kZXInOlxuICAgICAgcmV0dXJuIG5ldyBDeWxpbmRlciguLi5hcmdzKSAvLyBbIHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzIF0gPSBhcmdzXG4gICAgY2FzZSAnSGVpZ2h0ZmllbGQnOlxuICAgICAgcmV0dXJuIG5ldyBIZWlnaHRmaWVsZCguLi5hcmdzKSAvLyBbIEFycmF5IGRhdGEsIG9wdGlvbnM6IHttaW5WYWx1ZSwgbWF4VmFsdWUsIGVsZW1lbnRTaXplfSAgXSA9IGFyZ3NcbiAgICBjYXNlICdQYXJ0aWNsZSc6XG4gICAgICByZXR1cm4gbmV3IFBhcnRpY2xlKCkgLy8gbm8gYXJnc1xuICAgIGNhc2UgJ1BsYW5lJzpcbiAgICAgIHJldHVybiBuZXcgUGxhbmUoKSAvLyBubyBhcmdzLCBpbmZpbml0ZSB4IGFuZCB5XG4gICAgY2FzZSAnU3BoZXJlJzpcbiAgICAgIHJldHVybiBuZXcgU3BoZXJlKC4uLnByZXBhcmVTcGhlcmUoYXJncykpIC8vIHJhZGl1cyA9IGFyZ3NcbiAgICBjYXNlICdUcmltZXNoJzpcbiAgICAgIHJldHVybiBuZXcgVHJpbWVzaCguLi5hcmdzKSAvLyBbdmVydGljZXMsIGluZGljZXNdID0gYXJnc1xuICB9XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB1dWlkIHtzdHJpbmd9XG4gKiBAcGFyYW0gcHJvcHMge0JvZHlQcm9wc31cbiAqIEBwYXJhbSB0eXBlIHtCb2R5U2hhcGVUeXBlfVxuICogQHJldHVybiB7bW9kdWxlOm9iamVjdHMvQm9keS5Cb2R5fVxuICovXG5jb25zdCBwcm9wc1RvQm9keSA9ICh1dWlkLCBwcm9wcywgdHlwZSkgPT4ge1xuICBjb25zdCB7XG4gICAgYXJncyA9IFtdLFxuICAgIHBvc2l0aW9uID0gWzAsIDAsIDBdLFxuICAgIHJvdGF0aW9uID0gWzAsIDAsIDBdLFxuICAgIHZlbG9jaXR5ID0gWzAsIDAsIDBdLFxuICAgIGFuZ3VsYXJWZWxvY2l0eSA9IFswLCAwLCAwXSxcbiAgICBsaW5lYXJGYWN0b3IgPSBbMSwgMSwgMV0sXG4gICAgYW5ndWxhckZhY3RvciA9IFsxLCAxLCAxXSxcbiAgICB0eXBlOiBib2R5VHlwZSxcbiAgICBtYXNzLFxuICAgIG1hdGVyaWFsLFxuICAgIHNoYXBlcyxcbiAgICBvbkNvbGxpZGUsXG4gICAgY29sbGlzaW9uUmVzcG9uc2UsXG4gICAgLi4uZXh0cmFcbiAgfSA9IHByb3BzXG5cbiAgY29uc3QgYm9keSA9IG5ldyBCb2R5KHtcbiAgICAuLi5leHRyYSxcbiAgICBtYXNzOiBib2R5VHlwZSA9PT0gJ1N0YXRpYycgPyAwIDogbWFzcyxcbiAgICB0eXBlOiBib2R5VHlwZSA/IEJvZHlbYm9keVR5cGUudG9VcHBlckNhc2UoKV0gOiB1bmRlZmluZWQsXG4gICAgbWF0ZXJpYWw6IG1hdGVyaWFsID8gbmV3IE1hdGVyaWFsKG1hdGVyaWFsKSA6IHVuZGVmaW5lZCxcbiAgfSlcbiAgYm9keS51dWlkID0gdXVpZFxuXG4gIGlmIChjb2xsaXNpb25SZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgYm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGNvbGxpc2lvblJlc3BvbnNlXG4gIH1cblxuICBpZiAodHlwZSA9PT0gJ0NvbXBvdW5kJykge1xuICAgIHNoYXBlcy5mb3JFYWNoKCh7IHR5cGUsIGFyZ3MsIHBvc2l0aW9uLCByb3RhdGlvbiwgbWF0ZXJpYWwsIC4uLmV4dHJhIH0pID0+IHtcbiAgICAgIGNvbnN0IHNoYXBlQm9keSA9IGJvZHkuYWRkU2hhcGUoXG4gICAgICAgIGNyZWF0ZVNoYXBlKHR5cGUsIGFyZ3MpLFxuICAgICAgICBwb3NpdGlvbiA/IG5ldyBWZWMzKC4uLnBvc2l0aW9uKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgcm90YXRpb24gPyBuZXcgUXVhdGVybmlvbigpLnNldEZyb21FdWxlciguLi5yb3RhdGlvbikgOiB1bmRlZmluZWQsXG4gICAgICApXG4gICAgICBpZiAobWF0ZXJpYWwpIHNoYXBlQm9keS5tYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChtYXRlcmlhbClcbiAgICAgIE9iamVjdC5hc3NpZ24oc2hhcGVCb2R5LCBleHRyYSlcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncykpXG4gIH1cblxuICBib2R5LnBvc2l0aW9uLnNldChwb3NpdGlvblswXSwgcG9zaXRpb25bMV0sIHBvc2l0aW9uWzJdKVxuICBib2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKHJvdGF0aW9uWzBdLCByb3RhdGlvblsxXSwgcm90YXRpb25bMl0pXG4gIGJvZHkudmVsb2NpdHkuc2V0KHZlbG9jaXR5WzBdLCB2ZWxvY2l0eVsxXSwgdmVsb2NpdHlbMl0pXG4gIGJvZHkuYW5ndWxhclZlbG9jaXR5LnNldChhbmd1bGFyVmVsb2NpdHlbMF0sIGFuZ3VsYXJWZWxvY2l0eVsxXSwgYW5ndWxhclZlbG9jaXR5WzJdKVxuICBib2R5LmxpbmVhckZhY3Rvci5zZXQobGluZWFyRmFjdG9yWzBdLCBsaW5lYXJGYWN0b3JbMV0sIGxpbmVhckZhY3RvclsyXSlcbiAgYm9keS5hbmd1bGFyRmFjdG9yLnNldChhbmd1bGFyRmFjdG9yWzBdLCBhbmd1bGFyRmFjdG9yWzFdLCBhbmd1bGFyRmFjdG9yWzJdKVxuICByZXR1cm4gYm9keVxufVxuXG5leHBvcnQgZGVmYXVsdCBwcm9wc1RvQm9keVxuIiwiaW1wb3J0IHtcbiAgV29ybGQsXG4gIE5haXZlQnJvYWRwaGFzZSxcbiAgU0FQQnJvYWRwaGFzZSxcbiAgVmVjMyxcbiAgUG9pbnRUb1BvaW50Q29uc3RyYWludCxcbiAgQ29uZVR3aXN0Q29uc3RyYWludCxcbiAgSGluZ2VDb25zdHJhaW50LFxuICBEaXN0YW5jZUNvbnN0cmFpbnQsXG4gIExvY2tDb25zdHJhaW50LFxuICBDb25zdHJhaW50LFxuICBTcHJpbmcsXG4gIFF1YXRlcm5pb24sXG4gIFJheSxcbiAgUmF5Y2FzdFJlc3VsdCxcbiAgUmF5Y2FzdFZlaGljbGUsXG4gIEdTU29sdmVyLFxuICBTcGxpdFNvbHZlcixcbn0gZnJvbSAnY2Fubm9uLWVzJ1xuaW1wb3J0IHByb3BzVG9Cb2R5IGZyb20gJy4vcHJvcHNUb0JvZHknXG5cbmNvbnN0IHN0YXRlID0ge1xuICBib2RpZXM6IHt9LFxuICB2ZWhpY2xlczoge30sXG4gIHNwcmluZ3M6IHt9LFxuICBzcHJpbmdJbnN0YW5jZXM6IHt9LFxuICByYXlzOiB7fSxcbiAgd29ybGQ6IG5ldyBXb3JsZCgpLFxuICBjb25maWc6IHsgc3RlcDogMSAvIDYwIH0sXG4gIHN1YnNjcmlwdGlvbnM6IHt9LFxuICB0ZW1wVmVjdG9yOiBuZXcgVmVjMygpLFxuICBib2RpZXNOZWVkU3luY2luZzogZmFsc2UsXG4gIGxhc3RDYWxsVGltZTogdW5kZWZpbmVkLFxufVxuXG5mdW5jdGlvbiBzeW5jQm9kaWVzKCkge1xuICBzdGF0ZS5ib2RpZXNOZWVkU3luY2luZyA9IHRydWVcbiAgc3RhdGUuYm9kaWVzID0gc3RhdGUud29ybGQuYm9kaWVzLnJlZHVjZSgoYWNjLCBib2R5KSA9PiAoeyAuLi5hY2MsIFtib2R5LnV1aWRdOiBib2R5IH0pLCB7fSlcbn1cblxuZnVuY3Rpb24gZW1pdEJlZ2luQ29udGFjdCh7IGJvZHlBLCBib2R5QiB9KSB7XG4gIGlmICghYm9keUEgfHwgIWJvZHlCKSByZXR1cm5cbiAgc2VsZi5wb3N0TWVzc2FnZSh7IG9wOiAnZXZlbnQnLCB0eXBlOiAnY29sbGlkZUJlZ2luJywgYm9keUE6IGJvZHlBLnV1aWQsIGJvZHlCOiBib2R5Qi51dWlkIH0pXG59XG5cbmZ1bmN0aW9uIGVtaXRFbmRDb250YWN0KHsgYm9keUEsIGJvZHlCIH0pIHtcbiAgaWYgKCFib2R5QSB8fCAhYm9keUIpIHJldHVyblxuICBzZWxmLnBvc3RNZXNzYWdlKHsgb3A6ICdldmVudCcsIHR5cGU6ICdjb2xsaWRlRW5kJywgYm9keUE6IGJvZHlBLnV1aWQsIGJvZHlCOiBib2R5Qi51dWlkIH0pXG59XG5cbnNlbGYub25tZXNzYWdlID0gKGUpID0+IHtcbiAgY29uc3QgeyBvcCwgdXVpZCwgdHlwZSwgcG9zaXRpb25zLCBxdWF0ZXJuaW9ucywgcHJvcHMgfSA9IGUuZGF0YVxuICBjb25zdCBicm9hZHBoYXNlcyA9IHsgTmFpdmVCcm9hZHBoYXNlLCBTQVBCcm9hZHBoYXNlIH1cbiAgc3dpdGNoIChvcCkge1xuICAgIGNhc2UgJ2luaXQnOiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGdyYXZpdHksXG4gICAgICAgIHRvbGVyYW5jZSxcbiAgICAgICAgc3RlcCxcbiAgICAgICAgaXRlcmF0aW9ucyxcbiAgICAgICAgYWxsb3dTbGVlcCxcbiAgICAgICAgYnJvYWRwaGFzZSxcbiAgICAgICAgYXhpc0luZGV4LFxuICAgICAgICBkZWZhdWx0Q29udGFjdE1hdGVyaWFsLFxuICAgICAgICBxdWF0Tm9ybWFsaXplRmFzdCxcbiAgICAgICAgcXVhdE5vcm1hbGl6ZVNraXAsXG4gICAgICAgIHNvbHZlcixcbiAgICAgIH0gPSBwcm9wc1xuICAgICAgc3RhdGUud29ybGQuYWxsb3dTbGVlcCA9IGFsbG93U2xlZXBcbiAgICAgIHN0YXRlLndvcmxkLmdyYXZpdHkuc2V0KGdyYXZpdHlbMF0sIGdyYXZpdHlbMV0sIGdyYXZpdHlbMl0pXG4gICAgICBzdGF0ZS53b3JsZC5xdWF0Tm9ybWFsaXplRmFzdCA9IHF1YXROb3JtYWxpemVGYXN0XG4gICAgICBzdGF0ZS53b3JsZC5xdWF0Tm9ybWFsaXplU2tpcCA9IHF1YXROb3JtYWxpemVTa2lwXG5cbiAgICAgIGlmIChzb2x2ZXIgPT09ICdTcGxpdCcpIHtcbiAgICAgICAgc3RhdGUud29ybGQuc29sdmVyID0gbmV3IFNwbGl0U29sdmVyKG5ldyBHU1NvbHZlcigpKVxuICAgICAgfVxuXG4gICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gdG9sZXJhbmNlXG4gICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIuaXRlcmF0aW9ucyA9IGl0ZXJhdGlvbnNcbiAgICAgIHN0YXRlLndvcmxkLmJyb2FkcGhhc2UgPSBuZXcgKGJyb2FkcGhhc2VzW2Jyb2FkcGhhc2UgKyAnQnJvYWRwaGFzZSddIHx8IE5haXZlQnJvYWRwaGFzZSkoc3RhdGUud29ybGQpXG4gICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IGF4aXNJbmRleCA9PT0gdW5kZWZpbmVkIHx8IGF4aXNJbmRleCA9PT0gbnVsbCA/IDAgOiBheGlzSW5kZXhcbiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2JlZ2luQ29udGFjdCcsIGVtaXRCZWdpbkNvbnRhY3QpXG4gICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdlbmRDb250YWN0JywgZW1pdEVuZENvbnRhY3QpXG4gICAgICBPYmplY3QuYXNzaWduKHN0YXRlLndvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwsIGRlZmF1bHRDb250YWN0TWF0ZXJpYWwpXG4gICAgICBzdGF0ZS5jb25maWcuc3RlcCA9IHN0ZXBcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3N0ZXAnOiB7XG4gICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDBcbiAgICAgIGlmICghc3RhdGUubGFzdENhbGxUaW1lKSB7XG4gICAgICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RhdGUuY29uZmlnLnN0ZXApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0aW1lU2luY2VMYXN0Q2FsbCA9IG5vdyAtIHN0YXRlLmxhc3RDYWxsVGltZVxuICAgICAgICBzdGF0ZS53b3JsZC5zdGVwKHN0YXRlLmNvbmZpZy5zdGVwLCB0aW1lU2luY2VMYXN0Q2FsbClcbiAgICAgIH1cbiAgICAgIHN0YXRlLmxhc3RDYWxsVGltZSA9IG5vd1xuXG4gICAgICBjb25zdCBudW1iZXJPZkJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5sZW5ndGhcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZCb2RpZXM7IGkrKykge1xuICAgICAgICBsZXQgYiA9IHN0YXRlLndvcmxkLmJvZGllc1tpXSxcbiAgICAgICAgICBwID0gYi5wb3NpdGlvbixcbiAgICAgICAgICBxID0gYi5xdWF0ZXJuaW9uXG4gICAgICAgIHBvc2l0aW9uc1szICogaSArIDBdID0gcC54XG4gICAgICAgIHBvc2l0aW9uc1szICogaSArIDFdID0gcC55XG4gICAgICAgIHBvc2l0aW9uc1szICogaSArIDJdID0gcC56XG4gICAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMF0gPSBxLnhcbiAgICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAxXSA9IHEueVxuICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDJdID0gcS56XG4gICAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgM10gPSBxLndcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9ic2VydmF0aW9ucyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGlkIG9mIE9iamVjdC5rZXlzKHN0YXRlLnN1YnNjcmlwdGlvbnMpKSB7XG4gICAgICAgIGxldCBbdXVpZCwgdHlwZSwgdGFyZ2V0ID0gJ2JvZGllcyddID0gc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF1cbiAgICAgICAgbGV0IG9iamVjdCA9IHN0YXRlW3RhcmdldF1cbiAgICAgICAgaWYgKCFvYmplY3QgfHwgIW9iamVjdFt1dWlkXSkgY29udGludWVcbiAgICAgICAgbGV0IHZhbHVlID0gb2JqZWN0W3V1aWRdW3R5cGVdXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFZlYzMpIHZhbHVlID0gdmFsdWUudG9BcnJheSgpXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgUXVhdGVybmlvbikge1xuICAgICAgICAgIHZhbHVlLnRvRXVsZXIoc3RhdGUudGVtcFZlY3RvcilcbiAgICAgICAgICB2YWx1ZSA9IHN0YXRlLnRlbXBWZWN0b3IudG9BcnJheSgpXG4gICAgICAgIH1cbiAgICAgICAgb2JzZXJ2YXRpb25zLnB1c2goW2lkLCB2YWx1ZV0pXG4gICAgICB9XG4gICAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgICBvcDogJ2ZyYW1lJyxcbiAgICAgICAgcG9zaXRpb25zLFxuICAgICAgICBxdWF0ZXJuaW9ucyxcbiAgICAgICAgb2JzZXJ2YXRpb25zLFxuICAgICAgICBhY3RpdmU6IHN0YXRlLndvcmxkLmhhc0FjdGl2ZUJvZGllcyxcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5ib2RpZXNOZWVkU3luY2luZykge1xuICAgICAgICBtZXNzYWdlLmJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5tYXAoKGJvZHkpID0+IGJvZHkudXVpZClcbiAgICAgICAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSBmYWxzZVxuICAgICAgfVxuICAgICAgc2VsZi5wb3N0TWVzc2FnZShtZXNzYWdlLCBbcG9zaXRpb25zLmJ1ZmZlciwgcXVhdGVybmlvbnMuYnVmZmVyXSlcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ2FkZEJvZGllcyc6IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXVpZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBib2R5ID0gcHJvcHNUb0JvZHkodXVpZFtpXSwgcHJvcHNbaV0sIHR5cGUpXG4gICAgICAgIHN0YXRlLndvcmxkLmFkZEJvZHkoYm9keSlcblxuICAgICAgICBpZiAocHJvcHNbaV0ub25Db2xsaWRlKVxuICAgICAgICAgIGJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY29sbGlkZScsICh7IHR5cGUsIGJvZHksIHRhcmdldCwgY29udGFjdCB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IG5pLCByaSwgcmosIGJpLCBiaiwgaWQgfSA9IGNvbnRhY3RcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhY3RQb2ludCA9IGJpLnBvc2l0aW9uLnZhZGQocmkpXG4gICAgICAgICAgICBjb25zdCBjb250YWN0Tm9ybWFsID0gYmkgPT09IGJvZHkgPyBuaSA6IG5pLnNjYWxlKC0xKVxuICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgIG9wOiAnZXZlbnQnLFxuICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICBib2R5OiBib2R5LnV1aWQsXG4gICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LnV1aWQsXG4gICAgICAgICAgICAgIGNvbnRhY3Q6IHtcbiAgICAgICAgICAgICAgICBuaTogbmkudG9BcnJheSgpLFxuICAgICAgICAgICAgICAgIHJpOiByaS50b0FycmF5KCksXG4gICAgICAgICAgICAgICAgcmo6IHJqLnRvQXJyYXkoKSxcbiAgICAgICAgICAgICAgICBiaTogYmkudXVpZCxcbiAgICAgICAgICAgICAgICBiajogYmoudXVpZCxcbiAgICAgICAgICAgICAgICBpbXBhY3RWZWxvY2l0eTogY29udGFjdC5nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsKCksXG4gICAgICAgICAgICAgICAgLy8gV29ybGQgcG9zaXRpb24gb2YgdGhlIGNvbnRhY3RcbiAgICAgICAgICAgICAgICBjb250YWN0UG9pbnQ6IGNvbnRhY3RQb2ludC50b0FycmF5KCksXG4gICAgICAgICAgICAgICAgLy8gTm9ybWFsIG9mIHRoZSBjb250YWN0LCByZWxhdGl2ZSB0byB0aGUgY29sbGlkaW5nIGJvZHlcbiAgICAgICAgICAgICAgICBjb250YWN0Tm9ybWFsOiBjb250YWN0Tm9ybWFsLnRvQXJyYXkoKSxcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY29sbGlzaW9uRmlsdGVyczoge1xuICAgICAgICAgICAgICAgIGJvZHlGaWx0ZXJHcm91cDogYm9keS5jb2xsaXNpb25GaWx0ZXJHcm91cCxcbiAgICAgICAgICAgICAgICBib2R5RmlsdGVyTWFzazogYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrLFxuICAgICAgICAgICAgICAgIHRhcmdldEZpbHRlckdyb3VwOiB0YXJnZXQuY29sbGlzaW9uRmlsdGVyR3JvdXAsXG4gICAgICAgICAgICAgICAgdGFyZ2V0RmlsdGVyTWFzazogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlck1hc2ssXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgICBzeW5jQm9kaWVzKClcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3JlbW92ZUJvZGllcyc6IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXVpZC5sZW5ndGg7IGkrKykgc3RhdGUud29ybGQucmVtb3ZlQm9keShzdGF0ZS5ib2RpZXNbdXVpZFtpXV0pXG4gICAgICBzeW5jQm9kaWVzKClcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3N1YnNjcmliZSc6IHtcbiAgICAgIGNvbnN0IHsgaWQsIHR5cGUsIHRhcmdldCB9ID0gcHJvcHNcbiAgICAgIHN0YXRlLnN1YnNjcmlwdGlvbnNbaWRdID0gW3V1aWQsIHR5cGUsIHRhcmdldF1cbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3Vuc3Vic2NyaWJlJzoge1xuICAgICAgZGVsZXRlIHN0YXRlLnN1YnNjcmlwdGlvbnNbcHJvcHNdXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdzZXRQb3NpdGlvbic6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ucG9zaXRpb24uc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldFF1YXRlcm5pb24nOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldFZlbG9jaXR5JzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS52ZWxvY2l0eS5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0QW5ndWxhclZlbG9jaXR5JzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hbmd1bGFyVmVsb2NpdHkuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldExpbmVhckZhY3Rvcic6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ubGluZWFyRmFjdG9yLnNldChwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRBbmd1bGFyRmFjdG9yJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hbmd1bGFyRmFjdG9yLnNldChwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRNYXNzJzpcbiAgICAgIC8vIGFzc3VtZSB0aGF0IGFuIHVwZGF0ZSBmcm9tIHplcm8tbWFzcyBpbXBsaWVzIGEgbmVlZCBmb3IgZHluYW1pY3Mgb24gc3RhdGljIG9iai5cbiAgICAgIGlmIChwcm9wcyAhPT0gMCAmJiBzdGF0ZS5ib2RpZXNbdXVpZF0udHlwZSA9PT0gMCkgc3RhdGUuYm9kaWVzW3V1aWRdLnR5cGUgPSAxXG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ubWFzcyA9IHByb3BzXG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0udXBkYXRlTWFzc1Byb3BlcnRpZXMoKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRMaW5lYXJEYW1waW5nJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5saW5lYXJEYW1waW5nID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0QW5ndWxhckRhbXBpbmcnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFuZ3VsYXJEYW1waW5nID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0QWxsb3dTbGVlcCc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYWxsb3dTbGVlcCA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldFNsZWVwU3BlZWRMaW1pdCc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uc2xlZXBTcGVlZExpbWl0ID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0U2xlZXBUaW1lTGltaXQnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnNsZWVwVGltZUxpbWl0ID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyR3JvdXAnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyTWFzayc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uY29sbGlzaW9uRmlsdGVyTWFzayA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldENvbGxpc2lvblJlc3BvbnNlJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5jb2xsaXNpb25SZXNwb25zZSA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldEZpeGVkUm90YXRpb24nOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmZpeGVkUm90YXRpb24gPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRJc1RyaWdnZXInOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmlzVHJpZ2dlciA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldEdyYXZpdHknOlxuICAgICAgc3RhdGUud29ybGQuZ3Jhdml0eS5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0VG9sZXJhbmNlJzpcbiAgICAgIHN0YXRlLndvcmxkLnNvbHZlci50b2xlcmFuY2UgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRTdGVwJzpcbiAgICAgIHN0YXRlLmNvbmZpZy5zdGVwID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0SXRlcmF0aW9ucyc6XG4gICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIuaXRlcmF0aW9ucyA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldEJyb2FkcGhhc2UnOlxuICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZSA9IG5ldyAoYnJvYWRwaGFzZXNbcHJvcHMgKyAnQnJvYWRwaGFzZSddIHx8IE5haXZlQnJvYWRwaGFzZSkoc3RhdGUud29ybGQpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldEF4aXNJbmRleCc6XG4gICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IHByb3BzID09PSB1bmRlZmluZWQgfHwgcHJvcHMgPT09IG51bGwgPyAwIDogcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYXBwbHlGb3JjZSc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlGb3JjZShuZXcgVmVjMyguLi5wcm9wc1swXSksIG5ldyBWZWMzKC4uLnByb3BzWzFdKSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYXBwbHlJbXB1bHNlJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hcHBseUltcHVsc2UobmV3IFZlYzMoLi4ucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5wcm9wc1sxXSkpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2FwcGx5TG9jYWxGb3JjZSc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlMb2NhbEZvcmNlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4ucHJvcHNbMV0pKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdhcHBseUxvY2FsSW1wdWxzZSc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlMb2NhbEltcHVsc2UobmV3IFZlYzMoLi4ucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5wcm9wc1sxXSkpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2FwcGx5VG9ycXVlJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hcHBseVRvcnF1ZShuZXcgVmVjMyguLi5wcm9wc1swXSkpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2FkZENvbnN0cmFpbnQnOiB7XG4gICAgICBjb25zdCBbYm9keUEsIGJvZHlCLCBvcHRuc10gPSBwcm9wc1xuICAgICAgbGV0IHsgcGl2b3RBLCBwaXZvdEIsIGF4aXNBLCBheGlzQiwgLi4ub3B0aW9ucyB9ID0gb3B0bnNcblxuICAgICAgLy8gaXMgdGhlcmUgYSBiZXR0ZXIgd2F5IHRvIGVuZm9yY2UgZGVmYXVsdHM/XG4gICAgICBwaXZvdEEgPSBBcnJheS5pc0FycmF5KHBpdm90QSkgPyBuZXcgVmVjMyguLi5waXZvdEEpIDogdW5kZWZpbmVkXG4gICAgICBwaXZvdEIgPSBBcnJheS5pc0FycmF5KHBpdm90QikgPyBuZXcgVmVjMyguLi5waXZvdEIpIDogdW5kZWZpbmVkXG4gICAgICBheGlzQSA9IEFycmF5LmlzQXJyYXkoYXhpc0EpID8gbmV3IFZlYzMoLi4uYXhpc0EpIDogdW5kZWZpbmVkXG4gICAgICBheGlzQiA9IEFycmF5LmlzQXJyYXkoYXhpc0IpID8gbmV3IFZlYzMoLi4uYXhpc0IpIDogdW5kZWZpbmVkXG5cbiAgICAgIGxldCBjb25zdHJhaW50XG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdQb2ludFRvUG9pbnQnOlxuICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChcbiAgICAgICAgICAgIHN0YXRlLmJvZGllc1tib2R5QV0sXG4gICAgICAgICAgICBwaXZvdEEsXG4gICAgICAgICAgICBzdGF0ZS5ib2RpZXNbYm9keUJdLFxuICAgICAgICAgICAgcGl2b3RCLFxuICAgICAgICAgICAgb3B0bnMubWF4Rm9yY2UsXG4gICAgICAgICAgKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0NvbmVUd2lzdCc6XG4gICAgICAgICAgY29uc3RyYWludCA9IG5ldyBDb25lVHdpc3RDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHtcbiAgICAgICAgICAgIHBpdm90QSxcbiAgICAgICAgICAgIHBpdm90QixcbiAgICAgICAgICAgIGF4aXNBLFxuICAgICAgICAgICAgYXhpc0IsXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnSGluZ2UnOlxuICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgSGluZ2VDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHtcbiAgICAgICAgICAgIHBpdm90QSxcbiAgICAgICAgICAgIHBpdm90QixcbiAgICAgICAgICAgIGF4aXNBLFxuICAgICAgICAgICAgYXhpc0IsXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnRGlzdGFuY2UnOlxuICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgRGlzdGFuY2VDb25zdHJhaW50KFxuICAgICAgICAgICAgc3RhdGUuYm9kaWVzW2JvZHlBXSxcbiAgICAgICAgICAgIHN0YXRlLmJvZGllc1tib2R5Ql0sXG4gICAgICAgICAgICBvcHRucy5kaXN0YW5jZSxcbiAgICAgICAgICAgIG9wdG5zLm1heEZvcmNlLFxuICAgICAgICAgIClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdMb2NrJzpcbiAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IExvY2tDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIG9wdG5zKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc3RyYWludCA9IG5ldyBDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIG9wdG5zKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjb25zdHJhaW50LnV1aWQgPSB1dWlkXG4gICAgICBzdGF0ZS53b3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQpXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdyZW1vdmVDb25zdHJhaW50JzpcbiAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzXG4gICAgICAgIC5maWx0ZXIoKHsgdXVpZDogdGhpc0lkIH0pID0+IHRoaXNJZCA9PT0gdXVpZClcbiAgICAgICAgLm1hcCgoYykgPT4gc3RhdGUud29ybGQucmVtb3ZlQ29uc3RyYWludChjKSlcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlICdlbmFibGVDb25zdHJhaW50JzpcbiAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcigoeyB1dWlkOiB0aGlzSWQgfSkgPT4gdGhpc0lkID09PSB1dWlkKS5tYXAoKGMpID0+IGMuZW5hYmxlKCkpXG4gICAgICBicmVha1xuXG4gICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnQnOlxuICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKCh7IHV1aWQ6IHRoaXNJZCB9KSA9PiB0aGlzSWQgPT09IHV1aWQpLm1hcCgoYykgPT4gYy5kaXNhYmxlKCkpXG4gICAgICBicmVha1xuXG4gICAgY2FzZSAnZW5hYmxlQ29uc3RyYWludE1vdG9yJzpcbiAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcigoeyB1dWlkOiB0aGlzSWQgfSkgPT4gdGhpc0lkID09PSB1dWlkKS5tYXAoKGMpID0+IGMuZW5hYmxlTW90b3IoKSlcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlICdkaXNhYmxlQ29uc3RyYWludE1vdG9yJzpcbiAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcigoeyB1dWlkOiB0aGlzSWQgfSkgPT4gdGhpc0lkID09PSB1dWlkKS5tYXAoKGMpID0+IGMuZGlzYWJsZU1vdG9yKCkpXG4gICAgICBicmVha1xuXG4gICAgY2FzZSAnc2V0Q29uc3RyYWludE1vdG9yU3BlZWQnOlxuICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKCh7IHV1aWQ6IHRoaXNJZCB9KSA9PiB0aGlzSWQgPT09IHV1aWQpLm1hcCgoYykgPT4gYy5zZXRNb3RvclNwZWVkKHByb3BzKSlcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlICdzZXRDb25zdHJhaW50TW90b3JNYXhGb3JjZSc6XG4gICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50c1xuICAgICAgICAuZmlsdGVyKCh7IHV1aWQ6IHRoaXNJZCB9KSA9PiB0aGlzSWQgPT09IHV1aWQpXG4gICAgICAgIC5tYXAoKGMpID0+IGMuc2V0TW90b3JNYXhGb3JjZShwcm9wcykpXG4gICAgICBicmVha1xuXG4gICAgY2FzZSAnYWRkU3ByaW5nJzoge1xuICAgICAgY29uc3QgW2JvZHlBLCBib2R5Qiwgb3B0bnNdID0gcHJvcHNcbiAgICAgIGxldCB7IHdvcmxkQW5jaG9yQSwgd29ybGRBbmNob3JCLCBsb2NhbEFuY2hvckEsIGxvY2FsQW5jaG9yQiwgcmVzdExlbmd0aCwgc3RpZmZuZXNzLCBkYW1waW5nIH0gPSBvcHRuc1xuXG4gICAgICB3b3JsZEFuY2hvckEgPSBBcnJheS5pc0FycmF5KHdvcmxkQW5jaG9yQSkgPyBuZXcgVmVjMyguLi53b3JsZEFuY2hvckEpIDogdW5kZWZpbmVkXG4gICAgICB3b3JsZEFuY2hvckIgPSBBcnJheS5pc0FycmF5KHdvcmxkQW5jaG9yQikgPyBuZXcgVmVjMyguLi53b3JsZEFuY2hvckIpIDogdW5kZWZpbmVkXG4gICAgICBsb2NhbEFuY2hvckEgPSBBcnJheS5pc0FycmF5KGxvY2FsQW5jaG9yQSkgPyBuZXcgVmVjMyguLi5sb2NhbEFuY2hvckEpIDogdW5kZWZpbmVkXG4gICAgICBsb2NhbEFuY2hvckIgPSBBcnJheS5pc0FycmF5KGxvY2FsQW5jaG9yQikgPyBuZXcgVmVjMyguLi5sb2NhbEFuY2hvckIpIDogdW5kZWZpbmVkXG5cbiAgICAgIGxldCBzcHJpbmcgPSBuZXcgU3ByaW5nKHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHtcbiAgICAgICAgd29ybGRBbmNob3JBLFxuICAgICAgICB3b3JsZEFuY2hvckIsXG4gICAgICAgIGxvY2FsQW5jaG9yQSxcbiAgICAgICAgbG9jYWxBbmNob3JCLFxuICAgICAgICByZXN0TGVuZ3RoLFxuICAgICAgICBzdGlmZm5lc3MsXG4gICAgICAgIGRhbXBpbmcsXG4gICAgICB9KVxuXG4gICAgICBzcHJpbmcudXVpZCA9IHV1aWRcblxuICAgICAgbGV0IHBvc3RTdGVwU3ByaW5nID0gKCkgPT4gc3ByaW5nLmFwcGx5Rm9yY2UoKVxuXG4gICAgICBzdGF0ZS5zcHJpbmdzW3V1aWRdID0gcG9zdFN0ZXBTcHJpbmdcbiAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXSA9IHNwcmluZ1xuXG4gICAgICAvLyBDb21wdXRlIHRoZSBmb3JjZSBhZnRlciBlYWNoIHN0ZXBcbiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuc3ByaW5nc1t1dWlkXSlcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3NldFNwcmluZ1N0aWZmbmVzcyc6IHtcbiAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXS5zdGlmZm5lc3MgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnc2V0U3ByaW5nUmVzdExlbmd0aCc6IHtcbiAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXS5yZXN0TGVuZ3RoID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3NldFNwcmluZ0RhbXBpbmcnOiB7XG4gICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0uZGFtcGluZyA9IHByb3BzXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdyZW1vdmVTcHJpbmcnOiB7XG4gICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnNwcmluZ3NbdXVpZF0pXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdhZGRSYXknOiB7XG4gICAgICBjb25zdCB7IGZyb20sIHRvLCAuLi5vcHRpb25zIH0gPSBwcm9wc1xuICAgICAgY29uc3QgcmF5ID0gbmV3IFJheShmcm9tID8gbmV3IFZlYzMoLi4uZnJvbSkgOiB1bmRlZmluZWQsIHRvID8gbmV3IFZlYzMoLi4udG8pIDogdW5kZWZpbmVkKVxuICAgICAgb3B0aW9ucy5tb2RlID0gUmF5W29wdGlvbnMubW9kZS50b1VwcGVyQ2FzZSgpXVxuICAgICAgb3B0aW9ucy5yZXN1bHQgPSBuZXcgUmF5Y2FzdFJlc3VsdCgpXG4gICAgICBzdGF0ZS5yYXlzW3V1aWRdID0gKCkgPT4ge1xuICAgICAgICByYXkuaW50ZXJzZWN0V29ybGQoc3RhdGUud29ybGQsIG9wdGlvbnMpXG4gICAgICAgIGNvbnN0IHsgYm9keSwgc2hhcGUsIHJheUZyb21Xb3JsZCwgcmF5VG9Xb3JsZCwgaGl0Tm9ybWFsV29ybGQsIGhpdFBvaW50V29ybGQsIC4uLnJlc3QgfSA9XG4gICAgICAgICAgb3B0aW9ucy5yZXN1bHRcbiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgb3A6ICdldmVudCcsXG4gICAgICAgICAgdHlwZTogJ3JheWhpdCcsXG4gICAgICAgICAgcmF5OiB7XG4gICAgICAgICAgICBmcm9tLFxuICAgICAgICAgICAgdG8sXG4gICAgICAgICAgICBkaXJlY3Rpb246IHJheS5kaXJlY3Rpb24udG9BcnJheSgpLFxuICAgICAgICAgICAgY29sbGlzaW9uRmlsdGVyR3JvdXA6IHJheS5jb2xsaXNpb25GaWx0ZXJHcm91cCxcbiAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlck1hc2s6IHJheS5jb2xsaXNpb25GaWx0ZXJNYXNrLFxuICAgICAgICAgICAgdXVpZCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IGJvZHkgPyBib2R5LnV1aWQgOiBudWxsLFxuICAgICAgICAgIHNoYXBlOiBzaGFwZSA/IHsgLi4uc2hhcGUsIGJvZHk6IGJvZHkudXVpZCB9IDogbnVsbCxcbiAgICAgICAgICByYXlGcm9tV29ybGQ6IHJheUZyb21Xb3JsZC50b0FycmF5KCksXG4gICAgICAgICAgcmF5VG9Xb3JsZDogcmF5VG9Xb3JsZC50b0FycmF5KCksXG4gICAgICAgICAgaGl0Tm9ybWFsV29ybGQ6IGhpdE5vcm1hbFdvcmxkLnRvQXJyYXkoKSxcbiAgICAgICAgICBoaXRQb2ludFdvcmxkOiBoaXRQb2ludFdvcmxkLnRvQXJyYXkoKSxcbiAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnJheXNbdXVpZF0pXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdyZW1vdmVSYXknOiB7XG4gICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1t1dWlkXSlcbiAgICAgIGRlbGV0ZSBzdGF0ZS5yYXlzW3V1aWRdXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdhZGRSYXljYXN0VmVoaWNsZSc6IHtcbiAgICAgIGNvbnN0IFtjaGFzc2lzQm9keSwgd2hlZWxzLCB3aGVlbEluZm9zLCBpbmRleEZvcndhcmRBeGlzLCBpbmRleFJpZ2h0QXhpcywgaW5kZXhVcEF4aXNdID0gcHJvcHNcbiAgICAgIGNvbnN0IHZlaGljbGUgPSBuZXcgUmF5Y2FzdFZlaGljbGUoe1xuICAgICAgICBjaGFzc2lzQm9keTogc3RhdGUuYm9kaWVzW2NoYXNzaXNCb2R5XSxcbiAgICAgICAgaW5kZXhGb3J3YXJkQXhpczogaW5kZXhGb3J3YXJkQXhpcyxcbiAgICAgICAgaW5kZXhSaWdodEF4aXM6IGluZGV4UmlnaHRBeGlzLFxuICAgICAgICBpbmRleFVwQXhpczogaW5kZXhVcEF4aXMsXG4gICAgICB9KVxuICAgICAgdmVoaWNsZS53b3JsZCA9IHN0YXRlLndvcmxkXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgd2hlZWxJbmZvID0gd2hlZWxJbmZvc1tpXVxuICAgICAgICB3aGVlbEluZm8uZGlyZWN0aW9uTG9jYWwgPSBuZXcgVmVjMyguLi53aGVlbEluZm8uZGlyZWN0aW9uTG9jYWwpXG4gICAgICAgIHdoZWVsSW5mby5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwgPSBuZXcgVmVjMyguLi53aGVlbEluZm8uY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsKVxuICAgICAgICB3aGVlbEluZm8uYXhsZUxvY2FsID0gbmV3IFZlYzMoLi4ud2hlZWxJbmZvLmF4bGVMb2NhbClcbiAgICAgICAgdmVoaWNsZS5hZGRXaGVlbCh3aGVlbEluZm8pXG4gICAgICB9XG5cbiAgICAgIHZlaGljbGUucHJlU3RlcCA9ICgpID0+IHtcbiAgICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0udXBkYXRlVmVoaWNsZShzdGF0ZS53b3JsZC5kdClcbiAgICAgIH1cbiAgICAgIDsodmVoaWNsZS5wb3N0U3RlcCA9ICgpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGF0ZS52ZWhpY2xlc1t1dWlkXS53aGVlbEluZm9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0udXBkYXRlV2hlZWxUcmFuc2Zvcm0oaSlcbiAgICAgICAgICBjb25zdCB0ID0gc3RhdGUudmVoaWNsZXNbdXVpZF0ud2hlZWxJbmZvc1tpXS53b3JsZFRyYW5zZm9ybVxuICAgICAgICAgIGNvbnN0IHdoZWVsQm9keSA9IHN0YXRlLmJvZGllc1t3aGVlbHNbaV1dXG4gICAgICAgICAgd2hlZWxCb2R5LnBvc2l0aW9uLmNvcHkodC5wb3NpdGlvbilcbiAgICAgICAgICB3aGVlbEJvZHkucXVhdGVybmlvbi5jb3B5KHQucXVhdGVybmlvbilcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICAgIChzdGF0ZS52ZWhpY2xlc1t1dWlkXSA9IHZlaGljbGUpXG4gICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUudmVoaWNsZXNbdXVpZF0ucHJlU3RlcClcbiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUudmVoaWNsZXNbdXVpZF0ucG9zdFN0ZXApXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdyZW1vdmVSYXljYXN0VmVoaWNsZSc6IHtcbiAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5wcmVTdGVwKVxuICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5wb3N0U3RlcClcbiAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLndvcmxkID0gbnVsbFxuICAgICAgZGVsZXRlIHN0YXRlLnZlaGljbGVzW3V1aWRdXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdzZXRSYXljYXN0VmVoaWNsZVN0ZWVyaW5nVmFsdWUnOiB7XG4gICAgICBjb25zdCBbdmFsdWUsIHdoZWVsSW5kZXhdID0gcHJvcHNcbiAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLnNldFN0ZWVyaW5nVmFsdWUodmFsdWUsIHdoZWVsSW5kZXgpXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdhcHBseVJheWNhc3RWZWhpY2xlRW5naW5lRm9yY2UnOiB7XG4gICAgICBjb25zdCBbdmFsdWUsIHdoZWVsSW5kZXhdID0gcHJvcHNcbiAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLmFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdzZXRSYXljYXN0VmVoaWNsZUJyYWtlJzoge1xuICAgICAgY29uc3QgW2JyYWtlLCB3aGVlbEluZGV4XSA9IHByb3BzXG4gICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5zZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleClcbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgY2FzZSAnd2FrZVVwJzoge1xuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLndha2VVcCgpXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdzbGVlcCc6IHtcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5zbGVlcCgpXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbIk1hdDMiLCJjb25zdHJ1Y3RvciIsImVsZW1lbnRzIiwiaWRlbnRpdHkiLCJlIiwic2V0WmVybyIsInNldFRyYWNlIiwidmVjdG9yIiwieCIsInkiLCJ6IiwiZ2V0VHJhY2UiLCJ0YXJnZXQiLCJWZWMzIiwidm11bHQiLCJ2Iiwic211bHQiLCJzIiwiaSIsImxlbmd0aCIsIm1tdWx0IiwibWF0cml4IiwiQSIsIkIiLCJUIiwiYTExIiwiYTEyIiwiYTEzIiwiYTIxIiwiYTIyIiwiYTIzIiwiYTMxIiwiYTMyIiwiYTMzIiwiYjExIiwiYjEyIiwiYjEzIiwiYjIxIiwiYjIyIiwiYjIzIiwiYjMxIiwiYjMyIiwiYjMzIiwic2NhbGUiLCJ0Iiwic29sdmUiLCJiIiwibnIiLCJuYyIsImVxbnMiLCJqIiwicHVzaCIsIm4iLCJrIiwibnAiLCJrcCIsInAiLCJtdWx0aXBsaWVyIiwiaXNOYU4iLCJJbmZpbml0eSIsInRvU3RyaW5nIiwicm93IiwiY29sdW1uIiwidmFsdWUiLCJ1bmRlZmluZWQiLCJjb3B5IiwiciIsInNlcCIsInJldmVyc2UiLCJyZXZlcnNlX2VxbnMiLCJzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uIiwicSIsInciLCJ4MiIsInkyIiwiejIiLCJ4eCIsInh5IiwieHoiLCJ5eSIsInl6IiwienoiLCJ3eCIsInd5Iiwid3oiLCJ0cmFuc3Bvc2UiLCJNIiwidG1wIiwiY3Jvc3MiLCJ2eCIsInZ5IiwidnoiLCJzZXQiLCJ2YWRkIiwidnN1YiIsImNyb3NzbWF0Iiwibm9ybWFsaXplIiwiTWF0aCIsInNxcnQiLCJpbnZOIiwidW5pdCIsIm5pbnYiLCJsZW5ndGhTcXVhcmVkIiwiZG90IiwiZGlzdGFuY2VUbyIsInB4IiwicHkiLCJweiIsImRpc3RhbmNlU3F1YXJlZCIsInNjYWxhciIsInZtdWwiLCJhZGRTY2FsZWRWZWN0b3IiLCJpc1plcm8iLCJuZWdhdGUiLCJ0YW5nZW50cyIsInQxIiwidDIiLCJub3JtIiwiVmVjM190YW5nZW50c19uIiwiaW5vcm0iLCJyYW5kVmVjIiwiVmVjM190YW5nZW50c19yYW5kVmVjIiwiYWJzIiwidG9BcnJheSIsImxlcnAiLCJhbG1vc3RFcXVhbHMiLCJwcmVjaXNpb24iLCJhbG1vc3RaZXJvIiwiaXNBbnRpcGFyYWxsZWxUbyIsImFudGlwX25lZyIsImNsb25lIiwiWkVSTyIsIlVOSVRfWCIsIlVOSVRfWSIsIlVOSVRfWiIsIkFBQkIiLCJvcHRpb25zIiwibG93ZXJCb3VuZCIsInVwcGVyQm91bmQiLCJzZXRGcm9tUG9pbnRzIiwicG9pbnRzIiwicG9zaXRpb24iLCJxdWF0ZXJuaW9uIiwic2tpblNpemUiLCJsIiwidSIsInRtcCQxIiwiYWFiYiIsImV4dGVuZCIsIm1pbiIsIm1heCIsIm92ZXJsYXBzIiwibDEiLCJ1MSIsImwyIiwidTIiLCJvdmVybGFwc1giLCJvdmVybGFwc1kiLCJvdmVybGFwc1oiLCJ2b2x1bWUiLCJjb250YWlucyIsImdldENvcm5lcnMiLCJhIiwiYyIsImQiLCJmIiwiZyIsImgiLCJ0b0xvY2FsRnJhbWUiLCJmcmFtZSIsImNvcm5lcnMiLCJ0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVycyIsImNvcm5lciIsInBvaW50VG9Mb2NhbCIsInRvV29ybGRGcmFtZSIsInBvaW50VG9Xb3JsZCIsIm92ZXJsYXBzUmF5IiwicmF5IiwiZGlyZWN0aW9uIiwiZnJvbSIsImRpckZyYWNYIiwiZGlyRnJhY1kiLCJkaXJGcmFjWiIsInQzIiwidDQiLCJ0NSIsInQ2IiwidG1pbiIsInRtYXgiLCJBcnJheUNvbGxpc2lvbk1hdHJpeCIsImdldCIsImJpIiwiYmoiLCJpbmRleCIsInRlbXAiLCJyZXNldCIsInNldE51bU9iamVjdHMiLCJFdmVudFRhcmdldCIsIl9saXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwidHlwZSIsImxpc3RlbmVyIiwibGlzdGVuZXJzIiwiaW5jbHVkZXMiLCJoYXNFdmVudExpc3RlbmVyIiwiaGFzQW55RXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpbmRleE9mIiwic3BsaWNlIiwiZGlzcGF0Y2hFdmVudCIsImV2ZW50IiwibGlzdGVuZXJBcnJheSIsImNhbGwiLCJRdWF0ZXJuaW9uIiwic2V0RnJvbUF4aXNBbmdsZSIsImFuZ2xlIiwic2luIiwiY29zIiwidG9BeGlzQW5nbGUiLCJ0YXJnZXRBeGlzIiwiYWNvcyIsInNldEZyb21WZWN0b3JzIiwic2Z2X3QxIiwic2Z2X3QyIiwiUEkiLCJtdWx0IiwicXVhdCIsImF4IiwiYXkiLCJheiIsImF3IiwiYngiLCJieSIsImJ6IiwiYnciLCJpbnZlcnNlIiwiY29uanVnYXRlIiwiaW5vcm0yIiwibm9ybWFsaXplRmFzdCIsInF4IiwicXkiLCJxeiIsInF3IiwiaXgiLCJpeSIsIml6IiwiaXciLCJ0b0V1bGVyIiwib3JkZXIiLCJoZWFkaW5nIiwiYXR0aXR1ZGUiLCJiYW5rIiwidGVzdCIsImF0YW4yIiwic3F4Iiwic3F5Iiwic3F6IiwiYXNpbiIsIkVycm9yIiwic2V0RnJvbUV1bGVyIiwiYzEiLCJjMiIsImMzIiwiczEiLCJzMiIsInMzIiwic2xlcnAiLCJ0b1F1YXQiLCJvbWVnYSIsImNvc29tIiwic2lub20iLCJzY2FsZTAiLCJzY2FsZTEiLCJpbnRlZ3JhdGUiLCJhbmd1bGFyVmVsb2NpdHkiLCJkdCIsImFuZ3VsYXJGYWN0b3IiLCJoYWxmX2R0IiwiU0hBUEVfVFlQRVMiLCJTUEhFUkUiLCJQTEFORSIsIkJPWCIsIkNPTVBPVU5EIiwiQ09OVkVYUE9MWUhFRFJPTiIsIkhFSUdIVEZJRUxEIiwiUEFSVElDTEUiLCJDWUxJTkRFUiIsIlRSSU1FU0giLCJTaGFwZSIsImlkIiwiYm91bmRpbmdTcGhlcmVSYWRpdXMiLCJjb2xsaXNpb25SZXNwb25zZSIsImNvbGxpc2lvbkZpbHRlckdyb3VwIiwiY29sbGlzaW9uRmlsdGVyTWFzayIsIm1hdGVyaWFsIiwiYm9keSIsImlkQ291bnRlciIsInVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzIiwiY2FsY3VsYXRlTG9jYWxJbmVydGlhIiwibWFzcyIsImNhbGN1bGF0ZVdvcmxkQUFCQiIsInBvcyIsInR5cGVzIiwiVHJhbnNmb3JtIiwid29ybGRQb2ludCIsInJlc3VsdCIsInBvaW50VG9Mb2NhbEZyYW1lIiwibG9jYWxQb2ludCIsInBvaW50VG9Xb3JsZEZyYW1lIiwidmVjdG9yVG9Xb3JsZEZyYW1lIiwibG9jYWxWZWN0b3IiLCJ0bXBRdWF0JDEiLCJ2ZWN0b3JUb0xvY2FsRnJhbWUiLCJ3b3JsZFZlY3RvciIsIkNvbnZleFBvbHloZWRyb24iLCJwcm9wcyIsInZlcnRpY2VzIiwiZmFjZXMiLCJub3JtYWxzIiwiYXhlcyIsImZhY2VOb3JtYWxzIiwid29ybGRWZXJ0aWNlcyIsIndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSIsIndvcmxkRmFjZU5vcm1hbHMiLCJ3b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUiLCJ1bmlxdWVBeGVzIiwidW5pcXVlRWRnZXMiLCJjb21wdXRlTm9ybWFscyIsInNsaWNlIiwiY29tcHV0ZUVkZ2VzIiwiZWRnZXMiLCJlZGdlIiwiZmFjZSIsIm51bVZlcnRpY2VzIiwiZm91bmQiLCJnZXRGYWNlTm9ybWFsIiwidmVydGV4IiwiY29uc29sZSIsImVycm9yIiwid2FybiIsInZhIiwidmIiLCJ2YyIsImNvbXB1dGVOb3JtYWwiLCJjYiIsImFiIiwiY2xpcEFnYWluc3RIdWxsIiwicG9zQSIsInF1YXRBIiwiaHVsbEIiLCJwb3NCIiwicXVhdEIiLCJzZXBhcmF0aW5nTm9ybWFsIiwibWluRGlzdCIsIm1heERpc3QiLCJXb3JsZE5vcm1hbCIsImNsb3Nlc3RGYWNlQiIsImRtYXgiLCJOdW1iZXIiLCJNQVhfVkFMVUUiLCJ3b3JsZFZlcnRzQjEiLCJ3b3JsZGIiLCJjbGlwRmFjZUFnYWluc3RIdWxsIiwiZmluZFNlcGFyYXRpbmdBeGlzIiwiZmFjZUxpc3RBIiwiZmFjZUxpc3RCIiwiZmFjZUFOb3JtYWxXUzMiLCJXb3JsZG5vcm1hbDEiLCJkZWx0YUMiLCJ3b3JsZEVkZ2UwIiwid29ybGRFZGdlMSIsIkNyb3NzIiwiZG1pbiIsImh1bGxBIiwibnVtRmFjZXNBIiwiZmkiLCJ0ZXN0U2VwQXhpcyIsIm51bUZhY2VzQiIsImUwIiwiZTEiLCJkaXN0IiwiYXhpcyIsInByb2plY3QiLCJtYXhtaW5BIiwibWF4bWluQiIsIm1heEEiLCJtaW5BIiwibWF4QiIsIm1pbkIiLCJkMCIsImQxIiwiZGVwdGgiLCJhYWJibWF4IiwiYWFiYm1pbiIsImNvbXB1dGVMb2NhbEFBQkIiLCJnZXRQbGFuZUNvbnN0YW50T2ZGYWNlIiwiZmFjZV9pIiwiZmFjZUFOb3JtYWxXUyIsImVkZ2UwIiwiV29ybGRFZGdlMCIsIndvcmxkUGxhbmVBbm9ybWFsMSIsInBsYW5lTm9ybWFsV1MxIiwid29ybGRBMSIsImxvY2FsUGxhbmVOb3JtYWwiLCJwbGFuZU5vcm1hbFdTIiwid29ybGRWZXJ0c0IyIiwicFZ0eEluIiwicFZ0eE91dCIsImNsb3Nlc3RGYWNlQSIsInBvbHlBIiwiY29ubmVjdGVkRmFjZXMiLCJudW1WZXJ0aWNlc0EiLCJvdGhlckZhY2UiLCJsb2NhbFBsYW5lRXEiLCJwbGFuZUVxV1MiLCJjbGlwRmFjZUFnYWluc3RQbGFuZSIsInNoaWZ0IiwibG9nIiwicG9pbnQiLCJub3JtYWwiLCJpblZlcnRpY2VzIiwib3V0VmVydGljZXMiLCJwbGFuZU5vcm1hbCIsInBsYW5lQ29uc3RhbnQiLCJuX2RvdF9maXJzdCIsIm5fZG90X2xhc3QiLCJudW1WZXJ0cyIsImZpcnN0VmVydGV4IiwibGFzdFZlcnRleCIsInZpIiwibmV3diIsImNvbXB1dGVXb3JsZFZlcnRpY2VzIiwidmVydHMiLCJ3b3JsZFZlcnRzIiwiY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMiLCJOIiwid29ybGROb3JtYWxzIiwibWF4MiIsIm5vcm0yIiwibWlueCIsIm1pbnkiLCJtaW56IiwibWF4eCIsIm1heHkiLCJtYXh6IiwidGVtcFdvcmxkVmVydGV4IiwiZ2V0QXZlcmFnZVBvaW50TG9jYWwiLCJ0cmFuc2Zvcm1BbGxQb2ludHMiLCJvZmZzZXQiLCJwb2ludElzSW5zaWRlIiwicG9pbnRJbnNpZGUiLCJ2VG9QIiwicjEiLCJ2VG9Qb2ludEluc2lkZSIsInIyIiwic2hhcGUiLCJsb2NhbEF4aXMiLCJwcm9qZWN0X2xvY2FsQXhpcyIsImxvY2FsT3JpZ2luIiwicHJvamVjdF9sb2NhbE9yaWdpbiIsInZzIiwiYWRkIiwidmFsIiwiQm94IiwiaGFsZkV4dGVudHMiLCJjb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24iLCJ1cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24iLCJzeCIsInN5Iiwic3oiLCJWIiwiY2FsY3VsYXRlSW5lcnRpYSIsImdldFNpZGVOb3JtYWxzIiwic2l4VGFyZ2V0VmVjdG9ycyIsInNpZGVzIiwiZXgiLCJmb3JFYWNoV29ybGRDb3JuZXIiLCJjYWxsYmFjayIsIndvcmxkQ29ybmVyVGVtcFBvcyIsIndvcmxkQ29ybmVyc1RlbXAiLCJ3YyIsIkJPRFlfVFlQRVMiLCJEWU5BTUlDIiwiU1RBVElDIiwiS0lORU1BVElDIiwiQk9EWV9TTEVFUF9TVEFURVMiLCJBV0FLRSIsIlNMRUVQWSIsIlNMRUVQSU5HIiwiQm9keSIsIndvcmxkIiwicHJlU3RlcCIsInBvc3RTdGVwIiwidmxhbWJkYSIsInByZXZpb3VzUG9zaXRpb24iLCJpbnRlcnBvbGF0ZWRQb3NpdGlvbiIsImluaXRQb3NpdGlvbiIsInZlbG9jaXR5IiwiaW5pdFZlbG9jaXR5IiwiZm9yY2UiLCJpbnZNYXNzIiwibGluZWFyRGFtcGluZyIsImFsbG93U2xlZXAiLCJzbGVlcFN0YXRlIiwic2xlZXBTcGVlZExpbWl0Iiwic2xlZXBUaW1lTGltaXQiLCJ0aW1lTGFzdFNsZWVweSIsIndha2VVcEFmdGVyTmFycm93cGhhc2UiLCJ0b3JxdWUiLCJpbml0UXVhdGVybmlvbiIsInByZXZpb3VzUXVhdGVybmlvbiIsImludGVycG9sYXRlZFF1YXRlcm5pb24iLCJpbml0QW5ndWxhclZlbG9jaXR5Iiwic2hhcGVzIiwic2hhcGVPZmZzZXRzIiwic2hhcGVPcmllbnRhdGlvbnMiLCJpbmVydGlhIiwiaW52SW5lcnRpYSIsImludkluZXJ0aWFXb3JsZCIsImludk1hc3NTb2x2ZSIsImludkluZXJ0aWFTb2x2ZSIsImludkluZXJ0aWFXb3JsZFNvbHZlIiwiZml4ZWRSb3RhdGlvbiIsImFuZ3VsYXJEYW1waW5nIiwibGluZWFyRmFjdG9yIiwiYWFiYk5lZWRzVXBkYXRlIiwiYm91bmRpbmdSYWRpdXMiLCJ3bGFtYmRhIiwiaXNUcmlnZ2VyIiwiQm9vbGVhbiIsImFkZFNoYXBlIiwidXBkYXRlTWFzc1Byb3BlcnRpZXMiLCJ3YWtlVXAiLCJwcmV2U3RhdGUiLCJ3YWtldXBFdmVudCIsInNsZWVwIiwic2xlZXBUaWNrIiwidGltZSIsInNwZWVkU3F1YXJlZCIsInNwZWVkTGltaXRTcXVhcmVkIiwic2xlZXB5RXZlbnQiLCJzbGVlcEV2ZW50IiwidXBkYXRlU29sdmVNYXNzUHJvcGVydGllcyIsIl9vZmZzZXQiLCJfb3JpZW50YXRpb24iLCJvcmllbnRhdGlvbiIsInVwZGF0ZUJvdW5kaW5nUmFkaXVzIiwicmVtb3ZlU2hhcGUiLCJyYWRpdXMiLCJ1cGRhdGVBQUJCIiwidG1wVmVjIiwidG1wUXVhdCIsImJvZHlRdWF0Iiwic2hhcGVBQUJCIiwidXBkYXRlQUFCQl9zaGFwZUFBQkIiLCJ1cGRhdGVJbmVydGlhV29ybGQiLCJJIiwibTEiLCJ1aXdfbTEiLCJtMiIsInVpd19tMiIsImFwcGx5Rm9yY2UiLCJyZWxhdGl2ZVBvaW50Iiwicm90Rm9yY2UiLCJCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2UiLCJhcHBseUxvY2FsRm9yY2UiLCJsb2NhbEZvcmNlIiwid29ybGRGb3JjZSIsIkJvZHlfYXBwbHlMb2NhbEZvcmNlX3dvcmxkRm9yY2UiLCJyZWxhdGl2ZVBvaW50V29ybGQiLCJCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQiLCJhcHBseVRvcnF1ZSIsImFwcGx5SW1wdWxzZSIsImltcHVsc2UiLCJ2ZWxvIiwiQm9keV9hcHBseUltcHVsc2VfdmVsbyIsInJvdFZlbG8iLCJCb2R5X2FwcGx5SW1wdWxzZV9yb3RWZWxvIiwiYXBwbHlMb2NhbEltcHVsc2UiLCJsb2NhbEltcHVsc2UiLCJ3b3JsZEltcHVsc2UiLCJCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3dvcmxkSW1wdWxzZSIsIkJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludCIsIkJvZHlfdXBkYXRlTWFzc1Byb3BlcnRpZXNfaGFsZkV4dGVudHMiLCJmaXhlZCIsImdldFZlbG9jaXR5QXRXb3JsZFBvaW50IiwicXVhdE5vcm1hbGl6ZSIsInF1YXROb3JtYWxpemVGYXN0IiwiYW5ndWxhclZlbG8iLCJpTWR0IiwidHgiLCJ0eSIsInR6IiwiQ09MTElERV9FVkVOVF9OQU1FIiwiQnJvYWRwaGFzZSIsInVzZUJvdW5kaW5nQm94ZXMiLCJkaXJ0eSIsImNvbGxpc2lvblBhaXJzIiwicDEiLCJwMiIsIm5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uIiwiYm9keUEiLCJib2R5QiIsImludGVyc2VjdGlvblRlc3QiLCJwYWlyczEiLCJwYWlyczIiLCJkb0JvdW5kaW5nQm94QnJvYWRwaGFzZSIsImRvQm91bmRpbmdTcGhlcmVCcm9hZHBoYXNlIiwiQnJvYWRwaGFzZV9jb2xsaXNpb25QYWlyc19yIiwiYm91bmRpbmdSYWRpdXNTdW0yIiwibWFrZVBhaXJzVW5pcXVlIiwiQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcCIsIkJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxIiwiQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDIiLCJpZDEiLCJpZDIiLCJrZXkiLCJrZXlzIiwicG9wIiwicGFpckluZGV4Iiwic2V0V29ybGQiLCJib3VuZGluZ1NwaGVyZUNoZWNrIiwic2EiLCJzYiIsInBvdyIsImFhYmJRdWVyeSIsIk5haXZlQnJvYWRwaGFzZSIsImJvZGllcyIsIlJheWNhc3RSZXN1bHQiLCJyYXlGcm9tV29ybGQiLCJyYXlUb1dvcmxkIiwiaGl0Tm9ybWFsV29ybGQiLCJoaXRQb2ludFdvcmxkIiwiaGFzSGl0IiwiaGl0RmFjZUluZGV4IiwiZGlzdGFuY2UiLCJzaG91bGRTdG9wIiwiYWJvcnQiLCJfU2hhcGUkdHlwZXMkU1BIRVJFIiwiX1NoYXBlJHR5cGVzJFBMQU5FIiwiX1NoYXBlJHR5cGVzJEJPWCIsIl9TaGFwZSR0eXBlcyRDWUxJTkRFUiIsIl9TaGFwZSR0eXBlcyRDT05WRVhQTyIsIl9TaGFwZSR0eXBlcyRIRUlHSFRGSSIsIl9TaGFwZSR0eXBlcyRUUklNRVNIIiwiUkFZX01PREVTIiwiQ0xPU0VTVCIsIkFOWSIsIkFMTCIsIlJheSIsIl9pbnRlcnNlY3RTcGhlcmUiLCJfaW50ZXJzZWN0UGxhbmUiLCJfaW50ZXJzZWN0Qm94IiwiX2ludGVyc2VjdENvbnZleCIsIl9pbnRlcnNlY3RIZWlnaHRmaWVsZCIsIl9pbnRlcnNlY3RUcmltZXNoIiwidG8iLCJjaGVja0NvbGxpc2lvblJlc3BvbnNlIiwic2tpcEJhY2tmYWNlcyIsIm1vZGUiLCJpbnRlcnNlY3RXb3JsZCIsInVwZGF0ZURpcmVjdGlvbiIsImdldEFBQkIiLCJ0bXBBQUJCJDEiLCJ0bXBBcnJheSIsImJyb2FkcGhhc2UiLCJpbnRlcnNlY3RCb2RpZXMiLCJpbnRlcnNlY3RCb2R5IiwieGkiLCJpbnRlcnNlY3RCb2R5X3hpIiwicWkiLCJpbnRlcnNlY3RCb2R5X3FpIiwiaW50ZXJzZWN0U2hhcGUiLCJkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24iLCJpbnRlcnNlY3RNZXRob2QiLCJib3giLCJyZXBvcnRlZFNoYXBlIiwid29ybGROb3JtYWwiLCJsZW4iLCJwbGFuZVRvRnJvbSIsInBsYW5lVG9UbyIsIm5fZG90X2RpciIsInBsYW5lUG9pbnRUb0Zyb20iLCJkaXJfc2NhbGVkX3dpdGhfdCIsInJlcG9ydEludGVyc2VjdGlvbiIsImRhdGEiLCJlbGVtZW50U2l6ZSIsImxvY2FsUmF5IiwiaW50ZXJzZWN0SGVpZ2h0ZmllbGRfbG9jYWxSYXkiLCJpbnRlcnNlY3RIZWlnaHRmaWVsZF9pbmRleCIsImlNaW5YIiwiaU1pblkiLCJpTWF4WCIsImlNYXhZIiwiZ2V0SW5kZXhPZlBvc2l0aW9uIiwiZ2V0QWFiYkF0SW5kZXgiLCJnZXRDb252ZXhUcmlhbmdsZVBpbGxhciIsInBpbGxhck9mZnNldCIsIndvcmxkUGlsbGFyT2Zmc2V0IiwicGlsbGFyQ29udmV4IiwiaW50ZXJzZWN0Q29udmV4T3B0aW9ucyIsInNwaGVyZSIsImRlbHRhIiwiaW50ZXJzZWN0aW9uUG9pbnQiLCJSYXlfaW50ZXJzZWN0U3BoZXJlX2ludGVyc2VjdGlvblBvaW50IiwiUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWwiLCJkMiIsImludGVyc2VjdENvbnZleF9ub3JtYWwiLCJpbnRlcnNlY3RDb252ZXhfdmVjdG9yIiwiZmFjZUxpc3QiLCJmcm9tVG9EaXN0YW5jZSIsIk5mYWNlcyIsImZhY2VOb3JtYWwiLCJpbnRlcnNlY3RQb2ludCIsInBvaW50SW5UcmlhbmdsZSIsIm1lc2giLCJpbnRlcnNlY3RUcmltZXNoX25vcm1hbCIsInRyaWFuZ2xlcyIsImludGVyc2VjdFRyaW1lc2hfdHJpYW5nbGVzIiwidHJlZVRyYW5zZm9ybSIsImludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybSIsImxvY2FsRGlyZWN0aW9uIiwiaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbiIsImxvY2FsRnJvbSIsImludGVyc2VjdFRyaW1lc2hfbG9jYWxGcm9tIiwibG9jYWxUbyIsImludGVyc2VjdFRyaW1lc2hfbG9jYWxUbyIsIndvcmxkSW50ZXJzZWN0UG9pbnQiLCJpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQiLCJpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsIiwiaW5kaWNlcyIsImZyb21Ub0Rpc3RhbmNlU3F1YXJlZCIsInRyZWUiLCJyYXlRdWVyeSIsInRyaWFuZ2xlc0luZGV4IiwiZ2V0Tm9ybWFsIiwiZ2V0VmVydGV4Iiwic3F1YXJlZERpc3RhbmNlIiwidjAiLCJ2MSIsInYyIiwiZG90MDAiLCJkb3QwMSIsImRvdDAyIiwiZG90MTEiLCJkb3QxMiIsImludGVyc2VjdCIsIlNBUEJyb2FkcGhhc2UiLCJjaGVja0JvdW5kcyIsImF4aXNJbmRleCIsImJpUG9zIiwiYmpQb3MiLCJyaSIsInJqIiwiYm91bmRBMiIsImJvdW5kQjEiLCJpbnNlcnRpb25Tb3J0WCIsImluc2VydGlvblNvcnRZIiwiaW5zZXJ0aW9uU29ydFoiLCJheGlzTGlzdCIsIl9hZGRCb2R5SGFuZGxlciIsIl9yZW1vdmVCb2R5SGFuZGxlciIsImlkeCIsInNvcnRMaXN0IiwiYXV0b0RldGVjdEF4aXMiLCJzdW1YIiwic3VtWDIiLCJzdW1ZIiwic3VtWTIiLCJzdW1aIiwic3VtWjIiLCJjZW50ZXJYIiwiY2VudGVyWSIsImNlbnRlcloiLCJ2YXJpYW5jZVgiLCJ2YXJpYW5jZVkiLCJ2YXJpYW5jZVoiLCJVdGlscyIsImRlZmF1bHRzIiwiQ29uc3RyYWludCIsImVxdWF0aW9ucyIsImNvbGxpZGVDb25uZWN0ZWQiLCJ3YWtlVXBCb2RpZXMiLCJ1cGRhdGUiLCJlbmFibGUiLCJlcXMiLCJlbmFibGVkIiwiZGlzYWJsZSIsIkphY29iaWFuRWxlbWVudCIsInNwYXRpYWwiLCJyb3RhdGlvbmFsIiwibXVsdGlwbHlFbGVtZW50IiwiZWxlbWVudCIsIm11bHRpcGx5VmVjdG9ycyIsIkVxdWF0aW9uIiwibWluRm9yY2UiLCJtYXhGb3JjZSIsInNpIiwic2oiLCJlcHMiLCJqYWNvYmlhbkVsZW1lbnRBIiwiamFjb2JpYW5FbGVtZW50QiIsInNldFNwb29rUGFyYW1zIiwic3RpZmZuZXNzIiwicmVsYXhhdGlvbiIsInRpbWVTdGVwIiwiY29tcHV0ZUIiLCJHVyIsImNvbXB1dGVHVyIsIkdxIiwiY29tcHV0ZUdxIiwiR2lNZiIsImNvbXB1dGVHaU1mIiwiR0EiLCJHQiIsInhqIiwidmoiLCJ3aSIsIndqIiwiY29tcHV0ZUdXbGFtYmRhIiwidGkiLCJmaiIsInRqIiwiaW52TWFzc2kiLCJpbnZNYXNzaiIsImlNZmkiLCJpTWZqIiwiaW52SWlfdm11bHRfdGF1aSIsImludklqX3ZtdWx0X3RhdWoiLCJjb21wdXRlR2lNR3QiLCJpbnZJaSIsImludklqIiwiYWRkVG9XbGFtYmRhIiwiZGVsdGFsYW1iZGEiLCJhZGRUb1dsYW1iZGFfdGVtcCIsImNvbXB1dGVDIiwiQ29udGFjdEVxdWF0aW9uIiwicmVzdGl0dXRpb24iLCJuaSIsInJpeG4iLCJDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDEiLCJyanhuIiwiQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyIiwicGVuZXRyYXRpb25WZWMiLCJDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDMiLCJlUGx1c09uZSIsImdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwiLCJDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aSIsIkNvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZqIiwiQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGkiLCJDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aiIsInJlbFZlbCIsIkNvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbCIsIlBvaW50VG9Qb2ludENvbnN0cmFpbnQiLCJwaXZvdEEiLCJwaXZvdEIiLCJlcXVhdGlvblgiLCJlcXVhdGlvblkiLCJlcXVhdGlvbloiLCJDb25lRXF1YXRpb24iLCJheGlzQSIsImF4aXNCIiwibmoiLCJuaXhuaiIsInRtcFZlYzEkMiIsIm5qeG5pIiwidG1wVmVjMiQyIiwiUm90YXRpb25hbEVxdWF0aW9uIiwibWF4QW5nbGUiLCJ0bXBWZWMxJDEiLCJ0bXBWZWMyJDEiLCJDb25lVHdpc3RDb25zdHJhaW50IiwidHdpc3RBbmdsZSIsImNvbmVFcXVhdGlvbiIsInR3aXN0RXF1YXRpb24iLCJjb25lIiwidHdpc3QiLCJEaXN0YW5jZUNvbnN0cmFpbnQiLCJkaXN0YW5jZUVxdWF0aW9uIiwiZXEiLCJoYWxmRGlzdCIsIkxvY2tDb25zdHJhaW50IiwiaGFsZldheSIsInhBIiwieEIiLCJ5QSIsInlCIiwiekEiLCJ6QiIsInJvdGF0aW9uYWxFcXVhdGlvbjEiLCJyb3RhdGlvbmFsRXF1YXRpb24yIiwicm90YXRpb25hbEVxdWF0aW9uMyIsIm1vdG9yRXF1YXRpb24iLCJyMyIsIlJvdGF0aW9uYWxNb3RvckVxdWF0aW9uIiwidGFyZ2V0VmVsb2NpdHkiLCJIaW5nZUNvbnN0cmFpbnQiLCJyb3RhdGlvbmFsMSIsInJvdGF0aW9uYWwyIiwibW90b3IiLCJlbmFibGVNb3RvciIsImRpc2FibGVNb3RvciIsInNldE1vdG9yU3BlZWQiLCJzcGVlZCIsInNldE1vdG9yTWF4Rm9yY2UiLCJ3b3JsZEF4aXNBIiwiSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxIiwid29ybGRBeGlzQiIsIkhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMiIsIkZyaWN0aW9uRXF1YXRpb24iLCJzbGlwRm9yY2UiLCJyaXh0IiwiRnJpY3Rpb25FcXVhdGlvbl9jb21wdXRlQl90ZW1wMSIsInJqeHQiLCJGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyIiwiQ29udGFjdE1hdGVyaWFsIiwibWF0ZXJpYWxzIiwiZnJpY3Rpb24iLCJjb250YWN0RXF1YXRpb25TdGlmZm5lc3MiLCJjb250YWN0RXF1YXRpb25SZWxheGF0aW9uIiwiZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyIsImZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uIiwiTWF0ZXJpYWwiLCJuYW1lIiwiU3ByaW5nIiwicmVzdExlbmd0aCIsImRhbXBpbmciLCJsb2NhbEFuY2hvckEiLCJsb2NhbEFuY2hvckIiLCJ3b3JsZEFuY2hvckEiLCJzZXRXb3JsZEFuY2hvckEiLCJ3b3JsZEFuY2hvckIiLCJzZXRXb3JsZEFuY2hvckIiLCJnZXRXb3JsZEFuY2hvckEiLCJnZXRXb3JsZEFuY2hvckIiLCJhcHBseUZvcmNlX3IiLCJyX3VuaXQiLCJhcHBseUZvcmNlX3JfdW5pdCIsImFwcGx5Rm9yY2VfdSIsImFwcGx5Rm9yY2VfZiIsImFwcGx5Rm9yY2VfdG1wIiwiYXBwbHlGb3JjZV93b3JsZEFuY2hvckEiLCJhcHBseUZvcmNlX3dvcmxkQW5jaG9yQiIsImFwcGx5Rm9yY2VfcmkiLCJhcHBseUZvcmNlX3JqIiwicmlfeF9mIiwiYXBwbHlGb3JjZV9yaV94X2YiLCJyal94X2YiLCJhcHBseUZvcmNlX3JqX3hfZiIsInJsZW4iLCJXaGVlbEluZm8iLCJtYXhTdXNwZW5zaW9uVHJhdmVsIiwiY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCIsInVzZUN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQiLCJzbGlkaW5nIiwiY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsIiwiY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkIiwiZGlyZWN0aW9uTG9jYWwiLCJkaXJlY3Rpb25Xb3JsZCIsImF4bGVMb2NhbCIsImF4bGVXb3JsZCIsInN1c3BlbnNpb25SZXN0TGVuZ3RoIiwic3VzcGVuc2lvbk1heExlbmd0aCIsInN1c3BlbnNpb25TdGlmZm5lc3MiLCJkYW1waW5nQ29tcHJlc3Npb24iLCJkYW1waW5nUmVsYXhhdGlvbiIsImZyaWN0aW9uU2xpcCIsImZvcndhcmRBY2NlbGVyYXRpb24iLCJzaWRlQWNjZWxlcmF0aW9uIiwic3RlZXJpbmciLCJyb3RhdGlvbiIsImRlbHRhUm90YXRpb24iLCJyb2xsSW5mbHVlbmNlIiwibWF4U3VzcGVuc2lvbkZvcmNlIiwiZW5naW5lRm9yY2UiLCJicmFrZSIsImlzRnJvbnRXaGVlbCIsImNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiIsInN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5Iiwic3VzcGVuc2lvbkZvcmNlIiwic2xpcEluZm8iLCJza2lkSW5mbyIsInN1c3BlbnNpb25MZW5ndGgiLCJzaWRlSW1wdWxzZSIsImZvcndhcmRJbXB1bHNlIiwicmF5Y2FzdFJlc3VsdCIsIndvcmxkVHJhbnNmb3JtIiwiaXNJbkNvbnRhY3QiLCJ1cGRhdGVXaGVlbCIsImNoYXNzaXMiLCJyZWxwb3MiLCJjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCIsInByb2pWZWwiLCJpbnYiLCJSYXljYXN0VmVoaWNsZSIsImNoYXNzaXNCb2R5Iiwid2hlZWxJbmZvcyIsImluZGV4UmlnaHRBeGlzIiwiaW5kZXhGb3J3YXJkQXhpcyIsImluZGV4VXBBeGlzIiwiY29uc3RyYWludHMiLCJwcmVTdGVwQ2FsbGJhY2siLCJjdXJyZW50VmVoaWNsZVNwZWVkS21Ib3VyIiwibnVtV2hlZWxzT25Hcm91bmQiLCJhZGRXaGVlbCIsImluZm8iLCJzZXRTdGVlcmluZ1ZhbHVlIiwid2hlZWxJbmRleCIsIndoZWVsIiwiYXBwbHlFbmdpbmVGb3JjZSIsInNldEJyYWtlIiwiYWRkVG9Xb3JsZCIsImFkZEJvZHkiLCJ0aGF0IiwidXBkYXRlVmVoaWNsZSIsImdldFZlaGljbGVBeGlzV29ybGQiLCJudW1XaGVlbHMiLCJ1cGRhdGVXaGVlbFRyYW5zZm9ybSIsImZvcndhcmRXb3JsZCIsImNhc3RSYXkiLCJ1cGRhdGVTdXNwZW5zaW9uIiwidXBkYXRlRnJpY3Rpb24iLCJoaXROb3JtYWxXb3JsZFNjYWxlZFdpdGhQcm9qIiwiZndkIiwidmVsIiwibSIsInByb2oiLCJwcm9qMiIsImRlbHRhVGltZSIsImNoYXNzaXNNYXNzIiwid19pdCIsInN1c3BfbGVuZ3RoIiwiY3VycmVudF9sZW5ndGgiLCJsZW5ndGhfZGlmZiIsInByb2plY3RlZF9yZWxfdmVsIiwic3VzcF9kYW1waW5nIiwicmVtb3ZlRnJvbVdvcmxkIiwicmVtb3ZlQm9keSIsInJheXZlY3RvciIsImNhc3RSYXlfcmF5dmVjdG9yIiwiY2FzdFJheV90YXJnZXQiLCJ1cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkIiwicmF5bGVuIiwic291cmNlIiwib2xkU3RhdGUiLCJyYXlUZXN0Iiwib2JqZWN0IiwiZ3JvdW5kT2JqZWN0IiwiaGl0RGlzdGFuY2UiLCJtaW5TdXNwZW5zaW9uTGVuZ3RoIiwibWF4U3VzcGVuc2lvbkxlbmd0aCIsImRlbm9taW5hdG9yIiwidXAiLCJ0bXBWZWM0IiwicmlnaHQiLCJ0bXBWZWM1IiwidG1wVmVjNiIsInN0ZWVyaW5nT3JuIiwicm90YXRpbmdPcm4iLCJnZXRXaGVlbFRyYW5zZm9ybVdvcmxkIiwic3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qIiwidXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qIiwiZm9yd2FyZFdTIiwidXBkYXRlRnJpY3Rpb25fZm9yd2FyZFdTIiwiYXhsZSIsInVwZGF0ZUZyaWN0aW9uX2F4bGUiLCJheGxlaSIsIndoZWVsVHJhbnMiLCJkaXJlY3Rpb25zIiwic3VyZk5vcm1hbFdTIiwicmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbCIsInNpZGVGcmljdGlvblN0aWZmbmVzczIiLCJzaWRlRmFjdG9yIiwiZndkRmFjdG9yIiwicm9sbGluZ0ZyaWN0aW9uIiwiZGVmYXVsdFJvbGxpbmdGcmljdGlvbkltcHVsc2UiLCJtYXhJbXB1bHNlIiwiY2FsY1JvbGxpbmdGcmljdGlvbiIsImZhY3RvciIsIm1heGltcCIsIm1heGltcFNpZGUiLCJtYXhpbXBTcXVhcmVkIiwiaW1wdWxzZVNxdWFyZWQiLCJyZWxfcG9zIiwicmVsX3BvczIiLCJzaWRlSW1wIiwiY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxIiwiY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwyIiwiY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwiLCJib2R5MCIsImJvZHkxIiwiZnJpY3Rpb25Qb3NXb3JsZCIsImZyaWN0aW9uRGlyZWN0aW9uV29ybGQiLCJqMSIsImNvbnRhY3RQb3NXb3JsZCIsInZlbDEiLCJ2ZWwyIiwidnJlbCIsImRlbm9tMCIsImNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IiLCJkZW5vbTEiLCJqYWNEaWFnQUJJbnYiLCJjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwIiwiY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMCIsImNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfdmVjIiwiY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tIiwicjAiLCJjMCIsInZlYyIsInJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMSIsInJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMiIsInJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsIiwicG9zMSIsImJvZHkyIiwicG9zMiIsIm5vcm1hbExlblNxciIsInJlbF92ZWwiLCJjb250YWN0RGFtcGluZyIsIm1hc3NUZXJtIiwiU3BoZXJlIiwiQ3lsaW5kZXIiLCJyYWRpdXNUb3AiLCJyYWRpdXNCb3R0b20iLCJoZWlnaHQiLCJudW1TZWdtZW50cyIsImJvdHRvbWZhY2UiLCJ0b3BmYWNlIiwidGhldGEiLCJ0aGV0YU4iLCJQYXJ0aWNsZSIsIlBsYW5lIiwid29ybGROb3JtYWxOZWVkc1VwZGF0ZSIsImNvbXB1dGVXb3JsZE5vcm1hbCIsInRlbXBOb3JtYWwiLCJtYXhWYWwiLCJIZWlnaHRmaWVsZCIsIm1heFZhbHVlIiwibWluVmFsdWUiLCJjYWNoZUVuYWJsZWQiLCJfY2FjaGVkUGlsbGFycyIsInVwZGF0ZU1pblZhbHVlIiwidXBkYXRlTWF4VmFsdWUiLCJzZXRIZWlnaHRWYWx1ZUF0SW5kZXgiLCJ5aSIsImNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIiLCJnZXRSZWN0TWluTWF4IiwiY2xhbXAiLCJmbG9vciIsImdldFRyaWFuZ2xlQXQiLCJlZGdlQ2xhbXAiLCJnZXRIZWlnaHRBdF9pZHgiLCJsb3dlckRpc3QyIiwidXBwZXJEaXN0MiIsInVwcGVyIiwiZ2V0VHJpYW5nbGUiLCJnZXROb3JtYWxBdCIsImdldE5vcm1hbEF0X2EiLCJnZXROb3JtYWxBdF9iIiwiZ2V0Tm9ybWFsQXRfYyIsImdldE5vcm1hbEF0X2UwIiwiZ2V0Tm9ybWFsQXRfZTEiLCJnZXRIZWlnaHRBdCIsImdldEhlaWdodEF0X2EiLCJnZXRIZWlnaHRBdF9iIiwiZ2V0SGVpZ2h0QXRfYyIsImJhcnljZW50cmljV2VpZ2h0cyIsImdldEhlaWdodEF0X3dlaWdodHMiLCJnZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5IiwiZ2V0VXBwZXJUcmlhbmdsZSIsImdldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyIiwic2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIiLCJjb252ZXgiLCJvZmZzZXRSZXN1bHQiLCJzZXRIZWlnaHRzRnJvbUltYWdlIiwiaW1hZ2UiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ3aWR0aCIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwiaW1hZ2VEYXRhIiwiZ2V0SW1hZ2VEYXRhIiwidW5zaGlmdCIsImN4IiwiY3kiLCJPY3RyZWVOb2RlIiwicm9vdCIsImNoaWxkcmVuIiwiaW5zZXJ0IiwiZWxlbWVudERhdGEiLCJsZXZlbCIsIm5vZGVEYXRhIiwibWF4RGVwdGgiLCJzdWJkaXZpZGVkIiwic3ViZGl2aWRlIiwiaGFsZkRpYWdvbmFsIiwiY2hpbGQiLCJxdWV1ZSIsIm5vZGUiLCJBcnJheSIsInByb3RvdHlwZSIsImFwcGx5IiwidG1wQUFCQiIsInJlbW92ZUVtcHR5Tm9kZXMiLCJPY3RyZWUiLCJUcmltZXNoIiwiRmxvYXQzMkFycmF5IiwiSW50MTZBcnJheSIsInVwZGF0ZUVkZ2VzIiwidXBkYXRlTm9ybWFscyIsInVwZGF0ZVRyZWUiLCJ0cmlhbmdsZUFBQkIiLCJpMyIsIl9nZXRVbnNjYWxlZFZlcnRleCIsImdldFRyaWFuZ2xlc0luQUFCQiIsInVuc2NhbGVkQUFCQiIsImlzeCIsImlzeSIsImlzeiIsInNldFNjYWxlIiwid2FzVW5pZm9ybSIsImlzVW5pZm9ybSIsImNvbXB1dGVOb3JtYWxzX24iLCJPYmplY3QiLCJzcGxpdCIsInBhcnNlSW50IiwiZ2V0RWRnZVZlcnRleCIsImVkZ2VJbmRleCIsImZpcnN0T3JTZWNvbmQiLCJ2ZXJ0ZXhTdG9yZSIsInZlcnRleEluZGV4IiwiZ2V0RWRnZVZlY3RvciIsInZlY3RvclN0b3JlIiwiZ2V0RWRnZVZlY3Rvcl92YSIsImdldEVkZ2VWZWN0b3JfdmIiLCJvdXQiLCJnZXRXb3JsZFZlcnRleCIsImdldFRyaWFuZ2xlVmVydGljZXMiLCJjbGlfYWFiYiIsImNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0IiwiY2FsY3VsYXRlV29ybGRBQUJCX2ZyYW1lIiwiY2FsY3VsYXRlV29ybGRBQUJCX2FhYmIiLCJjcmVhdGVUb3J1cyIsInR1YmUiLCJyYWRpYWxTZWdtZW50cyIsInR1YnVsYXJTZWdtZW50cyIsImFyYyIsIlNvbHZlciIsImFkZEVxdWF0aW9uIiwicmVtb3ZlRXF1YXRpb24iLCJyZW1vdmVBbGxFcXVhdGlvbnMiLCJHU1NvbHZlciIsIml0ZXJhdGlvbnMiLCJ0b2xlcmFuY2UiLCJpdGVyIiwibWF4SXRlciIsInRvbFNxdWFyZWQiLCJOZXEiLCJOYm9kaWVzIiwiaW52QyIsImRlbHRhbGFtYmRhVG90IiwiR1dsYW1iZGEiLCJsYW1iZGFqIiwiaW52Q3MiLCJHU1NvbHZlcl9zb2x2ZV9pbnZDcyIsIkJzIiwiR1NTb2x2ZXJfc29sdmVfQnMiLCJsYW1iZGEiLCJHU1NvbHZlcl9zb2x2ZV9sYW1iZGEiLCJpbnZEdCIsIlNwbGl0U29sdmVyIiwic3Vic29sdmVyIiwibm9kZXMiLCJub2RlUG9vbCIsImNyZWF0ZU5vZGUiLCJ2aXNpdGVkIiwiU3BsaXRTb2x2ZXJfc29sdmVfbm9kZXMiLCJTcGxpdFNvbHZlcl9zb2x2ZV9lcXMiLCJkdW1teVdvcmxkIiwiU3BsaXRTb2x2ZXJfc29sdmVfZHVtbXlXb3JsZCIsImdldFVudmlzaXRlZE5vZGUiLCJiZnMiLCJ2aXNpdEZ1bmMiLCJOZXFzIiwic29ydCIsInNvcnRCeUlkIiwiTm5vZGVzIiwiYmRzIiwiUG9vbCIsIm9iamVjdHMiLCJyZWxlYXNlIiwiYXJncyIsIk5hcmdzIiwiY29uc3RydWN0T2JqZWN0IiwicmVzaXplIiwic2l6ZSIsIlZlYzNQb29sIiwiX0NPTExJU0lPTl9UWVBFUyRzcGhlIiwiX0NPTExJU0lPTl9UWVBFUyRzcGhlMiIsIl9DT0xMSVNJT05fVFlQRVMkYm94QiIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZTMiLCJfQ09MTElTSU9OX1RZUEVTJHBsYW4iLCJfQ09MTElTSU9OX1RZUEVTJGNvbnYiLCJfQ09MTElTSU9OX1RZUEVTJHNwaGU0IiwiX0NPTExJU0lPTl9UWVBFUyRwbGFuMiIsIl9DT0xMSVNJT05fVFlQRVMkYm94QyIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZTUiLCJfQ09MTElTSU9OX1RZUEVTJGJveEgiLCJfQ09MTElTSU9OX1RZUEVTJGNvbnYyIiwiX0NPTExJU0lPTl9UWVBFUyRzcGhlNiIsIl9DT0xMSVNJT05fVFlQRVMkcGxhbjMiLCJfQ09MTElTSU9OX1RZUEVTJGJveFAiLCJfQ09MTElTSU9OX1RZUEVTJGNvbnYzIiwiX0NPTExJU0lPTl9UWVBFUyRjeWxpIiwiX0NPTExJU0lPTl9UWVBFUyRzcGhlNyIsIl9DT0xMSVNJT05fVFlQRVMkcGxhbjQiLCJfQ09MTElTSU9OX1RZUEVTJGJveEMyIiwiX0NPTExJU0lPTl9UWVBFUyRjb252NCIsIl9DT0xMSVNJT05fVFlQRVMkaGVpZyIsIl9DT0xMSVNJT05fVFlQRVMkcGFydCIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZTgiLCJfQ09MTElTSU9OX1RZUEVTJHBsYW41IiwiQ09MTElTSU9OX1RZUEVTIiwic3BoZXJlU3BoZXJlIiwic3BoZXJlUGxhbmUiLCJib3hCb3giLCJzcGhlcmVCb3giLCJwbGFuZUJveCIsImNvbnZleENvbnZleCIsInNwaGVyZUNvbnZleCIsInBsYW5lQ29udmV4IiwiYm94Q29udmV4Iiwic3BoZXJlSGVpZ2h0ZmllbGQiLCJib3hIZWlnaHRmaWVsZCIsImNvbnZleEhlaWdodGZpZWxkIiwic3BoZXJlUGFydGljbGUiLCJwbGFuZVBhcnRpY2xlIiwiYm94UGFydGljbGUiLCJjb252ZXhQYXJ0aWNsZSIsImN5bGluZGVyQ3lsaW5kZXIiLCJzcGhlcmVDeWxpbmRlciIsInBsYW5lQ3lsaW5kZXIiLCJib3hDeWxpbmRlciIsImNvbnZleEN5bGluZGVyIiwiaGVpZ2h0ZmllbGRDeWxpbmRlciIsInBhcnRpY2xlQ3lsaW5kZXIiLCJzcGhlcmVUcmltZXNoIiwicGxhbmVUcmltZXNoIiwiTmFycm93cGhhc2UiLCJjb250YWN0UG9pbnRQb29sIiwiZnJpY3Rpb25FcXVhdGlvblBvb2wiLCJmcmljdGlvblJlc3VsdCIsInYzcG9vbCIsImN1cnJlbnRDb250YWN0TWF0ZXJpYWwiLCJlbmFibGVGcmljdGlvblJlZHVjdGlvbiIsImRlZmF1bHRDb250YWN0TWF0ZXJpYWwiLCJjcmVhdGVDb250YWN0RXF1YXRpb24iLCJvdmVycmlkZVNoYXBlQSIsIm92ZXJyaWRlU2hhcGVCIiwiY20iLCJtYXRBIiwibWF0QiIsImNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QiLCJjb250YWN0RXF1YXRpb24iLCJvdXRBcnJheSIsInNoYXBlQSIsInNoYXBlQiIsIm11ZyIsImdyYXZpdHkiLCJyZWR1Y2VkTWFzcyIsInBvb2wiLCJjcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlIiwibnVtQ29udGFjdHMiLCJmMSIsImYyIiwiYXZlcmFnZU5vcm1hbCIsImF2ZXJhZ2VDb250YWN0UG9pbnRBIiwiYXZlcmFnZUNvbnRhY3RQb2ludEIiLCJpbnZOdW1Db250YWN0cyIsImdldENvbnRhY3RzIiwib2xkY29udGFjdHMiLCJmcmljdGlvblBvb2wiLCJ0bXBRdWF0MSIsInFqIiwidG1wUXVhdDIiLCJ0bXBWZWMxIiwidG1wVmVjMiIsImJvZHlDb250YWN0TWF0ZXJpYWwiLCJnZXRDb250YWN0TWF0ZXJpYWwiLCJqdXN0VGVzdCIsInNoYXBlQ29udGFjdE1hdGVyaWFsIiwicmVzb2x2ZXJJbmRleCIsInJlc29sdmVyIiwicmV0dmFsIiwic2hhcGVPdmVybGFwS2VlcGVyIiwiYm9keU92ZXJsYXBLZWVwZXIiLCJyc2kiLCJyc2oiLCJjb250YWN0RXEiLCJwb2ludF9vbl9wbGFuZV90b19zcGhlcmUiLCJwbGFuZV90b19zcGhlcmVfb3J0aG8iLCJzcGhlcmVCb3hfc2lkZXMiLCJib3hfdG9fc3BoZXJlIiwiUiIsInNpZGVfbnMiLCJzcGhlcmVCb3hfc2lkZV9ucyIsInNpZGVfbnMxIiwic3BoZXJlQm94X3NpZGVfbnMxIiwic2lkZV9uczIiLCJzcGhlcmVCb3hfc2lkZV9uczIiLCJzaWRlX2giLCJzaWRlX3BlbmV0cmF0aW9ucyIsInNpZGVfZG90MSIsInNpZGVfZG90MiIsInNpZGVfZGlzdGFuY2UiLCJuc2lkZXMiLCJucyIsInNwaGVyZUJveF9ucyIsIm5zMSIsInNwaGVyZUJveF9uczEiLCJuczIiLCJzcGhlcmVCb3hfbnMyIiwiaDEiLCJoMiIsImRvdDEiLCJkb3QyIiwic3BoZXJlX3RvX2Nvcm5lciIsInNwaGVyZUJveF9zcGhlcmVfdG9fY29ybmVyIiwiZWRnZVRhbmdlbnQiLCJlZGdlQ2VudGVyIiwib3J0aG9nb25hbCIsIk5zaWRlcyIsIm9ydGhvbm9ybSIsInRkaXN0IiwibmRpc3QiLCJyZXMiLCJzZXBBeGlzIiwiY29udmV4Q29udmV4X3NlcEF4aXMiLCJjb252ZXhDb252ZXhfcSIsImNvbnZleF90b19zcGhlcmUiLCJ3b3JsZENvcm5lciIsInNwaGVyZUNvbnZleF93b3JsZENvcm5lciIsInNwaGVyZUNvbnZleF9zcGhlcmVUb0Nvcm5lciIsIm5mYWNlcyIsInNwaGVyZUNvbnZleF93b3JsZE5vcm1hbCIsInNwaGVyZUNvbnZleF93b3JsZFBvaW50Iiwid29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lIiwic3BoZXJlQ29udmV4X3dvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSIsInNwaGVyZUNvbnZleF9wZW5ldHJhdGlvblZlYyIsInBlbmV0cmF0aW9uIiwid29ybGRQb2ludFRvU3BoZXJlIiwic3BoZXJlQ29udmV4X3NwaGVyZVRvV29ybGRQb2ludCIsImZhY2VWZXJ0cyIsIk52ZXJ0cyIsIndvcmxkVmVydGV4IiwicG9pbnRJblBvbHlnb24iLCJwZW5ldHJhdGlvblZlYzIiLCJwZW5ldHJhdGlvblNwaGVyZVBvaW50IiwiTmZhY2V2ZXJ0cyIsInNwaGVyZUNvbnZleF9lZGdlIiwiZWRnZVVuaXQiLCJzcGhlcmVDb252ZXhfZWRnZVVuaXQiLCJ2MV90b194aSIsInhpX3RvX3AiLCJwbGFuZVNoYXBlIiwiY29udmV4U2hhcGUiLCJwbGFuZVBvc2l0aW9uIiwiY29udmV4UG9zaXRpb24iLCJwbGFuZVF1YXQiLCJjb252ZXhRdWF0IiwicGxhbmVCb2R5IiwiY29udmV4Qm9keSIsInBsYW5lQ29udmV4X3YiLCJwbGFuZUNvbnZleF9ub3JtYWwiLCJwbGFuZUNvbnZleF9yZWxwb3MiLCJwcm9qZWN0ZWQiLCJwbGFuZUNvbnZleF9wcm9qZWN0ZWQiLCJzcGhlcmVTaGFwZSIsImhmU2hhcGUiLCJzcGhlcmVQb3MiLCJoZlBvcyIsInNwaGVyZVF1YXQiLCJoZlF1YXQiLCJzcGhlcmVCb2R5IiwiaGZCb2R5Iiwic3BoZXJlSGVpZ2h0ZmllbGRfdG1wMiIsImxvY2FsU3BoZXJlUG9zIiwic3BoZXJlSGVpZ2h0ZmllbGRfdG1wMSIsImNlaWwiLCJtaW5NYXgiLCJudW1Db250YWN0c0JlZm9yZSIsImludGVyc2VjdGluZyIsImNvbnZleFBvcyIsImNvbnZleEhlaWdodGZpZWxkX3RtcDIiLCJjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdCIsImxvY2FsQ29udmV4UG9zIiwiY29udmV4SGVpZ2h0ZmllbGRfdG1wMSIsInBhcnRpY2xlU3BoZXJlX25vcm1hbCIsInBhcnRpY2xlUGxhbmVfbm9ybWFsIiwicGFydGljbGVQbGFuZV9yZWxwb3MiLCJwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZCIsInBlbmV0cmF0ZWRGYWNlSW5kZXgiLCJwZW5ldHJhdGVkRmFjZU5vcm1hbCIsImNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsIiwid29ybGRQZW5ldHJhdGlvblZlYyIsImNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWMiLCJtaW5QZW5ldHJhdGlvbiIsImxvY2FsIiwiY29udmV4UGFydGljbGVfbG9jYWwiLCJjcWoiLCJjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlIiwidHJpbWVzaFNoYXBlIiwidHJpbWVzaFBvcyIsInRyaW1lc2hRdWF0IiwidHJpbWVzaEJvZHkiLCJlZGdlVmVydGV4QSIsInNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEEiLCJlZGdlVmVydGV4QiIsInNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEIiLCJlZGdlVmVjdG9yIiwic3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yIiwiZWRnZVZlY3RvclVuaXQiLCJzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3JVbml0Iiwic3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvcyIsInNwaGVyZVRyaW1lc2hfdG1wIiwibG9jYWxTcGhlcmVBQUJCIiwic3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZUFBQkIiLCJzcGhlcmVUcmltZXNoX3YyIiwic3BoZXJlVHJpbWVzaF9yZWxwb3MiLCJzcGhlcmVUcmltZXNoX3RyaWFuZ2xlcyIsInNwaGVyZVJhZGl1cyIsInNwaGVyZVRyaW1lc2hfdiIsInJhZGl1c1NxdWFyZWQiLCJwb3NpdGlvbkFsb25nRWRnZUIiLCJwb3NpdGlvbkFsb25nRWRnZUEiLCJzcGhlcmVUcmltZXNoX3ZhIiwic3BoZXJlVHJpbWVzaF92YiIsInNwaGVyZVRyaW1lc2hfdmMiLCJzcGhlcmVUcmltZXNoX25vcm1hbCIsInBsYW5lUG9zIiwicGxhbmVUcmltZXNoX25vcm1hbCIsInBsYW5lVHJpbWVzaF9yZWxwb3MiLCJwbGFuZVRyaW1lc2hfcHJvamVjdGVkIiwicG9pbnRJblBvbHlnb25fZWRnZSIsInBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWwiLCJwb2ludEluUG9seWdvbl92dHAiLCJwb3NpdGl2ZVJlc3VsdCIsImVkZ2VfeF9ub3JtYWwiLCJ2ZXJ0ZXhfdG9fcCIsIk92ZXJsYXBLZWVwZXIiLCJjdXJyZW50IiwicHJldmlvdXMiLCJnZXRLZXkiLCJ0aWNrIiwiZ2V0RGlmZiIsImFkZGl0aW9ucyIsInJlbW92YWxzIiwiYWwiLCJibCIsImtleUEiLCJ1bnBhY2tBbmRQdXNoIiwia2V5QiIsImFycmF5IiwiVHVwbGVEaWN0aW9uYXJ5IiwiV29ybGQiLCJjb250YWN0cyIsImZyaWN0aW9uRXF1YXRpb25zIiwicXVhdE5vcm1hbGl6ZVNraXAiLCJzdGVwbnVtYmVyIiwiZGVmYXVsdF9kdCIsIm5leHRJZCIsImhhc0FjdGl2ZUJvZGllcyIsInNvbHZlciIsIm5hcnJvd3BoYXNlIiwiY29sbGlzaW9uTWF0cml4IiwiY29sbGlzaW9uTWF0cml4UHJldmlvdXMiLCJjb250YWN0bWF0ZXJpYWxzIiwiY29udGFjdE1hdGVyaWFsVGFibGUiLCJkZWZhdWx0TWF0ZXJpYWwiLCJkb1Byb2ZpbGluZyIsInByb2ZpbGUiLCJhY2N1bXVsYXRvciIsInN1YnN5c3RlbXMiLCJhZGRCb2R5RXZlbnQiLCJyZW1vdmVCb2R5RXZlbnQiLCJpZFRvQm9keU1hcCIsIm1ha2VDb250YWN0Q29uc3RyYWludHMiLCJudW1PYmplY3RzIiwiY29sbGlzaW9uTWF0cml4VGljayIsImFkZENvbnN0cmFpbnQiLCJyZW1vdmVDb25zdHJhaW50IiwicmF5Y2FzdENsb3Nlc3QiLCJyYXljYXN0QWxsIiwidG1wUmF5IiwicmF5Y2FzdEFueSIsImdldEJvZHlCeUlkIiwiZ2V0U2hhcGVCeUlkIiwiYWRkTWF0ZXJpYWwiLCJhZGRDb250YWN0TWF0ZXJpYWwiLCJjbWF0Iiwic3RlcCIsInRpbWVTaW5jZUxhc3RDYWxsZWQiLCJtYXhTdWJTdGVwcyIsImludGVybmFsU3RlcCIsInQwIiwicGVyZm9ybWFuY2UiLCJub3ciLCJzdWJzdGVwcyIsIldvcmxkX3N0ZXBfcDEiLCJXb3JsZF9zdGVwX3AyIiwicHJvZmlsaW5nU3RhcnQiLCJXb3JsZF9zdGVwX2ZyaWN0aW9uRXF1YXRpb25Qb29sIiwiZ3giLCJneSIsImd6IiwiTnN1YnN5c3RlbXMiLCJOY29uc3RyYWludHMiLCJXb3JsZF9zdGVwX29sZENvbnRhY3RzIiwiTm9sZENvbnRhY3RzIiwiTm9sZEZyaWN0aW9uRXF1YXRpb25zIiwibmNvbnRhY3RzIiwic3BlZWRTcXVhcmVkQiIsInNwZWVkTGltaXRTcXVhcmVkQiIsInNwZWVkU3F1YXJlZEEiLCJzcGVlZExpbWl0U3F1YXJlZEEiLCJXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCIsImNvbnRhY3QiLCJlbWl0Q29udGFjdEV2ZW50cyIsImxkIiwiYXYiLCJhZCIsIldvcmxkX3N0ZXBfcHJlU3RlcEV2ZW50IiwiY2xlYXJGb3JjZXMiLCJXb3JsZF9zdGVwX3Bvc3RTdGVwRXZlbnQiLCJoYXNCZWdpbkNvbnRhY3QiLCJoYXNFbmRDb250YWN0IiwiYmVnaW5Db250YWN0RXZlbnQiLCJlbmRDb250YWN0RXZlbnQiLCJoYXNCZWdpblNoYXBlQ29udGFjdCIsImhhc0VuZFNoYXBlQ29udGFjdCIsImJlZ2luU2hhcGVDb250YWN0RXZlbnQiLCJlbmRTaGFwZUNvbnRhY3RFdmVudCIsImdsb2JhbFRoaXMiLCJub3dPZmZzZXQiLCJEYXRlIiwidGltaW5nIiwibmF2aWdhdGlvblN0YXJ0IiwibWFrZVZlYzMiLCJwcmVwYXJlU3BoZXJlIiwiaXNBcnJheSIsInByZXBhcmVDb252ZXhQb2x5aGVkcm9uIiwibWFwIiwiY3JlYXRlU2hhcGUiLCJwcm9wc1RvQm9keSIsInV1aWQiLCJib2R5VHlwZSIsIm9uQ29sbGlkZSIsImV4dHJhIiwidG9VcHBlckNhc2UiLCJmb3JFYWNoIiwic2hhcGVCb2R5IiwiYXNzaWduIiwic3RhdGUiLCJ2ZWhpY2xlcyIsInNwcmluZ3MiLCJzcHJpbmdJbnN0YW5jZXMiLCJyYXlzIiwiY29uZmlnIiwic3Vic2NyaXB0aW9ucyIsInRlbXBWZWN0b3IiLCJib2RpZXNOZWVkU3luY2luZyIsImxhc3RDYWxsVGltZSIsInN5bmNCb2RpZXMiLCJyZWR1Y2UiLCJhY2MiLCJlbWl0QmVnaW5Db250YWN0Iiwic2VsZiIsInBvc3RNZXNzYWdlIiwib3AiLCJlbWl0RW5kQ29udGFjdCIsIm9ubWVzc2FnZSIsInBvc2l0aW9ucyIsInF1YXRlcm5pb25zIiwiYnJvYWRwaGFzZXMiLCJ0aW1lU2luY2VMYXN0Q2FsbCIsIm51bWJlck9mQm9kaWVzIiwib2JzZXJ2YXRpb25zIiwibWVzc2FnZSIsImFjdGl2ZSIsImJ1ZmZlciIsImNvbnRhY3RQb2ludCIsImNvbnRhY3ROb3JtYWwiLCJpbXBhY3RWZWxvY2l0eSIsImNvbGxpc2lvbkZpbHRlcnMiLCJib2R5RmlsdGVyR3JvdXAiLCJib2R5RmlsdGVyTWFzayIsInRhcmdldEZpbHRlckdyb3VwIiwidGFyZ2V0RmlsdGVyTWFzayIsIm9wdG5zIiwiY29uc3RyYWludCIsImZpbHRlciIsInRoaXNJZCIsInNwcmluZyIsInBvc3RTdGVwU3ByaW5nIiwicmVzdCIsIndoZWVscyIsInZlaGljbGUiLCJ3aGVlbEluZm8iLCJ3aGVlbEJvZHkiXSwibWFwcGluZ3MiOiI7OztFQUFBO0VBQ0E7RUFDQTtFQTRFQTtFQUNBO0VBQ0E7RUFDQTs7O0VBQ0EsTUFBTUEsSUFBTixDQUFXO0VBQ1Q7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTtFQUNFQyxFQUFBQSxXQUFXLENBQUNDLFFBQVEsR0FBRyxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVYsRUFBYSxDQUFiLEVBQWdCLENBQWhCLEVBQW1CLENBQW5CLEVBQXNCLENBQXRCLEVBQXlCLENBQXpCLENBQVosRUFBeUM7RUFDbEQsU0FBS0EsUUFBTCxHQUFnQixLQUFLLENBQXJCO0VBQ0EsU0FBS0EsUUFBTCxHQUFnQkEsUUFBaEI7RUFDRDtFQUNEO0VBQ0Y7RUFDQTtFQUNBO0VBQ0E7OztFQUdFQyxFQUFBQSxRQUFRLEdBQUc7RUFDVCxVQUFNQyxDQUFDLEdBQUcsS0FBS0YsUUFBZjtFQUNBRSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNEO0VBQ0Q7RUFDRjtFQUNBOzs7RUFHRUMsRUFBQUEsT0FBTyxHQUFHO0VBQ1IsVUFBTUQsQ0FBQyxHQUFHLEtBQUtGLFFBQWY7RUFDQUUsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDRDtFQUNEO0VBQ0Y7RUFDQTs7O0VBR0VFLEVBQUFBLFFBQVEsQ0FBQ0MsTUFBRCxFQUFTO0VBQ2YsVUFBTUgsQ0FBQyxHQUFHLEtBQUtGLFFBQWY7RUFDQUUsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPRyxNQUFNLENBQUNDLENBQWQ7RUFDQUosSUFBQUEsQ0FBQyxDQUFDLENB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', false);
/* eslint-enable */

function useUpdateWorldPropsEffect({
  worker,
  gravity,
  tolerance,
  step,
  iterations,
  broadphase,
  axisIndex
}) {
  useEffect(() => void worker.postMessage({
    op: 'setGravity',
    props: gravity
  }), [gravity]);
  useEffect(() => void worker.postMessage({
    op: 'setTolerance',
    props: tolerance
  }), [tolerance]);
  useEffect(() => void worker.postMessage({
    op: 'setStep',
    props: step
  }), [step]);
  useEffect(() => void worker.postMessage({
    op: 'setIterations',
    props: iterations
  }), [iterations]);
  useEffect(() => void worker.postMessage({
    op: 'setBroadphase',
    props: broadphase
  }), [broadphase]);
  useEffect(() => void worker.postMessage({
    op: 'setAxisIndex',
    props: axisIndex
  }), [axisIndex]);
}

const v$1 = new Vector3();
const s$1 = new Vector3(1, 1, 1);
const q$1 = new Quaternion$1();
const m = new Matrix4();

function apply(index, buffers, object) {
  if (index !== undefined) {
    m.compose(v$1.fromArray(buffers.positions, index * 3), q$1.fromArray(buffers.quaternions, index * 4), object ? object.scale : s$1);

    if (object) {
      object.matrixAutoUpdate = false;
      object.matrix.copy(m);
    }

    return m;
  }

  return m.identity();
}

function Provider({
  children,
  shouldInvalidate = true,
  step = 1 / 60,
  gravity = [0, -10, 0],
  tolerance = 0.001,
  iterations = 5,
  allowSleep = false,
  broadphase = 'Naive',
  axisIndex = 0,
  quatNormalizeFast = false,
  quatNormalizeSkip = 0,
  solver = 'GS',
  defaultContactMaterial = {
    contactEquationStiffness: 1e6
  },
  size = 1000
}) {
  const {
    invalidate
  } = useThree();
  const [worker] = useState(() => new WorkerFactory());
  const [refs] = useState({});
  const [buffers] = useState(() => ({
    positions: new Float32Array(size * 3),
    quaternions: new Float32Array(size * 4)
  }));
  const [events] = useState({});
  const [subscriptions] = useState({});
  const bodies = useRef({});
  const loop = useCallback(() => {
    if (buffers.positions.byteLength !== 0 && buffers.quaternions.byteLength !== 0) {
      worker.postMessage({
        op: 'step',
        ...buffers
      }, [buffers.positions.buffer, buffers.quaternions.buffer]);
    }
  }, []); // Run loop *after* all the physics objects have ran theirs!
  // Otherwise the buffers will be invalidated by the browser

  useFrame(loop);
  useLayoutEffect(() => {
    worker.postMessage({
      op: 'init',
      props: {
        gravity,
        tolerance,
        step,
        iterations,
        broadphase,
        allowSleep,
        axisIndex,
        defaultContactMaterial,
        quatNormalizeFast,
        quatNormalizeSkip,
        solver
      }
    });
    let i = 0;
    let body;

    worker.onmessage = e => {
      switch (e.data.op) {
        case 'frame':
          buffers.positions = e.data.positions;
          buffers.quaternions = e.data.quaternions;

          if (e.data.bodies) {
            for (i = 0; i < e.data.bodies.length; i++) {
              body = e.data.bodies[i];
              bodies.current[body] = e.data.bodies.indexOf(body);
            }
          }

          e.data.observations.forEach(([key, value]) => {
            if (subscriptions[key]) subscriptions[key](value);
          });

          if (e.data.active) {
            for (const ref of Object.values(refs)) {
              if (ref instanceof InstancedMesh) {
                for (let i = 0; i < ref.count; i++) {
                  const index = bodies.current[`${ref.uuid}/${i}`];

                  if (index !== undefined) {
                    ref.setMatrixAt(i, apply(index, buffers));
                  }

                  ref.instanceMatrix.needsUpdate = true;
                }
              } else {
                apply(bodies.current[ref.uuid], buffers, ref);
              }
            }

            if (shouldInvalidate) {
              invalidate();
            }
          }

          break;

        case 'event':
          switch (e.data.type) {
            case 'collide':
              events[e.data.target]({ ...e.data,
                target: refs[e.data.target],
                body: refs[e.data.body],
                contact: { ...e.data.contact,
                  bi: refs[e.data.contact.bi],
                  bj: refs[e.data.contact.bj]
                }
              });
              break;

            case 'collideBegin':
              if (events[e.data.bodyA]) {
                events[e.data.bodyA]({
                  op: 'event',
                  type: 'collideBegin',
                  target: refs[e.data.bodyA],
                  body: refs[e.data.bodyB]
                });
              }

              if (events[e.data.bodyB]) {
                events[e.data.bodyB]({
                  op: 'event',
                  type: 'collideBegin',
                  target: refs[e.data.bodyB],
                  body: refs[e.data.bodyA]
                });
              }

              break;

            case 'collideEnd':
              if (events[e.data.bodyA]) {
                events[e.data.bodyA]({
                  op: 'event',
                  type: 'collideEnd',
                  target: refs[e.data.bodyA],
                  body: refs[e.data.bodyB]
                });
              }

              if (events[e.data.bodyB]) {
                events[e.data.bodyB]({
                  op: 'event',
                  type: 'collideEnd',
                  target: refs[e.data.bodyB],
                  body: refs[e.data.bodyA]
                });
              }

              break;

            case 'rayhit':
              if (!events[e.data.ray.uuid]) break;
              events[e.data.ray.uuid]({ ...e.data,
                body: e.data.body ? refs[e.data.body] : null
              });
              break;
          }

          break;
      }
    };

    return () => worker.terminate();
  }, []);
  useUpdateWorldPropsEffect({
    worker,
    axisIndex,
    broadphase,
    gravity,
    iterations,
    step,
    tolerance
  });
  const api = useMemo(() => ({
    worker,
    bodies,
    refs,
    buffers,
    events,
    subscriptions
  }), [worker, bodies, refs, buffers, events, subscriptions]);
  return /*#__PURE__*/React.createElement(context.Provider, {
    value: api
  }, children);
}

/**
 * Records what objects are colliding with each other
 */
/**
 * A 3x3 matrix.
 * Authored by {@link http://github.com/schteppe/ schteppe}
 */


class Mat3 {
  /**
   * A vector of length 9, containing all matrix elements.
   */

  /**
   * @param elements A vector of length 9, containing all matrix elements.
   */
  constructor(elements = [0, 0, 0, 0, 0, 0, 0, 0, 0]) {
    this.elements = void 0;
    this.elements = elements;
  }
  /**
   * Sets the matrix to identity
   * @todo Should perhaps be renamed to `setIdentity()` to be more clear.
   * @todo Create another function that immediately creates an identity matrix eg. `eye()`
   */


  identity() {
    const e = this.elements;
    e[0] = 1;
    e[1] = 0;
    e[2] = 0;
    e[3] = 0;
    e[4] = 1;
    e[5] = 0;
    e[6] = 0;
    e[7] = 0;
    e[8] = 1;
  }
  /**
   * Set all elements to zero
   */


  setZero() {
    const e = this.elements;
    e[0] = 0;
    e[1] = 0;
    e[2] = 0;
    e[3] = 0;
    e[4] = 0;
    e[5] = 0;
    e[6] = 0;
    e[7] = 0;
    e[8] = 0;
  }
  /**
   * Sets the matrix diagonal elements from a Vec3
   */


  setTrace(vector) {
    const e = this.elements;
    e[0] = vector.x;
    e[4] = vector.y;
    e[8] = vector.z;
  }
  /**
   * Gets the matrix diagonal elements
   */


  getTrace(target = new Vec3()) {
    const e = this.elements;
    target.x = e[0];
    target.y = e[4];
    target.z = e[8];
    return target;
  }
  /**
   * Matrix-Vector multiplication
   * @param v The vector to multiply with
   * @param target Optional, target to save the result in.
   */


  vmult(v, target = new Vec3()) {
    const e = this.elements;
    const x = v.x;
    const y = v.y;
    const z = v.z;
    target.x = e[0] * x + e[1] * y + e[2] * z;
    target.y = e[3] * x + e[4] * y + e[5] * z;
    target.z = e[6] * x + e[7] * y + e[8] * z;
    return target;
  }
  /**
   * Matrix-scalar multiplication
   */


  smult(s) {
    for (let i = 0; i < this.elements.length; i++) {
      this.elements[i] *= s;
    }
  }
  /**
   * Matrix multiplication
   * @param matrix Matrix to multiply with from left side.
   */


  mmult(matrix, target = new Mat3()) {
    const A = this.elements;
    const B = matrix.elements;
    const T = target.elements;
    const a11 = A[0],
          a12 = A[1],
          a13 = A[2],
          a21 = A[3],
          a22 = A[4],
          a23 = A[5],
          a31 = A[6],
          a32 = A[7],
          a33 = A[8];
    const b11 = B[0],
          b12 = B[1],
          b13 = B[2],
          b21 = B[3],
          b22 = B[4],
          b23 = B[5],
          b31 = B[6],
          b32 = B[7],
          b33 = B[8];
    T[0] = a11 * b11 + a12 * b21 + a13 * b31;
    T[1] = a11 * b12 + a12 * b22 + a13 * b32;
    T[2] = a11 * b13 + a12 * b23 + a13 * b33;
    T[3] = a21 * b11 + a22 * b21 + a23 * b31;
    T[4] = a21 * b12 + a22 * b22 + a23 * b32;
    T[5] = a21 * b13 + a22 * b23 + a23 * b33;
    T[6] = a31 * b11 + a32 * b21 + a33 * b31;
    T[7] = a31 * b12 + a32 * b22 + a33 * b32;
    T[8] = a31 * b13 + a32 * b23 + a33 * b33;
    return target;
  }
  /**
   * Scale each column of the matrix
   */


  scale(vector, target = new Mat3()) {
    const e = this.elements;
    const t = target.elements;

    for (let i = 0; i !== 3; i++) {
      t[3 * i + 0] = vector.x * e[3 * i + 0];
      t[3 * i + 1] = vector.y * e[3 * i + 1];
      t[3 * i + 2] = vector.z * e[3 * i + 2];
    }

    return target;
  }
  /**
   * Solve Ax=b
   * @param b The right hand side
   * @param target Optional. Target vector to save in.
   * @return The solution x
   * @todo should reuse arrays
   */


  solve(b, target = new Vec3()) {
    // Construct equations
    const nr = 3; // num rows

    const nc = 4; // num cols

    const eqns = [];
    let i;
    let j;

    for (i = 0; i < nr * nc; i++) {
      eqns.push(0);
    }

    for (i = 0; i < 3; i++) {
      for (j = 0; j < 3; j++) {
        eqns[i + nc * j] = this.elements[i + 3 * j];
      }
    }

    eqns[3 + 4 * 0] = b.x;
    eqns[3 + 4 * 1] = b.y;
    eqns[3 + 4 * 2] = b.z; // Compute right upper triangular version of the matrix - Gauss elimination

    let n = 3;
    const k = n;
    let np;
    const kp = 4; // num rows

    let p;

    do {
      i = k - n;

      if (eqns[i + nc * i] === 0) {
        // the pivot is null, swap lines
        for (j = i + 1; j < k; j++) {
          if (eqns[i + nc * j] !== 0) {
            np = kp;

            do {
              // do ligne( i ) = ligne( i ) + ligne( k )
              p = kp - np;
              eqns[p + nc * i] += eqns[p + nc * j];
            } while (--np);

            break;
          }
        }
      }

      if (eqns[i + nc * i] !== 0) {
        for (j = i + 1; j < k; j++) {
          const multiplier = eqns[i + nc * j] / eqns[i + nc * i];
          np = kp;

          do {
            // do ligne( k ) = ligne( k ) - multiplier * ligne( i )
            p = kp - np;
            eqns[p + nc * j] = p <= i ? 0 : eqns[p + nc * j] - eqns[p + nc * i] * multiplier;
          } while (--np);
        }
      }
    } while (--n); // Get the solution


    target.z = eqns[2 * nc + 3] / eqns[2 * nc + 2];
    target.y = (eqns[1 * nc + 3] - eqns[1 * nc + 2] * target.z) / eqns[1 * nc + 1];
    target.x = (eqns[0 * nc + 3] - eqns[0 * nc + 2] * target.z - eqns[0 * nc + 1] * target.y) / eqns[0 * nc + 0];

    if (isNaN(target.x) || isNaN(target.y) || isNaN(target.z) || target.x === Infinity || target.y === Infinity || target.z === Infinity) {
      throw "Could not solve equation! Got x=[" + target.toString() + "], b=[" + b.toString() + "], A=[" + this.toString() + "]";
    }

    return target;
  }
  /**
   * Get an element in the matrix by index. Index starts at 0, not 1!!!
   * @param value If provided, the matrix element will be set to this value.
   */


  e(row, column, value) {
    if (value === undefined) {
      return this.elements[column + 3 * row];
    } else {
      // Set value
      this.elements[column + 3 * row] = value;
    }
  }
  /**
   * Copy another matrix into this matrix object.
   */


  copy(matrix) {
    for (let i = 0; i < matrix.elements.length; i++) {
      this.elements[i] = matrix.elements[i];
    }

    return this;
  }
  /**
   * Returns a string representation of the matrix.
   */


  toString() {
    let r = '';
    const sep = ',';

    for (let i = 0; i < 9; i++) {
      r += this.elements[i] + sep;
    }

    return r;
  }
  /**
   * reverse the matrix
   * @param target Target matrix to save in.
   * @return The solution x
   */


  reverse(target = new Mat3()) {
    // Construct equations
    const nr = 3; // num rows

    const nc = 6; // num cols

    const eqns = reverse_eqns;
    let i;
    let j;

    for (i = 0; i < 3; i++) {
      for (j = 0; j < 3; j++) {
        eqns[i + nc * j] = this.elements[i + 3 * j];
      }
    }

    eqns[3 + 6 * 0] = 1;
    eqns[3 + 6 * 1] = 0;
    eqns[3 + 6 * 2] = 0;
    eqns[4 + 6 * 0] = 0;
    eqns[4 + 6 * 1] = 1;
    eqns[4 + 6 * 2] = 0;
    eqns[5 + 6 * 0] = 0;
    eqns[5 + 6 * 1] = 0;
    eqns[5 + 6 * 2] = 1; // Compute right upper triangular version of the matrix - Gauss elimination

    let n = 3;
    const k = n;
    let np;
    const kp = nc; // num rows

    let p;

    do {
      i = k - n;

      if (eqns[i + nc * i] === 0) {
        // the pivot is null, swap lines
        for (j = i + 1; j < k; j++) {
          if (eqns[i + nc * j] !== 0) {
            np = kp;

            do {
              // do line( i ) = line( i ) + line( k )
              p = kp - np;
              eqns[p + nc * i] += eqns[p + nc * j];
            } while (--np);

            break;
          }
        }
      }

      if (eqns[i + nc * i] !== 0) {
        for (j = i + 1; j < k; j++) {
          const multiplier = eqns[i + nc * j] / eqns[i + nc * i];
          np = kp;

          do {
            // do line( k ) = line( k ) - multiplier * line( i )
            p = kp - np;
            eqns[p + nc * j] = p <= i ? 0 : eqns[p + nc * j] - eqns[p + nc * i] * multiplier;
          } while (--np);
        }
      }
    } while (--n); // eliminate the upper left triangle of the matrix


    i = 2;

    do {
      j = i - 1;

      do {
        const multiplier = eqns[i + nc * j] / eqns[i + nc * i];
        np = nc;

        do {
          p = nc - np;
          eqns[p + nc * j] = eqns[p + nc * j] - eqns[p + nc * i] * multiplier;
        } while (--np);
      } while (j--);
    } while (--i); // operations on the diagonal


    i = 2;

    do {
      const multiplier = 1 / eqns[i + nc * i];
      np = nc;

      do {
        p = nc - np;
        eqns[p + nc * i] = eqns[p + nc * i] * multiplier;
      } while (--np);
    } while (i--);

    i = 2;

    do {
      j = 2;

      do {
        p = eqns[nr + j + nc * i];

        if (isNaN(p) || p === Infinity) {
          throw "Could not reverse! A=[" + this.toString() + "]";
        }

        target.e(i, j, p);
      } while (j--);
    } while (i--);

    return target;
  }
  /**
   * Set the matrix from a quaterion
   */


  setRotationFromQuaternion(q) {
    const x = q.x;
    const y = q.y;
    const z = q.z;
    const w = q.w;
    const x2 = x + x;
    const y2 = y + y;
    const z2 = z + z;
    const xx = x * x2;
    const xy = x * y2;
    const xz = x * z2;
    const yy = y * y2;
    const yz = y * z2;
    const zz = z * z2;
    const wx = w * x2;
    const wy = w * y2;
    const wz = w * z2;
    const e = this.elements;
    e[3 * 0 + 0] = 1 - (yy + zz);
    e[3 * 0 + 1] = xy - wz;
    e[3 * 0 + 2] = xz + wy;
    e[3 * 1 + 0] = xy + wz;
    e[3 * 1 + 1] = 1 - (xx + zz);
    e[3 * 1 + 2] = yz - wx;
    e[3 * 2 + 0] = xz - wy;
    e[3 * 2 + 1] = yz + wx;
    e[3 * 2 + 2] = 1 - (xx + yy);
    return this;
  }
  /**
   * Transpose the matrix
   * @param target Optional. Where to store the result.
   * @return The target Mat3, or a new Mat3 if target was omitted.
   */


  transpose(target = new Mat3()) {
    const M = this.elements;
    const T = target.elements;
    let tmp; //Set diagonals

    T[0] = M[0];
    T[4] = M[4];
    T[8] = M[8];
    tmp = M[1];
    T[1] = M[3];
    T[3] = tmp;
    tmp = M[2];
    T[2] = M[6];
    T[6] = tmp;
    tmp = M[5];
    T[5] = M[7];
    T[7] = tmp;
    return target;
  }

}

const reverse_eqns = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
/**
 * 3-dimensional vector
 * @example
 *     const v = new Vec3(1, 2, 3)
 *     console.log('x=' + v.x) // x=1
 */

class Vec3 {
  constructor(x = 0.0, y = 0.0, z = 0.0) {
    this.x = void 0;
    this.y = void 0;
    this.z = void 0;
    this.x = x;
    this.y = y;
    this.z = z;
  }
  /**
   * Vector cross product
   * @param target Optional target to save in.
   */


  cross(vector, target = new Vec3()) {
    const vx = vector.x;
    const vy = vector.y;
    const vz = vector.z;
    const x = this.x;
    const y = this.y;
    const z = this.z;
    target.x = y * vz - z * vy;
    target.y = z * vx - x * vz;
    target.z = x * vy - y * vx;
    return target;
  }
  /**
   * Set the vectors' 3 elements
   */


  set(x, y, z) {
    this.x = x;
    this.y = y;
    this.z = z;
    return this;
  }
  /**
   * Set all components of the vector to zero.
   */


  setZero() {
    this.x = this.y = this.z = 0;
  }
  /**
   * Vector addition
   */


  vadd(vector, target) {
    if (target) {
      target.x = vector.x + this.x;
      target.y = vector.y + this.y;
      target.z = vector.z + this.z;
    } else {
      return new Vec3(this.x + vector.x, this.y + vector.y, this.z + vector.z);
    }
  }
  /**
   * Vector subtraction
   * @param target Optional target to save in.
   */


  vsub(vector, target) {
    if (target) {
      target.x = this.x - vector.x;
      target.y = this.y - vector.y;
      target.z = this.z - vector.z;
    } else {
      return new Vec3(this.x - vector.x, this.y - vector.y, this.z - vector.z);
    }
  }
  /**
   * Get the cross product matrix a_cross from a vector, such that a x b = a_cross * b = c
   *
   * See {@link https://www8.cs.umu.se/kurser/TDBD24/VT06/lectures/Lecture6.pdf Ume University Lecture}
   */


  crossmat() {
    return new Mat3([0, -this.z, this.y, this.z, 0, -this.x, -this.y, this.x, 0]);
  }
  /**
   * Normalize the vector. Note that this changes the values in the vector.
    * @return Returns the norm of the vector
   */


  normalize() {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const n = Math.sqrt(x * x + y * y + z * z);

    if (n > 0.0) {
      const invN = 1 / n;
      this.x *= invN;
      this.y *= invN;
      this.z *= invN;
    } else {
      // Make something up
      this.x = 0;
      this.y = 0;
      this.z = 0;
    }

    return n;
  }
  /**
   * Get the version of this vector that is of length 1.
   * @param target Optional target to save in
   * @return Returns the unit vector
   */


  unit(target = new Vec3()) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    let ninv = Math.sqrt(x * x + y * y + z * z);

    if (ninv > 0.0) {
      ninv = 1.0 / ninv;
      target.x = x * ninv;
      target.y = y * ninv;
      target.z = z * ninv;
    } else {
      target.x = 1;
      target.y = 0;
      target.z = 0;
    }

    return target;
  }
  /**
   * Get the length of the vector
   */


  length() {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    return Math.sqrt(x * x + y * y + z * z);
  }
  /**
   * Get the squared length of the vector.
   */


  lengthSquared() {
    return this.dot(this);
  }
  /**
   * Get distance from this point to another point
   */


  distanceTo(p) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const px = p.x;
    const py = p.y;
    const pz = p.z;
    return Math.sqrt((px - x) * (px - x) + (py - y) * (py - y) + (pz - z) * (pz - z));
  }
  /**
   * Get squared distance from this point to another point
   */


  distanceSquared(p) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const px = p.x;
    const py = p.y;
    const pz = p.z;
    return (px - x) * (px - x) + (py - y) * (py - y) + (pz - z) * (pz - z);
  }
  /**
   * Multiply all the components of the vector with a scalar.
   * @param target The vector to save the result in.
   */


  scale(scalar, target = new Vec3()) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    target.x = scalar * x;
    target.y = scalar * y;
    target.z = scalar * z;
    return target;
  }
  /**
   * Multiply the vector with an other vector, component-wise.
   * @param target The vector to save the result in.
   */


  vmul(vector, target = new Vec3()) {
    target.x = vector.x * this.x;
    target.y = vector.y * this.y;
    target.z = vector.z * this.z;
    return target;
  }
  /**
   * Scale a vector and add it to this vector. Save the result in "target". (target = this + vector * scalar)
   * @param target The vector to save the result in.
   */


  addScaledVector(scalar, vector, target = new Vec3()) {
    target.x = this.x + scalar * vector.x;
    target.y = this.y + scalar * vector.y;
    target.z = this.z + scalar * vector.z;
    return target;
  }
  /**
   * Calculate dot product
   * @param vector
   */


  dot(vector) {
    return this.x * vector.x + this.y * vector.y + this.z * vector.z;
  }

  isZero() {
    return this.x === 0 && this.y === 0 && this.z === 0;
  }
  /**
   * Make the vector point in the opposite direction.
   * @param target Optional target to save in
   */


  negate(target = new Vec3()) {
    target.x = -this.x;
    target.y = -this.y;
    target.z = -this.z;
    return target;
  }
  /**
   * Compute two artificial tangents to the vector
   * @param t1 Vector object to save the first tangent in
   * @param t2 Vector object to save the second tangent in
   */


  tangents(t1, t2) {
    const norm = this.length();

    if (norm > 0.0) {
      const n = Vec3_tangents_n;
      const inorm = 1 / norm;
      n.set(this.x * inorm, this.y * inorm, this.z * inorm);
      const randVec = Vec3_tangents_randVec;

      if (Math.abs(n.x) < 0.9) {
        randVec.set(1, 0, 0);
        n.cross(randVec, t1);
      } else {
        randVec.set(0, 1, 0);
        n.cross(randVec, t1);
      }

      n.cross(t1, t2);
    } else {
      // The normal length is zero, make something up
      t1.set(1, 0, 0);
      t2.set(0, 1, 0);
    }
  }
  /**
   * Converts to a more readable format
   */


  toString() {
    return this.x + "," + this.y + "," + this.z;
  }
  /**
   * Converts to an array
   */


  toArray() {
    return [this.x, this.y, this.z];
  }
  /**
   * Copies value of source to this vector.
   */


  copy(vector) {
    this.x = vector.x;
    this.y = vector.y;
    this.z = vector.z;
    return this;
  }
  /**
   * Do a linear interpolation between two vectors
   * @param t A number between 0 and 1. 0 will make this function return u, and 1 will make it return v. Numbers in between will generate a vector in between them.
   */


  lerp(vector, t, target) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    target.x = x + (vector.x - x) * t;
    target.y = y + (vector.y - y) * t;
    target.z = z + (vector.z - z) * t;
  }
  /**
   * Check if a vector equals is almost equal to another one.
   */


  almostEquals(vector, precision = 1e-6) {
    if (Math.abs(this.x - vector.x) > precision || Math.abs(this.y - vector.y) > precision || Math.abs(this.z - vector.z) > precision) {
      return false;
    }

    return true;
  }
  /**
   * Check if a vector is almost zero
   */


  almostZero(precision = 1e-6) {
    if (Math.abs(this.x) > precision || Math.abs(this.y) > precision || Math.abs(this.z) > precision) {
      return false;
    }

    return true;
  }
  /**
   * Check if the vector is anti-parallel to another vector.
   * @param precision Set to zero for exact comparisons
   */


  isAntiparallelTo(vector, precision) {
    this.negate(antip_neg);
    return antip_neg.almostEquals(vector, precision);
  }
  /**
   * Clone the vector
   */


  clone() {
    return new Vec3(this.x, this.y, this.z);
  }

}

Vec3.ZERO = void 0;
Vec3.UNIT_X = void 0;
Vec3.UNIT_Y = void 0;
Vec3.UNIT_Z = void 0;
Vec3.ZERO = new Vec3(0, 0, 0);
Vec3.UNIT_X = new Vec3(1, 0, 0);
Vec3.UNIT_Y = new Vec3(0, 1, 0);
Vec3.UNIT_Z = new Vec3(0, 0, 1);
const Vec3_tangents_n = new Vec3();
const Vec3_tangents_randVec = new Vec3();
const antip_neg = new Vec3();
/**
 * Axis aligned bounding box class.
 */

class AABB {
  /**
   * The lower bound of the bounding box
   */

  /**
   * The upper bound of the bounding box
   */
  constructor(options = {}) {
    this.lowerBound = void 0;
    this.upperBound = void 0;
    this.lowerBound = new Vec3();
    this.upperBound = new Vec3();

    if (options.lowerBound) {
      this.lowerBound.copy(options.lowerBound);
    }

    if (options.upperBound) {
      this.upperBound.copy(options.upperBound);
    }
  }
  /**
   * Set the AABB bounds from a set of points.
   * @param points An array of Vec3's.
   * @return The self object
   */


  setFromPoints(points, position, quaternion, skinSize) {
    const l = this.lowerBound;
    const u = this.upperBound;
    const q = quaternion; // Set to the first point

    l.copy(points[0]);

    if (q) {
      q.vmult(l, l);
    }

    u.copy(l);

    for (let i = 1; i < points.length; i++) {
      let p = points[i];

      if (q) {
        q.vmult(p, tmp$1);
        p = tmp$1;
      }

      if (p.x > u.x) {
        u.x = p.x;
      }

      if (p.x < l.x) {
        l.x = p.x;
      }

      if (p.y > u.y) {
        u.y = p.y;
      }

      if (p.y < l.y) {
        l.y = p.y;
      }

      if (p.z > u.z) {
        u.z = p.z;
      }

      if (p.z < l.z) {
        l.z = p.z;
      }
    } // Add offset


    if (position) {
      position.vadd(l, l);
      position.vadd(u, u);
    }

    if (skinSize) {
      l.x -= skinSize;
      l.y -= skinSize;
      l.z -= skinSize;
      u.x += skinSize;
      u.y += skinSize;
      u.z += skinSize;
    }

    return this;
  }
  /**
   * Copy bounds from an AABB to this AABB
   * @param aabb Source to copy from
   * @return The this object, for chainability
   */


  copy(aabb) {
    this.lowerBound.copy(aabb.lowerBound);
    this.upperBound.copy(aabb.upperBound);
    return this;
  }
  /**
   * Clone an AABB
   */


  clone() {
    return new AABB().copy(this);
  }
  /**
   * Extend this AABB so that it covers the given AABB too.
   */


  extend(aabb) {
    this.lowerBound.x = Math.min(this.lowerBound.x, aabb.lowerBound.x);
    this.upperBound.x = Math.max(this.upperBound.x, aabb.upperBound.x);
    this.lowerBound.y = Math.min(this.lowerBound.y, aabb.lowerBound.y);
    this.upperBound.y = Math.max(this.upperBound.y, aabb.upperBound.y);
    this.lowerBound.z = Math.min(this.lowerBound.z, aabb.lowerBound.z);
    this.upperBound.z = Math.max(this.upperBound.z, aabb.upperBound.z);
  }
  /**
   * Returns true if the given AABB overlaps this AABB.
   */


  overlaps(aabb) {
    const l1 = this.lowerBound;
    const u1 = this.upperBound;
    const l2 = aabb.lowerBound;
    const u2 = aabb.upperBound; //      l2        u2
    //      |---------|
    // |--------|
    // l1       u1

    const overlapsX = l2.x <= u1.x && u1.x <= u2.x || l1.x <= u2.x && u2.x <= u1.x;
    const overlapsY = l2.y <= u1.y && u1.y <= u2.y || l1.y <= u2.y && u2.y <= u1.y;
    const overlapsZ = l2.z <= u1.z && u1.z <= u2.z || l1.z <= u2.z && u2.z <= u1.z;
    return overlapsX && overlapsY && overlapsZ;
  } // Mostly for debugging


  volume() {
    const l = this.lowerBound;
    const u = this.upperBound;
    return (u.x - l.x) * (u.y - l.y) * (u.z - l.z);
  }
  /**
   * Returns true if the given AABB is fully contained in this AABB.
   */


  contains(aabb) {
    const l1 = this.lowerBound;
    const u1 = this.upperBound;
    const l2 = aabb.lowerBound;
    const u2 = aabb.upperBound; //      l2        u2
    //      |---------|
    // |---------------|
    // l1              u1

    return l1.x <= l2.x && u1.x >= u2.x && l1.y <= l2.y && u1.y >= u2.y && l1.z <= l2.z && u1.z >= u2.z;
  }

  getCorners(a, b, c, d, e, f, g, h) {
    const l = this.lowerBound;
    const u = this.upperBound;
    a.copy(l);
    b.set(u.x, l.y, l.z);
    c.set(u.x, u.y, l.z);
    d.set(l.x, u.y, u.z);
    e.set(u.x, l.y, u.z);
    f.set(l.x, u.y, l.z);
    g.set(l.x, l.y, u.z);
    h.copy(u);
  }
  /**
   * Get the representation of an AABB in another frame.
   * @return The "target" AABB object.
   */


  toLocalFrame(frame, target) {
    const corners = transformIntoFrame_corners;
    const a = corners[0];
    const b = corners[1];
    const c = corners[2];
    const d = corners[3];
    const e = corners[4];
    const f = corners[5];
    const g = corners[6];
    const h = corners[7]; // Get corners in current frame

    this.getCorners(a, b, c, d, e, f, g, h); // Transform them to new local frame

    for (let i = 0; i !== 8; i++) {
      const corner = corners[i];
      frame.pointToLocal(corner, corner);
    }

    return target.setFromPoints(corners);
  }
  /**
   * Get the representation of an AABB in the global frame.
   * @return The "target" AABB object.
   */


  toWorldFrame(frame, target) {
    const corners = transformIntoFrame_corners;
    const a = corners[0];
    const b = corners[1];
    const c = corners[2];
    const d = corners[3];
    const e = corners[4];
    const f = corners[5];
    const g = corners[6];
    const h = corners[7]; // Get corners in current frame

    this.getCorners(a, b, c, d, e, f, g, h); // Transform them to new local frame

    for (let i = 0; i !== 8; i++) {
      const corner = corners[i];
      frame.pointToWorld(corner, corner);
    }

    return target.setFromPoints(corners);
  }
  /**
   * Check if the AABB is hit by a ray.
   */


  overlapsRay(ray) {
    const {
      direction,
      from
    } = ray; // const t = 0
    // ray.direction is unit direction vector of ray

    const dirFracX = 1 / direction.x;
    const dirFracY = 1 / direction.y;
    const dirFracZ = 1 / direction.z; // this.lowerBound is the corner of AABB with minimal coordinates - left bottom, rt is maximal corner

    const t1 = (this.lowerBound.x - from.x) * dirFracX;
    const t2 = (this.upperBound.x - from.x) * dirFracX;
    const t3 = (this.lowerBound.y - from.y) * dirFracY;
    const t4 = (this.upperBound.y - from.y) * dirFracY;
    const t5 = (this.lowerBound.z - from.z) * dirFracZ;
    const t6 = (this.upperBound.z - from.z) * dirFracZ; // const tmin = Math.max(Math.max(Math.min(t1, t2), Math.min(t3, t4)));
    // const tmax = Math.min(Math.min(Math.max(t1, t2), Math.max(t3, t4)));

    const tmin = Math.max(Math.max(Math.min(t1, t2), Math.min(t3, t4)), Math.min(t5, t6));
    const tmax = Math.min(Math.min(Math.max(t1, t2), Math.max(t3, t4)), Math.max(t5, t6)); // if tmax < 0, ray (line) is intersecting AABB, but whole AABB is behing us

    if (tmax < 0) {
      //t = tmax;
      return false;
    } // if tmin > tmax, ray doesn't intersect AABB


    if (tmin > tmax) {
      //t = tmax;
      return false;
    }

    return true;
  }

}

const tmp$1 = new Vec3();
const transformIntoFrame_corners = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];
/**
 * Base class for objects that dispatches events.
 */


class EventTarget {
  constructor() {
    this._listeners = void 0;
  }
  /**
   * Add an event listener
   * @return The self object, for chainability.
   */


  addEventListener(type, listener) {
    if (this._listeners === undefined) {
      this._listeners = {};
    }

    const listeners = this._listeners;

    if (listeners[type] === undefined) {
      listeners[type] = [];
    }

    if (!listeners[type].includes(listener)) {
      listeners[type].push(listener);
    }

    return this;
  }
  /**
   * Check if an event listener is added
   */


  hasEventListener(type, listener) {
    if (this._listeners === undefined) {
      return false;
    }

    const listeners = this._listeners;

    if (listeners[type] !== undefined && listeners[type].includes(listener)) {
      return true;
    }

    return false;
  }
  /**
   * Check if any event listener of the given type is added
   */


  hasAnyEventListener(type) {
    if (this._listeners === undefined) {
      return false;
    }

    const listeners = this._listeners;
    return listeners[type] !== undefined;
  }
  /**
   * Remove an event listener
   * @return The self object, for chainability.
   */


  removeEventListener(type, listener) {
    if (this._listeners === undefined) {
      return this;
    }

    const listeners = this._listeners;

    if (listeners[type] === undefined) {
      return this;
    }

    const index = listeners[type].indexOf(listener);

    if (index !== -1) {
      listeners[type].splice(index, 1);
    }

    return this;
  }
  /**
   * Emit an event.
   * @return The self object, for chainability.
   */


  dispatchEvent(event) {
    if (this._listeners === undefined) {
      return this;
    }

    const listeners = this._listeners;
    const listenerArray = listeners[event.type];

    if (listenerArray !== undefined) {
      event.target = this;

      for (let i = 0, l = listenerArray.length; i < l; i++) {
        listenerArray[i].call(this, event);
      }
    }

    return this;
  }

}
/**
 * A Quaternion describes a rotation in 3D space. The Quaternion is mathematically defined as Q = x*i + y*j + z*k + w, where (i,j,k) are imaginary basis vectors. (x,y,z) can be seen as a vector related to the axis of rotation, while the real multiplier, w, is related to the amount of rotation.
 * @param x Multiplier of the imaginary basis vector i.
 * @param y Multiplier of the imaginary basis vector j.
 * @param z Multiplier of the imaginary basis vector k.
 * @param w Multiplier of the real part.
 * @see http://en.wikipedia.org/wiki/Quaternion
 */


class Quaternion {
  constructor(x = 0, y = 0, z = 0, w = 1) {
    this.x = void 0;
    this.y = void 0;
    this.z = void 0;
    this.w = void 0;
    this.x = x;
    this.y = y;
    this.z = z;
    this.w = w;
  }
  /**
   * Set the value of the quaternion.
   */


  set(x, y, z, w) {
    this.x = x;
    this.y = y;
    this.z = z;
    this.w = w;
    return this;
  }
  /**
   * Convert to a readable format
   * @return "x,y,z,w"
   */


  toString() {
    return this.x + "," + this.y + "," + this.z + "," + this.w;
  }
  /**
   * Convert to an Array
   * @return [x, y, z, w]
   */


  toArray() {
    return [this.x, this.y, this.z, this.w];
  }
  /**
   * Set the quaternion components given an axis and an angle in radians.
   */


  setFromAxisAngle(vector, angle) {
    const s = Math.sin(angle * 0.5);
    this.x = vector.x * s;
    this.y = vector.y * s;
    this.z = vector.z * s;
    this.w = Math.cos(angle * 0.5);
    return this;
  }
  /**
   * Converts the quaternion to [ axis, angle ] representation.
   * @param targetAxis A vector object to reuse for storing the axis.
   * @return An array, first element is the axis and the second is the angle in radians.
   */


  toAxisAngle(targetAxis = new Vec3()) {
    this.normalize(); // if w>1 acos and sqrt will produce errors, this cant happen if quaternion is normalised

    const angle = 2 * Math.acos(this.w);
    const s = Math.sqrt(1 - this.w * this.w); // assuming quaternion normalised then w is less than 1, so term always positive.

    if (s < 0.001) {
      // test to avoid divide by zero, s is always positive due to sqrt
      // if s close to zero then direction of axis not important
      targetAxis.x = this.x; // if it is important that axis is normalised then replace with x=1; y=z=0;

      targetAxis.y = this.y;
      targetAxis.z = this.z;
    } else {
      targetAxis.x = this.x / s; // normalise axis

      targetAxis.y = this.y / s;
      targetAxis.z = this.z / s;
    }

    return [targetAxis, angle];
  }
  /**
   * Set the quaternion value given two vectors. The resulting rotation will be the needed rotation to rotate u to v.
   */


  setFromVectors(u, v) {
    if (u.isAntiparallelTo(v)) {
      const t1 = sfv_t1;
      const t2 = sfv_t2;
      u.tangents(t1, t2);
      this.setFromAxisAngle(t1, Math.PI);
    } else {
      const a = u.cross(v);
      this.x = a.x;
      this.y = a.y;
      this.z = a.z;
      this.w = Math.sqrt(u.length() ** 2 * v.length() ** 2) + u.dot(v);
      this.normalize();
    }

    return this;
  }
  /**
   * Multiply the quaternion with an other quaternion.
   */


  mult(quat, target = new Quaternion()) {
    const ax = this.x;
    const ay = this.y;
    const az = this.z;
    const aw = this.w;
    const bx = quat.x;
    const by = quat.y;
    const bz = quat.z;
    const bw = quat.w;
    target.x = ax * bw + aw * bx + ay * bz - az * by;
    target.y = ay * bw + aw * by + az * bx - ax * bz;
    target.z = az * bw + aw * bz + ax * by - ay * bx;
    target.w = aw * bw - ax * bx - ay * by - az * bz;
    return target;
  }
  /**
   * Get the inverse quaternion rotation.
   */


  inverse(target = new Quaternion()) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const w = this.w;
    this.conjugate(target);
    const inorm2 = 1 / (x * x + y * y + z * z + w * w);
    target.x *= inorm2;
    target.y *= inorm2;
    target.z *= inorm2;
    target.w *= inorm2;
    return target;
  }
  /**
   * Get the quaternion conjugate
   */


  conjugate(target = new Quaternion()) {
    target.x = -this.x;
    target.y = -this.y;
    target.z = -this.z;
    target.w = this.w;
    return target;
  }
  /**
   * Normalize the quaternion. Note that this changes the values of the quaternion.
   */


  normalize() {
    let l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);

    if (l === 0) {
      this.x = 0;
      this.y = 0;
      this.z = 0;
      this.w = 0;
    } else {
      l = 1 / l;
      this.x *= l;
      this.y *= l;
      this.z *= l;
      this.w *= l;
    }

    return this;
  }
  /**
   * Approximation of quaternion normalization. Works best when quat is already almost-normalized.
   * @author unphased, https://github.com/unphased
   */


  normalizeFast() {
    const f = (3.0 - (this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)) / 2.0;

    if (f === 0) {
      this.x = 0;
      this.y = 0;
      this.z = 0;
      this.w = 0;
    } else {
      this.x *= f;
      this.y *= f;
      this.z *= f;
      this.w *= f;
    }

    return this;
  }
  /**
   * Multiply the quaternion by a vector
   */


  vmult(v, target = new Vec3()) {
    const x = v.x;
    const y = v.y;
    const z = v.z;
    const qx = this.x;
    const qy = this.y;
    const qz = this.z;
    const qw = this.w; // q*v

    const ix = qw * x + qy * z - qz * y;
    const iy = qw * y + qz * x - qx * z;
    const iz = qw * z + qx * y - qy * x;
    const iw = -qx * x - qy * y - qz * z;
    target.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;
    target.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;
    target.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;
    return target;
  }
  /**
   * Copies value of source to this quaternion.
   * @return this
   */


  copy(quat) {
    this.x = quat.x;
    this.y = quat.y;
    this.z = quat.z;
    this.w = quat.w;
    return this;
  }
  /**
   * Convert the quaternion to euler angle representation. Order: YZX, as this page describes: https://www.euclideanspace.com/maths/standards/index.htm
   * @param order Three-character string, defaults to "YZX"
   */


  toEuler(target, order = 'YZX') {
    let heading;
    let attitude;
    let bank;
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const w = this.w;

    switch (order) {
      case 'YZX':
        const test = x * y + z * w;

        if (test > 0.499) {
          // singularity at north pole
          heading = 2 * Math.atan2(x, w);
          attitude = Math.PI / 2;
          bank = 0;
        }

        if (test < -0.499) {
          // singularity at south pole
          heading = -2 * Math.atan2(x, w);
          attitude = -Math.PI / 2;
          bank = 0;
        }

        if (heading === undefined) {
          const sqx = x * x;
          const sqy = y * y;
          const sqz = z * z;
          heading = Math.atan2(2 * y * w - 2 * x * z, 1 - 2 * sqy - 2 * sqz); // Heading

          attitude = Math.asin(2 * test); // attitude

          bank = Math.atan2(2 * x * w - 2 * y * z, 1 - 2 * sqx - 2 * sqz); // bank
        }

        break;

      default:
        throw new Error("Euler order " + order + " not supported yet.");
    }

    target.y = heading;
    target.z = attitude;
    target.x = bank;
  }
  /**
   * @param order The order to apply angles: 'XYZ' or 'YXZ' or any other combination.
   *
   * See {@link https://www.mathworks.com/matlabcentral/fileexchange/20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors MathWorks} reference
   */


  setFromEuler(x, y, z, order = 'XYZ') {
    const c1 = Math.cos(x / 2);
    const c2 = Math.cos(y / 2);
    const c3 = Math.cos(z / 2);
    const s1 = Math.sin(x / 2);
    const s2 = Math.sin(y / 2);
    const s3 = Math.sin(z / 2);

    if (order === 'XYZ') {
      this.x = s1 * c2 * c3 + c1 * s2 * s3;
      this.y = c1 * s2 * c3 - s1 * c2 * s3;
      this.z = c1 * c2 * s3 + s1 * s2 * c3;
      this.w = c1 * c2 * c3 - s1 * s2 * s3;
    } else if (order === 'YXZ') {
      this.x = s1 * c2 * c3 + c1 * s2 * s3;
      this.y = c1 * s2 * c3 - s1 * c2 * s3;
      this.z = c1 * c2 * s3 - s1 * s2 * c3;
      this.w = c1 * c2 * c3 + s1 * s2 * s3;
    } else if (order === 'ZXY') {
      this.x = s1 * c2 * c3 - c1 * s2 * s3;
      this.y = c1 * s2 * c3 + s1 * c2 * s3;
      this.z = c1 * c2 * s3 + s1 * s2 * c3;
      this.w = c1 * c2 * c3 - s1 * s2 * s3;
    } else if (order === 'ZYX') {
      this.x = s1 * c2 * c3 - c1 * s2 * s3;
      this.y = c1 * s2 * c3 + s1 * c2 * s3;
      this.z = c1 * c2 * s3 - s1 * s2 * c3;
      this.w = c1 * c2 * c3 + s1 * s2 * s3;
    } else if (order === 'YZX') {
      this.x = s1 * c2 * c3 + c1 * s2 * s3;
      this.y = c1 * s2 * c3 + s1 * c2 * s3;
      this.z = c1 * c2 * s3 - s1 * s2 * c3;
      this.w = c1 * c2 * c3 - s1 * s2 * s3;
    } else if (order === 'XZY') {
      this.x = s1 * c2 * c3 - c1 * s2 * s3;
      this.y = c1 * s2 * c3 - s1 * c2 * s3;
      this.z = c1 * c2 * s3 + s1 * s2 * c3;
      this.w = c1 * c2 * c3 + s1 * s2 * s3;
    }

    return this;
  }

  clone() {
    return new Quaternion(this.x, this.y, this.z, this.w);
  }
  /**
   * Performs a spherical linear interpolation between two quat
   *
   * @param toQuat second operand
   * @param t interpolation amount between the self quaternion and toQuat
   * @param target A quaternion to store the result in. If not provided, a new one will be created.
   * @returns {Quaternion} The "target" object
   */


  slerp(toQuat, t, target = new Quaternion()) {
    const ax = this.x;
    const ay = this.y;
    const az = this.z;
    const aw = this.w;
    let bx = toQuat.x;
    let by = toQuat.y;
    let bz = toQuat.z;
    let bw = toQuat.w;
    let omega;
    let cosom;
    let sinom;
    let scale0;
    let scale1; // calc cosine

    cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)

    if (cosom < 0.0) {
      cosom = -cosom;
      bx = -bx;
      by = -by;
      bz = -bz;
      bw = -bw;
    } // calculate coefficients


    if (1.0 - cosom > 0.000001) {
      // standard case (slerp)
      omega = Math.acos(cosom);
      sinom = Math.sin(omega);
      scale0 = Math.sin((1.0 - t) * omega) / sinom;
      scale1 = Math.sin(t * omega) / sinom;
    } else {
      // "from" and "to" quaternions are very close
      //  ... so we can do a linear interpolation
      scale0 = 1.0 - t;
      scale1 = t;
    } // calculate final values


    target.x = scale0 * ax + scale1 * bx;
    target.y = scale0 * ay + scale1 * by;
    target.z = scale0 * az + scale1 * bz;
    target.w = scale0 * aw + scale1 * bw;
    return target;
  }
  /**
   * Rotate an absolute orientation quaternion given an angular velocity and a time step.
   */


  integrate(angularVelocity, dt, angularFactor, target = new Quaternion()) {
    const ax = angularVelocity.x * angularFactor.x,
          ay = angularVelocity.y * angularFactor.y,
          az = angularVelocity.z * angularFactor.z,
          bx = this.x,
          by = this.y,
          bz = this.z,
          bw = this.w;
    const half_dt = dt * 0.5;
    target.x += half_dt * (ax * bw + ay * bz - az * by);
    target.y += half_dt * (ay * bw + az * bx - ax * bz);
    target.z += half_dt * (az * bw + ax * by - ay * bx);
    target.w += half_dt * (-ax * bx - ay * by - az * bz);
    return target;
  }

}

const sfv_t1 = new Vec3();
const sfv_t2 = new Vec3();
/**
 * The available shape types.
 */

const SHAPE_TYPES = {
  /** SPHERE */
  SPHERE: 1,

  /** PLANE */
  PLANE: 2,

  /** BOX */
  BOX: 4,

  /** COMPOUND */
  COMPOUND: 8,

  /** CONVEXPOLYHEDRON */
  CONVEXPOLYHEDRON: 16,

  /** HEIGHTFIELD */
  HEIGHTFIELD: 32,

  /** PARTICLE */
  PARTICLE: 64,

  /** CYLINDER */
  CYLINDER: 128,

  /** TRIMESH */
  TRIMESH: 256
};
/**
 * ShapeType
 */

/**
 * Base class for shapes
 */

class Shape {
  /**
   * Identifier of the Shape.
   */

  /**
   * The type of this shape. Must be set to an int > 0 by subclasses.
   */

  /**
   * The local bounding sphere radius of this shape.
   */

  /**
   * Whether to produce contact forces when in contact with other bodies. Note that contacts will be generated, but they will be disabled.
   * @default true
   */

  /**
   * @default 1
   */

  /**
   * @default -1
   */

  /**
   * Optional material of the shape that regulates contact properties.
   */

  /**
   * The body to which the shape is added to.
   */

  /**
   * All the Shape types.
   */
  constructor(options = {}) {
    this.id = void 0;
    this.type = void 0;
    this.boundingSphereRadius = void 0;
    this.collisionResponse = void 0;
    this.collisionFilterGroup = void 0;
    this.collisionFilterMask = void 0;
    this.material = void 0;
    this.body = void 0;
    this.id = Shape.idCounter++;
    this.type = options.type || 0;
    this.boundingSphereRadius = 0;
    this.collisionResponse = options.collisionResponse ? options.collisionResponse : true;
    this.collisionFilterGroup = options.collisionFilterGroup !== undefined ? options.collisionFilterGroup : 1;
    this.collisionFilterMask = options.collisionFilterMask !== undefined ? options.collisionFilterMask : -1;
    this.material = options.material ? options.material : null;
    this.body = null;
  }
  /**
   * Computes the bounding sphere radius.
   * The result is stored in the property `.boundingSphereRadius`
   */


  updateBoundingSphereRadius() {
    throw "computeBoundingSphereRadius() not implemented for shape type " + this.type;
  }
  /**
   * Get the volume of this shape
   */


  volume() {
    throw "volume() not implemented for shape type " + this.type;
  }
  /**
   * Calculates the inertia in the local frame for this shape.
   * @see http://en.wikipedia.org/wiki/List_of_moments_of_inertia
   */


  calculateLocalInertia(mass, target) {
    throw "calculateLocalInertia() not implemented for shape type " + this.type;
  }
  /**
   * @todo use abstract for these kind of methods
   */


  calculateWorldAABB(pos, quat, min, max) {
    throw "calculateWorldAABB() not implemented for shape type " + this.type;
  }

}

Shape.idCounter = 0;
Shape.types = SHAPE_TYPES;
/**
 * Transformation utilities.
 */

class Transform {
  /**
   * position
   */

  /**
   * quaternion
   */
  constructor(options = {}) {
    this.position = void 0;
    this.quaternion = void 0;
    this.position = new Vec3();
    this.quaternion = new Quaternion();

    if (options.position) {
      this.position.copy(options.position);
    }

    if (options.quaternion) {
      this.quaternion.copy(options.quaternion);
    }
  }
  /**
   * Get a global point in local transform coordinates.
   */


  pointToLocal(worldPoint, result) {
    return Transform.pointToLocalFrame(this.position, this.quaternion, worldPoint, result);
  }
  /**
   * Get a local point in global transform coordinates.
   */


  pointToWorld(localPoint, result) {
    return Transform.pointToWorldFrame(this.position, this.quaternion, localPoint, result);
  }
  /**
   * vectorToWorldFrame
   */


  vectorToWorldFrame(localVector, result = new Vec3()) {
    this.quaternion.vmult(localVector, result);
    return result;
  }
  /**
   * pointToLocalFrame
   */


  static pointToLocalFrame(position, quaternion, worldPoint, result = new Vec3()) {
    worldPoint.vsub(position, result);
    quaternion.conjugate(tmpQuat$1);
    tmpQuat$1.vmult(result, result);
    return result;
  }
  /**
   * pointToWorldFrame
   */


  static pointToWorldFrame(position, quaternion, localPoint, result = new Vec3()) {
    quaternion.vmult(localPoint, result);
    result.vadd(position, result);
    return result;
  }
  /**
   * vectorToWorldFrame
   */


  static vectorToWorldFrame(quaternion, localVector, result = new Vec3()) {
    quaternion.vmult(localVector, result);
    return result;
  }
  /**
   * vectorToLocalFrame
   */


  static vectorToLocalFrame(position, quaternion, worldVector, result = new Vec3()) {
    quaternion.w *= -1;
    quaternion.vmult(worldVector, result);
    quaternion.w *= -1;
    return result;
  }

}

const tmpQuat$1 = new Quaternion();
/**
 * A set of polygons describing a convex shape.
 *
 * The shape MUST be convex for the code to work properly. No polygons may be coplanar (contained
 * in the same 3D plane), instead these should be merged into one polygon.
 *
 * @author qiao / https://github.com/qiao (original author, see https://github.com/qiao/three.js/commit/85026f0c769e4000148a67d45a9e9b9c5108836f)
 * @author schteppe / https://github.com/schteppe
 * @see https://www.altdevblogaday.com/2011/05/13/contact-generation-between-3d-convex-meshes/
 *
 * @todo Move the clipping functions to ContactGenerator?
 * @todo Automatically merge coplanar polygons in constructor.
 * @example
 *     const convexShape = new CANNON.ConvexPolyhedron({ vertices, faces })
 *     const convexBody = new CANNON.Body({ mass: 1, shape: convexShape })
 *     world.addBody(convexBody)
 */

class ConvexPolyhedron extends Shape {
  /** vertices */

  /**
   * Array of integer arrays, indicating which vertices each face consists of
   */

  /** faceNormals */

  /** worldVertices */

  /** worldVerticesNeedsUpdate */

  /** worldFaceNormals */

  /** worldFaceNormalsNeedsUpdate */

  /**
   * If given, these locally defined, normalized axes are the only ones being checked when doing separating axis check.
   */

  /** uniqueEdges */

  /**
   * @param vertices An array of Vec3's
   * @param faces Array of integer arrays, describing which vertices that is included in each face.
   */
  constructor(props = {}) {
    const {
      vertices = [],
      faces = [],
      normals = [],
      axes,
      boundingSphereRadius
    } = props;
    super({
      type: Shape.types.CONVEXPOLYHEDRON
    });
    this.vertices = void 0;
    this.faces = void 0;
    this.faceNormals = void 0;
    this.worldVertices = void 0;
    this.worldVerticesNeedsUpdate = void 0;
    this.worldFaceNormals = void 0;
    this.worldFaceNormalsNeedsUpdate = void 0;
    this.uniqueAxes = void 0;
    this.uniqueEdges = void 0;
    this.vertices = vertices;
    this.faces = faces;
    this.faceNormals = normals;

    if (this.faceNormals.length === 0) {
      this.computeNormals();
    }

    if (!boundingSphereRadius) {
      this.updateBoundingSphereRadius();
    } else {
      this.boundingSphereRadius = boundingSphereRadius;
    }

    this.worldVertices = []; // World transformed version of .vertices

    this.worldVerticesNeedsUpdate = true;
    this.worldFaceNormals = []; // World transformed version of .faceNormals

    this.worldFaceNormalsNeedsUpdate = true;
    this.uniqueAxes = axes ? axes.slice() : null;
    this.uniqueEdges = [];
    this.computeEdges();
  }
  /**
   * Computes uniqueEdges
   */


  computeEdges() {
    const faces = this.faces;
    const vertices = this.vertices;
    const edges = this.uniqueEdges;
    edges.length = 0;
    const edge = new Vec3();

    for (let i = 0; i !== faces.length; i++) {
      const face = faces[i];
      const numVertices = face.length;

      for (let j = 0; j !== numVertices; j++) {
        const k = (j + 1) % numVertices;
        vertices[face[j]].vsub(vertices[face[k]], edge);
        edge.normalize();
        let found = false;

        for (let p = 0; p !== edges.length; p++) {
          if (edges[p].almostEquals(edge) || edges[p].almostEquals(edge)) {
            found = true;
            break;
          }
        }

        if (!found) {
          edges.push(edge.clone());
        }
      }
    }
  }
  /**
   * Compute the normals of the faces.
   * Will reuse existing Vec3 objects in the `faceNormals` array if they exist.
   */


  computeNormals() {
    this.faceNormals.length = this.faces.length; // Generate normals

    for (let i = 0; i < this.faces.length; i++) {
      // Check so all vertices exists for this face
      for (let j = 0; j < this.faces[i].length; j++) {
        if (!this.vertices[this.faces[i][j]]) {
          throw new Error("Vertex " + this.faces[i][j] + " not found!");
        }
      }

      const n = this.faceNormals[i] || new Vec3();
      this.getFaceNormal(i, n);
      n.negate(n);
      this.faceNormals[i] = n;
      const vertex = this.vertices[this.faces[i][0]];

      if (n.dot(vertex) < 0) {
        console.error(".faceNormals[" + i + "] = Vec3(" + n.toString() + ") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");

        for (let j = 0; j < this.faces[i].length; j++) {
          console.warn(".vertices[" + this.faces[i][j] + "] = Vec3(" + this.vertices[this.faces[i][j]].toString() + ")");
        }
      }
    }
  }
  /**
   * Compute the normal of a face from its vertices
   */


  getFaceNormal(i, target) {
    const f = this.faces[i];
    const va = this.vertices[f[0]];
    const vb = this.vertices[f[1]];
    const vc = this.vertices[f[2]];
    ConvexPolyhedron.computeNormal(va, vb, vc, target);
  }
  /**
   * Get face normal given 3 vertices
   */


  static computeNormal(va, vb, vc, target) {
    const cb = new Vec3();
    const ab = new Vec3();
    vb.vsub(va, ab);
    vc.vsub(vb, cb);
    cb.cross(ab, target);

    if (!target.isZero()) {
      target.normalize();
    }
  }
  /**
   * @param minDist Clamp distance
   * @param result The an array of contact point objects, see clipFaceAgainstHull
   */


  clipAgainstHull(posA, quatA, hullB, posB, quatB, separatingNormal, minDist, maxDist, result) {
    const WorldNormal = new Vec3();
    let closestFaceB = -1;
    let dmax = -Number.MAX_VALUE;

    for (let face = 0; face < hullB.faces.length; face++) {
      WorldNormal.copy(hullB.faceNormals[face]);
      quatB.vmult(WorldNormal, WorldNormal);
      const d = WorldNormal.dot(separatingNormal);

      if (d > dmax) {
        dmax = d;
        closestFaceB = face;
      }
    }

    const worldVertsB1 = [];

    for (let i = 0; i < hullB.faces[closestFaceB].length; i++) {
      const b = hullB.vertices[hullB.faces[closestFaceB][i]];
      const worldb = new Vec3();
      worldb.copy(b);
      quatB.vmult(worldb, worldb);
      posB.vadd(worldb, worldb);
      worldVertsB1.push(worldb);
    }

    if (closestFaceB >= 0) {
      this.clipFaceAgainstHull(separatingNormal, posA, quatA, worldVertsB1, minDist, maxDist, result);
    }
  }
  /**
   * Find the separating axis between this hull and another
   * @param target The target vector to save the axis in
   * @return Returns false if a separation is found, else true
   */


  findSeparatingAxis(hullB, posA, quatA, posB, quatB, target, faceListA, faceListB) {
    const faceANormalWS3 = new Vec3();
    const Worldnormal1 = new Vec3();
    const deltaC = new Vec3();
    const worldEdge0 = new Vec3();
    const worldEdge1 = new Vec3();
    const Cross = new Vec3();
    let dmin = Number.MAX_VALUE;
    const hullA = this;

    if (!hullA.uniqueAxes) {
      const numFacesA = faceListA ? faceListA.length : hullA.faces.length; // Test face normals from hullA

      for (let i = 0; i < numFacesA; i++) {
        const fi = faceListA ? faceListA[i] : i; // Get world face normal

        faceANormalWS3.copy(hullA.faceNormals[fi]);
        quatA.vmult(faceANormalWS3, faceANormalWS3);
        const d = hullA.testSepAxis(faceANormalWS3, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(faceANormalWS3);
        }
      }
    } else {
      // Test unique axes
      for (let i = 0; i !== hullA.uniqueAxes.length; i++) {
        // Get world axis
        quatA.vmult(hullA.uniqueAxes[i], faceANormalWS3);
        const d = hullA.testSepAxis(faceANormalWS3, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(faceANormalWS3);
        }
      }
    }

    if (!hullB.uniqueAxes) {
      // Test face normals from hullB
      const numFacesB = faceListB ? faceListB.length : hullB.faces.length;

      for (let i = 0; i < numFacesB; i++) {
        const fi = faceListB ? faceListB[i] : i;
        Worldnormal1.copy(hullB.faceNormals[fi]);
        quatB.vmult(Worldnormal1, Worldnormal1);
        const d = hullA.testSepAxis(Worldnormal1, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(Worldnormal1);
        }
      }
    } else {
      // Test unique axes in B
      for (let i = 0; i !== hullB.uniqueAxes.length; i++) {
        quatB.vmult(hullB.uniqueAxes[i], Worldnormal1);
        const d = hullA.testSepAxis(Worldnormal1, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(Worldnormal1);
        }
      }
    } // Test edges


    for (let e0 = 0; e0 !== hullA.uniqueEdges.length; e0++) {
      // Get world edge
      quatA.vmult(hullA.uniqueEdges[e0], worldEdge0);

      for (let e1 = 0; e1 !== hullB.uniqueEdges.length; e1++) {
        // Get world edge 2
        quatB.vmult(hullB.uniqueEdges[e1], worldEdge1);
        worldEdge0.cross(worldEdge1, Cross);

        if (!Cross.almostZero()) {
          Cross.normalize();
          const dist = hullA.testSepAxis(Cross, hullB, posA, quatA, posB, quatB);

          if (dist === false) {
            return false;
          }

          if (dist < dmin) {
            dmin = dist;
            target.copy(Cross);
          }
        }
      }
    }

    posB.vsub(posA, deltaC);

    if (deltaC.dot(target) > 0.0) {
      target.negate(target);
    }

    return true;
  }
  /**
   * Test separating axis against two hulls. Both hulls are projected onto the axis and the overlap size is returned if there is one.
   * @return The overlap depth, or FALSE if no penetration.
   */


  testSepAxis(axis, hullB, posA, quatA, posB, quatB) {
    const hullA = this;
    ConvexPolyhedron.project(hullA, axis, posA, quatA, maxminA);
    ConvexPolyhedron.project(hullB, axis, posB, quatB, maxminB);
    const maxA = maxminA[0];
    const minA = maxminA[1];
    const maxB = maxminB[0];
    const minB = maxminB[1];

    if (maxA < minB || maxB < minA) {
      return false; // Separated
    }

    const d0 = maxA - minB;
    const d1 = maxB - minA;
    const depth = d0 < d1 ? d0 : d1;
    return depth;
  }
  /**
   * calculateLocalInertia
   */


  calculateLocalInertia(mass, target) {
    // Approximate with box inertia
    // Exact inertia calculation is overkill, but see http://geometrictools.com/Documentation/PolyhedralMassProperties.pdf for the correct way to do it
    const aabbmax = new Vec3();
    const aabbmin = new Vec3();
    this.computeLocalAABB(aabbmin, aabbmax);
    const x = aabbmax.x - aabbmin.x;
    const y = aabbmax.y - aabbmin.y;
    const z = aabbmax.z - aabbmin.z;
    target.x = 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * z * 2 * z);
    target.y = 1.0 / 12.0 * mass * (2 * x * 2 * x + 2 * z * 2 * z);
    target.z = 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * x * 2 * x);
  }
  /**
   * @param face_i Index of the face
   */


  getPlaneConstantOfFace(face_i) {
    const f = this.faces[face_i];
    const n = this.faceNormals[face_i];
    const v = this.vertices[f[0]];
    const c = -n.dot(v);
    return c;
  }
  /**
   * Clip a face against a hull.
   * @param worldVertsB1 An array of Vec3 with vertices in the world frame.
   * @param minDist Distance clamping
   * @param Array result Array to store resulting contact points in. Will be objects with properties: point, depth, normal. These are represented in world coordinates.
   */


  clipFaceAgainstHull(separatingNormal, posA, quatA, worldVertsB1, minDist, maxDist, result) {
    const faceANormalWS = new Vec3();
    const edge0 = new Vec3();
    const WorldEdge0 = new Vec3();
    const worldPlaneAnormal1 = new Vec3();
    const planeNormalWS1 = new Vec3();
    const worldA1 = new Vec3();
    const localPlaneNormal = new Vec3();
    const planeNormalWS = new Vec3();
    const hullA = this;
    const worldVertsB2 = [];
    const pVtxIn = worldVertsB1;
    const pVtxOut = worldVertsB2;
    let closestFaceA = -1;
    let dmin = Number.MAX_VALUE; // Find the face with normal closest to the separating axis

    for (let face = 0; face < hullA.faces.length; face++) {
      faceANormalWS.copy(hullA.faceNormals[face]);
      quatA.vmult(faceANormalWS, faceANormalWS);
      const d = faceANormalWS.dot(separatingNormal);

      if (d < dmin) {
        dmin = d;
        closestFaceA = face;
      }
    }

    if (closestFaceA < 0) {
      return;
    } // Get the face and construct connected faces


    const polyA = hullA.faces[closestFaceA];
    polyA.connectedFaces = [];

    for (let i = 0; i < hullA.faces.length; i++) {
      for (let j = 0; j < hullA.faces[i].length; j++) {
        if (
        /* Sharing a vertex*/
        polyA.indexOf(hullA.faces[i][j]) !== -1 &&
        /* Not the one we are looking for connections from */
        i !== closestFaceA &&
        /* Not already added */
        polyA.connectedFaces.indexOf(i) === -1) {
          polyA.connectedFaces.push(i);
        }
      }
    } // Clip the polygon to the back of the planes of all faces of hull A,
    // that are adjacent to the witness face


    const numVerticesA = polyA.length;

    for (let i = 0; i < numVerticesA; i++) {
      const a = hullA.vertices[polyA[i]];
      const b = hullA.vertices[polyA[(i + 1) % numVerticesA]];
      a.vsub(b, edge0);
      WorldEdge0.copy(edge0);
      quatA.vmult(WorldEdge0, WorldEdge0);
      posA.vadd(WorldEdge0, WorldEdge0);
      worldPlaneAnormal1.copy(this.faceNormals[closestFaceA]);
      quatA.vmult(worldPlaneAnormal1, worldPlaneAnormal1);
      posA.vadd(worldPlaneAnormal1, worldPlaneAnormal1);
      WorldEdge0.cross(worldPlaneAnormal1, planeNormalWS1);
      planeNormalWS1.negate(planeNormalWS1);
      worldA1.copy(a);
      quatA.vmult(worldA1, worldA1);
      posA.vadd(worldA1, worldA1);
      const otherFace = polyA.connectedFaces[i];
      localPlaneNormal.copy(this.faceNormals[otherFace]);
      const localPlaneEq = this.getPlaneConstantOfFace(otherFace);
      planeNormalWS.copy(localPlaneNormal);
      quatA.vmult(planeNormalWS, planeNormalWS);
      const planeEqWS = localPlaneEq - planeNormalWS.dot(posA); // Clip face against our constructed plane

      this.clipFaceAgainstPlane(pVtxIn, pVtxOut, planeNormalWS, planeEqWS); // Throw away all clipped points, but save the remaining until next clip

      while (pVtxIn.length) {
        pVtxIn.shift();
      }

      while (pVtxOut.length) {
        pVtxIn.push(pVtxOut.shift());
      }
    } // only keep contact points that are behind the witness face


    localPlaneNormal.copy(this.faceNormals[closestFaceA]);
    const localPlaneEq = this.getPlaneConstantOfFace(closestFaceA);
    planeNormalWS.copy(localPlaneNormal);
    quatA.vmult(planeNormalWS, planeNormalWS);
    const planeEqWS = localPlaneEq - planeNormalWS.dot(posA);

    for (let i = 0; i < pVtxIn.length; i++) {
      let depth = planeNormalWS.dot(pVtxIn[i]) + planeEqWS; // ???

      if (depth <= minDist) {
        console.log("clamped: depth=" + depth + " to minDist=" + minDist);
        depth = minDist;
      }

      if (depth <= maxDist) {
        const point = pVtxIn[i];

        if (depth <= 1e-6) {
          const p = {
            point,
            normal: planeNormalWS,
            depth
          };
          result.push(p);
        }
      }
    }
  }
  /**
   * Clip a face in a hull against the back of a plane.
   * @param planeConstant The constant in the mathematical plane equation
   */


  clipFaceAgainstPlane(inVertices, outVertices, planeNormal, planeConstant) {
    let n_dot_first;
    let n_dot_last;
    const numVerts = inVertices.length;

    if (numVerts < 2) {
      return outVertices;
    }

    let firstVertex = inVertices[inVertices.length - 1];
    let lastVertex = inVertices[0];
    n_dot_first = planeNormal.dot(firstVertex) + planeConstant;

    for (let vi = 0; vi < numVerts; vi++) {
      lastVertex = inVertices[vi];
      n_dot_last = planeNormal.dot(lastVertex) + planeConstant;

      if (n_dot_first < 0) {
        if (n_dot_last < 0) {
          // Start < 0, end < 0, so output lastVertex
          const newv = new Vec3();
          newv.copy(lastVertex);
          outVertices.push(newv);
        } else {
          // Start < 0, end >= 0, so output intersection
          const newv = new Vec3();
          firstVertex.lerp(lastVertex, n_dot_first / (n_dot_first - n_dot_last), newv);
          outVertices.push(newv);
        }
      } else {
        if (n_dot_last < 0) {
          // Start >= 0, end < 0 so output intersection and end
          const newv = new Vec3();
          firstVertex.lerp(lastVertex, n_dot_first / (n_dot_first - n_dot_last), newv);
          outVertices.push(newv);
          outVertices.push(lastVertex);
        }
      }

      firstVertex = lastVertex;
      n_dot_first = n_dot_last;
    }

    return outVertices;
  }
  /**
   * Updates `.worldVertices` and sets `.worldVerticesNeedsUpdate` to false.
   */


  computeWorldVertices(position, quat) {
    while (this.worldVertices.length < this.vertices.length) {
      this.worldVertices.push(new Vec3());
    }

    const verts = this.vertices;
    const worldVerts = this.worldVertices;

    for (let i = 0; i !== this.vertices.length; i++) {
      quat.vmult(verts[i], worldVerts[i]);
      position.vadd(worldVerts[i], worldVerts[i]);
    }

    this.worldVerticesNeedsUpdate = false;
  }

  computeLocalAABB(aabbmin, aabbmax) {
    const vertices = this.vertices;
    aabbmin.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
    aabbmax.set(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);

    for (let i = 0; i < this.vertices.length; i++) {
      const v = vertices[i];

      if (v.x < aabbmin.x) {
        aabbmin.x = v.x;
      } else if (v.x > aabbmax.x) {
        aabbmax.x = v.x;
      }

      if (v.y < aabbmin.y) {
        aabbmin.y = v.y;
      } else if (v.y > aabbmax.y) {
        aabbmax.y = v.y;
      }

      if (v.z < aabbmin.z) {
        aabbmin.z = v.z;
      } else if (v.z > aabbmax.z) {
        aabbmax.z = v.z;
      }
    }
  }
  /**
   * Updates `worldVertices` and sets `worldVerticesNeedsUpdate` to false.
   */


  computeWorldFaceNormals(quat) {
    const N = this.faceNormals.length;

    while (this.worldFaceNormals.length < N) {
      this.worldFaceNormals.push(new Vec3());
    }

    const normals = this.faceNormals;
    const worldNormals = this.worldFaceNormals;

    for (let i = 0; i !== N; i++) {
      quat.vmult(normals[i], worldNormals[i]);
    }

    this.worldFaceNormalsNeedsUpdate = false;
  }
  /**
   * updateBoundingSphereRadius
   */


  updateBoundingSphereRadius() {
    // Assume points are distributed with local (0,0,0) as center
    let max2 = 0;
    const verts = this.vertices;

    for (let i = 0; i !== verts.length; i++) {
      const norm2 = verts[i].lengthSquared();

      if (norm2 > max2) {
        max2 = norm2;
      }
    }

    this.boundingSphereRadius = Math.sqrt(max2);
  }
  /**
   * calculateWorldAABB
   */


  calculateWorldAABB(pos, quat, min, max) {
    const verts = this.vertices;
    let minx;
    let miny;
    let minz;
    let maxx;
    let maxy;
    let maxz;
    let tempWorldVertex = new Vec3();

    for (let i = 0; i < verts.length; i++) {
      tempWorldVertex.copy(verts[i]);
      quat.vmult(tempWorldVertex, tempWorldVertex);
      pos.vadd(tempWorldVertex, tempWorldVertex);
      const v = tempWorldVertex;

      if (minx === undefined || v.x < minx) {
        minx = v.x;
      }

      if (maxx === undefined || v.x > maxx) {
        maxx = v.x;
      }

      if (miny === undefined || v.y < miny) {
        miny = v.y;
      }

      if (maxy === undefined || v.y > maxy) {
        maxy = v.y;
      }

      if (minz === undefined || v.z < minz) {
        minz = v.z;
      }

      if (maxz === undefined || v.z > maxz) {
        maxz = v.z;
      }
    }

    min.set(minx, miny, minz);
    max.set(maxx, maxy, maxz);
  }
  /**
   * Get approximate convex volume
   */


  volume() {
    return 4.0 * Math.PI * this.boundingSphereRadius / 3.0;
  }
  /**
   * Get an average of all the vertices positions
   */


  getAveragePointLocal(target = new Vec3()) {
    const verts = this.vertices;

    for (let i = 0; i < verts.length; i++) {
      target.vadd(verts[i], target);
    }

    target.scale(1 / verts.length, target);
    return target;
  }
  /**
   * Transform all local points. Will change the .vertices
   */


  transformAllPoints(offset, quat) {
    const n = this.vertices.length;
    const verts = this.vertices; // Apply rotation

    if (quat) {
      // Rotate vertices
      for (let i = 0; i < n; i++) {
        const v = verts[i];
        quat.vmult(v, v);
      } // Rotate face normals


      for (let i = 0; i < this.faceNormals.length; i++) {
        const v = this.faceNormals[i];
        quat.vmult(v, v);
      }
      /*
            // Rotate edges
            for(let i=0; i<this.uniqueEdges.length; i++){
                const v = this.uniqueEdges[i];
                quat.vmult(v,v);
            }*/

    } // Apply offset


    if (offset) {
      for (let i = 0; i < n; i++) {
        const v = verts[i];
        v.vadd(offset, v);
      }
    }
  }
  /**
   * Checks whether p is inside the polyhedra. Must be in local coords.
   * The point lies outside of the convex hull of the other points if and only if the direction
   * of all the vectors from it to those other points are on less than one half of a sphere around it.
   * @param p A point given in local coordinates
   */


  pointIsInside(p) {
    const verts = this.vertices;
    const faces = this.faces;
    const normals = this.faceNormals;
    const pointInside = new Vec3();
    this.getAveragePointLocal(pointInside);

    for (let i = 0; i < this.faces.length; i++) {
      let n = normals[i];
      const v = verts[faces[i][0]]; // We only need one point in the face
      // This dot product determines which side of the edge the point is

      const vToP = new Vec3();
      p.vsub(v, vToP);
      const r1 = n.dot(vToP);
      const vToPointInside = new Vec3();
      pointInside.vsub(v, vToPointInside);
      const r2 = n.dot(vToPointInside);

      if (r1 < 0 && r2 > 0 || r1 > 0 && r2 < 0) {
        return false; // Encountered some other sign. Exit.
      }
    } // If we got here, all dot products were of the same sign.


    return -1;
  }
  /**
   * Get max and min dot product of a convex hull at position (pos,quat) projected onto an axis.
   * Results are saved in the array maxmin.
   * @param result result[0] and result[1] will be set to maximum and minimum, respectively.
   */


  static project(shape, axis, pos, quat, result) {
    const n = shape.vertices.length;
    const localAxis = project_localAxis;
    let max = 0;
    let min = 0;
    const localOrigin = project_localOrigin;
    const vs = shape.vertices;
    localOrigin.setZero(); // Transform the axis to local

    Transform.vectorToLocalFrame(pos, quat, axis, localAxis);
    Transform.pointToLocalFrame(pos, quat, localOrigin, localOrigin);
    const add = localOrigin.dot(localAxis);
    min = max = vs[0].dot(localAxis);

    for (let i = 1; i < n; i++) {
      const val = vs[i].dot(localAxis);

      if (val > max) {
        max = val;
      }

      if (val < min) {
        min = val;
      }
    }

    min -= add;
    max -= add;

    if (min > max) {
      // Inconsistent - swap
      const temp = min;
      min = max;
      max = temp;
    } // Output


    result[0] = max;
    result[1] = min;
  }

}

const maxminA = [];
const maxminB = [];
const project_localAxis = new Vec3();
const project_localOrigin = new Vec3();
/**
 * A 3d box shape.
 * @example
 *     const size = 1
 *     const halfExtents = new CANNON.Vec3(size, size, size)
 *     const boxShape = new CANNON.Box(halfExtents)
 *     const boxBody = new CANNON.Body({ mass: 1, shape: boxShape })
 *     world.addBody(boxBody)
 */

class Box extends Shape {
  /**
   * The half extents of the box.
   */

  /**
   * Used by the contact generator to make contacts with other convex polyhedra for example.
   */
  constructor(halfExtents) {
    super({
      type: Shape.types.BOX
    });
    this.halfExtents = void 0;
    this.convexPolyhedronRepresentation = void 0;
    this.halfExtents = halfExtents;
    this.convexPolyhedronRepresentation = null;
    this.updateConvexPolyhedronRepresentation();
    this.updateBoundingSphereRadius();
  }
  /**
   * Updates the local convex polyhedron representation used for some collisions.
   */


  updateConvexPolyhedronRepresentation() {
    const sx = this.halfExtents.x;
    const sy = this.halfExtents.y;
    const sz = this.halfExtents.z;
    const V = Vec3;
    const vertices = [new V(-sx, -sy, -sz), new V(sx, -sy, -sz), new V(sx, sy, -sz), new V(-sx, sy, -sz), new V(-sx, -sy, sz), new V(sx, -sy, sz), new V(sx, sy, sz), new V(-sx, sy, sz)];
    const faces = [[3, 2, 1, 0], // -z
    [4, 5, 6, 7], // +z
    [5, 4, 0, 1], // -y
    [2, 3, 7, 6], // +y
    [0, 4, 7, 3], // -x
    [1, 2, 6, 5] // +x
    ];
    const axes = [new V(0, 0, 1), new V(0, 1, 0), new V(1, 0, 0)];
    const h = new ConvexPolyhedron({
      vertices,
      faces,
      axes
    });
    this.convexPolyhedronRepresentation = h;
    h.material = this.material;
  }
  /**
   * Calculate the inertia of the box.
   */


  calculateLocalInertia(mass, target = new Vec3()) {
    Box.calculateInertia(this.halfExtents, mass, target);
    return target;
  }

  static calculateInertia(halfExtents, mass, target) {
    const e = halfExtents;
    target.x = 1.0 / 12.0 * mass * (2 * e.y * 2 * e.y + 2 * e.z * 2 * e.z);
    target.y = 1.0 / 12.0 * mass * (2 * e.x * 2 * e.x + 2 * e.z * 2 * e.z);
    target.z = 1.0 / 12.0 * mass * (2 * e.y * 2 * e.y + 2 * e.x * 2 * e.x);
  }
  /**
   * Get the box 6 side normals
   * @param sixTargetVectors An array of 6 vectors, to store the resulting side normals in.
   * @param quat Orientation to apply to the normal vectors. If not provided, the vectors will be in respect to the local frame.
   */


  getSideNormals(sixTargetVectors, quat) {
    const sides = sixTargetVectors;
    const ex = this.halfExtents;
    sides[0].set(ex.x, 0, 0);
    sides[1].set(0, ex.y, 0);
    sides[2].set(0, 0, ex.z);
    sides[3].set(-ex.x, 0, 0);
    sides[4].set(0, -ex.y, 0);
    sides[5].set(0, 0, -ex.z);

    if (quat !== undefined) {
      for (let i = 0; i !== sides.length; i++) {
        quat.vmult(sides[i], sides[i]);
      }
    }

    return sides;
  }
  /**
   * Returns the volume of the box.
   */


  volume() {
    return 8.0 * this.halfExtents.x * this.halfExtents.y * this.halfExtents.z;
  }
  /**
   * updateBoundingSphereRadius
   */


  updateBoundingSphereRadius() {
    this.boundingSphereRadius = this.halfExtents.length();
  }
  /**
   * forEachWorldCorner
   */


  forEachWorldCorner(pos, quat, callback) {
    const e = this.halfExtents;
    const corners = [[e.x, e.y, e.z], [-e.x, e.y, e.z], [-e.x, -e.y, e.z], [-e.x, -e.y, -e.z], [e.x, -e.y, -e.z], [e.x, e.y, -e.z], [-e.x, e.y, -e.z], [e.x, -e.y, e.z]];

    for (let i = 0; i < corners.length; i++) {
      worldCornerTempPos.set(corners[i][0], corners[i][1], corners[i][2]);
      quat.vmult(worldCornerTempPos, worldCornerTempPos);
      pos.vadd(worldCornerTempPos, worldCornerTempPos);
      callback(worldCornerTempPos.x, worldCornerTempPos.y, worldCornerTempPos.z);
    }
  }
  /**
   * calculateWorldAABB
   */


  calculateWorldAABB(pos, quat, min, max) {
    const e = this.halfExtents;
    worldCornersTemp[0].set(e.x, e.y, e.z);
    worldCornersTemp[1].set(-e.x, e.y, e.z);
    worldCornersTemp[2].set(-e.x, -e.y, e.z);
    worldCornersTemp[3].set(-e.x, -e.y, -e.z);
    worldCornersTemp[4].set(e.x, -e.y, -e.z);
    worldCornersTemp[5].set(e.x, e.y, -e.z);
    worldCornersTemp[6].set(-e.x, e.y, -e.z);
    worldCornersTemp[7].set(e.x, -e.y, e.z);
    const wc = worldCornersTemp[0];
    quat.vmult(wc, wc);
    pos.vadd(wc, wc);
    max.copy(wc);
    min.copy(wc);

    for (let i = 1; i < 8; i++) {
      const wc = worldCornersTemp[i];
      quat.vmult(wc, wc);
      pos.vadd(wc, wc);
      const x = wc.x;
      const y = wc.y;
      const z = wc.z;

      if (x > max.x) {
        max.x = x;
      }

      if (y > max.y) {
        max.y = y;
      }

      if (z > max.z) {
        max.z = z;
      }

      if (x < min.x) {
        min.x = x;
      }

      if (y < min.y) {
        min.y = y;
      }

      if (z < min.z) {
        min.z = z;
      }
    } // Get each axis max
    // min.set(Infinity,Infinity,Infinity);
    // max.set(-Infinity,-Infinity,-Infinity);
    // this.forEachWorldCorner(pos,quat,function(x,y,z){
    //     if(x > max.x){
    //         max.x = x;
    //     }
    //     if(y > max.y){
    //         max.y = y;
    //     }
    //     if(z > max.z){
    //         max.z = z;
    //     }
    //     if(x < min.x){
    //         min.x = x;
    //     }
    //     if(y < min.y){
    //         min.y = y;
    //     }
    //     if(z < min.z){
    //         min.z = z;
    //     }
    // });

  }

}

const worldCornerTempPos = new Vec3();
const worldCornersTemp = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];
/**
 * BODY_TYPES
 */

const BODY_TYPES = {
  /** DYNAMIC */
  DYNAMIC: 1,

  /** STATIC */
  STATIC: 2,

  /** KINEMATIC */
  KINEMATIC: 4
};
/**
 * BodyType
 */

/**
 * BODY_SLEEP_STATES
 */

const BODY_SLEEP_STATES = {
  /** AWAKE */
  AWAKE: 0,

  /** SLEEPY */
  SLEEPY: 1,

  /** SLEEPING */
  SLEEPING: 2
};
/**
 * BodySleepState
 */

/**
 * Base class for all body types.
 * @example
 *     const shape = new CANNON.Sphere(1)
 *     const body = new CANNON.Body({
 *       mass: 1,
 *       shape,
 *     })
 *     world.addBody(body)
 */

class Body extends EventTarget {
  /**
   * Dispatched after two bodies collide. This event is dispatched on each
   * of the two bodies involved in the collision.
   * @event collide
   * @param body The body that was involved in the collision.
   * @param contact The details of the collision.
   */

  /**
   * A dynamic body is fully simulated. Can be moved manually by the user, but normally they move according to forces. A dynamic body can collide with all body types. A dynamic body always has finite, non-zero mass.
   */

  /**
   * A static body does not move during simulation and behaves as if it has infinite mass. Static bodies can be moved manually by setting the position of the body. The velocity of a static body is always zero. Static bodies do not collide with other static or kinematic bodies.
   */

  /**
   * A kinematic body moves under simulation according to its velocity. They do not respond to forces. They can be moved manually, but normally a kinematic body is moved by setting its velocity. A kinematic body behaves as if it has infinite mass. Kinematic bodies do not collide with other static or kinematic bodies.
   */

  /**
   * AWAKE
   */

  /**
   * SLEEPY
   */

  /**
   * SLEEPING
   */

  /**
   * Dispatched after a sleeping body has woken up.
   * @event wakeup
   */

  /**
   * Dispatched after a body has gone in to the sleepy state.
   * @event sleepy
   */

  /**
   * Dispatched after a body has fallen asleep.
   * @event sleep
   */

  /**
   * Identifier of the body.
   */

  /**
   * Position of body in World.bodies. Updated by World and used in ArrayCollisionMatrix.
   */

  /**
   * Reference to the world the body is living in.
   */

  /**
   * Callback function that is used BEFORE stepping the system. Use it to apply forces, for example. Inside the function, "this" will refer to this Body object. Deprecated - use World events instead.
   * @deprecated Use World events instead
   */

  /**
   * Callback function that is used AFTER stepping the system. Inside the function, "this" will refer to this Body object. Deprecated - use World events instead.
   * @deprecated Use World events instead
   */

  /**
   * The collision group the body belongs to.
   * @default 1
   */

  /**
   * The collision group the body can collide with.
   * @default -1
   */

  /**
   * Whether to produce contact forces when in contact with other bodies. Note that contacts will be generated, but they will be disabled - i.e. "collide" events will be raised, but forces will not be altered.
   */

  /**
   * World space position of the body.
   */

  /**
   * Interpolated position of the body.
   */

  /**
   * Initial position of the body.
   */

  /**
   * World space velocity of the body.
   */

  /**
   * Initial velocity of the body.
   */

  /**
   * Linear force on the body in world space.
   */

  /**
   * The mass of the body.
   * @default 0
   */

  /**
   * The physics material of the body. It defines the body interaction with other bodies.
   */

  /**
   * How much to damp the body velocity each step. It can go from 0 to 1.
   * @default 0.01
   */

  /**
   * One of: `Body.DYNAMIC`, `Body.STATIC` and `Body.KINEMATIC`.
   */

  /**
   * If true, the body will automatically fall to sleep.
   * @default true
   */

  /**
   * Current sleep state.
   */

  /**
   * If the speed (the norm of the velocity) is smaller than this value, the body is considered sleepy.
   * @default 0.1
   */

  /**
   * If the body has been sleepy for this sleepTimeLimit seconds, it is considered sleeping.
   * @default 1
   */

  /**
   * World space rotational force on the body, around center of mass.
   */

  /**
   * World space orientation of the body.
   */

  /**
   * Initial quaternion of the body.
   */

  /**
   * Interpolated orientation of the body.
   */

  /**
   * Angular velocity of the body, in world space. Think of the angular velocity as a vector, which the body rotates around. The length of this vector determines how fast (in radians per second) the body rotates.
   */

  /**
   * Initial angular velocity of the body.
   */

  /**
   * List of Shapes that have been added to the body.
   */

  /**
   * Position of each Shape in the body, given in local Body space.
   */

  /**
   * Orientation of each Shape, given in local Body space.
   */

  /**
   * The inertia of the body.
   */

  /**
   * Set to true if you don't want the body to rotate. Make sure to run .updateMassProperties() if you change this after the body creation.
   * @default false
   */

  /**
   * How much to damp the body angular velocity each step. It can go from 0 to 1.
   * @default 0.01
   */

  /**
   * Use this property to limit the motion along any world axis. (1,1,1) will allow motion along all axes while (0,0,0) allows none.
   */

  /**
   * Use this property to limit the rotational motion along any world axis. (1,1,1) will allow rotation along all axes while (0,0,0) allows none.
   */

  /**
   * World space bounding box of the body and its shapes.
   */

  /**
   * Indicates if the AABB needs to be updated before use.
   */

  /**
   * Total bounding radius of the Body including its shapes, relative to body.position.
   */

  /**
   * When true the body behaves like a trigger. It does not collide
   * with other bodies but collision events are still triggered.
   * @default false
   */
  constructor(options = {}) {
    super();
    this.id = void 0;
    this.index = void 0;
    this.world = void 0;
    this.preStep = void 0;
    this.postStep = void 0;
    this.vlambda = void 0;
    this.collisionFilterGroup = void 0;
    this.collisionFilterMask = void 0;
    this.collisionResponse = void 0;
    this.position = void 0;
    this.previousPosition = void 0;
    this.interpolatedPosition = void 0;
    this.initPosition = void 0;
    this.velocity = void 0;
    this.initVelocity = void 0;
    this.force = void 0;
    this.mass = void 0;
    this.invMass = void 0;
    this.material = void 0;
    this.linearDamping = void 0;
    this.type = void 0;
    this.allowSleep = void 0;
    this.sleepState = void 0;
    this.sleepSpeedLimit = void 0;
    this.sleepTimeLimit = void 0;
    this.timeLastSleepy = void 0;
    this.wakeUpAfterNarrowphase = void 0;
    this.torque = void 0;
    this.quaternion = void 0;
    this.initQuaternion = void 0;
    this.previousQuaternion = void 0;
    this.interpolatedQuaternion = void 0;
    this.angularVelocity = void 0;
    this.initAngularVelocity = void 0;
    this.shapes = void 0;
    this.shapeOffsets = void 0;
    this.shapeOrientations = void 0;
    this.inertia = void 0;
    this.invInertia = void 0;
    this.invInertiaWorld = void 0;
    this.invMassSolve = void 0;
    this.invInertiaSolve = void 0;
    this.invInertiaWorldSolve = void 0;
    this.fixedRotation = void 0;
    this.angularDamping = void 0;
    this.linearFactor = void 0;
    this.angularFactor = void 0;
    this.aabb = void 0;
    this.aabbNeedsUpdate = void 0;
    this.boundingRadius = void 0;
    this.wlambda = void 0;
    this.isTrigger = void 0;
    this.id = Body.idCounter++;
    this.index = -1;
    this.world = null;
    this.preStep = null;
    this.postStep = null;
    this.vlambda = new Vec3();
    this.collisionFilterGroup = typeof options.collisionFilterGroup === 'number' ? options.collisionFilterGroup : 1;
    this.collisionFilterMask = typeof options.collisionFilterMask === 'number' ? options.collisionFilterMask : -1;
    this.collisionResponse = typeof options.collisionResponse === 'boolean' ? options.collisionResponse : true;
    this.position = new Vec3();
    this.previousPosition = new Vec3();
    this.interpolatedPosition = new Vec3();
    this.initPosition = new Vec3();

    if (options.position) {
      this.position.copy(options.position);
      this.previousPosition.copy(options.position);
      this.interpolatedPosition.copy(options.position);
      this.initPosition.copy(options.position);
    }

    this.velocity = new Vec3();

    if (options.velocity) {
      this.velocity.copy(options.velocity);
    }

    this.initVelocity = new Vec3();
    this.force = new Vec3();
    const mass = typeof options.mass === 'number' ? options.mass : 0;
    this.mass = mass;
    this.invMass = mass > 0 ? 1.0 / mass : 0;
    this.material = options.material || null;
    this.linearDamping = typeof options.linearDamping === 'number' ? options.linearDamping : 0.01;
    this.type = mass <= 0.0 ? Body.STATIC : Body.DYNAMIC;

    if (typeof options.type === typeof Body.STATIC) {
      this.type = options.type;
    }

    this.allowSleep = typeof options.allowSleep !== 'undefined' ? options.allowSleep : true;
    this.sleepState = Body.AWAKE;
    this.sleepSpeedLimit = typeof options.sleepSpeedLimit !== 'undefined' ? options.sleepSpeedLimit : 0.1;
    this.sleepTimeLimit = typeof options.sleepTimeLimit !== 'undefined' ? options.sleepTimeLimit : 1;
    this.timeLastSleepy = 0;
    this.wakeUpAfterNarrowphase = false;
    this.torque = new Vec3();
    this.quaternion = new Quaternion();
    this.initQuaternion = new Quaternion();
    this.previousQuaternion = new Quaternion();
    this.interpolatedQuaternion = new Quaternion();

    if (options.quaternion) {
      this.quaternion.copy(options.quaternion);
      this.initQuaternion.copy(options.quaternion);
      this.previousQuaternion.copy(options.quaternion);
      this.interpolatedQuaternion.copy(options.quaternion);
    }

    this.angularVelocity = new Vec3();

    if (options.angularVelocity) {
      this.angularVelocity.copy(options.angularVelocity);
    }

    this.initAngularVelocity = new Vec3();
    this.shapes = [];
    this.shapeOffsets = [];
    this.shapeOrientations = [];
    this.inertia = new Vec3();
    this.invInertia = new Vec3();
    this.invInertiaWorld = new Mat3();
    this.invMassSolve = 0;
    this.invInertiaSolve = new Vec3();
    this.invInertiaWorldSolve = new Mat3();
    this.fixedRotation = typeof options.fixedRotation !== 'undefined' ? options.fixedRotation : false;
    this.angularDamping = typeof options.angularDamping !== 'undefined' ? options.angularDamping : 0.01;
    this.linearFactor = new Vec3(1, 1, 1);

    if (options.linearFactor) {
      this.linearFactor.copy(options.linearFactor);
    }

    this.angularFactor = new Vec3(1, 1, 1);

    if (options.angularFactor) {
      this.angularFactor.copy(options.angularFactor);
    }

    this.aabb = new AABB();
    this.aabbNeedsUpdate = true;
    this.boundingRadius = 0;
    this.wlambda = new Vec3();
    this.isTrigger = Boolean(options.isTrigger);

    if (options.shape) {
      this.addShape(options.shape);
    }

    this.updateMassProperties();
  }
  /**
   * Wake the body up.
   */


  wakeUp() {
    const prevState = this.sleepState;
    this.sleepState = Body.AWAKE;
    this.wakeUpAfterNarrowphase = false;

    if (prevState === Body.SLEEPING) {
      this.dispatchEvent(Body.wakeupEvent);
    }
  }
  /**
   * Force body sleep
   */


  sleep() {
    this.sleepState = Body.SLEEPING;
    this.velocity.set(0, 0, 0);
    this.angularVelocity.set(0, 0, 0);
    this.wakeUpAfterNarrowphase = false;
  }
  /**
   * Called every timestep to update internal sleep timer and change sleep state if needed.
   * @param time The world time in seconds
   */


  sleepTick(time) {
    if (this.allowSleep) {
      const sleepState = this.sleepState;
      const speedSquared = this.velocity.lengthSquared() + this.angularVelocity.lengthSquared();
      const speedLimitSquared = this.sleepSpeedLimit ** 2;

      if (sleepState === Body.AWAKE && speedSquared < speedLimitSquared) {
        this.sleepState = Body.SLEEPY; // Sleepy

        this.timeLastSleepy = time;
        this.dispatchEvent(Body.sleepyEvent);
      } else if (sleepState === Body.SLEEPY && speedSquared > speedLimitSquared) {
        this.wakeUp(); // Wake up
      } else if (sleepState === Body.SLEEPY && time - this.timeLastSleepy > this.sleepTimeLimit) {
        this.sleep(); // Sleeping

        this.dispatchEvent(Body.sleepEvent);
      }
    }
  }
  /**
   * If the body is sleeping, it should be immovable / have infinite mass during solve. We solve it by having a separate "solve mass".
   */


  updateSolveMassProperties() {
    if (this.sleepState === Body.SLEEPING || this.type === Body.KINEMATIC) {
      this.invMassSolve = 0;
      this.invInertiaSolve.setZero();
      this.invInertiaWorldSolve.setZero();
    } else {
      this.invMassSolve = this.invMass;
      this.invInertiaSolve.copy(this.invInertia);
      this.invInertiaWorldSolve.copy(this.invInertiaWorld);
    }
  }
  /**
   * Convert a world point to local body frame.
   */


  pointToLocalFrame(worldPoint, result = new Vec3()) {
    worldPoint.vsub(this.position, result);
    this.quaternion.conjugate().vmult(result, result);
    return result;
  }
  /**
   * Convert a world vector to local body frame.
   */


  vectorToLocalFrame(worldVector, result = new Vec3()) {
    this.quaternion.conjugate().vmult(worldVector, result);
    return result;
  }
  /**
   * Convert a local body point to world frame.
   */


  pointToWorldFrame(localPoint, result = new Vec3()) {
    this.quaternion.vmult(localPoint, result);
    result.vadd(this.position, result);
    return result;
  }
  /**
   * Convert a local body point to world frame.
   */


  vectorToWorldFrame(localVector, result = new Vec3()) {
    this.quaternion.vmult(localVector, result);
    return result;
  }
  /**
   * Add a shape to the body with a local offset and orientation.
   * @return The body object, for chainability.
   */


  addShape(shape, _offset, _orientation) {
    const offset = new Vec3();
    const orientation = new Quaternion();

    if (_offset) {
      offset.copy(_offset);
    }

    if (_orientation) {
      orientation.copy(_orientation);
    }

    this.shapes.push(shape);
    this.shapeOffsets.push(offset);
    this.shapeOrientations.push(orientation);
    this.updateMassProperties();
    this.updateBoundingRadius();
    this.aabbNeedsUpdate = true;
    shape.body = this;
    return this;
  }
  /**
   * Remove a shape from the body.
   * @return The body object, for chainability.
   */


  removeShape(shape) {
    const index = this.shapes.indexOf(shape);

    if (index === -1) {
      console.warn('Shape does not belong to the body');
      return this;
    }

    this.shapes.splice(index, 1);
    this.shapeOffsets.splice(index, 1);
    this.shapeOrientations.splice(index, 1);
    this.updateMassProperties();
    this.updateBoundingRadius();
    this.aabbNeedsUpdate = true;
    shape.body = null;
    return this;
  }
  /**
   * Update the bounding radius of the body. Should be done if any of the shapes are changed.
   */


  updateBoundingRadius() {
    const shapes = this.shapes;
    const shapeOffsets = this.shapeOffsets;
    const N = shapes.length;
    let radius = 0;

    for (let i = 0; i !== N; i++) {
      const shape = shapes[i];
      shape.updateBoundingSphereRadius();
      const offset = shapeOffsets[i].length();
      const r = shape.boundingSphereRadius;

      if (offset + r > radius) {
        radius = offset + r;
      }
    }

    this.boundingRadius = radius;
  }
  /**
   * Updates the .aabb
   */


  updateAABB() {
    const shapes = this.shapes;
    const shapeOffsets = this.shapeOffsets;
    const shapeOrientations = this.shapeOrientations;
    const N = shapes.length;
    const offset = tmpVec;
    const orientation = tmpQuat;
    const bodyQuat = this.quaternion;
    const aabb = this.aabb;
    const shapeAABB = updateAABB_shapeAABB;

    for (let i = 0; i !== N; i++) {
      const shape = shapes[i]; // Get shape world position

      bodyQuat.vmult(shapeOffsets[i], offset);
      offset.vadd(this.position, offset); // Get shape world quaternion

      bodyQuat.mult(shapeOrientations[i], orientation); // Get shape AABB

      shape.calculateWorldAABB(offset, orientation, shapeAABB.lowerBound, shapeAABB.upperBound);

      if (i === 0) {
        aabb.copy(shapeAABB);
      } else {
        aabb.extend(shapeAABB);
      }
    }

    this.aabbNeedsUpdate = false;
  }
  /**
   * Update `.inertiaWorld` and `.invInertiaWorld`
   */


  updateInertiaWorld(force) {
    const I = this.invInertia;
    if (I.x === I.y && I.y === I.z && !force) ;else {
      const m1 = uiw_m1;
      const m2 = uiw_m2;
      m1.setRotationFromQuaternion(this.quaternion);
      m1.transpose(m2);
      m1.scale(I, m1);
      m1.mmult(m2, this.invInertiaWorld);
    }
  }
  /**
   * Apply force to a point of the body. This could for example be a point on the Body surface.
   * Applying force this way will add to Body.force and Body.torque.
   * @param force The amount of force to add.
   * @param relativePoint A point relative to the center of mass to apply the force on.
   */


  applyForce(force, relativePoint = new Vec3()) {
    // Needed?
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    if (this.sleepState === Body.SLEEPING) {
      this.wakeUp();
    } // Compute produced rotational force


    const rotForce = Body_applyForce_rotForce;
    relativePoint.cross(force, rotForce); // Add linear force

    this.force.vadd(force, this.force); // Add rotational force

    this.torque.vadd(rotForce, this.torque);
  }
  /**
   * Apply force to a local point in the body.
   * @param force The force vector to apply, defined locally in the body frame.
   * @param localPoint A local point in the body to apply the force on.
   */


  applyLocalForce(localForce, localPoint = new Vec3()) {
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    const worldForce = Body_applyLocalForce_worldForce;
    const relativePointWorld = Body_applyLocalForce_relativePointWorld; // Transform the force vector to world space

    this.vectorToWorldFrame(localForce, worldForce);
    this.vectorToWorldFrame(localPoint, relativePointWorld);
    this.applyForce(worldForce, relativePointWorld);
  }
  /**
   * Apply torque to the body.
   * @param torque The amount of torque to add.
   */


  applyTorque(torque) {
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    if (this.sleepState === Body.SLEEPING) {
      this.wakeUp();
    } // Add rotational force


    this.torque.vadd(torque, this.torque);
  }
  /**
   * Apply impulse to a point of the body. This could for example be a point on the Body surface.
   * An impulse is a force added to a body during a short period of time (impulse = force * time).
   * Impulses will be added to Body.velocity and Body.angularVelocity.
   * @param impulse The amount of impulse to add.
   * @param relativePoint A point relative to the center of mass to apply the force on.
   */


  applyImpulse(impulse, relativePoint = new Vec3()) {
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    if (this.sleepState === Body.SLEEPING) {
      this.wakeUp();
    } // Compute point position relative to the body center


    const r = relativePoint; // Compute produced central impulse velocity

    const velo = Body_applyImpulse_velo;
    velo.copy(impulse);
    velo.scale(this.invMass, velo); // Add linear impulse

    this.velocity.vadd(velo, this.velocity); // Compute produced rotational impulse velocity

    const rotVelo = Body_applyImpulse_rotVelo;
    r.cross(impulse, rotVelo);
    /*
     rotVelo.x *= this.invInertia.x;
     rotVelo.y *= this.invInertia.y;
     rotVelo.z *= this.invInertia.z;
     */

    this.invInertiaWorld.vmult(rotVelo, rotVelo); // Add rotational Impulse

    this.angularVelocity.vadd(rotVelo, this.angularVelocity);
  }
  /**
   * Apply locally-defined impulse to a local point in the body.
   * @param force The force vector to apply, defined locally in the body frame.
   * @param localPoint A local point in the body to apply the force on.
   */


  applyLocalImpulse(localImpulse, localPoint = new Vec3()) {
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    const worldImpulse = Body_applyLocalImpulse_worldImpulse;
    const relativePointWorld = Body_applyLocalImpulse_relativePoint; // Transform the force vector to world space

    this.vectorToWorldFrame(localImpulse, worldImpulse);
    this.vectorToWorldFrame(localPoint, relativePointWorld);
    this.applyImpulse(worldImpulse, relativePointWorld);
  }
  /**
   * Should be called whenever you change the body shape or mass.
   */


  updateMassProperties() {
    const halfExtents = Body_updateMassProperties_halfExtents;
    this.invMass = this.mass > 0 ? 1.0 / this.mass : 0;
    const I = this.inertia;
    const fixed = this.fixedRotation; // Approximate with AABB box

    this.updateAABB();
    halfExtents.set((this.aabb.upperBound.x - this.aabb.lowerBound.x) / 2, (this.aabb.upperBound.y - this.aabb.lowerBound.y) / 2, (this.aabb.upperBound.z - this.aabb.lowerBound.z) / 2);
    Box.calculateInertia(halfExtents, this.mass, I);
    this.invInertia.set(I.x > 0 && !fixed ? 1.0 / I.x : 0, I.y > 0 && !fixed ? 1.0 / I.y : 0, I.z > 0 && !fixed ? 1.0 / I.z : 0);
    this.updateInertiaWorld(true);
  }
  /**
   * Get world velocity of a point in the body.
   * @param worldPoint
   * @param result
   * @return The result vector.
   */


  getVelocityAtWorldPoint(worldPoint, result) {
    const r = new Vec3();
    worldPoint.vsub(this.position, r);
    this.angularVelocity.cross(r, result);
    this.velocity.vadd(result, result);
    return result;
  }
  /**
   * Move the body forward in time.
   * @param dt Time step
   * @param quatNormalize Set to true to normalize the body quaternion
   * @param quatNormalizeFast If the quaternion should be normalized using "fast" quaternion normalization
   */


  integrate(dt, quatNormalize, quatNormalizeFast) {
    // Save previous position
    this.previousPosition.copy(this.position);
    this.previousQuaternion.copy(this.quaternion);

    if (!(this.type === Body.DYNAMIC || this.type === Body.KINEMATIC) || this.sleepState === Body.SLEEPING) {
      // Only for dynamic
      return;
    }

    const velo = this.velocity;
    const angularVelo = this.angularVelocity;
    const pos = this.position;
    const force = this.force;
    const torque = this.torque;
    const quat = this.quaternion;
    const invMass = this.invMass;
    const invInertia = this.invInertiaWorld;
    const linearFactor = this.linearFactor;
    const iMdt = invMass * dt;
    velo.x += force.x * iMdt * linearFactor.x;
    velo.y += force.y * iMdt * linearFactor.y;
    velo.z += force.z * iMdt * linearFactor.z;
    const e = invInertia.elements;
    const angularFactor = this.angularFactor;
    const tx = torque.x * angularFactor.x;
    const ty = torque.y * angularFactor.y;
    const tz = torque.z * angularFactor.z;
    angularVelo.x += dt * (e[0] * tx + e[1] * ty + e[2] * tz);
    angularVelo.y += dt * (e[3] * tx + e[4] * ty + e[5] * tz);
    angularVelo.z += dt * (e[6] * tx + e[7] * ty + e[8] * tz); // Use new velocity  - leap frog

    pos.x += velo.x * dt;
    pos.y += velo.y * dt;
    pos.z += velo.z * dt;
    quat.integrate(this.angularVelocity, dt, this.angularFactor, quat);

    if (quatNormalize) {
      if (quatNormalizeFast) {
        quat.normalizeFast();
      } else {
        quat.normalize();
      }
    }

    this.aabbNeedsUpdate = true; // Update world inertia

    this.updateInertiaWorld();
  }

}

Body.idCounter = 0;
Body.COLLIDE_EVENT_NAME = 'collide';
Body.DYNAMIC = BODY_TYPES.DYNAMIC;
Body.STATIC = BODY_TYPES.STATIC;
Body.KINEMATIC = BODY_TYPES.KINEMATIC;
Body.AWAKE = BODY_SLEEP_STATES.AWAKE;
Body.SLEEPY = BODY_SLEEP_STATES.SLEEPY;
Body.SLEEPING = BODY_SLEEP_STATES.SLEEPING;
Body.wakeupEvent = {
  type: 'wakeup'
};
Body.sleepyEvent = {
  type: 'sleepy'
};
Body.sleepEvent = {
  type: 'sleep'
};
const tmpVec = new Vec3();
const tmpQuat = new Quaternion();
const updateAABB_shapeAABB = new AABB();
const uiw_m1 = new Mat3();
const uiw_m2 = new Mat3();
const Body_applyForce_rotForce = new Vec3();
const Body_applyLocalForce_worldForce = new Vec3();
const Body_applyLocalForce_relativePointWorld = new Vec3();
const Body_applyImpulse_velo = new Vec3();
const Body_applyImpulse_rotVelo = new Vec3();
const Body_applyLocalImpulse_worldImpulse = new Vec3();
const Body_applyLocalImpulse_relativePoint = new Vec3();
const Body_updateMassProperties_halfExtents = new Vec3();


new Vec3();

new Vec3();
/**
 * Storage for Ray casting data
 */


class RaycastResult {
  /**
   * rayFromWorld
   */

  /**
   * rayToWorld
   */

  /**
   * hitNormalWorld
   */

  /**
   * hitPointWorld
   */

  /**
   * hasHit
   */

  /**
   * shape
   */

  /**
   * body
   */

  /**
   * The index of the hit triangle, if the hit shape was a trimesh
   */

  /**
   * Distance to the hit. Will be set to -1 if there was no hit
   */

  /**
   * If the ray should stop traversing the bodies
   */
  constructor() {
    this.rayFromWorld = void 0;
    this.rayToWorld = void 0;
    this.hitNormalWorld = void 0;
    this.hitPointWorld = void 0;
    this.hasHit = void 0;
    this.shape = void 0;
    this.body = void 0;
    this.hitFaceIndex = void 0;
    this.distance = void 0;
    this.shouldStop = void 0;
    this.rayFromWorld = new Vec3();
    this.rayToWorld = new Vec3();
    this.hitNormalWorld = new Vec3();
    this.hitPointWorld = new Vec3();
    this.hasHit = false;
    this.shape = null;
    this.body = null;
    this.hitFaceIndex = -1;
    this.distance = -1;
    this.shouldStop = false;
  }
  /**
   * Reset all result data.
   */


  reset() {
    this.rayFromWorld.setZero();
    this.rayToWorld.setZero();
    this.hitNormalWorld.setZero();
    this.hitPointWorld.setZero();
    this.hasHit = false;
    this.shape = null;
    this.body = null;
    this.hitFaceIndex = -1;
    this.distance = -1;
    this.shouldStop = false;
  }
  /**
   * abort
   */


  abort() {
    this.shouldStop = true;
  }
  /**
   * Set result data.
   */


  set(rayFromWorld, rayToWorld, hitNormalWorld, hitPointWorld, shape, body, distance) {
    this.rayFromWorld.copy(rayFromWorld);
    this.rayToWorld.copy(rayToWorld);
    this.hitNormalWorld.copy(hitNormalWorld);
    this.hitPointWorld.copy(hitPointWorld);
    this.shape = shape;
    this.body = body;
    this.distance = distance;
  }

}

let _Shape$types$SPHERE, _Shape$types$PLANE, _Shape$types$BOX, _Shape$types$CYLINDER, _Shape$types$CONVEXPO, _Shape$types$HEIGHTFI, _Shape$types$TRIMESH;
/**
 * RAY_MODES
 */


const RAY_MODES = {
  /** CLOSEST */
  CLOSEST: 1,

  /** ANY */
  ANY: 2,

  /** ALL */
  ALL: 4
};
/**
 * RayMode
 */

_Shape$types$SPHERE = Shape.types.SPHERE;
_Shape$types$PLANE = Shape.types.PLANE;
_Shape$types$BOX = Shape.types.BOX;
_Shape$types$CYLINDER = Shape.types.CYLINDER;
_Shape$types$CONVEXPO = Shape.types.CONVEXPOLYHEDRON;
_Shape$types$HEIGHTFI = Shape.types.HEIGHTFIELD;
_Shape$types$TRIMESH = Shape.types.TRIMESH;
/**
 * A line in 3D space that intersects bodies and return points.
 */

class Ray {
  /**
   * from
   */

  /**
   * to
   */

  /**
   * direction
   */

  /**
   * The precision of the ray. Used when checking parallelity etc.
   * @default 0.0001
   */

  /**
   * Set to `false` if you don't want the Ray to take `collisionResponse` flags into account on bodies and shapes.
   * @default true
   */

  /**
   * If set to `true`, the ray skips any hits with normal.dot(rayDirection) < 0.
   * @default false
   */

  /**
   * collisionFilterMask
   * @default -1
   */

  /**
   * collisionFilterGroup
   * @default -1
   */

  /**
   * The intersection mode. Should be Ray.ANY, Ray.ALL or Ray.CLOSEST.
   * @default RAY.ANY
   */

  /**
   * Current result object.
   */

  /**
   * Will be set to `true` during intersectWorld() if the ray hit anything.
   */

  /**
   * User-provided result callback. Will be used if mode is Ray.ALL.
   */

  /**
   * CLOSEST
   */

  /**
   * ANY
   */

  /**
   * ALL
   */
  get [_Shape$types$SPHERE]() {
    return this._intersectSphere;
  }

  get [_Shape$types$PLANE]() {
    return this._intersectPlane;
  }

  get [_Shape$types$BOX]() {
    return this._intersectBox;
  }

  get [_Shape$types$CYLINDER]() {
    return this._intersectConvex;
  }

  get [_Shape$types$CONVEXPO]() {
    return this._intersectConvex;
  }

  get [_Shape$types$HEIGHTFI]() {
    return this._intersectHeightfield;
  }

  get [_Shape$types$TRIMESH]() {
    return this._intersectTrimesh;
  }

  constructor(from = new Vec3(), to = new Vec3()) {
    this.from = void 0;
    this.to = void 0;
    this.direction = void 0;
    this.precision = void 0;
    this.checkCollisionResponse = void 0;
    this.skipBackfaces = void 0;
    this.collisionFilterMask = void 0;
    this.collisionFilterGroup = void 0;
    this.mode = void 0;
    this.result = void 0;
    this.hasHit = void 0;
    this.callback = void 0;
    this.from = from.clone();
    this.to = to.clone();
    this.direction = new Vec3();
    this.precision = 0.0001;
    this.checkCollisionResponse = true;
    this.skipBackfaces = false;
    this.collisionFilterMask = -1;
    this.collisionFilterGroup = -1;
    this.mode = Ray.ANY;
    this.result = new RaycastResult();
    this.hasHit = false;

    this.callback = result => {};
  }
  /**
   * Do itersection against all bodies in the given World.
   * @return True if the ray hit anything, otherwise false.
   */


  intersectWorld(world, options) {
    this.mode = options.mode || Ray.ANY;
    this.result = options.result || new RaycastResult();
    this.skipBackfaces = !!options.skipBackfaces;
    this.collisionFilterMask = typeof options.collisionFilterMask !== 'undefined' ? options.collisionFilterMask : -1;
    this.collisionFilterGroup = typeof options.collisionFilterGroup !== 'undefined' ? options.collisionFilterGroup : -1;
    this.checkCollisionResponse = typeof options.checkCollisionResponse !== 'undefined' ? options.checkCollisionResponse : true;

    if (options.from) {
      this.from.copy(options.from);
    }

    if (options.to) {
      this.to.copy(options.to);
    }

    this.callback = options.callback || (() => {});

    this.hasHit = false;
    this.result.reset();
    this.updateDirection();
    this.getAABB(tmpAABB$1);
    tmpArray.length = 0;
    world.broadphase.aabbQuery(world, tmpAABB$1, tmpArray);
    this.intersectBodies(tmpArray);
    return this.hasHit;
  }
  /**
   * Shoot a ray at a body, get back information about the hit.
   * @deprecated @param result set the result property of the Ray instead.
   */


  intersectBody(body, result) {
    if (result) {
      this.result = result;
      this.updateDirection();
    }

    const checkCollisionResponse = this.checkCollisionResponse;

    if (checkCollisionResponse && !body.collisionResponse) {
      return;
    }

    if ((this.collisionFilterGroup & body.collisionFilterMask) === 0 || (body.collisionFilterGroup & this.collisionFilterMask) === 0) {
      return;
    }

    const xi = intersectBody_xi;
    const qi = intersectBody_qi;

    for (let i = 0, N = body.shapes.length; i < N; i++) {
      const shape = body.shapes[i];

      if (checkCollisionResponse && !shape.collisionResponse) {
        continue; // Skip
      }

      body.quaternion.mult(body.shapeOrientations[i], qi);
      body.quaternion.vmult(body.shapeOffsets[i], xi);
      xi.vadd(body.position, xi);
      this.intersectShape(shape, qi, xi, body);

      if (this.result.shouldStop) {
        break;
      }
    }
  }
  /**
   * Shoot a ray at an array bodies, get back information about the hit.
   * @param bodies An array of Body objects.
   * @deprecated @param result set the result property of the Ray instead.
   *
   */


  intersectBodies(bodies, result) {
    if (result) {
      this.result = result;
      this.updateDirection();
    }

    for (let i = 0, l = bodies.length; !this.result.shouldStop && i < l; i++) {
      this.intersectBody(bodies[i]);
    }
  }
  /**
   * Updates the direction vector.
   */


  updateDirection() {
    this.to.vsub(this.from, this.direction);
    this.direction.normalize();
  }

  intersectShape(shape, quat, position, body) {
    const from = this.from; // Checking boundingSphere

    const distance = distanceFromIntersection(from, this.direction, position);

    if (distance > shape.boundingSphereRadius) {
      return;
    }

    const intersectMethod = this[shape.type];

    if (intersectMethod) {
      intersectMethod.call(this, shape, quat, position, body, shape);
    }
  }

  _intersectBox(box, quat, position, body, reportedShape) {
    return this._intersectConvex(box.convexPolyhedronRepresentation, quat, position, body, reportedShape);
  }

  _intersectPlane(shape, quat, position, body, reportedShape) {
    const from = this.from;
    const to = this.to;
    const direction = this.direction; // Get plane normal

    const worldNormal = new Vec3(0, 0, 1);
    quat.vmult(worldNormal, worldNormal);
    const len = new Vec3();
    from.vsub(position, len);
    const planeToFrom = len.dot(worldNormal);
    to.vsub(position, len);
    const planeToTo = len.dot(worldNormal);

    if (planeToFrom * planeToTo > 0) {
      // "from" and "to" are on the same side of the plane... bail out
      return;
    }

    if (from.distanceTo(to) < planeToFrom) {
      return;
    }

    const n_dot_dir = worldNormal.dot(direction);

    if (Math.abs(n_dot_dir) < this.precision) {
      // No intersection
      return;
    }

    const planePointToFrom = new Vec3();
    const dir_scaled_with_t = new Vec3();
    const hitPointWorld = new Vec3();
    from.vsub(position, planePointToFrom);
    const t = -worldNormal.dot(planePointToFrom) / n_dot_dir;
    direction.scale(t, dir_scaled_with_t);
    from.vadd(dir_scaled_with_t, hitPointWorld);
    this.reportIntersection(worldNormal, hitPointWorld, reportedShape, body, -1);
  }
  /**
   * Get the world AABB of the ray.
   */


  getAABB(aabb) {
    const {
      lowerBound,
      upperBound
    } = aabb;
    const to = this.to;
    const from = this.from;
    lowerBound.x = Math.min(to.x, from.x);
    lowerBound.y = Math.min(to.y, from.y);
    lowerBound.z = Math.min(to.z, from.z);
    upperBound.x = Math.max(to.x, from.x);
    upperBound.y = Math.max(to.y, from.y);
    upperBound.z = Math.max(to.z, from.z);
  }

  _intersectHeightfield(shape, quat, position, body, reportedShape) {
    shape.data;
    shape.elementSize; // Convert the ray to local heightfield coordinates

    const localRay = intersectHeightfield_localRay; //new Ray(this.from, this.to);

    localRay.from.copy(this.from);
    localRay.to.copy(this.to);
    Transform.pointToLocalFrame(position, quat, localRay.from, localRay.from);
    Transform.pointToLocalFrame(position, quat, localRay.to, localRay.to);
    localRay.updateDirection(); // Get the index of the data points to test against

    const index = intersectHeightfield_index;
    let iMinX;
    let iMinY;
    let iMaxX;
    let iMaxY; // Set to max

    iMinX = iMinY = 0;
    iMaxX = iMaxY = shape.data.length - 1;
    const aabb = new AABB();
    localRay.getAABB(aabb);
    shape.getIndexOfPosition(aabb.lowerBound.x, aabb.lowerBound.y, index, true);
    iMinX = Math.max(iMinX, index[0]);
    iMinY = Math.max(iMinY, index[1]);
    shape.getIndexOfPosition(aabb.upperBound.x, aabb.upperBound.y, index, true);
    iMaxX = Math.min(iMaxX, index[0] + 1);
    iMaxY = Math.min(iMaxY, index[1] + 1);

    for (let i = iMinX; i < iMaxX; i++) {
      for (let j = iMinY; j < iMaxY; j++) {
        if (this.result.shouldStop) {
          return;
        }

        shape.getAabbAtIndex(i, j, aabb);

        if (!aabb.overlapsRay(localRay)) {
          continue;
        } // Lower triangle


        shape.getConvexTrianglePillar(i, j, false);
        Transform.pointToWorldFrame(position, quat, shape.pillarOffset, worldPillarOffset);

        this._intersectConvex(shape.pillarConvex, quat, worldPillarOffset, body, reportedShape, intersectConvexOptions);

        if (this.result.shouldStop) {
          return;
        } // Upper triangle


        shape.getConvexTrianglePillar(i, j, true);
        Transform.pointToWorldFrame(position, quat, shape.pillarOffset, worldPillarOffset);

        this._intersectConvex(shape.pillarConvex, quat, worldPillarOffset, body, reportedShape, intersectConvexOptions);
      }
    }
  }

  _intersectSphere(sphere, quat, position, body, reportedShape) {
    const from = this.from;
    const to = this.to;
    const r = sphere.radius;
    const a = (to.x - from.x) ** 2 + (to.y - from.y) ** 2 + (to.z - from.z) ** 2;
    const b = 2 * ((to.x - from.x) * (from.x - position.x) + (to.y - from.y) * (from.y - position.y) + (to.z - from.z) * (from.z - position.z));
    const c = (from.x - position.x) ** 2 + (from.y - position.y) ** 2 + (from.z - position.z) ** 2 - r ** 2;
    const delta = b ** 2 - 4 * a * c;
    const intersectionPoint = Ray_intersectSphere_intersectionPoint;
    const normal = Ray_intersectSphere_normal;

    if (delta < 0) {
      // No intersection
      return;
    } else if (delta === 0) {
      // single intersection point
      from.lerp(to, delta, intersectionPoint);
      intersectionPoint.vsub(position, normal);
      normal.normalize();
      this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);
    } else {
      const d1 = (-b - Math.sqrt(delta)) / (2 * a);
      const d2 = (-b + Math.sqrt(delta)) / (2 * a);

      if (d1 >= 0 && d1 <= 1) {
        from.lerp(to, d1, intersectionPoint);
        intersectionPoint.vsub(position, normal);
        normal.normalize();
        this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);
      }

      if (this.result.shouldStop) {
        return;
      }

      if (d2 >= 0 && d2 <= 1) {
        from.lerp(to, d2, intersectionPoint);
        intersectionPoint.vsub(position, normal);
        normal.normalize();
        this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);
      }
    }
  }

  _intersectConvex(shape, quat, position, body, reportedShape, options) {
    const normal = intersectConvex_normal;
    const vector = intersectConvex_vector;
    const faceList = options && options.faceList || null; // Checking faces

    const faces = shape.faces;
    const vertices = shape.vertices;
    const normals = shape.faceNormals;
    const direction = this.direction;
    const from = this.from;
    const to = this.to;
    const fromToDistance = from.distanceTo(to);
    const Nfaces = faceList ? faceList.length : faces.length;
    const result = this.result;

    for (let j = 0; !result.shouldStop && j < Nfaces; j++) {
      const fi = faceList ? faceList[j] : j;
      const face = faces[fi];
      const faceNormal = normals[fi];
      const q = quat;
      const x = position; // determine if ray intersects the plane of the face
      // note: this works regardless of the direction of the face normal
      // Get plane point in world coordinates...

      vector.copy(vertices[face[0]]);
      q.vmult(vector, vector);
      vector.vadd(x, vector); // ...but make it relative to the ray from. We'll fix this later.

      vector.vsub(from, vector); // Get plane normal

      q.vmult(faceNormal, normal); // If this dot product is negative, we have something interesting

      const dot = direction.dot(normal); // Bail out if ray and plane are parallel

      if (Math.abs(dot) < this.precision) {
        continue;
      } // calc distance to plane


      const scalar = normal.dot(vector) / dot; // if negative distance, then plane is behind ray

      if (scalar < 0) {
        continue;
      } // if (dot < 0) {
      // Intersection point is from + direction * scalar


      direction.scale(scalar, intersectPoint);
      intersectPoint.vadd(from, intersectPoint); // a is the point we compare points b and c with.

      a.copy(vertices[face[0]]);
      q.vmult(a, a);
      x.vadd(a, a);

      for (let i = 1; !result.shouldStop && i < face.length - 1; i++) {
        // Transform 3 vertices to world coords
        b.copy(vertices[face[i]]);
        c.copy(vertices[face[i + 1]]);
        q.vmult(b, b);
        q.vmult(c, c);
        x.vadd(b, b);
        x.vadd(c, c);
        const distance = intersectPoint.distanceTo(from);

        if (!(Ray.pointInTriangle(intersectPoint, a, b, c) || Ray.pointInTriangle(intersectPoint, b, a, c)) || distance > fromToDistance) {
          continue;
        }

        this.reportIntersection(normal, intersectPoint, reportedShape, body, fi);
      } // }

    }
  }
  /**
   * @todo Optimize by transforming the world to local space first.
   * @todo Use Octree lookup
   */


  _intersectTrimesh(mesh, quat, position, body, reportedShape, options) {
    const normal = intersectTrimesh_normal;
    const triangles = intersectTrimesh_triangles;
    const treeTransform = intersectTrimesh_treeTransform;
    const vector = intersectConvex_vector;
    const localDirection = intersectTrimesh_localDirection;
    const localFrom = intersectTrimesh_localFrom;
    const localTo = intersectTrimesh_localTo;
    const worldIntersectPoint = intersectTrimesh_worldIntersectPoint;
    const worldNormal = intersectTrimesh_worldNormal; // Checking faces

    const indices = mesh.indices;
    mesh.vertices; // const normals = mesh.faceNormals

    const from = this.from;
    const to = this.to;
    const direction = this.direction;
    treeTransform.position.copy(position);
    treeTransform.quaternion.copy(quat); // Transform ray to local space!

    Transform.vectorToLocalFrame(position, quat, direction, localDirection);
    Transform.pointToLocalFrame(position, quat, from, localFrom);
    Transform.pointToLocalFrame(position, quat, to, localTo);
    localTo.x *= mesh.scale.x;
    localTo.y *= mesh.scale.y;
    localTo.z *= mesh.scale.z;
    localFrom.x *= mesh.scale.x;
    localFrom.y *= mesh.scale.y;
    localFrom.z *= mesh.scale.z;
    localTo.vsub(localFrom, localDirection);
    localDirection.normalize();
    const fromToDistanceSquared = localFrom.distanceSquared(localTo);
    mesh.tree.rayQuery(this, treeTransform, triangles);

    for (let i = 0, N = triangles.length; !this.result.shouldStop && i !== N; i++) {
      const trianglesIndex = triangles[i];
      mesh.getNormal(trianglesIndex, normal); // determine if ray intersects the plane of the face
      // note: this works regardless of the direction of the face normal
      // Get plane point in world coordinates...

      mesh.getVertex(indices[trianglesIndex * 3], a); // ...but make it relative to the ray from. We'll fix this later.

      a.vsub(localFrom, vector); // If this dot product is negative, we have something interesting

      const dot = localDirection.dot(normal); // Bail out if ray and plane are parallel
      // if (Math.abs( dot ) < this.precision){
      //     continue;
      // }
      // calc distance to plane

      const scalar = normal.dot(vector) / dot; // if negative distance, then plane is behind ray

      if (scalar < 0) {
        continue;
      } // Intersection point is from + direction * scalar


      localDirection.scale(scalar, intersectPoint);
      intersectPoint.vadd(localFrom, intersectPoint); // Get triangle vertices

      mesh.getVertex(indices[trianglesIndex * 3 + 1], b);
      mesh.getVertex(indices[trianglesIndex * 3 + 2], c);
      const squaredDistance = intersectPoint.distanceSquared(localFrom);

      if (!(Ray.pointInTriangle(intersectPoint, b, a, c) || Ray.pointInTriangle(intersectPoint, a, b, c)) || squaredDistance > fromToDistanceSquared) {
        continue;
      } // transform intersectpoint and normal to world


      Transform.vectorToWorldFrame(quat, normal, worldNormal);
      Transform.pointToWorldFrame(position, quat, intersectPoint, worldIntersectPoint);
      this.reportIntersection(worldNormal, worldIntersectPoint, reportedShape, body, trianglesIndex);
    }

    triangles.length = 0;
  }
  /**
   * @return True if the intersections should continue
   */


  reportIntersection(normal, hitPointWorld, shape, body, hitFaceIndex) {
    const from = this.from;
    const to = this.to;
    const distance = from.distanceTo(hitPointWorld);
    const result = this.result; // Skip back faces?

    if (this.skipBackfaces && normal.dot(this.direction) > 0) {
      return;
    }

    result.hitFaceIndex = typeof hitFaceIndex !== 'undefined' ? hitFaceIndex : -1;

    switch (this.mode) {
      case Ray.ALL:
        this.hasHit = true;
        result.set(from, to, normal, hitPointWorld, shape, body, distance);
        result.hasHit = true;
        this.callback(result);
        break;

      case Ray.CLOSEST:
        // Store if closer than current closest
        if (distance < result.distance || !result.hasHit) {
          this.hasHit = true;
          result.hasHit = true;
          result.set(from, to, normal, hitPointWorld, shape, body, distance);
        }

        break;

      case Ray.ANY:
        // Report and stop.
        this.hasHit = true;
        result.hasHit = true;
        result.set(from, to, normal, hitPointWorld, shape, body, distance);
        result.shouldStop = true;
        break;
    }
  }
  /**
   * As per "Barycentric Technique" as named
   * {@link https://www.blackpawn.com/texts/pointinpoly/default.html here} but without the division
   */


  static pointInTriangle(p, a, b, c) {
    c.vsub(a, v0);
    b.vsub(a, v1);
    p.vsub(a, v2);
    const dot00 = v0.dot(v0);
    const dot01 = v0.dot(v1);
    const dot02 = v0.dot(v2);
    const dot11 = v1.dot(v1);
    const dot12 = v1.dot(v2);
    let u;
    let v;
    return (u = dot11 * dot02 - dot01 * dot12) >= 0 && (v = dot00 * dot12 - dot01 * dot02) >= 0 && u + v < dot00 * dot11 - dot01 * dot01;
  }

}

Ray.CLOSEST = RAY_MODES.CLOSEST;
Ray.ANY = RAY_MODES.ANY;
Ray.ALL = RAY_MODES.ALL;
const tmpAABB$1 = new AABB();
const tmpArray = [];
const v1 = new Vec3();
const v2 = new Vec3();
const intersectBody_xi = new Vec3();
const intersectBody_qi = new Quaternion();
const intersectPoint = new Vec3();
const a = new Vec3();
const b = new Vec3();
const c = new Vec3();
const intersectConvexOptions = {
  faceList: [0]
};
const worldPillarOffset = new Vec3();
const intersectHeightfield_localRay = new Ray();
const intersectHeightfield_index = [];
const Ray_intersectSphere_intersectionPoint = new Vec3();
const Ray_intersectSphere_normal = new Vec3();
const intersectConvex_normal = new Vec3();
const intersectConvex_vector = new Vec3();
const intersectTrimesh_normal = new Vec3();
const intersectTrimesh_localDirection = new Vec3();
const intersectTrimesh_localFrom = new Vec3();
const intersectTrimesh_localTo = new Vec3();
const intersectTrimesh_worldNormal = new Vec3();
const intersectTrimesh_worldIntersectPoint = new Vec3();
new AABB();
const intersectTrimesh_triangles = [];
const intersectTrimesh_treeTransform = new Transform();
const v0 = new Vec3();
const intersect = new Vec3();

function distanceFromIntersection(from, direction, position) {
  // v0 is vector from from to position
  position.vsub(from, v0);
  const dot = v0.dot(direction); // intersect = direction*dot + from

  direction.scale(dot, intersect);
  intersect.vadd(from, intersect);
  const distance = position.distanceTo(intersect);
  return distance;
}

class Utils {
  /**
   * Extend an options object with default values.
   * @param options The options object. May be falsy: in this case, a new object is created and returned.
   * @param defaults An object containing default values.
   * @return The modified options object.
   */
  static defaults(options = {}, defaults) {
    for (let key in defaults) {
      if (!(key in options)) {
        options[key] = defaults[key];
      }
    }

    return options;
  }

}
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3(); // Temp vectors

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();
/**
 * Defines a physics material.
 */

class Material {
  /**
   * Material name.
   * If options is a string, name will be set to that string.
   * @todo Deprecate this
   */

  /** Material id. */

  /**
   * Friction for this material.
   * If non-negative, it will be used instead of the friction given by ContactMaterials. If there's no matching ContactMaterial, the value from `defaultContactMaterial` in the World will be used.
   */

  /**
   * Restitution for this material.
   * If non-negative, it will be used instead of the restitution given by ContactMaterials. If there's no matching ContactMaterial, the value from `defaultContactMaterial` in the World will be used.
   */
  constructor(options = {}) {
    this.name = void 0;
    this.id = void 0;
    this.friction = void 0;
    this.restitution = void 0;
    let name = ''; // Backwards compatibility fix

    if (typeof options === 'string') {
      //console.warn(`Passing a string to MaterialOptions is deprecated, and has no effect`)
      name = options;
      options = {};
    }

    this.name = name;
    this.id = Material.idCounter++;
    this.friction = typeof options.friction !== 'undefined' ? options.friction : -1;
    this.restitution = typeof options.restitution !== 'undefined' ? options.restitution : -1;
  }

}

Material.idCounter = 0;

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3();
new Ray();
new Vec3();
new Vec3();
[new Vec3(1, 0, 0), new Vec3(0, 1, 0), new Vec3(0, 0, 1)];
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3(); // bilateral constraint between two dynamic objects
/**
 * Spherical shape
 * @example
 *     const radius = 1
 *     const sphereShape = new CANNON.Sphere(radius)
 *     const sphereBody = new CANNON.Body({ mass: 1, shape: sphereShape })
 *     world.addBody(sphereBody)
 */


class Sphere extends Shape {
  /**
   * The radius of the sphere.
   */

  /**
   *
   * @param radius The radius of the sphere, a non-negative number.
   */
  constructor(radius) {
    super({
      type: Shape.types.SPHERE
    });
    this.radius = void 0;
    this.radius = radius !== undefined ? radius : 1.0;

    if (this.radius < 0) {
      throw new Error('The sphere radius cannot be negative.');
    }

    this.updateBoundingSphereRadius();
  }
  /** calculateLocalInertia */


  calculateLocalInertia(mass, target = new Vec3()) {
    const I = 2.0 * mass * this.radius * this.radius / 5.0;
    target.x = I;
    target.y = I;
    target.z = I;
    return target;
  }
  /** volume */


  volume() {
    return 4.0 * Math.PI * Math.pow(this.radius, 3) / 3.0;
  }

  updateBoundingSphereRadius() {
    this.boundingSphereRadius = this.radius;
  }

  calculateWorldAABB(pos, quat, min, max) {
    const r = this.radius;
    const axes = ['x', 'y', 'z'];

    for (let i = 0; i < axes.length; i++) {
      const ax = axes[i];
      min[ax] = pos[ax] - r;
      max[ax] = pos[ax] + r;
    }
  }

}

new Vec3();
new Vec3();

new Vec3(); // Temp vectors for calculation

new Vec3(); // Relative velocity

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
/**
 * Cylinder class.
 * @example
 *     const radiusTop = 0.5
 *     const radiusBottom = 0.5
 *     const height = 2
 *     const numSegments = 12
 *     const cylinderShape = new CANNON.Cylinder(radiusTop, radiusBottom, height, numSegments)
 *     const cylinderBody = new CANNON.Body({ mass: 1, shape: cylinderShape })
 *     world.addBody(cylinderBody)
 */

class Cylinder extends ConvexPolyhedron {
  /** The radius of the top of the Cylinder. */

  /** The radius of the bottom of the Cylinder. */

  /** The height of the Cylinder. */

  /** The number of segments to build the cylinder out of. */

  /**
   * @param radiusTop The radius of the top of the Cylinder.
   * @param radiusBottom The radius of the bottom of the Cylinder.
   * @param height The height of the Cylinder.
   * @param numSegments The number of segments to build the cylinder out of.
   */
  constructor(radiusTop = 1, radiusBottom = 1, height = 1, numSegments = 8) {
    if (radiusTop < 0) {
      throw new Error('The cylinder radiusTop cannot be negative.');
    }

    if (radiusBottom < 0) {
      throw new Error('The cylinder radiusBottom cannot be negative.');
    }

    const N = numSegments;
    const vertices = [];
    const axes = [];
    const faces = [];
    const bottomface = [];
    const topface = [];
    const cos = Math.cos;
    const sin = Math.sin; // First bottom point

    vertices.push(new Vec3(-radiusBottom * sin(0), -height * 0.5, radiusBottom * cos(0)));
    bottomface.push(0); // First top point

    vertices.push(new Vec3(-radiusTop * sin(0), height * 0.5, radiusTop * cos(0)));
    topface.push(1);

    for (let i = 0; i < N; i++) {
      const theta = 2 * Math.PI / N * (i + 1);
      const thetaN = 2 * Math.PI / N * (i + 0.5);

      if (i < N - 1) {
        // Bottom
        vertices.push(new Vec3(-radiusBottom * sin(theta), -height * 0.5, radiusBottom * cos(theta)));
        bottomface.push(2 * i + 2); // Top

        vertices.push(new Vec3(-radiusTop * sin(theta), height * 0.5, radiusTop * cos(theta)));
        topface.push(2 * i + 3); // Face

        faces.push([2 * i, 2 * i + 1, 2 * i + 3, 2 * i + 2]);
      } else {
        faces.push([2 * i, 2 * i + 1, 1, 0]); // Connect
      } // Axis: we can cut off half of them if we have even number of segments


      if (N % 2 === 1 || i < N / 2) {
        axes.push(new Vec3(-sin(thetaN), 0, cos(thetaN)));
      }
    }

    faces.push(bottomface);
    axes.push(new Vec3(0, 1, 0)); // Reorder top face

    const temp = [];

    for (let i = 0; i < topface.length; i++) {
      temp.push(topface[topface.length - i - 1]);
    }

    faces.push(temp);
    super({
      vertices,
      faces,
      axes
    });
    this.radiusTop = void 0;
    this.radiusBottom = void 0;
    this.height = void 0;
    this.numSegments = void 0;
    this.type = Shape.types.CYLINDER;
    this.radiusTop = radiusTop;
    this.radiusBottom = radiusBottom;
    this.height = height;
    this.numSegments = numSegments;
  }

}
/**
 * Particle shape.
 * @example
 *     const particleShape = new CANNON.Particle()
 *     const particleBody = new CANNON.Body({ mass: 1, shape: particleShape })
 *     world.addBody(particleBody)
 */


class Particle extends Shape {
  constructor() {
    super({
      type: Shape.types.PARTICLE
    });
  }
  /**
   * calculateLocalInertia
   */


  calculateLocalInertia(mass, target = new Vec3()) {
    target.set(0, 0, 0);
    return target;
  }

  volume() {
    return 0;
  }

  updateBoundingSphereRadius() {
    this.boundingSphereRadius = 0;
  }

  calculateWorldAABB(pos, quat, min, max) {
    // Get each axis max
    min.copy(pos);
    max.copy(pos);
  }

}
/**
 * A plane, facing in the Z direction. The plane has its surface at z=0 and everything below z=0 is assumed to be solid plane. To make the plane face in some other direction than z, you must put it inside a Body and rotate that body. See the demos.
 * @example
 *     const planeShape = new CANNON.Plane()
 *     const planeBody = new CANNON.Body({ mass: 0, shape:  planeShape })
 *     planeBody.quaternion.setFromEuler(-Math.PI / 2, 0, 0) // make it face up
 *     world.addBody(planeBody)
 */


class Plane extends Shape {
  /** worldNormal */

  /** worldNormalNeedsUpdate */
  constructor() {
    super({
      type: Shape.types.PLANE
    }); // World oriented normal

    this.worldNormal = void 0;
    this.worldNormalNeedsUpdate = void 0;
    this.boundingSphereRadius = void 0;
    this.worldNormal = new Vec3();
    this.worldNormalNeedsUpdate = true;
    this.boundingSphereRadius = Number.MAX_VALUE;
  }
  /** computeWorldNormal */


  computeWorldNormal(quat) {
    const n = this.worldNormal;
    n.set(0, 0, 1);
    quat.vmult(n, n);
    this.worldNormalNeedsUpdate = false;
  }

  calculateLocalInertia(mass, target = new Vec3()) {
    return target;
  }

  volume() {
    return (// The plane is infinite...
      Number.MAX_VALUE
    );
  }

  calculateWorldAABB(pos, quat, min, max) {
    // The plane AABB is infinite, except if the normal is pointing along any axis
    tempNormal.set(0, 0, 1); // Default plane normal is z

    quat.vmult(tempNormal, tempNormal);
    const maxVal = Number.MAX_VALUE;
    min.set(-maxVal, -maxVal, -maxVal);
    max.set(maxVal, maxVal, maxVal);

    if (tempNormal.x === 1) {
      max.x = pos.x;
    } else if (tempNormal.x === -1) {
      min.x = pos.x;
    }

    if (tempNormal.y === 1) {
      max.y = pos.y;
    } else if (tempNormal.y === -1) {
      min.y = pos.y;
    }

    if (tempNormal.z === 1) {
      max.z = pos.z;
    } else if (tempNormal.z === -1) {
      min.z = pos.z;
    }
  }

  updateBoundingSphereRadius() {
    this.boundingSphereRadius = Number.MAX_VALUE;
  }

}

const tempNormal = new Vec3();
/**
 * Heightfield shape class. Height data is given as an array. These data points are spread out evenly with a given distance.
 * @todo Should be possible to use along all axes, not just y
 * @todo should be possible to scale along all axes
 * @todo Refactor elementSize to elementSizeX and elementSizeY
 *
 * @example
 *     // Generate some height data (y-values).
 *     const data = []
 *     for (let i = 0; i < 1000; i++) {
 *         const y = 0.5 * Math.cos(0.2 * i)
 *         data.push(y)
 *     }
 *
 *     // Create the heightfield shape
 *     const heightfieldShape = new CANNON.Heightfield(data, {
 *         elementSize: 1 // Distance between the data points in X and Y directions
 *     })
 *     const heightfieldBody = new CANNON.Body({ shape: heightfieldShape })
 *     world.addBody(heightfieldBody)
 */

class Heightfield extends Shape {
  /**
   * An array of numbers, or height values, that are spread out along the x axis.
   */

  /**
   * Max value of the data points in the data array.
   */

  /**
   * Minimum value of the data points in the data array.
   */

  /**
   * World spacing between the data points in X and Y direction.
   * @todo elementSizeX and Y
   * @default 1
   */

  /**
   * @default true
   */

  /**
   * @param data An array of numbers, or height values, that are spread out along the x axis.
   */
  constructor(data, options = {}) {
    options = Utils.defaults(options, {
      maxValue: null,
      minValue: null,
      elementSize: 1
    });
    super({
      type: Shape.types.HEIGHTFIELD
    });
    this.data = void 0;
    this.maxValue = void 0;
    this.minValue = void 0;
    this.elementSize = void 0;
    this.cacheEnabled = void 0;
    this.pillarConvex = void 0;
    this.pillarOffset = void 0;
    this._cachedPillars = void 0;
    this.data = data;
    this.maxValue = options.maxValue;
    this.minValue = options.minValue;
    this.elementSize = options.elementSize;

    if (options.minValue === null) {
      this.updateMinValue();
    }

    if (options.maxValue === null) {
      this.updateMaxValue();
    }

    this.cacheEnabled = true;
    this.pillarConvex = new ConvexPolyhedron();
    this.pillarOffset = new Vec3();
    this.updateBoundingSphereRadius(); // "i_j_isUpper" => { convex: ..., offset: ... }
    // for example:
    // _cachedPillars["0_2_1"]

    this._cachedPillars = {};
  }
  /**
   * Call whenever you change the data array.
   */


  update() {
    this._cachedPillars = {};
  }
  /**
   * Update the `minValue` property
   */


  updateMinValue() {
    const data = this.data;
    let minValue = data[0][0];

    for (let i = 0; i !== data.length; i++) {
      for (let j = 0; j !== data[i].length; j++) {
        const v = data[i][j];

        if (v < minValue) {
          minValue = v;
        }
      }
    }

    this.minValue = minValue;
  }
  /**
   * Update the `maxValue` property
   */


  updateMaxValue() {
    const data = this.data;
    let maxValue = data[0][0];

    for (let i = 0; i !== data.length; i++) {
      for (let j = 0; j !== data[i].length; j++) {
        const v = data[i][j];

        if (v > maxValue) {
          maxValue = v;
        }
      }
    }

    this.maxValue = maxValue;
  }
  /**
   * Set the height value at an index. Don't forget to update maxValue and minValue after you're done.
   */


  setHeightValueAtIndex(xi, yi, value) {
    const data = this.data;
    data[xi][yi] = value; // Invalidate cache

    this.clearCachedConvexTrianglePillar(xi, yi, false);

    if (xi > 0) {
      this.clearCachedConvexTrianglePillar(xi - 1, yi, true);
      this.clearCachedConvexTrianglePillar(xi - 1, yi, false);
    }

    if (yi > 0) {
      this.clearCachedConvexTrianglePillar(xi, yi - 1, true);
      this.clearCachedConvexTrianglePillar(xi, yi - 1, false);
    }

    if (yi > 0 && xi > 0) {
      this.clearCachedConvexTrianglePillar(xi - 1, yi - 1, true);
    }
  }
  /**
   * Get max/min in a rectangle in the matrix data
   * @param result An array to store the results in.
   * @return The result array, if it was passed in. Minimum will be at position 0 and max at 1.
   */


  getRectMinMax(iMinX, iMinY, iMaxX, iMaxY, result = []) {
    // Get max and min of the data
    const data = this.data; // Set first value

    let max = this.minValue;

    for (let i = iMinX; i <= iMaxX; i++) {
      for (let j = iMinY; j <= iMaxY; j++) {
        const height = data[i][j];

        if (height > max) {
          max = height;
        }
      }
    }

    result[0] = this.minValue;
    result[1] = max;
  }
  /**
   * Get the index of a local position on the heightfield. The indexes indicate the rectangles, so if your terrain is made of N x N height data points, you will have rectangle indexes ranging from 0 to N-1.
   * @param result Two-element array
   * @param clamp If the position should be clamped to the heightfield edge.
   */


  getIndexOfPosition(x, y, result, clamp) {
    // Get the index of the data points to test against
    const w = this.elementSize;
    const data = this.data;
    let xi = Math.floor(x / w);
    let yi = Math.floor(y / w);
    result[0] = xi;
    result[1] = yi;

    if (clamp) {
      // Clamp index to edges
      if (xi < 0) {
        xi = 0;
      }

      if (yi < 0) {
        yi = 0;
      }

      if (xi >= data.length - 1) {
        xi = data.length - 1;
      }

      if (yi >= data[0].length - 1) {
        yi = data[0].length - 1;
      }
    } // Bail out if we are out of the terrain


    if (xi < 0 || yi < 0 || xi >= data.length - 1 || yi >= data[0].length - 1) {
      return false;
    }

    return true;
  }

  getTriangleAt(x, y, edgeClamp, a, b, c) {
    const idx = getHeightAt_idx;
    this.getIndexOfPosition(x, y, idx, edgeClamp);
    let xi = idx[0];
    let yi = idx[1];
    const data = this.data;

    if (edgeClamp) {
      xi = Math.min(data.length - 2, Math.max(0, xi));
      yi = Math.min(data[0].length - 2, Math.max(0, yi));
    }

    const elementSize = this.elementSize;
    const lowerDist2 = (x / elementSize - xi) ** 2 + (y / elementSize - yi) ** 2;
    const upperDist2 = (x / elementSize - (xi + 1)) ** 2 + (y / elementSize - (yi + 1)) ** 2;
    const upper = lowerDist2 > upperDist2;
    this.getTriangle(xi, yi, upper, a, b, c);
    return upper;
  }

  getNormalAt(x, y, edgeClamp, result) {
    const a = getNormalAt_a;
    const b = getNormalAt_b;
    const c = getNormalAt_c;
    const e0 = getNormalAt_e0;
    const e1 = getNormalAt_e1;
    this.getTriangleAt(x, y, edgeClamp, a, b, c);
    b.vsub(a, e0);
    c.vsub(a, e1);
    e0.cross(e1, result);
    result.normalize();
  }
  /**
   * Get an AABB of a square in the heightfield
   * @param xi
   * @param yi
   * @param result
   */


  getAabbAtIndex(xi, yi, {
    lowerBound,
    upperBound
  }) {
    const data = this.data;
    const elementSize = this.elementSize;
    lowerBound.set(xi * elementSize, yi * elementSize, data[xi][yi]);
    upperBound.set((xi + 1) * elementSize, (yi + 1) * elementSize, data[xi + 1][yi + 1]);
  }
  /**
   * Get the height in the heightfield at a given position
   */


  getHeightAt(x, y, edgeClamp) {
    const data = this.data;
    const a = getHeightAt_a;
    const b = getHeightAt_b;
    const c = getHeightAt_c;
    const idx = getHeightAt_idx;
    this.getIndexOfPosition(x, y, idx, edgeClamp);
    let xi = idx[0];
    let yi = idx[1];

    if (edgeClamp) {
      xi = Math.min(data.length - 2, Math.max(0, xi));
      yi = Math.min(data[0].length - 2, Math.max(0, yi));
    }

    const upper = this.getTriangleAt(x, y, edgeClamp, a, b, c);
    barycentricWeights(x, y, a.x, a.y, b.x, b.y, c.x, c.y, getHeightAt_weights);
    const w = getHeightAt_weights;

    if (upper) {
      // Top triangle verts
      return data[xi + 1][yi + 1] * w.x + data[xi][yi + 1] * w.y + data[xi + 1][yi] * w.z;
    } else {
      // Top triangle verts
      return data[xi][yi] * w.x + data[xi + 1][yi] * w.y + data[xi][yi + 1] * w.z;
    }
  }

  getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle) {
    return xi + "_" + yi + "_" + (getUpperTriangle ? 1 : 0);
  }

  getCachedConvexTrianglePillar(xi, yi, getUpperTriangle) {
    return this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)];
  }

  setCachedConvexTrianglePillar(xi, yi, getUpperTriangle, convex, offset) {
    this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)] = {
      convex,
      offset
    };
  }

  clearCachedConvexTrianglePillar(xi, yi, getUpperTriangle) {
    delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)];
  }
  /**
   * Get a triangle from the heightfield
   */


  getTriangle(xi, yi, upper, a, b, c) {
    const data = this.data;
    const elementSize = this.elementSize;

    if (upper) {
      // Top triangle verts
      a.set((xi + 1) * elementSize, (yi + 1) * elementSize, data[xi + 1][yi + 1]);
      b.set(xi * elementSize, (yi + 1) * elementSize, data[xi][yi + 1]);
      c.set((xi + 1) * elementSize, yi * elementSize, data[xi + 1][yi]);
    } else {
      // Top triangle verts
      a.set(xi * elementSize, yi * elementSize, data[xi][yi]);
      b.set((xi + 1) * elementSize, yi * elementSize, data[xi + 1][yi]);
      c.set(xi * elementSize, (yi + 1) * elementSize, data[xi][yi + 1]);
    }
  }
  /**
   * Get a triangle in the terrain in the form of a triangular convex shape.
   */


  getConvexTrianglePillar(xi, yi, getUpperTriangle) {
    let result = this.pillarConvex;
    let offsetResult = this.pillarOffset;

    if (this.cacheEnabled) {
      const data = this.getCachedConvexTrianglePillar(xi, yi, getUpperTriangle);

      if (data) {
        this.pillarConvex = data.convex;
        this.pillarOffset = data.offset;
        return;
      }

      result = new ConvexPolyhedron();
      offsetResult = new Vec3();
      this.pillarConvex = result;
      this.pillarOffset = offsetResult;
    }

    const data = this.data;
    const elementSize = this.elementSize;
    const faces = result.faces; // Reuse verts if possible

    result.vertices.length = 6;

    for (let i = 0; i < 6; i++) {
      if (!result.vertices[i]) {
        result.vertices[i] = new Vec3();
      }
    } // Reuse faces if possible


    faces.length = 5;

    for (let i = 0; i < 5; i++) {
      if (!faces[i]) {
        faces[i] = [];
      }
    }

    const verts = result.vertices;
    const h = (Math.min(data[xi][yi], data[xi + 1][yi], data[xi][yi + 1], data[xi + 1][yi + 1]) - this.minValue) / 2 + this.minValue;

    if (!getUpperTriangle) {
      // Center of the triangle pillar - all polygons are given relative to this one
      offsetResult.set((xi + 0.25) * elementSize, // sort of center of a triangle
      (yi + 0.25) * elementSize, h // vertical center
      ); // Top triangle verts

      verts[0].set(-0.25 * elementSize, -0.25 * elementSize, data[xi][yi] - h);
      verts[1].set(0.75 * elementSize, -0.25 * elementSize, data[xi + 1][yi] - h);
      verts[2].set(-0.25 * elementSize, 0.75 * elementSize, data[xi][yi + 1] - h); // bottom triangle verts

      verts[3].set(-0.25 * elementSize, -0.25 * elementSize, -Math.abs(h) - 1);
      verts[4].set(0.75 * elementSize, -0.25 * elementSize, -Math.abs(h) - 1);
      verts[5].set(-0.25 * elementSize, 0.75 * elementSize, -Math.abs(h) - 1); // top triangle

      faces[0][0] = 0;
      faces[0][1] = 1;
      faces[0][2] = 2; // bottom triangle

      faces[1][0] = 5;
      faces[1][1] = 4;
      faces[1][2] = 3; // -x facing quad

      faces[2][0] = 0;
      faces[2][1] = 2;
      faces[2][2] = 5;
      faces[2][3] = 3; // -y facing quad

      faces[3][0] = 1;
      faces[3][1] = 0;
      faces[3][2] = 3;
      faces[3][3] = 4; // +xy facing quad

      faces[4][0] = 4;
      faces[4][1] = 5;
      faces[4][2] = 2;
      faces[4][3] = 1;
    } else {
      // Center of the triangle pillar - all polygons are given relative to this one
      offsetResult.set((xi + 0.75) * elementSize, // sort of center of a triangle
      (yi + 0.75) * elementSize, h // vertical center
      ); // Top triangle verts

      verts[0].set(0.25 * elementSize, 0.25 * elementSize, data[xi + 1][yi + 1] - h);
      verts[1].set(-0.75 * elementSize, 0.25 * elementSize, data[xi][yi + 1] - h);
      verts[2].set(0.25 * elementSize, -0.75 * elementSize, data[xi + 1][yi] - h); // bottom triangle verts

      verts[3].set(0.25 * elementSize, 0.25 * elementSize, -Math.abs(h) - 1);
      verts[4].set(-0.75 * elementSize, 0.25 * elementSize, -Math.abs(h) - 1);
      verts[5].set(0.25 * elementSize, -0.75 * elementSize, -Math.abs(h) - 1); // Top triangle

      faces[0][0] = 0;
      faces[0][1] = 1;
      faces[0][2] = 2; // bottom triangle

      faces[1][0] = 5;
      faces[1][1] = 4;
      faces[1][2] = 3; // +x facing quad

      faces[2][0] = 2;
      faces[2][1] = 5;
      faces[2][2] = 3;
      faces[2][3] = 0; // +y facing quad

      faces[3][0] = 3;
      faces[3][1] = 4;
      faces[3][2] = 1;
      faces[3][3] = 0; // -xy facing quad

      faces[4][0] = 1;
      faces[4][1] = 4;
      faces[4][2] = 5;
      faces[4][3] = 2;
    }

    result.computeNormals();
    result.computeEdges();
    result.updateBoundingSphereRadius();
    this.setCachedConvexTrianglePillar(xi, yi, getUpperTriangle, result, offsetResult);
  }

  calculateLocalInertia(mass, target = new Vec3()) {
    target.set(0, 0, 0);
    return target;
  }

  volume() {
    return (// The terrain is infinite
      Number.MAX_VALUE
    );
  }

  calculateWorldAABB(pos, quat, min, max) {
    /** @TODO do it properly */
    min.set(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);
    max.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
  }

  updateBoundingSphereRadius() {
    // Use the bounding box of the min/max values
    const data = this.data;
    const s = this.elementSize;
    this.boundingSphereRadius = new Vec3(data.length * s, data[0].length * s, Math.max(Math.abs(this.maxValue), Math.abs(this.minValue))).length();
  }
  /**
   * Sets the height values from an image. Currently only supported in browser.
   */


  setHeightsFromImage(image, scale) {
    const {
      x,
      z,
      y
    } = scale;
    const canvas = document.createElement('canvas');
    canvas.width = image.width;
    canvas.height = image.height;
    const context = canvas.getContext('2d');
    context.drawImage(image, 0, 0);
    const imageData = context.getImageData(0, 0, image.width, image.height);
    const matrix = this.data;
    matrix.length = 0;
    this.elementSize = Math.abs(x) / imageData.width;

    for (let i = 0; i < imageData.height; i++) {
      const row = [];

      for (let j = 0; j < imageData.width; j++) {
        const a = imageData.data[(i * imageData.height + j) * 4];
        const b = imageData.data[(i * imageData.height + j) * 4 + 1];
        const c = imageData.data[(i * imageData.height + j) * 4 + 2];
        const height = (a + b + c) / 4 / 255 * z;

        if (x < 0) {
          row.push(height);
        } else {
          row.unshift(height);
        }
      }

      if (y < 0) {
        matrix.unshift(row);
      } else {
        matrix.push(row);
      }
    }

    this.updateMaxValue();
    this.updateMinValue();
    this.update();
  }

}

const getHeightAt_idx = [];
const getHeightAt_weights = new Vec3();
const getHeightAt_a = new Vec3();
const getHeightAt_b = new Vec3();
const getHeightAt_c = new Vec3();
const getNormalAt_a = new Vec3();
const getNormalAt_b = new Vec3();
const getNormalAt_c = new Vec3();
const getNormalAt_e0 = new Vec3();
const getNormalAt_e1 = new Vec3(); // from https://en.wikipedia.org/wiki/Barycentric_coordinate_system

function barycentricWeights(x, y, ax, ay, bx, by, cx, cy, result) {
  result.x = ((by - cy) * (x - cx) + (cx - bx) * (y - cy)) / ((by - cy) * (ax - cx) + (cx - bx) * (ay - cy));
  result.y = ((cy - ay) * (x - cx) + (ax - cx) * (y - cy)) / ((by - cy) * (ax - cx) + (cx - bx) * (ay - cy));
  result.z = 1 - result.x - result.y;
}
/**
 * OctreeNode
 */


class OctreeNode {
  /** The root node */

  /** Boundary of this node */

  /** Contained data at the current node level */

  /** Children to this node */
  constructor(options = {}) {
    this.root = void 0;
    this.aabb = void 0;
    this.data = void 0;
    this.children = void 0;
    this.root = options.root || null;
    this.aabb = options.aabb ? options.aabb.clone() : new AABB();
    this.data = [];
    this.children = [];
  }
  /**
   * reset
   */


  reset() {
    this.children.length = this.data.length = 0;
  }
  /**
   * Insert data into this node
   * @return True if successful, otherwise false
   */


  insert(aabb, elementData, level = 0) {
    const nodeData = this.data; // Ignore objects that do not belong in this node

    if (!this.aabb.contains(aabb)) {
      return false; // object cannot be added
    }

    const children = this.children;
    const maxDepth = this.maxDepth || this.root.maxDepth;

    if (level < maxDepth) {
      // Subdivide if there are no children yet
      let subdivided = false;

      if (!children.length) {
        this.subdivide();
        subdivided = true;
      } // add to whichever node will accept it


      for (let i = 0; i !== 8; i++) {
        if (children[i].insert(aabb, elementData, level + 1)) {
          return true;
        }
      }

      if (subdivided) {
        // No children accepted! Might as well just remove em since they contain none
        children.length = 0;
      }
    } // Too deep, or children didnt want it. add it in current node


    nodeData.push(elementData);
    return true;
  }
  /**
   * Create 8 equally sized children nodes and put them in the `children` array.
   */


  subdivide() {
    const aabb = this.aabb;
    const l = aabb.lowerBound;
    const u = aabb.upperBound;
    const children = this.children;
    children.push(new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 0, 0)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 0, 0)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 1, 0)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 1, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 1, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 0, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 0, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 1, 0)
      })
    }));
    u.vsub(l, halfDiagonal);
    halfDiagonal.scale(0.5, halfDiagonal);
    const root = this.root || this;

    for (let i = 0; i !== 8; i++) {
      const child = children[i]; // Set current node as root

      child.root = root; // Compute bounds

      const lowerBound = child.aabb.lowerBound;
      lowerBound.x *= halfDiagonal.x;
      lowerBound.y *= halfDiagonal.y;
      lowerBound.z *= halfDiagonal.z;
      lowerBound.vadd(l, lowerBound); // Upper bound is always lower bound + halfDiagonal

      lowerBound.vadd(halfDiagonal, child.aabb.upperBound);
    }
  }
  /**
   * Get all data, potentially within an AABB
   * @return The "result" object
   */


  aabbQuery(aabb, result) {
    this.data; // abort if the range does not intersect this node
    // if (!this.aabb.overlaps(aabb)){
    //     return result;
    // }
    // Add objects at this level
    // Array.prototype.push.apply(result, nodeData);
    // Add child data
    // @todo unwrap recursion into a queue / loop, that's faster in JS

    this.children; // for (let i = 0, N = this.children.length; i !== N; i++) {
    //     children[i].aabbQuery(aabb, result);
    // }

    const queue = [this];

    while (queue.length) {
      const node = queue.pop();

      if (node.aabb.overlaps(aabb)) {
        Array.prototype.push.apply(result, node.data);
      }

      Array.prototype.push.apply(queue, node.children);
    }

    return result;
  }
  /**
   * Get all data, potentially intersected by a ray.
   * @return The "result" object
   */


  rayQuery(ray, treeTransform, result) {
    // Use aabb query for now.

    /** @todo implement real ray query which needs less lookups */
    ray.getAABB(tmpAABB);
    tmpAABB.toLocalFrame(treeTransform, tmpAABB);
    this.aabbQuery(tmpAABB, result);
    return result;
  }
  /**
   * removeEmptyNodes
   */


  removeEmptyNodes() {
    for (let i = this.children.length - 1; i >= 0; i--) {
      this.children[i].removeEmptyNodes();

      if (!this.children[i].children.length && !this.children[i].data.length) {
        this.children.splice(i, 1);
      }
    }
  }

}
/**
 * Octree
 */


class Octree extends OctreeNode {
  /**
   * Maximum subdivision depth
   * @default 8
   */

  /**
   * @param aabb The total AABB of the tree
   */
  constructor(aabb, options = {}) {
    super({
      root: null,
      aabb
    });
    this.maxDepth = void 0;
    this.maxDepth = typeof options.maxDepth !== 'undefined' ? options.maxDepth : 8;
  }

}

const halfDiagonal = new Vec3();
const tmpAABB = new AABB();
/**
 * Trimesh.
 * @example
 *     // How to make a mesh with a single triangle
 *     const vertices = [
 *         0, 0, 0, // vertex 0
 *         1, 0, 0, // vertex 1
 *         0, 1, 0  // vertex 2
 *     ]
 *     const indices = [
 *         0, 1, 2  // triangle 0
 *     ]
 *     const trimeshShape = new CANNON.Trimesh(vertices, indices)
 */

class Trimesh extends Shape {
  /**
   * vertices
   */

  /**
   * Array of integers, indicating which vertices each triangle consists of. The length of this array is thus 3 times the number of triangles.
   */

  /**
   * The normals data.
   */

  /**
   * The local AABB of the mesh.
   */

  /**
   * References to vertex pairs, making up all unique edges in the trimesh.
   */

  /**
   * Local scaling of the mesh. Use .setScale() to set it.
   */

  /**
   * The indexed triangles. Use .updateTree() to update it.
   */
  constructor(vertices, indices) {
    super({
      type: Shape.types.TRIMESH
    });
    this.vertices = void 0;
    this.indices = void 0;
    this.normals = void 0;
    this.aabb = void 0;
    this.edges = void 0;
    this.scale = void 0;
    this.tree = void 0;
    this.vertices = new Float32Array(vertices);
    this.indices = new Int16Array(indices);
    this.normals = new Float32Array(indices.length);
    this.aabb = new AABB();
    this.edges = null;
    this.scale = new Vec3(1, 1, 1);
    this.tree = new Octree();
    this.updateEdges();
    this.updateNormals();
    this.updateAABB();
    this.updateBoundingSphereRadius();
    this.updateTree();
  }
  /**
   * updateTree
   */


  updateTree() {
    const tree = this.tree;
    tree.reset();
    tree.aabb.copy(this.aabb);
    const scale = this.scale; // The local mesh AABB is scaled, but the octree AABB should be unscaled

    tree.aabb.lowerBound.x *= 1 / scale.x;
    tree.aabb.lowerBound.y *= 1 / scale.y;
    tree.aabb.lowerBound.z *= 1 / scale.z;
    tree.aabb.upperBound.x *= 1 / scale.x;
    tree.aabb.upperBound.y *= 1 / scale.y;
    tree.aabb.upperBound.z *= 1 / scale.z; // Insert all triangles

    const triangleAABB = new AABB();
    const a = new Vec3();
    const b = new Vec3();
    const c = new Vec3();
    const points = [a, b, c];

    for (let i = 0; i < this.indices.length / 3; i++) {
      //this.getTriangleVertices(i, a, b, c);
      // Get unscaled triangle verts
      const i3 = i * 3;

      this._getUnscaledVertex(this.indices[i3], a);

      this._getUnscaledVertex(this.indices[i3 + 1], b);

      this._getUnscaledVertex(this.indices[i3 + 2], c);

      triangleAABB.setFromPoints(points);
      tree.insert(triangleAABB, i);
    }

    tree.removeEmptyNodes();
  }
  /**
   * Get triangles in a local AABB from the trimesh.
   * @param result An array of integers, referencing the queried triangles.
   */


  getTrianglesInAABB(aabb, result) {
    unscaledAABB.copy(aabb); // Scale it to local

    const scale = this.scale;
    const isx = scale.x;
    const isy = scale.y;
    const isz = scale.z;
    const l = unscaledAABB.lowerBound;
    const u = unscaledAABB.upperBound;
    l.x /= isx;
    l.y /= isy;
    l.z /= isz;
    u.x /= isx;
    u.y /= isy;
    u.z /= isz;
    return this.tree.aabbQuery(unscaledAABB, result);
  }
  /**
   * setScale
   */


  setScale(scale) {
    const wasUniform = this.scale.x === this.scale.y && this.scale.y === this.scale.z;
    const isUniform = scale.x === scale.y && scale.y === scale.z;

    if (!(wasUniform && isUniform)) {
      // Non-uniform scaling. Need to update normals.
      this.updateNormals();
    }

    this.scale.copy(scale);
    this.updateAABB();
    this.updateBoundingSphereRadius();
  }
  /**
   * Compute the normals of the faces. Will save in the `.normals` array.
   */


  updateNormals() {
    const n = computeNormals_n; // Generate normals

    const normals = this.normals;

    for (let i = 0; i < this.indices.length / 3; i++) {
      const i3 = i * 3;
      const a = this.indices[i3];
      const b = this.indices[i3 + 1];
      const c = this.indices[i3 + 2];
      this.getVertex(a, va);
      this.getVertex(b, vb);
      this.getVertex(c, vc);
      Trimesh.computeNormal(vb, va, vc, n);
      normals[i3] = n.x;
      normals[i3 + 1] = n.y;
      normals[i3 + 2] = n.z;
    }
  }
  /**
   * Update the `.edges` property
   */


  updateEdges() {
    const edges = {};

    const add = (a, b) => {
      const key = a < b ? a + "_" + b : b + "_" + a;
      edges[key] = true;
    };

    for (let i = 0; i < this.indices.length / 3; i++) {
      const i3 = i * 3;
      const a = this.indices[i3];
      const b = this.indices[i3 + 1];
      const c = this.indices[i3 + 2];
      add(a, b);
      add(b, c);
      add(c, a);
    }

    const keys = Object.keys(edges);
    this.edges = new Int16Array(keys.length * 2);

    for (let i = 0; i < keys.length; i++) {
      const indices = keys[i].split('_');
      this.edges[2 * i] = parseInt(indices[0], 10);
      this.edges[2 * i + 1] = parseInt(indices[1], 10);
    }
  }
  /**
   * Get an edge vertex
   * @param firstOrSecond 0 or 1, depending on which one of the vertices you need.
   * @param vertexStore Where to store the result
   */


  getEdgeVertex(edgeIndex, firstOrSecond, vertexStore) {
    const vertexIndex = this.edges[edgeIndex * 2 + (firstOrSecond ? 1 : 0)];
    this.getVertex(vertexIndex, vertexStore);
  }
  /**
   * Get a vector along an edge.
   */


  getEdgeVector(edgeIndex, vectorStore) {
    const va = getEdgeVector_va;
    const vb = getEdgeVector_vb;
    this.getEdgeVertex(edgeIndex, 0, va);
    this.getEdgeVertex(edgeIndex, 1, vb);
    vb.vsub(va, vectorStore);
  }
  /**
   * Get face normal given 3 vertices
   */


  static computeNormal(va, vb, vc, target) {
    vb.vsub(va, ab);
    vc.vsub(vb, cb);
    cb.cross(ab, target);

    if (!target.isZero()) {
      target.normalize();
    }
  }
  /**
   * Get vertex i.
   * @return The "out" vector object
   */


  getVertex(i, out) {
    const scale = this.scale;

    this._getUnscaledVertex(i, out);

    out.x *= scale.x;
    out.y *= scale.y;
    out.z *= scale.z;
    return out;
  }
  /**
   * Get raw vertex i
   * @return The "out" vector object
   */


  _getUnscaledVertex(i, out) {
    const i3 = i * 3;
    const vertices = this.vertices;
    return out.set(vertices[i3], vertices[i3 + 1], vertices[i3 + 2]);
  }
  /**
   * Get a vertex from the trimesh,transformed by the given position and quaternion.
   * @return The "out" vector object
   */


  getWorldVertex(i, pos, quat, out) {
    this.getVertex(i, out);
    Transform.pointToWorldFrame(pos, quat, out, out);
    return out;
  }
  /**
   * Get the three vertices for triangle i.
   */


  getTriangleVertices(i, a, b, c) {
    const i3 = i * 3;
    this.getVertex(this.indices[i3], a);
    this.getVertex(this.indices[i3 + 1], b);
    this.getVertex(this.indices[i3 + 2], c);
  }
  /**
   * Compute the normal of triangle i.
   * @return The "target" vector object
   */


  getNormal(i, target) {
    const i3 = i * 3;
    return target.set(this.normals[i3], this.normals[i3 + 1], this.normals[i3 + 2]);
  }
  /**
   * @return The "target" vector object
   */


  calculateLocalInertia(mass, target) {
    // Approximate with box inertia
    // Exact inertia calculation is overkill, but see http://geometrictools.com/Documentation/PolyhedralMassProperties.pdf for the correct way to do it
    this.computeLocalAABB(cli_aabb);
    const x = cli_aabb.upperBound.x - cli_aabb.lowerBound.x;
    const y = cli_aabb.upperBound.y - cli_aabb.lowerBound.y;
    const z = cli_aabb.upperBound.z - cli_aabb.lowerBound.z;
    return target.set(1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * z * 2 * z), 1.0 / 12.0 * mass * (2 * x * 2 * x + 2 * z * 2 * z), 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * x * 2 * x));
  }
  /**
   * Compute the local AABB for the trimesh
   */


  computeLocalAABB(aabb) {
    const l = aabb.lowerBound;
    const u = aabb.upperBound;
    const n = this.vertices.length;
    this.vertices;
    const v = computeLocalAABB_worldVert;
    this.getVertex(0, v);
    l.copy(v);
    u.copy(v);

    for (let i = 0; i !== n; i++) {
      this.getVertex(i, v);

      if (v.x < l.x) {
        l.x = v.x;
      } else if (v.x > u.x) {
        u.x = v.x;
      }

      if (v.y < l.y) {
        l.y = v.y;
      } else if (v.y > u.y) {
        u.y = v.y;
      }

      if (v.z < l.z) {
        l.z = v.z;
      } else if (v.z > u.z) {
        u.z = v.z;
      }
    }
  }
  /**
   * Update the `.aabb` property
   */


  updateAABB() {
    this.computeLocalAABB(this.aabb);
  }
  /**
   * Will update the `.boundingSphereRadius` property
   */


  updateBoundingSphereRadius() {
    // Assume points are distributed with local (0,0,0) as center
    let max2 = 0;
    const vertices = this.vertices;
    const v = new Vec3();

    for (let i = 0, N = vertices.length / 3; i !== N; i++) {
      this.getVertex(i, v);
      const norm2 = v.lengthSquared();

      if (norm2 > max2) {
        max2 = norm2;
      }
    }

    this.boundingSphereRadius = Math.sqrt(max2);
  }
  /**
   * calculateWorldAABB
   */


  calculateWorldAABB(pos, quat, min, max) {
    /*
        const n = this.vertices.length / 3,
            verts = this.vertices;
        const minx,miny,minz,maxx,maxy,maxz;
         const v = tempWorldVertex;
        for(let i=0; i<n; i++){
            this.getVertex(i, v);
            quat.vmult(v, v);
            pos.vadd(v, v);
            if (v.x < minx || minx===undefined){
                minx = v.x;
            } else if(v.x > maxx || maxx===undefined){
                maxx = v.x;
            }
             if (v.y < miny || miny===undefined){
                miny = v.y;
            } else if(v.y > maxy || maxy===undefined){
                maxy = v.y;
            }
             if (v.z < minz || minz===undefined){
                minz = v.z;
            } else if(v.z > maxz || maxz===undefined){
                maxz = v.z;
            }
        }
        min.set(minx,miny,minz);
        max.set(maxx,maxy,maxz);
        */
    // Faster approximation using local AABB
    const frame = calculateWorldAABB_frame;
    const result = calculateWorldAABB_aabb;
    frame.position = pos;
    frame.quaternion = quat;
    this.aabb.toWorldFrame(frame, result);
    min.copy(result.lowerBound);
    max.copy(result.upperBound);
  }
  /**
   * Get approximate volume
   */


  volume() {
    return 4.0 * Math.PI * this.boundingSphereRadius / 3.0;
  }
  /**
   * Create a Trimesh instance, shaped as a torus.
   */


  static createTorus(radius = 1, tube = 0.5, radialSegments = 8, tubularSegments = 6, arc = Math.PI * 2) {
    const vertices = [];
    const indices = [];

    for (let j = 0; j <= radialSegments; j++) {
      for (let i = 0; i <= tubularSegments; i++) {
        const u = i / tubularSegments * arc;
        const v = j / radialSegments * Math.PI * 2;
        const x = (radius + tube * Math.cos(v)) * Math.cos(u);
        const y = (radius + tube * Math.cos(v)) * Math.sin(u);
        const z = tube * Math.sin(v);
        vertices.push(x, y, z);
      }
    }

    for (let j = 1; j <= radialSegments; j++) {
      for (let i = 1; i <= tubularSegments; i++) {
        const a = (tubularSegments + 1) * j + i - 1;
        const b = (tubularSegments + 1) * (j - 1) + i - 1;
        const c = (tubularSegments + 1) * (j - 1) + i;
        const d = (tubularSegments + 1) * j + i;
        indices.push(a, b, d);
        indices.push(b, c, d);
      }
    }

    return new Trimesh(vertices, indices);
  }

}

const computeNormals_n = new Vec3();
const unscaledAABB = new AABB();
const getEdgeVector_va = new Vec3();
const getEdgeVector_vb = new Vec3();
const cb = new Vec3();
const ab = new Vec3();
const va = new Vec3();
const vb = new Vec3();
const vc = new Vec3();
const cli_aabb = new AABB();
const computeLocalAABB_worldVert = new Vec3();
const calculateWorldAABB_frame = new Transform();
const calculateWorldAABB_aabb = new AABB();
// the first part of the method is formed by the
// shape type that comes before, in the second part
// there is the shape type that comes after in the SHAPE_TYPES list


({
  sphereSphere: Shape.types.SPHERE,
  spherePlane: Shape.types.SPHERE | Shape.types.PLANE,
  boxBox: Shape.types.BOX | Shape.types.BOX,
  sphereBox: Shape.types.SPHERE | Shape.types.BOX,
  planeBox: Shape.types.PLANE | Shape.types.BOX,
  convexConvex: Shape.types.CONVEXPOLYHEDRON,
  sphereConvex: Shape.types.SPHERE | Shape.types.CONVEXPOLYHEDRON,
  planeConvex: Shape.types.PLANE | Shape.types.CONVEXPOLYHEDRON,
  boxConvex: Shape.types.BOX | Shape.types.CONVEXPOLYHEDRON,
  sphereHeightfield: Shape.types.SPHERE | Shape.types.HEIGHTFIELD,
  boxHeightfield: Shape.types.BOX | Shape.types.HEIGHTFIELD,
  convexHeightfield: Shape.types.CONVEXPOLYHEDRON | Shape.types.HEIGHTFIELD,
  sphereParticle: Shape.types.PARTICLE | Shape.types.SPHERE,
  planeParticle: Shape.types.PLANE | Shape.types.PARTICLE,
  boxParticle: Shape.types.BOX | Shape.types.PARTICLE,
  convexParticle: Shape.types.PARTICLE | Shape.types.CONVEXPOLYHEDRON,
  cylinderCylinder: Shape.types.CYLINDER,
  sphereCylinder: Shape.types.SPHERE | Shape.types.CYLINDER,
  planeCylinder: Shape.types.PLANE | Shape.types.CYLINDER,
  boxCylinder: Shape.types.BOX | Shape.types.CYLINDER,
  convexCylinder: Shape.types.CONVEXPOLYHEDRON | Shape.types.CYLINDER,
  heightfieldCylinder: Shape.types.HEIGHTFIELD | Shape.types.CYLINDER,
  particleCylinder: Shape.types.PARTICLE | Shape.types.CYLINDER,
  sphereTrimesh: Shape.types.SPHERE | Shape.types.TRIMESH,
  planeTrimesh: Shape.types.PLANE | Shape.types.TRIMESH
});

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Quaternion();
new Quaternion();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new AABB();
new Vec3();
new Vec3(); // See http://bulletphysics.com/Bullet/BulletFull/SphereTriangleDetector_8cpp_source.html

new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3();
new Vec3();
[new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3(); // WIP

new Quaternion();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();


new AABB();
new Ray(); // performance.now() fallback on Date.now()

const performance = globalThis.performance || {};

if (!performance.now) {
  let nowOffset = Date.now();

  if (performance.timing && performance.timing.navigationStart) {
    nowOffset = performance.timing.navigationStart;
  }

  performance.now = () => Date.now() - nowOffset;
} // Reusable event objects to save memory.

function cannonDebugger(scene, bodies, {
  color = 0x00ff00,
  scale = 1,
  onInit,
  onUpdate,
  autoUpdate
} = {}) {
  const _meshes = [];

  const _material = new MeshBasicMaterial({
    color: color != null ? color : 0x00ff00,
    wireframe: true
  });

  const _tempVec0 = new Vec3();

  const _tempVec1 = new Vec3();

  const _tempVec2 = new Vec3();

  const _tempQuat0 = new Quaternion();

  const _sphereGeometry = new SphereGeometry(1);

  const _boxGeometry = new BoxGeometry(1, 1, 1);

  const _planeGeometry = new PlaneGeometry(10, 10, 10, 10);

  function createConvexPolyhedronGeometry(shape) {
    const geometry = new BufferGeometry(); // Add vertices

    const positions = [];

    for (let i = 0; i < shape.vertices.length; i++) {
      const vertex = shape.vertices[i];
      positions.push(vertex.x, vertex.y, vertex.z);
    }

    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3)); // Add faces

    const indices = [];

    for (let i = 0; i < shape.faces.length; i++) {
      const face = shape.faces[i];
      const a = face[0];

      for (let j = 1; j < face.length - 1; j++) {
        const b = face[j];
        const c = face[j + 1];
        indices.push(a, b, c);
      }
    }

    geometry.setIndex(indices);
    geometry.computeBoundingSphere();
    geometry.computeVertexNormals();
    return geometry;
  }

  function createTrimeshGeometry(shape) {
    const geometry = new BufferGeometry();
    const positions = [];
    const v0 = _tempVec0;
    const v1 = _tempVec1;
    const v2 = _tempVec2;

    for (let i = 0; i < shape.indices.length / 3; i++) {
      shape.getTriangleVertices(i, v0, v1, v2);
      positions.push(v0.x, v0.y, v0.z);
      positions.push(v1.x, v1.y, v1.z);
      positions.push(v2.x, v2.y, v2.z);
    }

    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3));
    geometry.computeBoundingSphere();
    geometry.computeVertexNormals();
    return geometry;
  }

  function createHeightfieldGeometry(shape) {
    const geometry = new BufferGeometry();
    const s = shape.elementSize || 1; // assumes square heightfield, else i*x, j*y

    const positions = shape.data.flatMap((row, i) => row.flatMap((z, j) => [i * s, j * s, z]));
    const indices = [];

    for (let xi = 0; xi < shape.data.length - 1; xi++) {
      for (let yi = 0; yi < shape.data[xi].length - 1; yi++) {
        const stride = shape.data[xi].length;
        const index = xi * stride + yi;
        indices.push(index + 1, index + stride, index + stride + 1);
        indices.push(index + stride, index + 1, index);
      }
    }

    geometry.setIndex(indices);
    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3));
    geometry.computeBoundingSphere();
    geometry.computeVertexNormals();
    return geometry;
  }

  function createMesh(shape) {
    let mesh = new Mesh();
    const {
      SPHERE,
      BOX,
      PLANE,
      CYLINDER,
      CONVEXPOLYHEDRON,
      TRIMESH,
      HEIGHTFIELD
    } = Shape.types;

    switch (shape.type) {
      case SPHERE:
        {
          mesh = new Mesh(_sphereGeometry, _material);
          break;
        }

      case BOX:
        {
          mesh = new Mesh(_boxGeometry, _material);
          break;
        }

      case PLANE:
        {
          mesh = new Mesh(_planeGeometry, _material);
          break;
        }

      case CYLINDER:
        {
          const geometry = new CylinderGeometry(shape.radiusTop, shape.radiusBottom, shape.height, shape.numSegments);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }

      case CONVEXPOLYHEDRON:
        {
          const geometry = createConvexPolyhedronGeometry(shape);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }

      case TRIMESH:
        {
          const geometry = createTrimeshGeometry(shape);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }

      case HEIGHTFIELD:
        {
          const geometry = createHeightfieldGeometry(shape);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }
    }

    scene.add(mesh);
    return mesh;
  }

  function scaleMesh(mesh, shape) {
    const {
      SPHERE,
      BOX,
      PLANE,
      CYLINDER,
      CONVEXPOLYHEDRON,
      TRIMESH,
      HEIGHTFIELD
    } = Shape.types;

    switch (shape.type) {
      case SPHERE:
        {
          const {
            radius
          } = shape;
          mesh.scale.set(radius * scale, radius * scale, radius * scale);
          break;
        }

      case BOX:
        {
          mesh.scale.copy(shape.halfExtents);
          mesh.scale.multiplyScalar(2 * scale);
          break;
        }

      case PLANE:
        {
          break;
        }

      case CYLINDER:
        {
          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);
          break;
        }

      case CONVEXPOLYHEDRON:
        {
          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);
          break;
        }

      case TRIMESH:
        {
          mesh.scale.copy(shape.scale).multiplyScalar(scale);
          break;
        }

      case HEIGHTFIELD:
        {
          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);
          break;
        }
    }
  }

  function typeMatch(mesh, shape) {
    if (!mesh) return false;
    const {
      geometry
    } = mesh;
    return geometry instanceof SphereGeometry && shape.type === Shape.types.SPHERE || geometry instanceof BoxGeometry && shape.type === Shape.types.BOX || geometry instanceof PlaneGeometry && shape.type === Shape.types.PLANE || geometry.id === shape.geometryId && shape.type === Shape.types.CYLINDER || geometry.id === shape.geometryId && shape.type === Shape.types.CONVEXPOLYHEDRON || geometry.id === shape.geometryId && shape.type === Shape.types.TRIMESH || geometry.id === shape.geometryId && shape.type === Shape.types.HEIGHTFIELD;
  }

  function updateMesh(index, shape) {
    let mesh = _meshes[index];
    let didCreateNewMesh = false;

    if (!typeMatch(mesh, shape)) {
      if (mesh) scene.remove(mesh);
      _meshes[index] = mesh = createMesh(shape);
      didCreateNewMesh = true;
    }

    scaleMesh(mesh, shape);
    return didCreateNewMesh;
  }

  function update() {
    const meshes = _meshes;
    const shapeWorldPosition = _tempVec0;
    const shapeWorldQuaternion = _tempQuat0;
    let meshIndex = 0;

    for (const body of bodies) {
      for (let i = 0; i !== body.shapes.length; i++) {
        const shape = body.shapes[i];
        const didCreateNewMesh = updateMesh(meshIndex, shape);
        const mesh = meshes[meshIndex];

        if (mesh) {
          // Get world position
          body.quaternion.vmult(body.shapeOffsets[i], shapeWorldPosition);
          body.position.vadd(shapeWorldPosition, shapeWorldPosition); // Get world quaternion

          body.quaternion.mult(body.shapeOrientations[i], shapeWorldQuaternion); // Copy to meshes

          mesh.position.copy(shapeWorldPosition);
          mesh.quaternion.copy(shapeWorldQuaternion);
          if (didCreateNewMesh && onInit instanceof Function) onInit(body, mesh, shape);
          if (!didCreateNewMesh && onUpdate instanceof Function) onUpdate(body, mesh, shape);
        }

        meshIndex++;
      }
    }

    for (let i = meshIndex; i < meshes.length; i++) {
      const mesh = meshes[i];
      if (mesh) scene.remove(mesh);
    }

    meshes.length = meshIndex;
    if (autoUpdate !== false) requestAnimationFrame(update);
  }

  if (autoUpdate !== false) requestAnimationFrame(update);
  return {
    update
  };
}

const makeVec3 = ([x, y, z]) => new Vec3(x, y, z);

const prepareSphere = args => Array.isArray(args) ? args : [args];

const prepareConvexPolyhedron = ([v, faces, n, a, boundingSphereRadius]) => [{
  vertices: v ? v.map(makeVec3) : undefined,
  faces,
  normals: n ? n.map(makeVec3) : undefined,
  axes: a ? a.map(makeVec3) : undefined,
  boundingSphereRadius
}];

function createShape(type, args) {
  switch (type) {
    case 'Box':
      return new Box(new Vec3(...args.map(v => v / 2)));
    // extents => halfExtents

    case 'ConvexPolyhedron':
      return new ConvexPolyhedron(...prepareConvexPolyhedron(args));

    case 'Cylinder':
      return new Cylinder(...args);
    // [ radiusTop, radiusBottom, height, numSegments ] = args

    case 'Heightfield':
      return new Heightfield(...args);
    // [ Array data, options: {minValue, maxValue, elementSize}  ] = args

    case 'Particle':
      return new Particle();
    // no args

    case 'Plane':
      return new Plane();
    // no args, infinite x and y

    case 'Sphere':
      return new Sphere(...prepareSphere(args));
    // radius = args

    case 'Trimesh':
      return new Trimesh(...args);
    // [vertices, indices] = args
  }
}
/**
 *
 * @param uuid {string}
 * @param props {BodyProps}
 * @param type {BodyShapeType}
 * @return {module:objects/Body.Body}
 */


const propsToBody = (uuid, props, type) => {
  const {
    args = [],
    position = [0, 0, 0],
    rotation = [0, 0, 0],
    velocity = [0, 0, 0],
    angularVelocity = [0, 0, 0],
    linearFactor = [1, 1, 1],
    angularFactor = [1, 1, 1],
    type: bodyType,
    mass,
    material,
    shapes,
    onCollide,
    collisionResponse,
    ...extra
  } = props;
  const body = new Body({ ...extra,
    mass: bodyType === 'Static' ? 0 : mass,
    type: bodyType ? Body[bodyType.toUpperCase()] : undefined,
    material: material ? new Material(material) : undefined
  });
  body.uuid = uuid;

  if (collisionResponse !== undefined) {
    body.collisionResponse = collisionResponse;
  }

  if (type === 'Compound') {
    shapes.forEach(({
      type,
      args,
      position,
      rotation,
      material,
      ...extra
    }) => {
      const shapeBody = body.addShape(createShape(type, args), position ? new Vec3(...position) : undefined, rotation ? new Quaternion().setFromEuler(...rotation) : undefined);
      if (material) shapeBody.material = new Material(material);
      Object.assign(shapeBody, extra);
    });
  } else {
    body.addShape(createShape(type, args));
  }

  body.position.set(position[0], position[1], position[2]);
  body.quaternion.setFromEuler(rotation[0], rotation[1], rotation[2]);
  body.velocity.set(velocity[0], velocity[1], velocity[2]);
  body.angularVelocity.set(angularVelocity[0], angularVelocity[1], angularVelocity[2]);
  body.linearFactor.set(linearFactor[0], linearFactor[1], linearFactor[2]);
  body.angularFactor.set(angularFactor[0], angularFactor[1], angularFactor[2]);
  return body;
};

const v = new Vector3();
const s = new Vector3(1, 1, 1);
const q = new Quaternion$1();
function Debug({
  color = 'black',
  scale = 1,
  children,
  impl = cannonDebugger
}) {
  const [debugInfo] = useState({
    bodies: [],
    refs: {}
  });
  const {
    refs
  } = useContext(context);
  const [scene] = useState(() => new Scene());
  const instance = useRef();
  let lastBodies = 0;
  useFrame(() => {
    if (!instance.current || lastBodies !== debugInfo.bodies.length) {
      lastBodies = debugInfo.bodies.length;
      scene.children = [];
      instance.current = impl(scene, debugInfo.bodies, {
        color,
        scale,
        autoUpdate: false
      });
    }

    for (const uuid in debugInfo.refs) {
      refs[uuid].matrix.decompose(v, q, s);
      debugInfo.refs[uuid].position.copy(v);
      debugInfo.refs[uuid].quaternion.copy(q);
    }

    instance.current.update();
  });
  const api = useMemo(() => ({
    add(id, props, type) {
      const body = propsToBody(id, props, type);
      debugInfo.bodies.push(body);
      debugInfo.refs[id] = body;
    },

    remove(id) {
      const debugBodyIndex = debugInfo.bodies.indexOf(debugInfo.refs[id]);
      if (debugBodyIndex > -1) debugInfo.bodies.splice(debugBodyIndex, 1);
      delete debugInfo.refs[id];
    }

  }), []);
  return /*#__PURE__*/React.createElement(debugContext.Provider, {
    value: api
  }, /*#__PURE__*/React.createElement("primitive", {
    object: scene
  }), children);
}

const temp = new Object3D();

function useForwardedRef(ref) {
  const nullRef = useRef(null);
  return ref && typeof ref !== 'function' ? ref : nullRef;
}

function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}

function getUUID(ref, index) {
  const suffix = index === undefined ? '' : `/${index}`;
  if (typeof ref === 'function') return null;
  return ref && ref.current && `${ref.current.uuid}${suffix}`;
}

function subscribe(ref, worker, subscriptions, type, index, target = 'bodies') {
  return callback => {
    const id = subscriptionGuid++;
    subscriptions[id] = callback;
    const uuid = getUUID(ref, index);
    uuid && worker.postMessage({
      op: 'subscribe',
      uuid,
      props: {
        id,
        type,
        target
      }
    });
    return () => {
      delete subscriptions[id];
      worker.postMessage({
        op: 'unsubscribe',
        props: id
      });
    };
  };
}

function prepare(object, props) {
  object.userData = props.userData || {};
  object.position.set(...(props.position || [0, 0, 0]));
  object.rotation.set(...(props.rotation || [0, 0, 0]));
  object.updateMatrix();
}

function setupCollision(events, {
  onCollide,
  onCollideBegin,
  onCollideEnd
}, id) {
  if (onCollide || onCollideBegin || onCollideEnd) {
    events[id] = ev => {
      switch (ev.type) {
        case 'collide':
          if (onCollide) onCollide(ev);
          break;

        case 'collideBegin':
          if (onCollideBegin) onCollideBegin(ev);
          break;

        case 'collideEnd':
          if (onCollideEnd) onCollideEnd(ev);
          break;
      }
    };
  }
}

let subscriptionGuid = 0;

function useBody(type, fn, argsFn, fwdRef, deps = []) {
  const ref = useForwardedRef(fwdRef);
  const {
    worker,
    refs,
    events,
    subscriptions
  } = useContext(context);
  const debugApi = useContext(debugContext);
  useLayoutEffect(() => {
    if (!ref.current) {
      // When the reference isn't used we create a stub
      // The body doesn't have a visual representation but can still be constrained
      ref.current = new Object3D();
    }

    const object = ref.current;
    const currentWorker = worker;
    const objectCount = object instanceof InstancedMesh ? (object.instanceMatrix.setUsage(DynamicDrawUsage), object.count) : 1;
    const uuid = object instanceof InstancedMesh ? new Array(objectCount).fill(0).map((_, i) => `${object.uuid}/${i}`) : [object.uuid];
    const props = object instanceof InstancedMesh ? uuid.map((id, i) => {
      const props = fn(i);
      prepare(temp, props);
      object.setMatrixAt(i, temp.matrix);
      object.instanceMatrix.needsUpdate = true;
      refs[id] = object;
      if (debugApi) debugApi.add(id, props, type);
      setupCollision(events, props, id);
      return { ...props,
        args: argsFn(props.args)
      };
    }) : uuid.map((id, i) => {
      const props = fn(i);
      prepare(object, props);
      refs[id] = object;
      if (debugApi) debugApi.add(id, props, type);
      setupCollision(events, props, id);
      return { ...props,
        args: argsFn(props.args)
      };
    }); // Register on mount, unregister on unmount

    currentWorker.postMessage({
      op: 'addBodies',
      type,
      uuid,
      props: props.map(({
        onCollide,
        onCollideBegin,
        onCollideEnd,
        ...serializableProps
      }) => {
        return {
          onCollide: Boolean(onCollide),
          ...serializableProps
        };
      })
    });
    return () => {
      uuid.forEach(id => {
        delete refs[id];
        if (debugApi) debugApi.remove(id);
        delete events[id];
      });
      currentWorker.postMessage({
        op: 'removeBodies',
        uuid
      });
    };
  }, deps);
  const api = useMemo(() => {
    const makeVec = (type, index) => {
      const op = `set${capitalize(type)}`;
      return {
        set: (x, y, z) => {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z],
            uuid
          });
        },
        copy: ({
          x,
          y,
          z
        }) => {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z],
            uuid
          });
        },
        subscribe: subscribe(ref, worker, subscriptions, type, index)
      };
    };

    const makeAtomic = (type, index) => {
      const op = `set${capitalize(type)}`;
      return {
        set: value => {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: value,
            uuid
          });
        },
        subscribe: subscribe(ref, worker, subscriptions, type, index)
      };
    };

    function makeApi(index) {
      return {
        // Vectors
        position: makeVec('position', index),
        rotation: makeVec('quaternion', index),
        velocity: makeVec('velocity', index),
        angularVelocity: makeVec('angularVelocity', index),
        linearFactor: makeVec('linearFactor', index),
        angularFactor: makeVec('angularFactor', index),
        // Atomic props
        allowSleep: makeAtomic('allowSleep', index),
        angularDamping: makeAtomic('angularDamping', index),
        collisionFilterGroup: makeAtomic('collisionFilterGroup', index),
        collisionFilterMask: makeAtomic('collisionFilterMask', index),
        collisionResponse: makeAtomic('collisionResponse', index),
        isTrigger: makeAtomic('isTrigger', index),
        fixedRotation: makeAtomic('fixedRotation', index),
        linearDamping: makeAtomic('linearDamping', index),
        mass: makeAtomic('mass', index),
        material: makeAtomic('material', index),
        sleepSpeedLimit: makeAtomic('sleepSpeedLimit', index),
        sleepTimeLimit: makeAtomic('sleepTimeLimit', index),
        userData: makeAtomic('userData', index),

        // Apply functions
        applyForce(force, worldPoint) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyForce',
            props: [force, worldPoint],
            uuid
          });
        },

        applyImpulse(impulse, worldPoint) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyImpulse',
            props: [impulse, worldPoint],
            uuid
          });
        },

        applyLocalForce(force, localPoint) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyLocalForce',
            props: [force, localPoint],
            uuid
          });
        },

        applyLocalImpulse(impulse, localPoint) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyLocalImpulse',
            props: [impulse, localPoint],
            uuid
          });
        },

        applyTorque(torque) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyTorque',
            props: [torque],
            uuid
          });
        },

        // force particular sleep state
        wakeUp() {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'wakeUp',
            uuid
          });
        },

        sleep() {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'sleep',
            uuid
          });
        }

      };
    }

    const cache = {};
    return { ...makeApi(undefined),
      at: index => cache[index] || (cache[index] = makeApi(index))
    };
  }, []);
  return [ref, api];
}

function makeTriplet(v) {
  return v instanceof Vector3 ? [v.x, v.y, v.z] : v;
}

function usePlane(fn, fwdRef = null, deps) {
  return useBody('Plane', fn, () => [], fwdRef, deps);
}
function useBox(fn, fwdRef = null, deps) {
  const defaultBoxArgs = [1, 1, 1];
  return useBody('Box', fn, (args = defaultBoxArgs) => args, fwdRef, deps);
}
function useCylinder(fn, fwdRef = null, deps) {
  return useBody('Cylinder', fn, (args = []) => args, fwdRef, deps);
}
function useHeightfield(fn, fwdRef = null, deps) {
  return useBody('Heightfield', fn, args => args, fwdRef, deps);
}
function useParticle(fn, fwdRef = null, deps) {
  return useBody('Particle', fn, () => [], fwdRef, deps);
}
function useSphere(fn, fwdRef = null, deps) {
  return useBody('Sphere', fn, (radius = 1) => [radius], fwdRef, deps);
}
function useTrimesh(fn, fwdRef = null, deps) {
  return useBody('Trimesh', fn, args => args, fwdRef, deps);
}
function useConvexPolyhedron(fn, fwdRef = null, deps) {
  return useBody('ConvexPolyhedron', fn, ([vertices, faces, normals, axes, boundingSphereRadius] = []) => [vertices && vertices.map(makeTriplet), faces, normals && normals.map(makeTriplet), axes && axes.map(makeTriplet), boundingSphereRadius], fwdRef, deps);
}
function useCompoundBody(fn, fwdRef = null, deps) {
  return useBody('Compound', fn, args => args, fwdRef, deps);
}

function useConstraint(type, bodyA, bodyB, optns = {}, deps = []) {
  const {
    worker
  } = useContext(context);
  const uuid = MathUtils.generateUUID();
  const refA = useForwardedRef(bodyA);
  const refB = useForwardedRef(bodyB);
  useEffect(() => {
    if (refA.current && refB.current) {
      worker.postMessage({
        op: 'addConstraint',
        props: [refA.current.uuid, refB.current.uuid, optns],
        type,
        uuid
      });
      return () => worker.postMessage({
        op: 'removeConstraint',
        uuid
      });
    }
  }, deps);
  const api = useMemo(() => {
    const enableDisable = {
      enable: () => worker.postMessage({
        op: 'enableConstraint',
        uuid
      }),
      disable: () => worker.postMessage({
        op: 'disableConstraint',
        uuid
      })
    };

    if (type === 'Hinge') {
      return { ...enableDisable,
        enableMotor: () => worker.postMessage({
          op: 'enableConstraintMotor',
          uuid
        }),
        disableMotor: () => worker.postMessage({
          op: 'disableConstraintMotor',
          uuid
        }),
        setMotorSpeed: value => worker.postMessage({
          op: 'setConstraintMotorSpeed',
          uuid,
          props: value
        }),
        setMotorMaxForce: value => worker.postMessage({
          op: 'setConstraintMotorMaxForce',
          uuid,
          props: value
        })
      };
    }

    return enableDisable;
  }, deps);
  return [refA, refB, api];
}

function usePointToPointConstraint(bodyA = null, bodyB = null, optns, deps = []) {
  return useConstraint('PointToPoint', bodyA, bodyB, optns, deps);
}
function useConeTwistConstraint(bodyA = null, bodyB = null, optns, deps = []) {
  return useConstraint('ConeTwist', bodyA, bodyB, optns, deps);
}
function useDistanceConstraint(bodyA = null, bodyB = null, optns, deps = []) {
  return useConstraint('Distance', bodyA, bodyB, optns, deps);
}
function useHingeConstraint(bodyA = null, bodyB = null, optns, deps = []) {
  return useConstraint('Hinge', bodyA, bodyB, optns, deps);
}
function useLockConstraint(bodyA = null, bodyB = null, optns, deps = []) {
  return useConstraint('Lock', bodyA, bodyB, optns, deps);
}
function useSpring(bodyA = null, bodyB = null, optns, deps = []) {
  const {
    worker
  } = useContext(context);
  const [uuid] = useState(() => MathUtils.generateUUID());
  const refA = useForwardedRef(bodyA);
  const refB = useForwardedRef(bodyB);
  useEffect(() => {
    if (refA.current && refB.current) {
      worker.postMessage({
        op: 'addSpring',
        uuid,
        props: [refA.current.uuid, refB.current.uuid, optns]
      });
      return () => {
        worker.postMessage({
          op: 'removeSpring',
          uuid
        });
      };
    }
  }, deps);
  const api = useMemo(() => ({
    setStiffness: value => worker.postMessage({
      op: 'setSpringStiffness',
      props: value,
      uuid
    }),
    setRestLength: value => worker.postMessage({
      op: 'setSpringRestLength',
      props: value,
      uuid
    }),
    setDamping: value => worker.postMessage({
      op: 'setSpringDamping',
      props: value,
      uuid
    })
  }), deps);
  return [refA, refB, api];
}

function useRay(mode, options, callback, deps = []) {
  const {
    worker,
    events
  } = useContext(context);
  const [uuid] = useState(() => MathUtils.generateUUID());
  useEffect(() => {
    events[uuid] = callback;
    worker.postMessage({
      op: 'addRay',
      uuid,
      props: {
        mode,
        ...options
      }
    });
    return () => {
      worker.postMessage({
        op: 'removeRay',
        uuid
      });
      delete events[uuid];
    };
  }, deps);
}

function useRaycastClosest(options, callback, deps = []) {
  useRay('Closest', options, callback, deps);
}
function useRaycastAny(options, callback, deps = []) {
  useRay('Any', options, callback, deps);
}
function useRaycastAll(options, callback, deps = []) {
  useRay('All', options, callback, deps);
}

function isString(v) {
  return typeof v === 'string';
}

function useRaycastVehicle(fn, fwdRef = null, deps = []) {
  const ref = useForwardedRef(fwdRef);
  const {
    worker,
    subscriptions
  } = useContext(context);
  useLayoutEffect(() => {
    if (!ref.current) {
      // When the reference isn't used we create a stub
      // The body doesn't have a visual representation but can still be constrained
      ref.current = new Object3D();
    }

    const currentWorker = worker;
    const uuid = [ref.current.uuid];
    const raycastVehicleProps = fn();
    const chassisBodyUUID = getUUID(raycastVehicleProps.chassisBody);
    const wheelUUIDs = raycastVehicleProps.wheels.map(ref => getUUID(ref));
    if (!chassisBodyUUID || !wheelUUIDs.every(isString)) return;
    currentWorker.postMessage({
      op: 'addRaycastVehicle',
      uuid,
      props: [chassisBodyUUID, wheelUUIDs, raycastVehicleProps.wheelInfos, (raycastVehicleProps == null ? void 0 : raycastVehicleProps.indexForwardAxis) || 2, (raycastVehicleProps == null ? void 0 : raycastVehicleProps.indexRightAxis) || 0, (raycastVehicleProps == null ? void 0 : raycastVehicleProps.indexUpAxis) || 1]
    });
    return () => {
      currentWorker.postMessage({
        op: 'removeRaycastVehicle',
        uuid
      });
    };
  }, deps);
  const api = useMemo(() => {
    return {
      sliding: {
        subscribe: subscribe(ref, worker, subscriptions, 'sliding', undefined, 'vehicles')
      },

      setSteeringValue(value, wheelIndex) {
        const uuid = getUUID(ref);
        uuid && worker.postMessage({
          op: 'setRaycastVehicleSteeringValue',
          props: [value, wheelIndex],
          uuid
        });
      },

      applyEngineForce(value, wheelIndex) {
        const uuid = getUUID(ref);
        uuid && worker.postMessage({
          op: 'applyRaycastVehicleEngineForce',
          props: [value, wheelIndex],
          uuid
        });
      },

      setBrake(brake, wheelIndex) {
        const uuid = getUUID(ref);
        uuid && worker.postMessage({
          op: 'setRaycastVehicleBrake',
          props: [brake, wheelIndex],
          uuid
        });
      }

    };
  }, deps);
  return [ref, api];
}

function Physics(props) {
  return /*#__PURE__*/React.createElement(Suspense, {
    fallback: null
  }, /*#__PURE__*/React.createElement(Provider, props));
}

export { Debug, Physics, context, useBox, useCompoundBody, useConeTwistConstraint, useConvexPolyhedron, useCylinder, useDistanceConstraint, useHeightfield, useHingeConstraint, useLockConstraint, useParticle, usePlane, usePointToPointConstraint, useRaycastAll, useRaycastAny, useRaycastClosest, useRaycastVehicle, useSphere, useSpring, useTrimesh };
