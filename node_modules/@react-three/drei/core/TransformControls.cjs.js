"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),n=require("@react-three/fiber"),t=require("lodash.omit"),r=require("lodash.pick"),l=require("react"),u=require("three-stdlib");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var s=o(e),i=o(t),d=o(r),c=a(l);const v=c.forwardRef((({children:e,onChange:t,onMouseDown:r,onMouseUp:l,onObjectChange:o,...a},v)=>{const f=["enabled","axis","mode","translationSnap","rotationSnap","scaleSnap","space","size","showX","showY","showZ"],{camera:m,...E}=a,h=d.default(E,f),p=i.default(E,f),b=n.useThree((({gl:e})=>e)),L=n.useThree((({camera:e})=>e)),g=n.useThree((({invalidate:e})=>e)),j=m||L,[w]=c.useState((()=>new u.TransformControls(j,b.domElement))),O=c.useRef();return c.useLayoutEffect((()=>{null==w||w.attach(O.current)}),[e,w]),c.useEffect((()=>{const e=e=>{g(),t&&t(e)};return null==w||null==w.addEventListener||w.addEventListener("change",e),r&&(null==w||null==w.addEventListener||w.addEventListener("mouseDown",r)),l&&(null==w||null==w.addEventListener||w.addEventListener("mouseUp",l)),o&&(null==w||null==w.addEventListener||w.addEventListener("objectChange",o)),()=>{null==w||null==w.removeEventListener||w.removeEventListener("change",e),r&&(null==w||null==w.removeEventListener||w.removeEventListener("mouseDown",r)),l&&(null==w||null==w.removeEventListener||w.removeEventListener("mouseUp",l)),o&&(null==w||null==w.removeEventListener||w.removeEventListener("objectChange",o))}}),[t,r,l,o,w,g]),w?c.createElement(c.Fragment,null,c.createElement("primitive",s.default({ref:v,dispose:void 0,object:w},h)),c.createElement("group",s.default({ref:O},p),e)):null}));exports.TransformControls=v;
